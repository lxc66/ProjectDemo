///platform/component/jqueryui/jquery-ui.js
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(e,n){var o,s,r,a=e.nodeName.toLowerCase();return"area"===a?(o=e.parentNode,s=o.name,e.href&&s&&"map"===o.nodeName.toLowerCase()?(r=t("img[usemap=#"+s+"]")[0],!!r&&i(r)):!1):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(){var e=this.css("position"),i="absolute"===e,n=this.parents().filter(function(){var e=t(this);return i&&"static"===e.css("position")?!1:/(auto|scroll)/.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==e&&n.length?n:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(i){return e(i,!isNaN(t.attr(i,"tabindex")))},tabbable:function(i){var n=t.attr(i,"tabindex"),o=isNaN(n);return(o||n>=0)&&e(i,!o)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){function n(e,i,n,s){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),s&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?r["inner"+i].call(this):this.each(function(){t(this).css(s,n(this,e)+"px")})},t.fn["outer"+i]=function(e,o){return"number"!=typeof e?r["outer"+i].call(this,e):this.each(function(){t(this).css(s,n(this,e,!0,o)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(i,n){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var i,n,o=t(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(n=parseInt(o.css("zIndex"),10),!isNaN(n)&&0!==n))return n;o=o.parent()}return 0}}),t.ui.plugin={add:function(e,i,n){var o=t.ui[e].prototype;for(var s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(t,e,i,n){var o,s=t.plugins[e];if(s&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<s.length;o++)t.options[s[o][0]]&&s[o][1].apply(t.element,i)}};var n=0,o=Array.prototype.slice;t.cleanData=function(e){return function(i){for(var n,o=0;null!=(n=i[o]);o++)try{t(n).triggerHandler("remove")}catch(s){}e(i)}}(t.cleanData),t.widget=function(e,i,n){var o,s,r,a,u={},l=e.split(".")[0];return e=e.split(".")[1],o=l+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[l]=t[l]||{},s=t[l][e],r=t[l][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new r(t,e)},t.extend(r,s,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(n,function(e,n){return t.isFunction(n)?void(u[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},o=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,s=this._superApply;return this._super=t,this._superApply=o,e=n.apply(this,arguments),this._super=i,this._superApply=s,e}}()):void(u[e]=n)}),r.prototype=t.widget.extend(a,{widgetEventPrefix:s?a.widgetEventPrefix||e:e},u,{constructor:r,namespace:l,widgetName:e,widgetFullName:o}),s?(t.each(s._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete s._childConstructors):i._childConstructors.push(r),t.widget.bridge(e,r),r},t.widget.extend=function(e){for(var i,n,s=o.call(arguments,1),r=0,a=s.length;a>r;r++)for(i in s[r])n=s[r][i],s[r].hasOwnProperty(i)&&void 0!==n&&(e[i]=t.isPlainObject(n)?t.isPlainObject(e[i])?t.widget.extend({},e[i],n):t.widget.extend({},n):n);return e},t.widget.bridge=function(e,i){var n=i.prototype.widgetFullName||e;t.fn[e]=function(s){var r="string"==typeof s,a=o.call(arguments,1),u=this;return s=!r&&a.length?t.widget.extend.apply(null,[s].concat(a)):s,this.each(r?function(){var i,o=t.data(this,n);return"instance"===s?(u=o,!1):o?t.isFunction(o[s])&&"_"!==s.charAt(0)?(i=o[s].apply(o,a),i!==o&&void 0!==i?(u=i&&i.jquery?u.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+s+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+s+"'")}:function(){var e=t.data(this,n);e?(e.option(s||{}),e._init&&e._init()):t.data(this,n,new i(s,this))}),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,o,s,r=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(r={},n=e.split("."),e=n.shift(),n.length){for(o=r[e]=t.widget.extend({},this.options[e]),s=0;s<n.length-1;s++)o[n[s]]=o[n[s]]||{},o=o[n[s]];if(e=n.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];r[e]=i}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,n){var o,s=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=o=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),t.each(n,function(n,r){function a(){return e||s.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?s[r]:r).apply(s,arguments):void 0}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||t.guid++);var u=n.match(/^([\w:-]*)\s*(.*)$/),l=u[1]+s.eventNamespace,h=u[2];h?o.delegate(h,l,a):i.bind(l,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var o,s,r=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(o in s)o in i||(i[o]=s[o]);return this.element.trigger(i,n),!(t.isFunction(r)&&r.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,o,s){"string"==typeof o&&(o={effect:o});var r,a=o?o===!0||"number"==typeof o?i:o.effect||i:e;o=o||{},"number"==typeof o&&(o={duration:o}),r=!t.isEmptyObject(o),o.complete=s,o.delay&&n.delay(o.delay),r&&t.effects&&t.effects.effect[a]?n[e](o):a!==e&&n[a]?n[a](o.duration,o.easing,s):n.queue(function(i){t(this)[e](),s&&s.call(n[0]),i()})}});var s=(t.widget,!1);t(document).mouseup(function(){s=!1});t.widget("ui.mouse",{version:"1.11.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!s){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,o="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return n&&!o&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),s=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):e.which?this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),s=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});!function(){function e(t,e,i){return[parseFloat(t[0])*(f.test(t[0])?e/100:1),parseFloat(t[1])*(f.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var o,s,r=Math.max,a=Math.abs,u=Math.round,l=/left|center|right/,h=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,f=/%$/,p=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==o)return o;var e,i,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=n.children()[0];return t("body").append(n),e=s.offsetWidth,n.css("overflow","scroll"),i=s.offsetWidth,e===i&&(i=n[0].clientWidth),n.remove(),o=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),o="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,s="scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight;return{width:s?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:o,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},t.fn.position=function(o){if(!o||!o.of)return p.apply(this,arguments);o=t.extend({},o);var f,m,g,v,w,b,_=t(o.of),y=t.position.getWithinInfo(o.within),D=t.position.getScrollInfo(y),x=(o.collision||"flip").split(" "),W={};return b=n(_),_[0].preventDefault&&(o.at="left top"),m=b.width,g=b.height,v=b.offset,w=t.extend({},v),t.each(["my","at"],function(){var t,e,i=(o[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):h.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=h.test(i[1])?i[1]:"center",t=c.exec(i[0]),e=c.exec(i[1]),W[this]=[t?t[0]:0,e?e[0]:0],o[this]=[d.exec(i[0])[0],d.exec(i[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===o.at[0]?w.left+=m:"center"===o.at[0]&&(w.left+=m/2),"bottom"===o.at[1]?w.top+=g:"center"===o.at[1]&&(w.top+=g/2),f=e(W.at,m,g),w.left+=f[0],w.top+=f[1],this.each(function(){var n,l,h=t(this),c=h.outerWidth(),d=h.outerHeight(),p=i(this,"marginLeft"),b=i(this,"marginTop"),N=c+p+i(this,"marginRight")+D.width,C=d+b+i(this,"marginBottom")+D.height,E=t.extend({},w),T=e(W.my,h.outerWidth(),h.outerHeight());"right"===o.my[0]?E.left-=c:"center"===o.my[0]&&(E.left-=c/2),"bottom"===o.my[1]?E.top-=d:"center"===o.my[1]&&(E.top-=d/2),E.left+=T[0],E.top+=T[1],s||(E.left=u(E.left),E.top=u(E.top)),n={marginLeft:p,marginTop:b},t.each(["left","top"],function(e,i){t.ui.position[x[e]]&&t.ui.position[x[e]][i](E,{targetWidth:m,targetHeight:g,elemWidth:c,elemHeight:d,collisionPosition:n,collisionWidth:N,collisionHeight:C,offset:[f[0]+T[0],f[1]+T[1]],my:o.my,at:o.at,within:y,elem:h})}),o.using&&(l=function(t){var e=v.left-E.left,i=e+m-c,n=v.top-E.top,s=n+g-d,u={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:h,left:E.left,top:E.top,width:c,height:d},horizontal:0>i?"left":e>0?"right":"center",vertical:0>s?"top":n>0?"bottom":"middle"};c>m&&a(e+i)<m&&(u.horizontal="center"),d>g&&a(n+s)<g&&(u.vertical="middle"),u.important=r(a(e),a(i))>r(a(n),a(s))?"horizontal":"vertical",o.using.call(this,t,u)}),h.offset(t.extend(E,{using:l}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,a=t.left-e.collisionPosition.marginLeft,u=o-a,l=a+e.collisionWidth-s-o;e.collisionWidth>s?u>0&&0>=l?(i=t.left+u+e.collisionWidth-s-o,t.left+=u-i):t.left=l>0&&0>=u?o:u>l?o+s-e.collisionWidth:o:u>0?t.left+=u:l>0?t.left-=l:t.left=r(t.left-a,t.left)},top:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollTop:n.offset.top,s=e.within.height,a=t.top-e.collisionPosition.marginTop,u=o-a,l=a+e.collisionHeight-s-o;e.collisionHeight>s?u>0&&0>=l?(i=t.top+u+e.collisionHeight-s-o,t.top+=u-i):t.top=l>0&&0>=u?o:u>l?o+s-e.collisionHeight:o:u>0?t.top+=u:l>0?t.top-=l:t.top=r(t.top-a,t.top)}},flip:{left:function(t,e){var i,n,o=e.within,s=o.offset.left+o.scrollLeft,r=o.width,u=o.isWindow?o.scrollLeft:o.offset.left,l=t.left-e.collisionPosition.marginLeft,h=l-u,c=l+e.collisionWidth-r-u,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,f="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];0>h?(i=t.left+d+f+p+e.collisionWidth-r-s,(0>i||i<a(h))&&(t.left+=d+f+p)):c>0&&(n=t.left-e.collisionPosition.marginLeft+d+f+p-u,(n>0||a(n)<c)&&(t.left+=d+f+p))},top:function(t,e){var i,n,o=e.within,s=o.offset.top+o.scrollTop,r=o.height,u=o.isWindow?o.scrollTop:o.offset.top,l=t.top-e.collisionPosition.marginTop,h=l-u,c=l+e.collisionHeight-r-u,d="top"===e.my[1],f=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>h?(n=t.top+f+p+m+e.collisionHeight-r-s,t.top+f+p+m>h&&(0>n||n<a(h))&&(t.top+=f+p+m)):c>0&&(i=t.top-e.collisionPosition.marginTop+f+p+m-u,t.top+f+p+m>c&&(i>0||a(i)<c)&&(t.top+=f+p+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,o,r=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(r?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(var u in n)e.style[u]=n[u];e.appendChild(a),i=r||document.documentElement,i.insertBefore(e,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",o=t(a).offset().left,s=o>10&&11>o,e.innerHTML="",i.removeChild(e)}()}()});
;///platform/component/ztree/jquery.ztree.all-3.5.js
!function($){var settings={},roots={},caches={},_consts={className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_setting={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},_initRoot=function(e){var t=data.getRoot(e);t||(t={},data.setRoot(e,t)),t[e.data.key.children]=[],t.expandTriggerFlag=!1,t.curSelectedList=[],t.noSelection=!0,t.createdNodes=[],t.zId=0,t._ver=(new Date).getTime()},_initCache=function(e){var t=data.getCache(e);t||(t={},data.setCache(e,t)),t.nodes=[],t.doms=[]},_bindEvent=function(e){var t=e.treeObj,n=consts.event;t.bind(n.NODECREATED,function(t,n,o){tools.apply(e.callback.onNodeCreated,[t,n,o])}),t.bind(n.CLICK,function(t,n,o,a,r){tools.apply(e.callback.onClick,[n,o,a,r])}),t.bind(n.EXPAND,function(t,n,o){tools.apply(e.callback.onExpand,[t,n,o])}),t.bind(n.COLLAPSE,function(t,n,o){tools.apply(e.callback.onCollapse,[t,n,o])}),t.bind(n.ASYNC_SUCCESS,function(t,n,o,a){tools.apply(e.callback.onAsyncSuccess,[t,n,o,a])}),t.bind(n.ASYNC_ERROR,function(t,n,o,a,r,i){tools.apply(e.callback.onAsyncError,[t,n,o,a,r,i])}),t.bind(n.REMOVE,function(t,n,o){tools.apply(e.callback.onRemove,[t,n,o])})},_unbindEvent=function(e){var t=e.treeObj,n=consts.event;t.unbind(n.NODECREATED).unbind(n.CLICK).unbind(n.EXPAND).unbind(n.COLLAPSE).unbind(n.ASYNC_SUCCESS).unbind(n.ASYNC_ERROR).unbind(n.REMOVE)},_eventProxy=function(e){var t=e.target,n=data.getSetting(e.data.treeId),o="",a=null,r="",i="",d=null,s=null,l=null;if(tools.eqs(e.type,"mousedown")?i="mousedown":tools.eqs(e.type,"mouseup")?i="mouseup":tools.eqs(e.type,"contextmenu")?i="contextmenu":tools.eqs(e.type,"click")?tools.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+consts.id.SWITCH)?(o=tools.getNodeMainDom(t).id,r="switchNode"):(l=tools.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),l&&(o=tools.getNodeMainDom(l).id,r="clickNode")):tools.eqs(e.type,"dblclick")&&(i="dblclick",l=tools.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),l&&(o=tools.getNodeMainDom(l).id,r="switchNode")),i.length>0&&0==o.length&&(l=tools.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),l&&(o=tools.getNodeMainDom(l).id)),o.length>0)switch(a=data.getNodeCache(n,o),r){case"switchNode":a.isParent?tools.eqs(e.type,"click")||tools.eqs(e.type,"dblclick")&&tools.apply(n.view.dblClickExpand,[n.treeId,a],n.view.dblClickExpand)?d=handler.onSwitchNode:r="":r="";break;case"clickNode":d=handler.onClickNode}switch(i){case"mousedown":s=handler.onZTreeMousedown;break;case"mouseup":s=handler.onZTreeMouseup;break;case"dblclick":s=handler.onZTreeDblclick;break;case"contextmenu":s=handler.onZTreeContextmenu}var c={stop:!1,node:a,nodeEventType:r,nodeEventCallback:d,treeEventType:i,treeEventCallback:s};return c},_initNode=function(e,t,n,o,a,r){if(n){var i=data.getRoot(e),d=e.data.key.children;n.level=t,n.tId=e.treeId+"_"+ ++i.zId,n.parentTId=o?o.tId:null,n.open="string"==typeof n.open?tools.eqs(n.open,"true"):!!n.open,n[d]&&n[d].length>0?(n.isParent=!0,n.zAsync=!0):(n.isParent="string"==typeof n.isParent?tools.eqs(n.isParent,"true"):!!n.isParent,n.open=n.isParent&&!e.async.enable?n.open:!1,n.zAsync=!n.isParent),n.isFirstNode=a,n.isLastNode=r,n.getParentNode=function(){return data.getNodeCache(e,n.parentTId)},n.getPreNode=function(){return data.getPreNode(e,n)},n.getNextNode=function(){return data.getNextNode(e,n)},n.isAjaxing=!1,data.fixPIdKeyValue(e,n)}},_init={bind:[_bindEvent],unbind:[_unbindEvent],caches:[_initCache],nodes:[_initNode],proxys:[_eventProxy],roots:[_initRoot],beforeA:[],afterA:[],innerBeforeA:[],innerAfterA:[],zTreeTools:[]},data={addNodeCache:function(e,t){data.getCache(e).nodes[data.getNodeCacheId(t.tId)]=t},getNodeCacheId:function(e){return e.substring(e.lastIndexOf("_")+1)},addAfterA:function(e){_init.afterA.push(e)},addBeforeA:function(e){_init.beforeA.push(e)},addInnerAfterA:function(e){_init.innerAfterA.push(e)},addInnerBeforeA:function(e){_init.innerBeforeA.push(e)},addInitBind:function(e){_init.bind.push(e)},addInitUnBind:function(e){_init.unbind.push(e)},addInitCache:function(e){_init.caches.push(e)},addInitNode:function(e){_init.nodes.push(e)},addInitProxy:function(e,t){t?_init.proxys.splice(0,0,e):_init.proxys.push(e)},addInitRoot:function(e){_init.roots.push(e)},addNodesData:function(e,t,n){var o=e.data.key.children;t[o]||(t[o]=[]),t[o].length>0&&(t[o][t[o].length-1].isLastNode=!1,view.setNodeLineIcos(e,t[o][t[o].length-1])),t.isParent=!0,t[o]=t[o].concat(n)},addSelectedNode:function(e,t){var n=data.getRoot(e);data.isSelectedNode(e,t)||n.curSelectedList.push(t)},addCreatedNode:function(e,t){if(e.callback.onNodeCreated||e.view.addDiyDom){var n=data.getRoot(e);n.createdNodes.push(t)}},addZTreeTools:function(e){_init.zTreeTools.push(e)},exSetting:function(e){$.extend(!0,_setting,e)},fixPIdKeyValue:function(e,t){e.data.simpleData.enable&&(t[e.data.simpleData.pIdKey]=t.parentTId?t.getParentNode()[e.data.simpleData.idKey]:e.data.simpleData.rootPId)},getAfterA:function(){for(var e=0,t=_init.afterA.length;t>e;e++)_init.afterA[e].apply(this,arguments)},getBeforeA:function(){for(var e=0,t=_init.beforeA.length;t>e;e++)_init.beforeA[e].apply(this,arguments)},getInnerAfterA:function(){for(var e=0,t=_init.innerAfterA.length;t>e;e++)_init.innerAfterA[e].apply(this,arguments)},getInnerBeforeA:function(){for(var e=0,t=_init.innerBeforeA.length;t>e;e++)_init.innerBeforeA[e].apply(this,arguments)},getCache:function(e){return caches[e.treeId]},getNextNode:function(e,t){if(!t)return null;for(var n=e.data.key.children,o=t.parentTId?t.getParentNode():data.getRoot(e),a=0,r=o[n].length-1;r>=a;a++)if(o[n][a]===t)return a==r?null:o[n][a+1];return null},getNodeByParam:function(e,t,n,o){if(!t||!n)return null;for(var a=e.data.key.children,r=0,i=t.length;i>r;r++){if(t[r][n]==o)return t[r];var d=data.getNodeByParam(e,t[r][a],n,o);if(d)return d}return null},getNodeCache:function(e,t){if(!t)return null;var n=caches[e.treeId].nodes[data.getNodeCacheId(t)];return n?n:null},getNodeName:function(e,t){var n=e.data.key.name;return""+t[n]},getNodeTitle:function(e,t){var n=""===e.data.key.title?e.data.key.name:e.data.key.title;return""+t[n]},getNodes:function(e){return data.getRoot(e)[e.data.key.children]},getNodesByParam:function(e,t,n,o){if(!t||!n)return[];for(var a=e.data.key.children,r=[],i=0,d=t.length;d>i;i++)t[i][n]==o&&r.push(t[i]),r=r.concat(data.getNodesByParam(e,t[i][a],n,o));return r},getNodesByParamFuzzy:function(e,t,n,o){if(!t||!n)return[];var a=e.data.key.children,r=[];o=o.toLowerCase();for(var i=0,d=t.length;d>i;i++)"string"==typeof t[i][n]&&t[i][n].toLowerCase().indexOf(o)>-1&&r.push(t[i]),r=r.concat(data.getNodesByParamFuzzy(e,t[i][a],n,o));return r},getNodesByFilter:function(e,t,n,o,a){if(!t)return o?null:[];for(var r=e.data.key.children,i=o?null:[],d=0,s=t.length;s>d;d++){if(tools.apply(n,[t[d],a],!1)){if(o)return t[d];i.push(t[d])}var l=data.getNodesByFilter(e,t[d][r],n,o,a);if(o&&l)return l;i=o?l:i.concat(l)}return i},getPreNode:function(e,t){if(!t)return null;for(var n=e.data.key.children,o=t.parentTId?t.getParentNode():data.getRoot(e),a=0,r=o[n].length;r>a;a++)if(o[n][a]===t)return 0==a?null:o[n][a-1];return null},getRoot:function(e){return e?roots[e.treeId]:null},getRoots:function(){return roots},getSetting:function(e){return settings[e]},getSettings:function(){return settings},getZTreeTools:function(e){var t=this.getRoot(this.getSetting(e));return t?t.treeTools:null},initCache:function(){for(var e=0,t=_init.caches.length;t>e;e++)_init.caches[e].apply(this,arguments)},initNode:function(){for(var e=0,t=_init.nodes.length;t>e;e++)_init.nodes[e].apply(this,arguments)},initRoot:function(){for(var e=0,t=_init.roots.length;t>e;e++)_init.roots[e].apply(this,arguments)},isSelectedNode:function(e,t){for(var n=data.getRoot(e),o=0,a=n.curSelectedList.length;a>o;o++)if(t===n.curSelectedList[o])return!0;return!1},removeNodeCache:function(e,t){var n=e.data.key.children;if(t[n])for(var o=0,a=t[n].length;a>o;o++)arguments.callee(e,t[n][o]);data.getCache(e).nodes[data.getNodeCacheId(t.tId)]=null},removeSelectedNode:function(e,t){for(var n=data.getRoot(e),o=0,a=n.curSelectedList.length;a>o;o++)t!==n.curSelectedList[o]&&data.getNodeCache(e,n.curSelectedList[o].tId)||(n.curSelectedList.splice(o,1),o--,a--)},setCache:function(e,t){caches[e.treeId]=t},setRoot:function(e,t){roots[e.treeId]=t},setZTreeTools:function(){for(var e=0,t=_init.zTreeTools.length;t>e;e++)_init.zTreeTools[e].apply(this,arguments)},transformToArrayFormat:function(e,t){if(!t)return[];var n=e.data.key.children,o=[];if(tools.isArray(t))for(var a=0,r=t.length;r>a;a++)o.push(t[a]),t[a][n]&&(o=o.concat(data.transformToArrayFormat(e,t[a][n])));else o.push(t),t[n]&&(o=o.concat(data.transformToArrayFormat(e,t[n])));return o},transformTozTreeFormat:function(e,t){var n,o,a=e.data.simpleData.idKey,r=e.data.simpleData.pIdKey,i=e.data.key.children;if(!a||""==a||!t)return[];if(tools.isArray(t)){var d=[],s=[];for(n=0,o=t.length;o>n;n++)s[t[n][a]]=t[n];for(n=0,o=t.length;o>n;n++)s[t[n][r]]&&t[n][a]!=t[n][r]?(s[t[n][r]][i]||(s[t[n][r]][i]=[]),s[t[n][r]][i].push(t[n])):d.push(t[n]);return d}return[t]}},event={bindEvent:function(){for(var e=0,t=_init.bind.length;t>e;e++)_init.bind[e].apply(this,arguments)},unbindEvent:function(){for(var e=0,t=_init.unbind.length;t>e;e++)_init.unbind[e].apply(this,arguments)},bindTree:function(e){var t={treeId:e.treeId},n=e.treeObj;e.view.txtSelectedEnable||n.bind("selectstart",function(e){var t=e.originalEvent.srcElement.nodeName.toLowerCase();return"input"===t||"textarea"===t}).css({"-moz-user-select":"-moz-none"}),n.bind("click",t,event.proxy),n.bind("dblclick",t,event.proxy),n.bind("mouseover",t,event.proxy),n.bind("mouseout",t,event.proxy),n.bind("mousedown",t,event.proxy),n.bind("mouseup",t,event.proxy),n.bind("contextmenu",t,event.proxy)},unbindTree:function(e){var t=e.treeObj;t.unbind("click",event.proxy).unbind("dblclick",event.proxy).unbind("mouseover",event.proxy).unbind("mouseout",event.proxy).unbind("mousedown",event.proxy).unbind("mouseup",event.proxy).unbind("contextmenu",event.proxy)},doProxy:function(){for(var e=[],t=0,n=_init.proxys.length;n>t;t++){var o=_init.proxys[t].apply(this,arguments);if(e.push(o),o.stop)break}return e},proxy:function(e){var t=data.getSetting(e.data.treeId);if(!tools.uCanDo(t,e))return!0;for(var n=event.doProxy(e),o=!0,a=!1,r=0,i=n.length;i>r;r++){var d=n[r];d.nodeEventCallback&&(a=!0,o=d.nodeEventCallback.apply(d,[e,d.node])&&o),d.treeEventCallback&&(a=!0,o=d.treeEventCallback.apply(d,[e,d.node])&&o)}return o}},handler={onSwitchNode:function(e,t){var n=data.getSetting(e.data.treeId);if(t.open){if(0==tools.apply(n.callback.beforeCollapse,[n.treeId,t],!0))return!0;data.getRoot(n).expandTriggerFlag=!0,view.switchNode(n,t)}else{if(0==tools.apply(n.callback.beforeExpand,[n.treeId,t],!0))return!0;data.getRoot(n).expandTriggerFlag=!0,view.switchNode(n,t)}return!0},onClickNode:function(e,t){var n=data.getSetting(e.data.treeId),o=n.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&data.isSelectedNode(n,t)?0:n.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&n.view.selectedMulti?2:1;return 0==tools.apply(n.callback.beforeClick,[n.treeId,t,o],!0)?!0:(0===o?view.cancelPreSelectedNode(n,t):view.selectNode(n,t,2===o),n.treeObj.trigger(consts.event.CLICK,[e,n.treeId,t,o]),!0)},onZTreeMousedown:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeMouseDown,[n.treeId,t],!0)&&tools.apply(n.callback.onMouseDown,[e,n.treeId,t]),!0},onZTreeMouseup:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeMouseUp,[n.treeId,t],!0)&&tools.apply(n.callback.onMouseUp,[e,n.treeId,t]),!0},onZTreeDblclick:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeDblClick,[n.treeId,t],!0)&&tools.apply(n.callback.onDblClick,[e,n.treeId,t]),!0},onZTreeContextmenu:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeRightClick,[n.treeId,t],!0)&&tools.apply(n.callback.onRightClick,[e,n.treeId,t]),"function"!=typeof n.callback.onRightClick}},tools={apply:function(e,t,n){return"function"==typeof e?e.apply(zt,t?t:[]):n},canAsync:function(e,t){var n=e.data.key.children;return e.async.enable&&t&&t.isParent&&!(t.zAsync||t[n]&&t[n].length>0)},clone:function(e){if(null===e)return null;var t=tools.isArray(e)?[]:{};for(var n in e)t[n]=e[n]instanceof Date?new Date(e[n].getTime()):"object"==typeof e[n]?arguments.callee(e[n]):e[n];return t},eqs:function(e,t){return e.toLowerCase()===t.toLowerCase()},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},$:function(e,t,n){return t&&"string"!=typeof t&&(n=t,t=""),"string"==typeof e?$(e,n?n.treeObj.get(0).ownerDocument:null):$("#"+e.tId+t,n?n.treeObj:null)},getMDom:function(e,t,n){if(!t)return null;for(;t&&t.id!==e.treeId;){for(var o=0,a=n.length;t.tagName&&a>o;o++)if(tools.eqs(t.tagName,n[o].tagName)&&null!==t.getAttribute(n[o].attrName))return t;t=t.parentNode}return null},getNodeMainDom:function(e){return $(e).parent("li").get(0)||$(e).parentsUntil("li").parent().get(0)},isChildOrSelf:function(e,t){return $(e).closest("#"+t).length>0},uCanDo:function(){return!0}},view={addNodes:function(e,t,n,o){if(!e.data.keep.leaf||!t||t.isParent)if(tools.isArray(n)||(n=[n]),e.data.simpleData.enable&&(n=data.transformTozTreeFormat(e,n)),t){var a=$$(t,consts.id.SWITCH,e),r=$$(t,consts.id.ICON,e),i=$$(t,consts.id.UL,e);t.open||(view.replaceSwitchClass(t,a,consts.folder.CLOSE),view.replaceIcoClass(t,r,consts.folder.CLOSE),t.open=!1,i.css({display:"none"})),data.addNodesData(e,t,n),view.createNodes(e,t.level+1,n,t),o||view.expandCollapseParentNode(e,t,!0)}else data.addNodesData(e,data.getRoot(e),n),view.createNodes(e,0,n,null)},appendNodes:function(e,t,n,o,a,r){if(!n)return[];for(var i=[],d=e.data.key.children,s=0,l=n.length;l>s;s++){var c=n[s];if(a){var u=o?o:data.getRoot(e),h=u[d],g=h.length==n.length&&0==s,p=s==n.length-1;data.initNode(e,t,c,o,g,p,r),data.addNodeCache(e,c)}var f=[];c[d]&&c[d].length>0&&(f=view.appendNodes(e,t+1,c[d],c,a,r&&c.open)),r&&(view.makeDOMNodeMainBefore(i,e,c),view.makeDOMNodeLine(i,e,c),data.getBeforeA(e,c,i),view.makeDOMNodeNameBefore(i,e,c),data.getInnerBeforeA(e,c,i),view.makeDOMNodeIcon(i,e,c),data.getInnerAfterA(e,c,i),view.makeDOMNodeNameAfter(i,e,c),data.getAfterA(e,c,i),c.isParent&&c.open&&view.makeUlHtml(e,c,i,f.join("")),view.makeDOMNodeMainAfter(i,e,c),data.addCreatedNode(e,c))}return i},appendParentULDom:function(e,t){var n=[],o=$$(t,e);!o.get(0)&&t.parentTId&&(view.appendParentULDom(e,t.getParentNode()),o=$$(t,e));var a=$$(t,consts.id.UL,e);a.get(0)&&a.remove();var r=e.data.key.children,i=view.appendNodes(e,t.level+1,t[r],t,!1,!0);view.makeUlHtml(e,t,n,i.join("")),o.append(n.join(""))},asyncNode:function(setting,node,isSilent,callback){var i,l;if(node&&!node.isParent)return tools.apply(callback),!1;if(node&&node.isAjaxing)return!1;if(0==tools.apply(setting.callback.beforeAsync,[setting.treeId,node],!0))return tools.apply(callback),!1;if(node){node.isAjaxing=!0;var icoObj=$$(node,consts.id.ICON,setting);icoObj.attr({style:"","class":consts.className.BUTTON+" "+consts.className.ICO_LOADING})}var tmpParam={};for(i=0,l=setting.async.autoParam.length;node&&l>i;i++){var pKey=setting.async.autoParam[i].split("="),spKey=pKey;pKey.length>1&&(spKey=pKey[1],pKey=pKey[0]),tmpParam[spKey]=node[pKey]}if(tools.isArray(setting.async.otherParam))for(i=0,l=setting.async.otherParam.length;l>i;i+=2)tmpParam[setting.async.otherParam[i]]=setting.async.otherParam[i+1];else for(var p in setting.async.otherParam)tmpParam[p]=setting.async.otherParam[p];var _tmpV=data.getRoot(setting)._ver;return $.ajax({contentType:setting.async.contentType,type:setting.async.type,url:tools.apply(setting.async.url,[setting.treeId,node],setting.async.url),data:tmpParam,dataType:setting.async.dataType,success:function(msg){if(_tmpV==data.getRoot(setting)._ver){var newNodes=[];try{newNodes=msg&&0!=msg.length?"string"==typeof msg?eval("("+msg+")"):msg:[]}catch(err){newNodes=msg}node&&(node.isAjaxing=null,node.zAsync=!0),view.setNodeLineIcos(setting,node),newNodes&&""!==newNodes?(newNodes=tools.apply(setting.async.dataFilter,[setting.treeId,node,newNodes],newNodes),view.addNodes(setting,node,newNodes?tools.clone(newNodes):[],!!isSilent)):view.addNodes(setting,node,[],!!isSilent),setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,node,msg]),tools.apply(callback)}},error:function(e,t,n){_tmpV==data.getRoot(setting)._ver&&(node&&(node.isAjaxing=null),view.setNodeLineIcos(setting,node),setting.treeObj.trigger(consts.event.ASYNC_ERROR,[setting.treeId,node,e,t,n]))}}),!0},cancelPreSelectedNode:function(e,t){for(var n=data.getRoot(e).curSelectedList,o=0,a=n.length-1;a>=o;a--)if((!t||t===n[a])&&($$(n[a],consts.id.A,e).removeClass(consts.node.CURSELECTED),t)){data.removeSelectedNode(e,t);break}t||(data.getRoot(e).curSelectedList=[])},createNodeCallback:function(e){if(e.callback.onNodeCreated||e.view.addDiyDom)for(var t=data.getRoot(e);t.createdNodes.length>0;){var n=t.createdNodes.shift();tools.apply(e.view.addDiyDom,[e.treeId,n]),e.callback.onNodeCreated&&e.treeObj.trigger(consts.event.NODECREATED,[e.treeId,n])}},createNodes:function(e,t,n,o){if(n&&0!=n.length){var a=data.getRoot(e),r=e.data.key.children,i=!o||o.open||!!$$(o[r][0],e).get(0);a.createdNodes=[];var d=view.appendNodes(e,t,n,o,!0,i);if(o){var s=$$(o,consts.id.UL,e);s.get(0)&&s.append(d.join(""))}else e.treeObj.append(d.join(""));view.createNodeCallback(e)}},destroy:function(e){e&&(data.initCache(e),data.initRoot(e),event.unbindTree(e),event.unbindEvent(e),e.treeObj.empty(),delete settings[e.treeId])},expandCollapseNode:function(e,t,n,o,a){var r=data.getRoot(e),i=e.data.key.children;if(!t)return void tools.apply(a,[]);if(r.expandTriggerFlag){var d=a;a=function(){d&&d(),t.open?e.treeObj.trigger(consts.event.EXPAND,[e.treeId,t]):e.treeObj.trigger(consts.event.COLLAPSE,[e.treeId,t])},r.expandTriggerFlag=!1}if(!t.open&&t.isParent&&(!$$(t,consts.id.UL,e).get(0)||t[i]&&t[i].length>0&&!$$(t[i][0],e).get(0))&&(view.appendParentULDom(e,t),view.createNodeCallback(e)),t.open==n)return void tools.apply(a,[]);var s=$$(t,consts.id.UL,e),l=$$(t,consts.id.SWITCH,e),c=$$(t,consts.id.ICON,e);t.isParent?(t.open=!t.open,t.iconOpen&&t.iconClose&&c.attr("style",view.makeNodeIcoStyle(e,t)),t.open?(view.replaceSwitchClass(t,l,consts.folder.OPEN),view.replaceIcoClass(t,c,consts.folder.OPEN),0==o||""==e.view.expandSpeed?(s.show(),tools.apply(a,[])):t[i]&&t[i].length>0?s.slideDown(e.view.expandSpeed,a):(s.show(),tools.apply(a,[]))):(view.replaceSwitchClass(t,l,consts.folder.CLOSE),view.replaceIcoClass(t,c,consts.folder.CLOSE),0!=o&&""!=e.view.expandSpeed&&t[i]&&t[i].length>0?s.slideUp(e.view.expandSpeed,a):(s.hide(),tools.apply(a,[])))):tools.apply(a,[])},expandCollapseParentNode:function(e,t,n,o,a){if(t){if(!t.parentTId)return void view.expandCollapseNode(e,t,n,o,a);view.expandCollapseNode(e,t,n,o),t.parentTId&&view.expandCollapseParentNode(e,t.getParentNode(),n,o,a)}},expandCollapseSonNode:function(e,t,n,o,a){var r=data.getRoot(e),i=e.data.key.children,d=t?t[i]:r[i],s=t?!1:o,l=data.getRoot(e).expandTriggerFlag;if(data.getRoot(e).expandTriggerFlag=!1,d)for(var c=0,u=d.length;u>c;c++)d[c]&&view.expandCollapseSonNode(e,d[c],n,s);data.getRoot(e).expandTriggerFlag=l,view.expandCollapseNode(e,t,n,o,a)},makeDOMNodeIcon:function(e,t,n){var o=data.getNodeName(t,n),a=t.view.nameIsHTML?o:o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");e.push("<span id='",n.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",view.makeNodeIcoClass(t,n),"' style='",view.makeNodeIcoStyle(t,n),"'></span><span id='",n.tId,consts.id.SPAN,"'>",a,"</span>")},makeDOMNodeLine:function(e,t,n){e.push("<span id='",n.tId,consts.id.SWITCH,"' title='' class='",view.makeNodeLineClass(t,n),"' treeNode",consts.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(e){e.push("</li>")},makeDOMNodeMainBefore:function(e,t,n){e.push("<li id='",n.tId,"' class='",consts.className.LEVEL,n.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(e){e.push("</a>")},makeDOMNodeNameBefore:function(e,t,n){var o=data.getNodeTitle(t,n),a=view.makeNodeUrl(t,n),r=view.makeNodeFontCss(t,n),i=[];for(var d in r)i.push(d,":",r[d],";");e.push("<a id='",n.tId,consts.id.A,"' class='",consts.className.LEVEL,n.level,"' treeNode",consts.id.A,' onclick="',n.click||"",'" ',null!=a&&a.length>0?"href='"+a+"'":""," target='",view.makeNodeTarget(n),"' style='",i.join(""),"'"),tools.apply(t.view.showTitle,[t.treeId,n],t.view.showTitle)&&o&&e.push("title='",o.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'"),e.push(">")},makeNodeFontCss:function(e,t){var n=tools.apply(e.view.fontCss,[e.treeId,t],e.view.fontCss);return n&&"function"!=typeof n?n:{}},makeNodeIcoClass:function(e,t){var n=["ico"];return t.isAjaxing||(n[0]=(t.iconSkin?t.iconSkin+"_":"")+n[0],n.push(t.isParent?t.open?consts.folder.OPEN:consts.folder.CLOSE:consts.folder.DOCU)),consts.className.BUTTON+" "+n.join("_")},makeNodeIcoStyle:function(e,t){var n=[];if(!t.isAjaxing){var o=t.isParent&&t.iconOpen&&t.iconClose?t.open?t.iconOpen:t.iconClose:t.icon;o&&n.push("background:url(",o,") 0 0 no-repeat;"),0!=e.view.showIcon&&tools.apply(e.view.showIcon,[e.treeId,t],!0)||n.push("width:0px;height:0px;")}return n.join("")},makeNodeLineClass:function(e,t){var n=[];return n.push(e.view.showLine?0==t.level&&t.isFirstNode&&t.isLastNode?consts.line.ROOT:0==t.level&&t.isFirstNode?consts.line.ROOTS:t.isLastNode?consts.line.BOTTOM:consts.line.CENTER:consts.line.NOLINE),n.push(t.isParent?t.open?consts.folder.OPEN:consts.folder.CLOSE:consts.folder.DOCU),view.makeNodeLineClassEx(t)+n.join("_")},makeNodeLineClassEx:function(e){return consts.className.BUTTON+" "+consts.className.LEVEL+e.level+" "+consts.className.SWITCH+" "},makeNodeTarget:function(e){return e.target||"_blank"},makeNodeUrl:function(e,t){var n=e.data.key.url;return t[n]?t[n]:null},makeUlHtml:function(e,t,n,o){n.push("<ul id='",t.tId,consts.id.UL,"' class='",consts.className.LEVEL,t.level," ",view.makeUlLineClass(e,t),"' style='display:",t.open?"block":"none","'>"),n.push(o),n.push("</ul>")},makeUlLineClass:function(e,t){return e.view.showLine&&!t.isLastNode?consts.line.LINE:""},removeChildNodes:function(e,t){if(t){var n=e.data.key.children,o=t[n];if(o){for(var a=0,r=o.length;r>a;a++)data.removeNodeCache(e,o[a]);if(data.removeSelectedNode(e),delete t[n],e.data.keep.parent)$$(t,consts.id.UL,e).empty();else{t.isParent=!1,t.open=!1;var i=$$(t,consts.id.SWITCH,e),d=$$(t,consts.id.ICON,e);view.replaceSwitchClass(t,i,consts.folder.DOCU),view.replaceIcoClass(t,d,consts.folder.DOCU),$$(t,consts.id.UL,e).remove()}}}},setFirstNode:function(e,t){var n=e.data.key.children,o=t[n].length;o>0&&(t[n][0].isFirstNode=!0)},setLastNode:function(e,t){var n=e.data.key.children,o=t[n].length;o>0&&(t[n][o-1].isLastNode=!0)},removeNode:function(e,t){var n=data.getRoot(e),o=e.data.key.children,a=t.parentTId?t.getParentNode():n;if(t.isFirstNode=!1,t.isLastNode=!1,t.getPreNode=function(){return null},t.getNextNode=function(){return null},data.getNodeCache(e,t.tId)){$$(t,e).remove(),data.removeNodeCache(e,t),data.removeSelectedNode(e,t);for(var r=0,i=a[o].length;i>r;r++)if(a[o][r].tId==t.tId){a[o].splice(r,1);break}view.setFirstNode(e,a),view.setLastNode(e,a);var d,s,l,c=a[o].length;if(e.data.keep.parent||0!=c){if(e.view.showLine&&c>0){var u=a[o][c-1];if(d=$$(u,consts.id.UL,e),s=$$(u,consts.id.SWITCH,e),l=$$(u,consts.id.ICON,e),a==n)if(1==a[o].length)view.replaceSwitchClass(u,s,consts.line.ROOT);else{var h=$$(a[o][0],consts.id.SWITCH,e);view.replaceSwitchClass(a[o][0],h,consts.line.ROOTS),view.replaceSwitchClass(u,s,consts.line.BOTTOM)}else view.replaceSwitchClass(u,s,consts.line.BOTTOM);d.removeClass(consts.line.LINE)}}else a.isParent=!1,a.open=!1,d=$$(a,consts.id.UL,e),s=$$(a,consts.id.SWITCH,e),l=$$(a,consts.id.ICON,e),view.replaceSwitchClass(a,s,consts.folder.DOCU),view.replaceIcoClass(a,l,consts.folder.DOCU),d.css("display","none")}},replaceIcoClass:function(e,t,n){if(t&&!e.isAjaxing){var o=t.attr("class");if(void 0!=o){var a=o.split("_");switch(n){case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:a[a.length-1]=n}t.attr("class",a.join("_"))}}},replaceSwitchClass:function(e,t,n){if(t){var o=t.attr("class");if(void 0!=o){var a=o.split("_");switch(n){case consts.line.ROOT:case consts.line.ROOTS:case consts.line.CENTER:case consts.line.BOTTOM:case consts.line.NOLINE:a[0]=view.makeNodeLineClassEx(e)+n;break;case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:a[1]=n}t.attr("class",a.join("_")),n!==consts.folder.DOCU?t.removeAttr("disabled"):t.attr("disabled","disabled")}}},selectNode:function(e,t,n){n||view.cancelPreSelectedNode(e),$$(t,consts.id.A,e).addClass(consts.node.CURSELECTED),data.addSelectedNode(e,t)},setNodeFontCss:function(e,t){var n=$$(t,consts.id.A,e),o=view.makeNodeFontCss(e,t);o&&n.css(o)},setNodeLineIcos:function(e,t){if(t){var n=$$(t,consts.id.SWITCH,e),o=$$(t,consts.id.UL,e),a=$$(t,consts.id.ICON,e),r=view.makeUlLineClass(e,t);0==r.length?o.removeClass(consts.line.LINE):o.addClass(r),n.attr("class",view.makeNodeLineClass(e,t)),t.isParent?n.removeAttr("disabled"):n.attr("disabled","disabled"),a.removeAttr("style"),a.attr("style",view.makeNodeIcoStyle(e,t)),a.attr("class",view.makeNodeIcoClass(e,t))}},setNodeName:function(e,t){var n=data.getNodeTitle(e,t),o=$$(t,consts.id.SPAN,e);if(o.empty(),e.view.nameIsHTML?o.html(data.getNodeName(e,t)):o.text(data.getNodeName(e,t)),tools.apply(e.view.showTitle,[e.treeId,t],e.view.showTitle)){var a=$$(t,consts.id.A,e);a.attr("title",n?n:"")}},setNodeTarget:function(e,t){var n=$$(t,consts.id.A,e);n.attr("target",view.makeNodeTarget(t))},setNodeUrl:function(e,t){var n=$$(t,consts.id.A,e),o=view.makeNodeUrl(e,t);null==o||0==o.length?n.removeAttr("href"):n.attr("href",o)},switchNode:function(e,t){if(t.open||!tools.canAsync(e,t))view.expandCollapseNode(e,t,!t.open);else if(e.async.enable){if(!view.asyncNode(e,t))return void view.expandCollapseNode(e,t,!t.open)}else t&&view.expandCollapseNode(e,t,!t.open)}};$.fn.zTree={consts:_consts,_z:{tools:tools,view:view,event:event,data:data},getZTreeObj:function(e){var t=data.getZTreeTools(e);return t?t:null},destroy:function(e){if(e&&e.length>0)view.destroy(data.getSetting(e));else for(var t in settings)view.destroy(settings[t])},init:function(e,t,n){var o=tools.clone(_setting);$.extend(!0,o,t),o.treeId=e.attr("id"),o.treeObj=e,o.treeObj.empty(),settings[o.treeId]=o,"undefined"==typeof document.body.style.maxHeight&&(o.view.expandSpeed=""),data.initRoot(o);var a=data.getRoot(o),r=o.data.key.children;n=n?tools.clone(tools.isArray(n)?n:[n]):[],a[r]=o.data.simpleData.enable?data.transformTozTreeFormat(o,n):n,data.initCache(o),event.unbindTree(o),event.bindTree(o),event.unbindEvent(o),event.bindEvent(o);var i={setting:o,addNodes:function(e,t,n){function a(){view.addNodes(o,e,r,1==n)}if(!t)return null;if(e||(e=null),e&&!e.isParent&&o.data.keep.leaf)return null;var r=tools.clone(tools.isArray(t)?t:[t]);return tools.canAsync(o,e)?view.asyncNode(o,e,n,a):a(),r},cancelSelectedNode:function(e){view.cancelPreSelectedNode(o,e)},destroy:function(){view.destroy(o)},expandAll:function(e){return e=!!e,view.expandCollapseSonNode(o,null,e,!0),e},expandNode:function(e,t,n,a,r){if(!e||!e.isParent)return null;if(t!==!0&&t!==!1&&(t=!e.open),r=!!r,r&&t&&0==tools.apply(o.callback.beforeExpand,[o.treeId,e],!0))return null;if(r&&!t&&0==tools.apply(o.callback.beforeCollapse,[o.treeId,e],!0))return null;if(t&&e.parentTId&&view.expandCollapseParentNode(o,e.getParentNode(),t,!1),t===e.open&&!n)return null;if(data.getRoot(o).expandTriggerFlag=r,!tools.canAsync(o,e)&&n)view.expandCollapseSonNode(o,e,t,!0,function(){if(a!==!1)try{$$(e,o).focus().blur()}catch(t){}});else if(e.open=!t,view.switchNode(this.setting,e),a!==!1)try{$$(e,o).focus().blur()}catch(i){}return t},getNodes:function(){return data.getNodes(o)},getNodeByParam:function(e,t,n){return e?data.getNodeByParam(o,n?n[o.data.key.children]:data.getNodes(o),e,t):null},getNodeByTId:function(e){return data.getNodeCache(o,e)},getNodesByParam:function(e,t,n){return e?data.getNodesByParam(o,n?n[o.data.key.children]:data.getNodes(o),e,t):null},getNodesByParamFuzzy:function(e,t,n){return e?data.getNodesByParamFuzzy(o,n?n[o.data.key.children]:data.getNodes(o),e,t):null},getNodesByFilter:function(e,t,n,a){return t=!!t,e&&"function"==typeof e?data.getNodesByFilter(o,n?n[o.data.key.children]:data.getNodes(o),e,t,a):t?null:[]},getNodeIndex:function(e){if(!e)return null;for(var t=o.data.key.children,n=e.parentTId?e.getParentNode():data.getRoot(o),a=0,r=n[t].length;r>a;a++)if(n[t][a]==e)return a;return-1},getSelectedNodes:function(){for(var e=[],t=data.getRoot(o).curSelectedList,n=0,a=t.length;a>n;n++)e.push(t[n]);return e},isSelectedNode:function(e){return data.isSelectedNode(o,e)},reAsyncChildNodes:function(e,t,n){if(this.setting.async.enable){var a=!e;if(a&&(e=data.getRoot(o)),"refresh"==t){for(var r=this.setting.data.key.children,i=0,d=e[r]?e[r].length:0;d>i;i++)data.removeNodeCache(o,e[r][i]);if(data.removeSelectedNode(o),e[r]=[],a)this.setting.treeObj.empty();else{var s=$$(e,consts.id.UL,o);s.empty()}}view.asyncNode(this.setting,a?null:e,!!n)}},refresh:function(){this.setting.treeObj.empty();var e=data.getRoot(o),t=e[o.data.key.children];data.initRoot(o),e[o.data.key.children]=t,data.initCache(o),view.createNodes(o,0,e[o.data.key.children])},removeChildNodes:function(e){if(!e)return null;var t=o.data.key.children,n=e[t];return view.removeChildNodes(o,e),n?n:null},removeNode:function(e,t){e&&(t=!!t,t&&0==tools.apply(o.callback.beforeRemove,[o.treeId,e],!0)||(view.removeNode(o,e),t&&this.setting.treeObj.trigger(consts.event.REMOVE,[o.treeId,e])))},selectNode:function(e,t){if(e&&tools.uCanDo(o)){if(t=o.view.selectedMulti&&t,e.parentTId)view.expandCollapseParentNode(o,e.getParentNode(),!0,!1,function(){try{$$(e,o).focus().blur()}catch(t){}});else try{$$(e,o).focus().blur()}catch(n){}view.selectNode(o,e,t)}},transformTozTreeNodes:function(e){return data.transformTozTreeFormat(o,e)},transformToArray:function(e){return data.transformToArrayFormat(o,e)},updateNode:function(e){if(e){var t=$$(e,o);t.get(0)&&tools.uCanDo(o)&&(view.setNodeName(o,e),view.setNodeTarget(o,e),view.setNodeUrl(o,e),view.setNodeLineIcos(o,e),view.setNodeFontCss(o,e))}}};return a.treeTools=i,data.setZTreeTools(o,i),a[r]&&a[r].length>0?view.createNodes(o,0,a[r]):o.async.enable&&o.async.url&&""!==o.async.url&&view.asyncNode(o),i}};var zt=$.fn.zTree,$$=tools.$,consts=zt.consts}(jQuery),function(e){var t={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},n={check:{enable:!1,autoCheckTrigger:!1,chkStyle:t.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:t.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},o=function(e){var t=T.getRoot(e);
t.radioCheckedList=[]},a=function(){},r=function(e){var t=e.treeObj,n=m.event;t.bind(n.CHECK,function(t,n,o,a){t.srcEvent=n,k.apply(e.callback.onCheck,[t,o,a])})},i=function(e){var t=e.treeObj,n=m.event;t.unbind(n.CHECK)},d=function(e){var t=e.target,n=T.getSetting(e.data.treeId),o="",a=null,r="",i="",d=null,s=null;if(k.eqs(e.type,"mouseover")?n.check.enable&&k.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+m.id.CHECK)&&(o=k.getNodeMainDom(t).id,r="mouseoverCheck"):k.eqs(e.type,"mouseout")?n.check.enable&&k.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+m.id.CHECK)&&(o=k.getNodeMainDom(t).id,r="mouseoutCheck"):k.eqs(e.type,"click")&&n.check.enable&&k.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+m.id.CHECK)&&(o=k.getNodeMainDom(t).id,r="checkNode"),o.length>0)switch(a=T.getNodeCache(n,o),r){case"checkNode":d=g.onCheckNode;break;case"mouseoverCheck":d=g.onMouseoverCheck;break;case"mouseoutCheck":d=g.onMouseoutCheck}var l={stop:"checkNode"===r,node:a,nodeEventType:r,nodeEventCallback:d,treeEventType:i,treeEventCallback:s};return l},s=function(e,t,n,o){if(n){var a=e.data.key.checked;if("string"==typeof n[a]&&(n[a]=k.eqs(n[a],"true")),n[a]=!!n[a],n.checkedOld=n[a],"string"==typeof n.nocheck&&(n.nocheck=k.eqs(n.nocheck,"true")),n.nocheck=!!n.nocheck||e.check.nocheckInherit&&o&&!!o.nocheck,"string"==typeof n.chkDisabled&&(n.chkDisabled=k.eqs(n.chkDisabled,"true")),n.chkDisabled=!!n.chkDisabled||e.check.chkDisabledInherit&&o&&!!o.chkDisabled,"string"==typeof n.halfCheck&&(n.halfCheck=k.eqs(n.halfCheck,"true")),n.halfCheck=!!n.halfCheck,n.check_Child_State=-1,n.check_Focus=!1,n.getCheckStatus=function(){return T.getCheckStatus(e,n)},e.check.chkStyle==m.radio.STYLE&&e.check.radioType==m.radio.TYPE_ALL&&n[a]){var r=T.getRoot(e);r.radioCheckedList.push(n)}}},l=function(e,t,n){e.data.key.checked;e.check.enable&&(T.makeChkFlag(e,t),n.push("<span ID='",t.tId,m.id.CHECK,"' class='",C.makeChkClass(e,t),"' treeNode",m.id.CHECK,t.nocheck===!0?" style='display:none;'":"","></span>"))},c=function(e,t){t.checkNode=function(e,t,n,o){var a=this.setting.data.key.checked;if(e.chkDisabled!==!0&&(t!==!0&&t!==!1&&(t=!e[a]),o=!!o,(e[a]!==t||n)&&(!o||0!=k.apply(this.setting.callback.beforeCheck,[this.setting.treeId,e],!0))&&k.uCanDo(this.setting)&&this.setting.check.enable&&e.nocheck!==!0)){e[a]=t;var r=y(e,m.id.CHECK,this.setting);(n||this.setting.check.chkStyle===m.radio.STYLE)&&C.checkNodeRelation(this.setting,e),C.setChkClass(this.setting,r,e),C.repairParentChkClassWithSelf(this.setting,e),o&&this.setting.treeObj.trigger(m.event.CHECK,[null,this.setting.treeId,e])}},t.checkAllNodes=function(e){C.repairAllChk(this.setting,!!e)},t.getCheckedNodes=function(e){var t=this.setting.data.key.children;return e=e!==!1,T.getTreeCheckedNodes(this.setting,T.getRoot(this.setting)[t],e)},t.getChangeCheckedNodes=function(){var e=this.setting.data.key.children;return T.getTreeChangeCheckedNodes(this.setting,T.getRoot(this.setting)[e])},t.setChkDisabled=function(e,t,n,o){t=!!t,n=!!n,o=!!o,C.repairSonChkDisabled(this.setting,e,t,o),C.repairParentChkDisabled(this.setting,e.getParentNode(),t,n)};var n=t.updateNode;t.updateNode=function(e,o){if(n&&n.apply(t,arguments),e&&this.setting.check.enable){var a=y(e,this.setting);if(a.get(0)&&k.uCanDo(this.setting)){var r=y(e,m.id.CHECK,this.setting);(1==o||this.setting.check.chkStyle===m.radio.STYLE)&&C.checkNodeRelation(this.setting,e),C.setChkClass(this.setting,r,e),C.repairParentChkClassWithSelf(this.setting,e)}}}},u={getRadioCheckedList:function(e){for(var t=T.getRoot(e).radioCheckedList,n=0,o=t.length;o>n;n++)T.getNodeCache(e,t[n].tId)||(t.splice(n,1),n--,o--);return t},getCheckStatus:function(e,t){if(!e.check.enable||t.nocheck||t.chkDisabled)return null;var n=e.data.key.checked,o={checked:t[n],half:t.halfCheck?t.halfCheck:e.check.chkStyle==m.radio.STYLE?2===t.check_Child_State:t[n]?t.check_Child_State>-1&&t.check_Child_State<2:t.check_Child_State>0};return o},getTreeCheckedNodes:function(e,t,n,o){if(!t)return[];var a=e.data.key.children,r=e.data.key.checked,i=n&&e.check.chkStyle==m.radio.STYLE&&e.check.radioType==m.radio.TYPE_ALL;o=o?o:[];for(var d=0,s=t.length;s>d&&(t[d].nocheck===!0||t[d].chkDisabled===!0||t[d][r]!=n||(o.push(t[d]),!i))&&(T.getTreeCheckedNodes(e,t[d][a],n,o),!(i&&o.length>0));d++);return o},getTreeChangeCheckedNodes:function(e,t,n){if(!t)return[];var o=e.data.key.children,a=e.data.key.checked;n=n?n:[];for(var r=0,i=t.length;i>r;r++)t[r].nocheck!==!0&&t[r].chkDisabled!==!0&&t[r][a]!=t[r].checkedOld&&n.push(t[r]),T.getTreeChangeCheckedNodes(e,t[r][o],n);return n},makeChkFlag:function(e,t){if(t){var n=e.data.key.children,o=e.data.key.checked,a=-1;if(t[n])for(var r=0,i=t[n].length;i>r;r++){var d=t[n][r],s=-1;if(e.check.chkStyle==m.radio.STYLE){if(s=d.nocheck===!0||d.chkDisabled===!0?d.check_Child_State:d.halfCheck===!0?2:d[o]?2:d.check_Child_State>0?2:0,2==s){a=2;break}0==s&&(a=0)}else if(e.check.chkStyle==m.checkbox.STYLE){if(s=d.nocheck===!0||d.chkDisabled===!0?d.check_Child_State:d.halfCheck===!0?1:d[o]?-1===d.check_Child_State||2===d.check_Child_State?2:1:d.check_Child_State>0?1:0,1===s){a=1;break}if(2===s&&a>-1&&r>0&&s!==a){a=1;break}if(2===a&&s>-1&&2>s){a=1;break}s>-1&&(a=s)}}t.check_Child_State=a}}},h={},g={onCheckNode:function(e,t){if(t.chkDisabled===!0)return!1;var n=T.getSetting(e.data.treeId),o=n.data.key.checked;if(0==k.apply(n.callback.beforeCheck,[n.treeId,t],!0))return!0;t[o]=!t[o],C.checkNodeRelation(n,t);var a=y(t,m.id.CHECK,n);return C.setChkClass(n,a,t),C.repairParentChkClassWithSelf(n,t),n.treeObj.trigger(m.event.CHECK,[e,n.treeId,t]),!0},onMouseoverCheck:function(e,t){if(t.chkDisabled===!0)return!1;var n=T.getSetting(e.data.treeId),o=y(t,m.id.CHECK,n);return t.check_Focus=!0,C.setChkClass(n,o,t),!0},onMouseoutCheck:function(e,t){if(t.chkDisabled===!0)return!1;var n=T.getSetting(e.data.treeId),o=y(t,m.id.CHECK,n);return t.check_Focus=!1,C.setChkClass(n,o,t),!0}},p={},f={checkNodeRelation:function(e,t){var n,o,a,r=e.data.key.children,i=e.data.key.checked,d=m.radio;if(e.check.chkStyle==d.STYLE){var s=T.getRadioCheckedList(e);if(t[i])if(e.check.radioType==d.TYPE_ALL){for(o=s.length-1;o>=0;o--)n=s[o],n[i]&&n!=t&&(n[i]=!1,s.splice(o,1),C.setChkClass(e,y(n,m.id.CHECK,e),n),n.parentTId!=t.parentTId&&C.repairParentChkClassWithSelf(e,n));s.push(t)}else{var l=t.parentTId?t.getParentNode():T.getRoot(e);for(o=0,a=l[r].length;a>o;o++)n=l[r][o],n[i]&&n!=t&&(n[i]=!1,C.setChkClass(e,y(n,m.id.CHECK,e),n))}else if(e.check.radioType==d.TYPE_ALL)for(o=0,a=s.length;a>o;o++)if(t==s[o]){s.splice(o,1);break}}else t[i]&&(!t[r]||0==t[r].length||e.check.chkboxType.Y.indexOf("s")>-1)&&C.setSonNodeCheckBox(e,t,!0),t[i]||t[r]&&0!=t[r].length&&!(e.check.chkboxType.N.indexOf("s")>-1)||C.setSonNodeCheckBox(e,t,!1),t[i]&&e.check.chkboxType.Y.indexOf("p")>-1&&C.setParentNodeCheckBox(e,t,!0),!t[i]&&e.check.chkboxType.N.indexOf("p")>-1&&C.setParentNodeCheckBox(e,t,!1)},makeChkClass:function(e,t){var n=e.data.key.checked,o=m.checkbox,a=m.radio,r="";r=t.chkDisabled===!0?o.DISABLED:t.halfCheck?o.PART:e.check.chkStyle==a.STYLE?t.check_Child_State<1?o.FULL:o.PART:t[n]?2===t.check_Child_State||-1===t.check_Child_State?o.FULL:o.PART:t.check_Child_State<1?o.FULL:o.PART;var i=e.check.chkStyle+"_"+(t[n]?o.TRUE:o.FALSE)+"_"+r;return i=t.check_Focus&&t.chkDisabled!==!0?i+"_"+o.FOCUS:i,m.className.BUTTON+" "+o.DEFAULT+" "+i},repairAllChk:function(e,t){if(e.check.enable&&e.check.chkStyle===m.checkbox.STYLE)for(var n=e.data.key.checked,o=e.data.key.children,a=T.getRoot(e),r=0,i=a[o].length;i>r;r++){var d=a[o][r];d.nocheck!==!0&&d.chkDisabled!==!0&&(d[n]=t),C.setSonNodeCheckBox(e,d,t)}},repairChkClass:function(e,t){if(t&&(T.makeChkFlag(e,t),t.nocheck!==!0)){var n=y(t,m.id.CHECK,e);C.setChkClass(e,n,t)}},repairParentChkClass:function(e,t){if(t&&t.parentTId){var n=t.getParentNode();C.repairChkClass(e,n),C.repairParentChkClass(e,n)}},repairParentChkClassWithSelf:function(e,t){if(t){var n=e.data.key.children;t[n]&&t[n].length>0?C.repairParentChkClass(e,t[n][0]):C.repairParentChkClass(e,t)}},repairSonChkDisabled:function(e,t,n,o){if(t){var a=e.data.key.children;if(t.chkDisabled!=n&&(t.chkDisabled=n),C.repairChkClass(e,t),t[a]&&o)for(var r=0,i=t[a].length;i>r;r++){var d=t[a][r];C.repairSonChkDisabled(e,d,n,o)}}},repairParentChkDisabled:function(e,t,n,o){t&&(t.chkDisabled!=n&&o&&(t.chkDisabled=n),C.repairChkClass(e,t),C.repairParentChkDisabled(e,t.getParentNode(),n,o))},setChkClass:function(e,t,n){t&&(n.nocheck===!0?t.hide():t.show(),t.removeClass(),t.addClass(C.makeChkClass(e,n)))},setParentNodeCheckBox:function(e,t,n,o){var a=e.data.key.children,r=e.data.key.checked,i=y(t,m.id.CHECK,e);if(o||(o=t),T.makeChkFlag(e,t),t.nocheck!==!0&&t.chkDisabled!==!0&&(t[r]=n,C.setChkClass(e,i,t),e.check.autoCheckTrigger&&t!=o&&e.treeObj.trigger(m.event.CHECK,[null,e.treeId,t])),t.parentTId){var d=!0;if(!n)for(var s=t.getParentNode()[a],l=0,c=s.length;c>l;l++)if(s[l].nocheck!==!0&&s[l].chkDisabled!==!0&&s[l][r]||(s[l].nocheck===!0||s[l].chkDisabled===!0)&&s[l].check_Child_State>0){d=!1;break}d&&C.setParentNodeCheckBox(e,t.getParentNode(),n,o)}},setSonNodeCheckBox:function(e,t,n,o){if(t){var a=e.data.key.children,r=e.data.key.checked,i=y(t,m.id.CHECK,e);o||(o=t);var d=!1;if(t[a])for(var s=0,l=t[a].length;l>s&&t.chkDisabled!==!0;s++){var c=t[a][s];C.setSonNodeCheckBox(e,c,n,o),c.chkDisabled===!0&&(d=!0)}t!=T.getRoot(e)&&t.chkDisabled!==!0&&(d&&t.nocheck!==!0&&T.makeChkFlag(e,t),t.nocheck!==!0&&t.chkDisabled!==!0?(t[r]=n,d||(t.check_Child_State=t[a]&&t[a].length>0?n?2:0:-1)):t.check_Child_State=-1,C.setChkClass(e,i,t),e.check.autoCheckTrigger&&t!=o&&t.nocheck!==!0&&t.chkDisabled!==!0&&e.treeObj.trigger(m.event.CHECK,[null,e.treeId,t]))}}},v={tools:p,view:f,event:h,data:u};e.extend(!0,e.fn.zTree.consts,t),e.extend(!0,e.fn.zTree._z,v);var N=e.fn.zTree,k=N._z.tools,m=N.consts,C=N._z.view,T=N._z.data,y=(N._z.event,k.$);T.exSetting(n),T.addInitBind(r),T.addInitUnBind(i),T.addInitCache(a),T.addInitNode(s),T.addInitProxy(d,!0),T.addInitRoot(o),T.addBeforeA(l),T.addZTreeTools(c);var b=C.createNodes;C.createNodes=function(e,t,n,o){b&&b.apply(C,arguments),n&&C.repairParentChkClassWithSelf(e,o)};var E=C.removeNode;C.removeNode=function(e,t){var n=t.getParentNode();E&&E.apply(C,arguments),t&&n&&(C.repairChkClass(e,n),C.repairParentChkClass(e,n))};var I=C.appendNodes;C.appendNodes=function(e,t,n,o){var a="";return I&&(a=I.apply(C,arguments)),o&&T.makeChkFlag(e,o),a}}(jQuery),function(e){var t={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},n={edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}},o=function(e){var t=C.getRoot(e),n=C.getRoots();t.curEditNode=null,t.curEditInput=null,t.curHoverNode=null,t.dragFlag=0,t.dragNodeShowBefore=[],t.dragMaskList=new Array,n.showHoverDom=!0},a=function(){},r=function(e){var t=e.treeObj,n=k.event;t.bind(n.RENAME,function(t,n,o,a){N.apply(e.callback.onRename,[t,n,o,a])}),t.bind(n.DRAG,function(t,n,o,a){N.apply(e.callback.onDrag,[n,o,a])}),t.bind(n.DRAGMOVE,function(t,n,o,a){N.apply(e.callback.onDragMove,[n,o,a])}),t.bind(n.DROP,function(t,n,o,a,r,i,d){N.apply(e.callback.onDrop,[n,o,a,r,i,d])})},i=function(e){var t=e.treeObj,n=k.event;t.unbind(n.RENAME),t.unbind(n.DRAG),t.unbind(n.DRAGMOVE),t.unbind(n.DROP)},d=function(e){var t=e.target,n=C.getSetting(e.data.treeId),o=e.relatedTarget,a="",r=null,i="",d="",s=null,l=null,c=null;if(N.eqs(e.type,"mouseover")?(c=N.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+k.id.A}]),c&&(a=N.getNodeMainDom(c).id,i="hoverOverNode")):N.eqs(e.type,"mouseout")?(c=N.getMDom(n,o,[{tagName:"a",attrName:"treeNode"+k.id.A}]),c||(a="remove",i="hoverOutNode")):N.eqs(e.type,"mousedown")&&(c=N.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+k.id.A}]),c&&(a=N.getNodeMainDom(c).id,i="mousedownNode")),a.length>0)switch(r=C.getNodeCache(n,a),i){case"mousedownNode":s=h.onMousedownNode;break;case"hoverOverNode":s=h.onHoverOverNode;break;case"hoverOutNode":s=h.onHoverOutNode}var u={stop:!1,node:r,nodeEventType:i,nodeEventCallback:s,treeEventType:d,treeEventCallback:l};return u},s=function(e,t,n){n&&(n.isHover=!1,n.editNameFlag=!1)},l=function(e,t){t.cancelEditName=function(e){var t=C.getRoot(this.setting);t.curEditNode&&m.cancelCurEditNode(this.setting,e?e:null,!0)},t.copyNode=function(e,t,n,o){function a(){m.addNodes(r.setting,e,[i],o)}if(!t)return null;if(e&&!e.isParent&&this.setting.data.keep.leaf&&n===k.move.TYPE_INNER)return null;var r=this,i=N.clone(t);return e||(e=null,n=k.move.TYPE_INNER),n==k.move.TYPE_INNER?N.canAsync(this.setting,e)?m.asyncNode(this.setting,e,o,a):a():(m.addNodes(this.setting,e.parentNode,[i],o),m.moveNode(this.setting,e,i,n,!1,o)),i},t.editName=function(e){e&&e.tId&&e===C.getNodeCache(this.setting,e.tId)&&(e.parentTId&&m.expandCollapseParentNode(this.setting,e.getParentNode(),!0),m.editNode(this.setting,e))},t.moveNode=function(e,t,n,o){function a(){m.moveNode(r.setting,e,t,n,!1,o)}if(!t)return t;if(e&&!e.isParent&&this.setting.data.keep.leaf&&n===k.move.TYPE_INNER)return null;if(e&&(t.parentTId==e.tId&&n==k.move.TYPE_INNER||T(t,this.setting).find("#"+e.tId).length>0))return null;e||(e=null);var r=this;return N.canAsync(this.setting,e)&&n===k.move.TYPE_INNER?m.asyncNode(this.setting,e,o,a):a(),t},t.setEditable=function(e){return this.setting.edit.enable=e,this.refresh()}},c={setSonNodeLevel:function(e,t,n){if(n){var o=e.data.key.children;if(n.level=t?t.level+1:0,n[o])for(var a=0,r=n[o].length;r>a;a++)n[o][a]&&C.setSonNodeLevel(e,n,n[o][a])}}},u={},h={onHoverOverNode:function(e,t){var n=C.getSetting(e.data.treeId),o=C.getRoot(n);o.curHoverNode!=t&&h.onHoverOutNode(e),o.curHoverNode=t,m.addHoverDom(n,t)},onHoverOutNode:function(e){var t=C.getSetting(e.data.treeId),n=C.getRoot(t);n.curHoverNode&&!C.isSelectedNode(t,n.curHoverNode)&&(m.removeTreeDom(t,n.curHoverNode),n.curHoverNode=null)},onMousedownNode:function(n,o){function a(n){if(0==c.dragFlag&&Math.abs(A-n.clientX)<l.edit.drag.minMoveSize&&Math.abs(x-n.clientY)<l.edit.drag.minMoveSize)return!0;var o,a,i,d,s,h=l.data.key.children;if(w.css("cursor","pointer"),0==c.dragFlag){if(0==N.apply(l.callback.beforeDrag,[l.treeId,p],!0))return r(n),!0;for(o=0,a=p.length;a>o;o++)0==o&&(c.dragNodeShowBefore=[]),i=p[o],i.isParent&&i.open?(m.expandCollapseNode(l,i,!i.open),c.dragNodeShowBefore[i.tId]=!0):c.dragNodeShowBefore[i.tId]=!1;c.dragFlag=1,u.showHoverDom=!1,N.showIfameMask(l,!0);var g=!0,_=-1;if(p.length>1){var $=p[0].parentTId?p[0].getParentNode()[h]:C.getNodes(l);for(s=[],o=0,a=$.length;a>o;o++)if(void 0!==c.dragNodeShowBefore[$[o].tId]&&(g&&_>-1&&_+1!==o&&(g=!1),s.push($[o]),_=o),p.length===s.length){p=s;break}}for(g&&(b=p[0].getPreNode(),E=p[p.length-1].getNextNode()),f=T("<ul class='zTreeDragUL'></ul>",l),o=0,a=p.length;a>o;o++)i=p[o],i.editNameFlag=!1,m.selectNode(l,i,o>0),m.removeTreeDom(l,i),o>l.edit.drag.maxShowNodeNum-1||(d=T("<li id='"+i.tId+"_tmp'></li>",l),d.append(T(i,k.id.A,l).clone()),d.css("padding","0"),d.children("#"+i.tId+k.id.A).removeClass(k.node.CURSELECTED),f.append(d),o==l.edit.drag.maxShowNodeNum-1&&(d=T("<li id='"+i.tId+"_moretmp'><a>  ...  </a></li>",l),f.append(d)));f.attr("id",p[0].tId+k.id.UL+"_tmp"),f.addClass(l.treeObj.attr("class")),f.appendTo(w),v=T("<span class='tmpzTreeMove_arrow'></span>",l),v.attr("id","zTreeMove_arrow_tmp"),v.appendTo(w),l.treeObj.trigger(k.event.DRAG,[n,l.treeId,p])}if(1==c.dragFlag){if(y&&v.attr("id")==n.target.id&&D&&n.clientX+I.scrollLeft()+2>e("#"+D+k.id.A,y).offset().left){var j=e("#"+D+k.id.A,y);n.target=j.length>0?j.get(0):n.target}else y&&(y.removeClass(k.node.TMPTARGET_TREE),D&&e("#"+D+k.id.A,y).removeClass(k.node.TMPTARGET_NODE+"_"+k.move.TYPE_PREV).removeClass(k.node.TMPTARGET_NODE+"_"+t.move.TYPE_NEXT).removeClass(k.node.TMPTARGET_NODE+"_"+t.move.TYPE_INNER));y=null,D=null,S=!1,P=l;var U=C.getSettings();for(var B in U)U[B].treeId&&U[B].edit.enable&&U[B].treeId!=l.treeId&&(n.target.id==U[B].treeId||e(n.target).parents("#"+U[B].treeId).length>0)&&(S=!0,P=U[B]);var F=I.scrollTop(),z=I.scrollLeft(),Y=P.treeObj.offset(),H=P.treeObj.get(0).scrollHeight,K=P.treeObj.get(0).scrollWidth,V=n.clientY+F-Y.top,q=P.treeObj.height()+Y.top-n.clientY-F,W=n.clientX+z-Y.left,G=P.treeObj.width()+Y.left-n.clientX-z,X=V<l.edit.drag.borderMax&&V>l.edit.drag.borderMin,Z=q<l.edit.drag.borderMax&&q>l.edit.drag.borderMin,Q=W<l.edit.drag.borderMax&&W>l.edit.drag.borderMin,J=G<l.edit.drag.borderMax&&G>l.edit.drag.borderMin,et=V>l.edit.drag.borderMin&&q>l.edit.drag.borderMin&&W>l.edit.drag.borderMin&&G>l.edit.drag.borderMin,tt=X&&P.treeObj.scrollTop()<=0,nt=Z&&P.treeObj.scrollTop()+P.treeObj.height()+10>=H,ot=Q&&P.treeObj.scrollLeft()<=0,at=J&&P.treeObj.scrollLeft()+P.treeObj.width()+10>=K;if(n.target&&N.isChildOrSelf(n.target,P.treeId)){for(var rt=n.target;rt&&rt.tagName&&!N.eqs(rt.tagName,"li")&&rt.id!=P.treeId;)rt=rt.parentNode;var it=!0;for(o=0,a=p.length;a>o;o++){if(i=p[o],rt.id===i.tId){it=!1;break}if(T(i,l).find("#"+rt.id).length>0){it=!1;break}}it&&n.target&&N.isChildOrSelf(n.target,rt.id+k.id.A)&&(y=e(rt),D=rt.id)}i=p[0],et&&N.isChildOrSelf(n.target,P.treeId)&&(!y&&(n.target.id==P.treeId||tt||nt||ot||at)&&(S||!S&&i.parentTId)&&(y=P.treeObj),X?P.treeObj.scrollTop(P.treeObj.scrollTop()-10):Z&&P.treeObj.scrollTop(P.treeObj.scrollTop()+10),Q?P.treeObj.scrollLeft(P.treeObj.scrollLeft()-10):J&&P.treeObj.scrollLeft(P.treeObj.scrollLeft()+10),y&&y!=P.treeObj&&y.offset().left<P.treeObj.offset().left&&P.treeObj.scrollLeft(P.treeObj.scrollLeft()+y.offset().left-P.treeObj.offset().left)),f.css({top:n.clientY+F+3+"px",left:n.clientX+z+3+"px"});var dt=0,st=0;if(y&&y.attr("id")!=P.treeId){var lt=null==D?null:C.getNodeCache(P,D),ct=(n.ctrlKey||n.metaKey)&&l.edit.drag.isMove&&l.edit.drag.isCopy||!l.edit.drag.isMove&&l.edit.drag.isCopy,ut=!(!b||D!==b.tId),ht=!(!E||D!==E.tId),gt=i.parentTId&&i.parentTId==D,pt=(ct||!ht)&&N.apply(P.edit.drag.prev,[P.treeId,p,lt],!!P.edit.drag.prev),ft=(ct||!ut)&&N.apply(P.edit.drag.next,[P.treeId,p,lt],!!P.edit.drag.next),vt=!(!ct&&gt||P.data.keep.leaf&&!lt.isParent||!N.apply(P.edit.drag.inner,[P.treeId,p,lt],!!P.edit.drag.inner));if(pt||ft||vt){var Nt=e("#"+D+k.id.A,y),kt=lt.isLastNode?null:e("#"+lt.getNextNode().tId+k.id.A,y.next()),mt=Nt.offset().top,Ct=Nt.offset().left,Tt=pt?vt?.25:ft?.5:1:-1,yt=ft?vt?.75:pt?.5:0:-1,bt=(n.clientY+F-mt)/Nt.height();if((1==Tt||Tt>=bt&&bt>=-.2)&&pt?(dt=1-v.width(),st=mt-v.height()/2,L=k.move.TYPE_PREV):(0==yt||bt>=yt&&1.2>=bt)&&ft?(dt=1-v.width(),st=null==kt||lt.isParent&&lt.open?mt+Nt.height()-v.height()/2:kt.offset().top-v.height()/2,L=k.move.TYPE_NEXT):(dt=5-v.width(),st=mt,L=k.move.TYPE_INNER),v.css({display:"block",top:st+"px",left:Ct+dt+"px"}),Nt.addClass(k.node.TMPTARGET_NODE+"_"+L),(O!=D||R!=L)&&(M=(new Date).getTime()),lt&&lt.isParent&&L==k.move.TYPE_INNER){var Et=!0;window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==lt.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===lt.tId&&(Et=!1),Et&&(window.zTreeMoveTimer=setTimeout(function(){L==k.move.TYPE_INNER&&lt&&lt.isParent&&!lt.open&&(new Date).getTime()-M>P.edit.drag.autoOpenTime&&N.apply(P.callback.beforeDragOpen,[P.treeId,lt],!0)&&(m.switchNode(P,lt),P.edit.drag.autoExpandTrigger&&P.treeObj.trigger(k.event.EXPAND,[P.treeId,lt]))},P.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=lt.tId)}}else y=null,D="",L=k.move.TYPE_INNER,v.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)}else L=k.move.TYPE_INNER,y&&N.apply(P.edit.drag.inner,[P.treeId,p,null],!!P.edit.drag.inner)?y.addClass(k.node.TMPTARGET_TREE):y=null,v.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);O=D,R=L,l.treeObj.trigger(k.event.DRAGMOVE,[n,l.treeId,p])}return!1}function r(n){function o(){if(S){if(!g)for(var e=0,t=p.length;t>e;e++)m.removeNode(l,p[e]);if(L==k.move.TYPE_INNER)m.addNodes(P,b,E);else if(m.addNodes(P,b.getParentNode(),E),L==k.move.TYPE_PREV)for(e=0,t=E.length;t>e;e++)m.moveNode(P,b,E[e],L,!1);else for(e=-1,t=E.length-1;t>e;t--)m.moveNode(P,b,E[t],L,!1)}else if(g&&L==k.move.TYPE_INNER)m.addNodes(P,b,E);else if(g&&m.addNodes(P,b.getParentNode(),E),L!=k.move.TYPE_NEXT)for(e=0,t=E.length;t>e;e++)m.moveNode(P,b,E[e],L,!1);else for(e=-1,t=E.length-1;t>e;t--)m.moveNode(P,b,E[t],L,!1);m.selectNodes(P,E),T(E[0],l).focus().blur(),l.treeObj.trigger(k.event.DROP,[n,P.treeId,E,b,L,g])}if(window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null),O=null,R=null,I.unbind("mousemove",a),I.unbind("mouseup",r),I.unbind("selectstart",i),w.css("cursor","auto"),y&&(y.removeClass(k.node.TMPTARGET_TREE),D&&e("#"+D+k.id.A,y).removeClass(k.node.TMPTARGET_NODE+"_"+k.move.TYPE_PREV).removeClass(k.node.TMPTARGET_NODE+"_"+t.move.TYPE_NEXT).removeClass(k.node.TMPTARGET_NODE+"_"+t.move.TYPE_INNER)),N.showIfameMask(l,!1),u.showHoverDom=!0,0!=c.dragFlag){c.dragFlag=0;var d,s,h;for(d=0,s=p.length;s>d;d++)h=p[d],h.isParent&&c.dragNodeShowBefore[h.tId]&&!h.open&&(m.expandCollapseNode(l,h,!h.open),delete c.dragNodeShowBefore[h.tId]);f&&f.remove(),v&&v.remove();var g=(n.ctrlKey||n.metaKey)&&l.edit.drag.isMove&&l.edit.drag.isCopy||!l.edit.drag.isMove&&l.edit.drag.isCopy;if(!g&&y&&D&&p[0].parentTId&&D==p[0].parentTId&&L==k.move.TYPE_INNER&&(y=null),y){var b=null==D?null:C.getNodeCache(P,D);if(0==N.apply(l.callback.beforeDrop,[P.treeId,p,b,L,g],!0))return void m.selectNodes(_,p);var E=g?N.clone(p):p;L==k.move.TYPE_INNER&&N.canAsync(P,b)?m.asyncNode(P,b,!1,o):o()}else m.selectNodes(_,p),l.treeObj.trigger(k.event.DROP,[n,l.treeId,p,null,null,null])}}function i(){return!1}var d,s,l=C.getSetting(n.data.treeId),c=C.getRoot(l),u=C.getRoots();if(2==n.button||!l.edit.enable||!l.edit.drag.isCopy&&!l.edit.drag.isMove)return!0;var h=n.target,g=C.getRoot(l).curSelectedList,p=[];if(C.isSelectedNode(l,o))for(d=0,s=g.length;s>d;d++){if(g[d].editNameFlag&&N.eqs(h.tagName,"input")&&null!==h.getAttribute("treeNode"+k.id.INPUT))return!0;if(p.push(g[d]),p[0].parentTId!==g[d].parentTId){p=[o];break}}else p=[o];m.editNodeBlur=!0,m.cancelCurEditNode(l);var f,v,y,b,E,I=e(l.treeObj.get(0).ownerDocument),w=e(l.treeObj.get(0).ownerDocument.body),S=!1,P=l,_=l,O=null,R=null,D=null,L=k.move.TYPE_INNER,A=n.clientX,x=n.clientY,M=(new Date).getTime();return N.uCanDo(l)&&I.bind("mousemove",a),I.bind("mouseup",r),I.bind("selectstart",i),n.preventDefault&&n.preventDefault(),!0}},g={getAbs:function(e){var t=e.getBoundingClientRect(),n=document.body.scrollTop+document.documentElement.scrollTop,o=document.body.scrollLeft+document.documentElement.scrollLeft;return[t.left+o,t.top+n]},inputFocus:function(e){e.get(0)&&(e.focus(),N.setCursorPosition(e.get(0),e.val().length))},inputSelect:function(e){e.get(0)&&(e.focus(),e.select())},setCursorPosition:function(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}},showIfameMask:function(e,t){for(var n=C.getRoot(e);n.dragMaskList.length>0;)n.dragMaskList[0].remove(),n.dragMaskList.shift();if(t)for(var o=T("iframe",e),a=0,r=o.length;r>a;a++){var i=o.get(a),d=N.getAbs(i),s=T("<div id='zTreeMask_"+a+"' class='zTreeMask' style='top:"+d[1]+"px; left:"+d[0]+"px; width:"+i.offsetWidth+"px; height:"+i.offsetHeight+"px;'></div>",e);s.appendTo(T("body",e)),n.dragMaskList.push(s)}}},p={addEditBtn:function(e,t){if(!(t.editNameFlag||T(t,k.id.EDIT,e).length>0)&&N.apply(e.edit.showRenameBtn,[e.treeId,t],e.edit.showRenameBtn)){var n=T(t,k.id.A,e),o="<span class='"+k.className.BUTTON+" edit' id='"+t.tId+k.id.EDIT+"' title='"+N.apply(e.edit.renameTitle,[e.treeId,t],e.edit.renameTitle)+"' treeNode"+k.id.EDIT+" style='display:none;'></span>";n.append(o),T(t,k.id.EDIT,e).bind("click",function(){return N.uCanDo(e)&&0!=N.apply(e.callback.beforeEditName,[e.treeId,t],!0)?(m.editNode(e,t),!1):!1}).show()}},addRemoveBtn:function(e,t){if(!(t.editNameFlag||T(t,k.id.REMOVE,e).length>0)&&N.apply(e.edit.showRemoveBtn,[e.treeId,t],e.edit.showRemoveBtn)){var n=T(t,k.id.A,e),o="<span class='"+k.className.BUTTON+" remove' id='"+t.tId+k.id.REMOVE+"' title='"+N.apply(e.edit.removeTitle,[e.treeId,t],e.edit.removeTitle)+"' treeNode"+k.id.REMOVE+" style='display:none;'></span>";n.append(o),T(t,k.id.REMOVE,e).bind("click",function(){return N.uCanDo(e)&&0!=N.apply(e.callback.beforeRemove,[e.treeId,t],!0)?(m.removeNode(e,t),e.treeObj.trigger(k.event.REMOVE,[e.treeId,t]),!1):!1}).bind("mousedown",function(){return!0}).show()}},addHoverDom:function(e,t){C.getRoots().showHoverDom&&(t.isHover=!0,e.edit.enable&&(m.addEditBtn(e,t),m.addRemoveBtn(e,t)),N.apply(e.view.addHoverDom,[e.treeId,t]))},cancelCurEditNode:function(e,t,n){var o=C.getRoot(e),a=e.data.key.name,r=o.curEditNode;if(r){var i=o.curEditInput,d=t?t:n?r[a]:i.val();if(N.apply(e.callback.beforeRename,[e.treeId,r,d,n],!0)===!1)return!1;r[a]=d,e.treeObj.trigger(k.event.RENAME,[e.treeId,r,n]);var s=T(r,k.id.A,e);s.removeClass(k.node.CURSELECTED_EDIT),i.unbind(),m.setNodeName(e,r),r.editNameFlag=!1,o.curEditNode=null,o.curEditInput=null,m.selectNode(e,r,!1)}return o.noSelection=!0,!0},editNode:function(e,t){var n=C.getRoot(e);if(m.editNodeBlur=!1,C.isSelectedNode(e,t)&&n.curEditNode==t&&t.editNameFlag)return void setTimeout(function(){N.inputFocus(n.curEditInput)},0);var o=e.data.key.name;t.editNameFlag=!0,m.removeTreeDom(e,t),m.cancelCurEditNode(e),m.selectNode(e,t,!1),T(t,k.id.SPAN,e).html("<input type=text class='rename' id='"+t.tId+k.id.INPUT+"' treeNode"+k.id.INPUT+" >");var a=T(t,k.id.INPUT,e);a.attr("value",t[o]),e.edit.editNameSelectAll?N.inputSelect(a):N.inputFocus(a),a.bind("blur",function(){m.editNodeBlur||m.cancelCurEditNode(e)}).bind("keydown",function(t){"13"==t.keyCode?(m.editNodeBlur=!0,m.cancelCurEditNode(e)):"27"==t.keyCode&&m.cancelCurEditNode(e,null,!0)}).bind("click",function(){return!1}).bind("dblclick",function(){return!1}),T(t,k.id.A,e).addClass(k.node.CURSELECTED_EDIT),n.curEditInput=a,n.noSelection=!1,n.curEditNode=t},moveNode:function(e,t,n,o,a,r){var i=C.getRoot(e),d=e.data.key.children;if(t!=n&&(!e.data.keep.leaf||!t||t.isParent||o!=k.move.TYPE_INNER)){var s=n.parentTId?n.getParentNode():i,l=null===t||t==i;l&&null===t&&(t=i),l&&(o=k.move.TYPE_INNER);var c=t.parentTId?t.getParentNode():i;o!=k.move.TYPE_PREV&&o!=k.move.TYPE_NEXT&&(o=k.move.TYPE_INNER),o==k.move.TYPE_INNER&&(l?n.parentTId=null:(t.isParent||(t.isParent=!0,t.open=!!t.open,m.setNodeLineIcos(e,t)),n.parentTId=t.tId));var u,h;if(l)u=e.treeObj,h=u;else{if(r||o!=k.move.TYPE_INNER?r||m.expandCollapseNode(e,t.getParentNode(),!0,!1):m.expandCollapseNode(e,t,!0,!1),u=T(t,e),h=T(t,k.id.UL,e),u.get(0)&&!h.get(0)){var g=[];m.makeUlHtml(e,t,g,""),u.append(g.join(""))}h=T(t,k.id.UL,e)}var p=T(n,e);p.get(0)?u.get(0)||p.remove():p=m.appendNodes(e,n.level,[n],null,!1,!0).join(""),h.get(0)&&o==k.move.TYPE_INNER?h.append(p):u.get(0)&&o==k.move.TYPE_PREV?u.before(p):u.get(0)&&o==k.move.TYPE_NEXT&&u.after(p);var f,v,N=-1,y=0,b=null,E=null,I=n.level;if(n.isFirstNode)N=0,s[d].length>1&&(b=s[d][1],b.isFirstNode=!0);else if(n.isLastNode)N=s[d].length-1,b=s[d][N-1],b.isLastNode=!0;else for(f=0,v=s[d].length;v>f;f++)if(s[d][f].tId==n.tId){N=f;break}if(N>=0&&s[d].splice(N,1),o!=k.move.TYPE_INNER)for(f=0,v=c[d].length;v>f;f++)c[d][f].tId==t.tId&&(y=f);if(o==k.move.TYPE_INNER?(t[d]||(t[d]=new Array),t[d].length>0&&(E=t[d][t[d].length-1],E.isLastNode=!1),t[d].splice(t[d].length,0,n),n.isLastNode=!0,n.isFirstNode=1==t[d].length):t.isFirstNode&&o==k.move.TYPE_PREV?(c[d].splice(y,0,n),E=t,E.isFirstNode=!1,n.parentTId=t.parentTId,n.isFirstNode=!0,n.isLastNode=!1):t.isLastNode&&o==k.move.TYPE_NEXT?(c[d].splice(y+1,0,n),E=t,E.isLastNode=!1,n.parentTId=t.parentTId,n.isFirstNode=!1,n.isLastNode=!0):(o==k.move.TYPE_PREV?c[d].splice(y,0,n):c[d].splice(y+1,0,n),n.parentTId=t.parentTId,n.isFirstNode=!1,n.isLastNode=!1),C.fixPIdKeyValue(e,n),C.setSonNodeLevel(e,n.getParentNode(),n),m.setNodeLineIcos(e,n),m.repairNodeLevelClass(e,n,I),!e.data.keep.parent&&s[d].length<1){s.isParent=!1,s.open=!1;var w=T(s,k.id.UL,e),S=T(s,k.id.SWITCH,e),P=T(s,k.id.ICON,e);m.replaceSwitchClass(s,S,k.folder.DOCU),m.replaceIcoClass(s,P,k.folder.DOCU),w.css("display","none")}else b&&m.setNodeLineIcos(e,b);E&&m.setNodeLineIcos(e,E),e.check&&e.check.enable&&m.repairChkClass&&(m.repairChkClass(e,s),m.repairParentChkClassWithSelf(e,s),s!=n.parent&&m.repairParentChkClassWithSelf(e,n)),r||m.expandCollapseParentNode(e,n.getParentNode(),!0,a)}},removeEditBtn:function(e,t){T(t,k.id.EDIT,e).unbind().remove()},removeRemoveBtn:function(e,t){T(t,k.id.REMOVE,e).unbind().remove()},removeTreeDom:function(e,t){t.isHover=!1,m.removeEditBtn(e,t),m.removeRemoveBtn(e,t),N.apply(e.view.removeHoverDom,[e.treeId,t])},repairNodeLevelClass:function(e,t,n){if(n!==t.level){var o=T(t,e),a=T(t,k.id.A,e),r=T(t,k.id.UL,e),i=k.className.LEVEL+n,d=k.className.LEVEL+t.level;o.removeClass(i),o.addClass(d),a.removeClass(i),a.addClass(d),r.removeClass(i),r.addClass(d)}},selectNodes:function(e,t){for(var n=0,o=t.length;o>n;n++)m.selectNode(e,t[n],n>0)}},f={tools:g,view:p,event:u,data:c};e.extend(!0,e.fn.zTree.consts,t),e.extend(!0,e.fn.zTree._z,f);var v=e.fn.zTree,N=v._z.tools,k=v.consts,m=v._z.view,C=v._z.data,T=(v._z.event,N.$);C.exSetting(n),C.addInitBind(r),C.addInitUnBind(i),C.addInitCache(a),C.addInitNode(s),C.addInitProxy(d),C.addInitRoot(o),C.addZTreeTools(l);var y=m.cancelPreSelectedNode;m.cancelPreSelectedNode=function(e,t){for(var n=C.getRoot(e).curSelectedList,o=0,a=n.length;a>o&&(t&&t!==n[o]||(m.removeTreeDom(e,n[o]),!t));o++);y&&y.apply(m,arguments)};var b=m.createNodes;m.createNodes=function(e,t,n,o){b&&b.apply(m,arguments),n&&m.repairParentChkClassWithSelf&&m.repairParentChkClassWithSelf(e,o)};var E=m.makeNodeUrl;m.makeNodeUrl=function(e){return e.edit.enable?null:E.apply(m,arguments)};var I=m.removeNode;m.removeNode=function(e,t){var n=C.getRoot(e);n.curEditNode===t&&(n.curEditNode=null),I&&I.apply(m,arguments)};var w=m.selectNode;m.selectNode=function(e,t){var n=C.getRoot(e);return C.isSelectedNode(e,t)&&n.curEditNode==t&&t.editNameFlag?!1:(w&&w.apply(m,arguments),m.addHoverDom(e,t),!0)};var S=N.uCanDo;N.uCanDo=function(e,t){var n=C.getRoot(e);return t&&(N.eqs(t.type,"mouseover")||N.eqs(t.type,"mouseout")||N.eqs(t.type,"mousedown")||N.eqs(t.type,"mouseup"))?!0:(n.curEditNode&&(m.editNodeBlur=!1,n.curEditInput.focus()),!n.curEditNode&&(S?S.apply(m,arguments):!0))}}(jQuery);
;///platform/component/ztree/jquery.ztree.js
!function(e){function t(t){return e.fn.zTree.getZTreeObj(t)}function n(t){if(t&&0!=t.length){var n="";return e(t).each(function(){n+=this.id+","}),n.substring(0,n.length-1)}}function o(t,n){if(n=void 0==n?!1:1==n,t&&0!=t.length){var o="";return e(t).each(n?function(){o+=d(this)+","}:function(){o+=this.name+","}),o.substring(0,o.length-1)}}function d(e){for(var t=e.name,n=e.getParentNode();n;)t=n.name+"-"+t,n=n.getParentNode();return t}e.hz.ztree={init:function(t,n){var o=e("#"+t);if(0!=o.size()){o.addClass("ztree");var d={data:{simpleData:{enable:!1},key:{children:"nodes"}}},i=e.extend(d,n);if(i.check&&!i.check.chkboxType&&(i.check.chkboxType={Y:"",N:""}),i.isDropdown){var r=i.width?i.width:"163",a=parseInt(r)/4-16,c=i.required?" required":"",l=i.name?i.name:"",s=o.wrap("<div id='"+t+"Background' style='z-index:50000;display:none;position:absolute;height:200px;width:"+r+"px;background-color:white;border:1px solid #CCCCCC;'></div>").parent();s.before("<input id='"+t+"_value' type='hidden' name='"+l+"'/>"),s.before("<input id='"+t+"_name' class='inputStyle"+c+"'  type='text' onclick=\"$.hz.ztree.showDropdownTree('"+t+"')\" readonly value='' style='width:"+r+"px'/>"),o.wrap("<div style='background-color:white;z-index:50000;position:absolute;height:170px; width:"+r+"px; overflow-y:auto;overflow-x:auto;'></div>");var h=[];h.push("<div style='border:1px solid #CCCCCC;background-color:#EEEEEE;z-index:50000;width:"+r+"px;height:30px;position:absolute;bottom:-1px;left:-1px'>"),h.push("<a class='button btnBlue' style='height: 11px; width: 35px;cursor: pointer; position: absolute;left: "+a+"px;' onclick=\"$.hz.ztree.hideDropdownTree('"+t+"',"+i.showParentName+')"></a>'),h.push("<a class='button' style='height: 11px; width: 35px;cursor: pointer; position: absolute; right: "+a+"px;' onclick='javascript:$(\"#"+t+"Background\").hide()'></a>"),h.push("</div>"),s.append(h.join(""))}if(e.fn.zTree.init(o,i,i.nodes),i.checkValue){for(var u=i.checkValue.split(","),p=0;p<u.length;p++)this.checkNodeWithId(t,u[p]);i.isDropdown&&this.hideDropdownTree(t,i.showParentName)}i.expandLevel&&!isNaN(i.expandLevel)&&this.expandNodeByLevel(t,i.expandLevel)}},getZTreeObj:function(e){return t(e)},expandAll:function(e,n){var o=t(e);o.expandAll(n)},expandNode:function(e,n,o,d,i,r){var a=t(e);a.expandNode(n,o,d,i,r)},expandNodeWithId:function(e,n){var o=t(e),d=o.getNodeByParam("id",n,null);d.isParent?o.expandNode(d,!0,!0,!1):o.expandNode(d.getParentNode(),!0,!0,!1)},checkAllNodes:function(e,n){var o=t(e);o.checkAllNodes(n)},checkNode:function(e,n,o,d,i){var r=t(e);r.checkNode(n,o,d,i)},checkNodeWithId:function(e,n){var o=t(e),d=o.getNodeByParam("id",n,null);o.checkNode(d,!0,!0,!1)},selectNode:function(e,n,o){var d=t(e);d.selectNode(n,o)},selectNodeWithId:function(e,n,o){var d=t(e),i=d.getNodeByParam("id",n,null);d.selectNode(i,o)},getCheckedNodes:function(e){var n=t(e);return n.getCheckedNodes(!0)},getSelectedNodes:function(e){var n=t(e);return n.getSelectedNodes()},getCheckedNodeIds:function(e){var o=t(e),d=o.getCheckedNodes(!0);return n(d)},getCheckedNodeNames:function(e,n){var d=t(e),i=d.getCheckedNodes(!0);return o(i,n)},getSelectedNodeIds:function(e){var o=t(e),d=o.getSelectedNodes();return n(d)},expandNodeByLevel:function(n,o){var d=t(n),i=d.getNodesByFilter(function(e){return e.level<o});e(i).each(function(){d.expandNode(this,!0,!1)})},showDropdownTree:function(t){var n=e("#"+t+"_name");this.checkAllNodes(t,!1);for(var o=e("#"+t+"_value").val(),d=o.split(","),i=0;i<d.length;i++)""!=d[i]&&this.checkNodeWithId(t,d[i]);var r=e("#"+t+"_name").position();e("#"+t+"Background").css({left:r.left+"px",top:r.top+n.outerHeight()+"px"}).slideDown("fast")},hideDropdownTree:function(t,n){var o=e("#"+t+"_name"),d=e("#"+t+"_value");o.val(""),d.val(""),o.prev("label").html(""),o.val(this.getCheckedNodeNames(t,n)),d.val(this.getCheckedNodeIds(t)),e("#"+t+"Background").fadeOut("fast")}}}(jQuery);
;///platform/component/layout/jquery.layout.js
!function($){$.fn.layout=function(opts){function keyDown(e){if(!e)return!0;var s=e.keyCode;if(33>s)return!0;var t,i,o,n,a,r={38:"north",40:"south",37:"west",39:"east"},l=s>=37&&40>=s,d=(e.altKey,e.shiftKey),f=e.ctrlKey,p=!1;return f||d?(l&&options[r[s]].enableCursorHotkey?p=r[s]:$.each(c.borderPanes.split(","),function(e,t){return i=options[t],o=i.customHotkey,n=i.customHotkeyModifier,(d&&"SHIFT"==n||f&&"CTRL"==n||f&&d)&&o&&s==(isNaN(o)||9>=o?o.toUpperCase().charCodeAt(0):o)?(p=t,!1):void 0}),p?(i=options[p],t=state[p],i.enableCursorHotkey&&!t.isHidden&&$Ps[p]?(a=e.target||e.srcElement,a&&d&&l&&("TEXTAREA"==a.tagName||"INPUT"==a.tagName&&(37==s||39==s))?!0:(toggle(p),e.stopPropagation(),e.returnValue=!1,!1)):!0):!0):!0}function allowOverflow(e){this&&this.tagName&&(e=this);var s;if(s="string"==typeof e?$Ps[e]:$(e).attr("pane")?$(e):$(e).parents("div[pane]:first"),s.length){var t=s.attr("pane"),i=state[t];if(i.cssSaved&&resetOverflow(t),i.isSliding||i.isResizing||i.isClosed)return void(i.cssSaved=!1);var o={zIndex:c.zIndex.pane_normal+1},n={},a=s.css("overflow"),r=s.css("overflowX"),l=s.css("overflowY");"visible"!=a&&(n.overflow=a,o.overflow="visible"),r&&"visible"!=r&&"auto"!=r&&(n.overflowX=r,o.overflowX="visible"),l&&"visible"!=l&&"auto"!=l&&(n.overflowY=r,o.overflowY="visible"),i.cssSaved=n,s.css(o),$.each(c.allPanes.split(","),function(e,s){s!=t&&resetOverflow(s)})}}function resetOverflow(e){this&&this.tagName&&(e=this);var s;if(s="string"==typeof e?$Ps[e]:$(e).hasClass("ui-layout-pane")?$(e):$(e).parents("div[pane]:first"),s.length){var t=s.attr("pane"),i=state[t],o=i.cssSaved||{};i.isSliding||i.isResizing||s.css("zIndex",c.zIndex.pane_normal),s.css(o),i.cssSaved=!1}}function getBtn(e,s,t){var i=$(e),o="Error Adding Button \n\nInvalid ";if(i.length){if(-1!=c.borderPanes.indexOf(s)){var n=options[s].buttonClass+"-"+t;return i.addClass(n+" "+n+"-"+s),i}alert(o+"pane: "+s)}else alert(o+"selector: "+e);return!1}function addToggleBtn(e,s){var t=getBtn(e,s,"toggle");t&&t.attr("title",state[s].isClosed?"Open":"Close").click(function(e){toggle(s),e.stopPropagation()})}function addOpenBtn(e,s){var t=getBtn(e,s,"open");t&&t.attr("title","Open").click(function(e){open(s),e.stopPropagation()})}function addCloseBtn(e,s){var t=getBtn(e,s,"close");t&&t.attr("title","Close").click(function(e){close(s),e.stopPropagation()})}function addPinBtn(e,s){var t=getBtn(e,s,"pin");if(t){var i=state[s];t.click(function(e){setPinState($(this),s,i.isSliding||i.isClosed),i.isSliding||i.isClosed?open(s):close(s),e.stopPropagation()}),setPinState(t,s,!i.isClosed&&!i.isSliding),c[s].pins.push(e)}}function syncPinBtns(e,s){$.each(c[e].pins,function(t,i){setPinState($(i),e,s)})}function setPinState(e,s,t){var i=e.attr("pin");if(!i||t!=("down"==i)){var o=options[s].buttonClass,n=o+"-pin",a=n+"-"+s,r=n+"-up",l=a+"-up",c=n+"-down",d=a+"-down";e.attr("pin",t?"down":"up").attr("title",t?"Un-Pin":"Pin").removeClass(t?r:c).removeClass(t?l:d).addClass(t?c:r).addClass(t?d:l)}}var prefix="ui-layout-",defaults={paneClass:prefix+"pane",resizerClass:prefix+"resizer",togglerClass:prefix+"toggler",togglerInnerClass:prefix+"",buttonClass:prefix+"button",contentSelector:"."+prefix+"content",contentIgnoreSelector:"."+prefix+"ignore"},options={name:"",scrollToBookmarkOnLoad:!0,defaults:{applyDefaultStyles:!1,closable:!0,resizable:!1,slidable:!0,contentSelector:defaults.contentSelector,contentIgnoreSelector:defaults.contentIgnoreSelector,paneClass:defaults.paneClass,resizerClass:defaults.resizerClass,togglerClass:defaults.togglerClass,buttonClass:defaults.buttonClass,resizerDragOpacity:1,maskIframesOnResize:!0,minSize:0,maxSize:0,spacing_open:7,spacing_closed:7,togglerLength_open:0,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerTip_open:"Close",togglerTip_closed:"Open",resizerTip:"Resize",sliderTip:"Slide Open",sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseout",hideTogglerOnSlide:!1,togglerContent_open:"",togglerContent_closed:"",showOverflowOnHover:!1,enableCursorHotkey:!1,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},initClosed:!1,initHidden:!1},north:{paneSelector:"."+prefix+"north",size:"auto",resizerCursor:"n-resize"},south:{paneSelector:"."+prefix+"south",size:"auto",resizerCursor:"s-resize"},east:{paneSelector:"."+prefix+"east",size:200,resizerCursor:"e-resize"},west:{paneSelector:"."+prefix+"west",size:200,resizerCursor:"w-resize"},center:{paneSelector:"."+prefix+"center"}},effects={slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}}},config={allPanes:"north,south,east,west,center",borderPanes:"north,south,east,west",zIndex:{resizer_normal:1,pane_normal:2,mask:4,sliding:100,resizing:1e4,animation:1e4},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden",zIndex:1},cssDef:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDef:{background:"#AAA"}},content:{cssReq:{overflow:"auto"},cssDef:{}},defaults:{cssReq:{position:"absolute",margin:0,zIndex:2},cssDef:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{edge:"top",sizeType:"height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{edge:"bottom",sizeType:"height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{edge:"right",sizeType:"width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{edge:"left",sizeType:"width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},state={id:Math.floor(1e4*Math.random()),container:{},north:{},south:{},east:{},west:{},center:{}},altEdge={top:"bottom",bottom:"top",left:"right",right:"left"},altSide={north:"south",south:"north",east:"west",west:"east"},isStr=function(e){if("string"==typeof e)return!0;if("object"==typeof e)try{var s=e.constructor.toString().match(/string/i);return null!==s}catch(t){}return!1},str=function(e){return"string"==typeof e||isStr(e)?$.trim(e):e},min=function(e,s){return Math.min(e,s)},max=function(e,s){return Math.max(e,s)},transformData=function(e){var s={defaults:{fxSettings:{}},north:{fxSettings:{}},south:{fxSettings:{}},east:{fxSettings:{}},west:{fxSettings:{}},center:{fxSettings:{}}};return e=e||{},e.effects||e.defaults||e.north||e.south||e.west||e.east||e.center?s=$.extend(s,e):$.each(e,function(e,t){a=e.split("__"),s[a[1]?a[0]:"defaults"][a[1]?a[1]:a[0]]=t}),s},setFlowCallback=function(e,s,t){function i(e){o=c[e],o.doCallback?(cpPane=o.callback.split(",")[1],cpPane!=e&&cpPane!=s&&i(cpPane,!0)):(o.doCallback=!0,o.callback=n)}var o,n=e+","+s+","+(t?1:0);$.each(c.borderPanes.split(","),function(e,s){return c[s].isMoving?(i(s),!1):void 0})},execFlowCallback=function(e){var s=c[e];if(c.isLayoutBusy=!1,delete s.isMoving,s.doCallback&&s.callback){s.doCallback=!1;var t=s.callback.split(","),i=t[2]>0?!0:!1;"open"==t[0]?open(t[1],i):"close"==t[0]&&close(t[1],i),s.doCallback||(s.callback=null)}},execUserCallback=function(pane,v_fn){if(v_fn){var fn;try{if("function"==typeof v_fn)fn=v_fn;else{if("string"!=typeof v_fn)return;if(v_fn.indexOf(",")>0){var args=v_fn.split(","),fn=eval(args[0]);if("function"==typeof fn&&args.length>1)return fn(args[1])}else fn=eval(v_fn)}if("function"==typeof fn)return fn(pane,$Ps[pane],$.extend({},state[pane]),$.extend({},options[pane]),options.name)}catch(ex){}}},cssNum=function(e,s){var t=0,i=!1,o="";return $.browser.msie||"none"==$.css(e[0],"display",!0)&&(i=!0,o=$.css(e[0],"visibility",!0),e.css({display:"block",visibility:"hidden"})),t=parseInt($.css(e[0],s,!0),10)||0,i&&(e.css({display:"none"}),o&&"hidden"!=o&&e.css({visibility:o})),t},cssW=function(e,s){var t;return isStr(e)?(e=str(e),t=$Ps[e]):t=$(e),0>=s?0:(s>0||(s=isStr(e)?getPaneSize(e):t.outerWidth()),$.boxModel?s-cssNum(t,"paddingLeft")-cssNum(t,"paddingRight")-("none"==$.css(t[0],"borderLeftStyle",!0)?0:cssNum(t,"borderLeftWidth"))-("none"==$.css(t[0],"borderRightStyle",!0)?0:cssNum(t,"borderRightWidth")):s)},cssH=function(e,s){var t;return isStr(e)?(e=str(e),t=$Ps[e]):t=$(e),0>=s?0:(s>0||(s=isStr(e)?getPaneSize(e):t.outerHeight()),$.boxModel?s-cssNum(t,"paddingTop")-cssNum(t,"paddingBottom")-("none"==$.css(t[0],"borderTopStyle",!0)?0:cssNum(t,"borderTopWidth"))-("none"==$.css(t[0],"borderBottomStyle",!0)?0:cssNum(t,"borderBottomWidth")):s)},cssSize=function(e,s){return"horz"==c[e].dir?cssH(e,s):cssW(e,s)},getPaneSize=function(e,s){var t=$Ps[e],i=options[e],o=state[e],n=s?i.spacing_open:0,a=s?i.spacing_closed:0;return!t||o.isHidden?0:o.isClosed||o.isSliding&&s?a:"horz"==c[e].dir?t.outerHeight()+n:t.outerWidth()+n},setPaneMinMaxSizes=function(e){var s,t,i=cDims,o=(c[e].edge,c[e].dir),n=options[e],a=state[e],r=($Ps[e],$Ps[altSide[e]]),l=n.spacing_open,d=options[altSide[e]].spacing_open,f=r?"horz"==o?r.outerHeight():r.outerWidth():0,p="horz"==o?i.innerHeight:i.innerWidth,u=p-l-f-d,g=a.minSize||0,h=Math.min(a.maxSize||9999,u);switch(e){case"north":s=i.offsetTop+g,t=i.offsetTop+h;break;case"west":s=i.offsetLeft+g,t=i.offsetLeft+h;break;case"south":s=i.offsetTop+i.innerHeight-h,t=i.offsetTop+i.innerHeight-g;break;case"east":s=i.offsetLeft+i.innerWidth-h,t=i.offsetLeft+i.innerWidth-g}$.extend(a,{minSize:g,maxSize:h,minPosition:s,maxPosition:t})},getPaneDims=function(){var d={top:getPaneSize("north",!0),bottom:getPaneSize("south",!0),left:getPaneSize("west",!0),right:getPaneSize("east",!0),width:0,height:0};with(d)width=cDims.innerWidth-left-right,height=cDims.innerHeight-bottom-top,top+=cDims.top,bottom+=cDims.bottom,left+=cDims.left,right+=cDims.right;return d},getElemDims=function(e){var s,t,i,o={};return $.each("Left,Right,Top,Bottom".split(","),function(){s=str(this),t=o["border"+s]=cssNum(e,"border"+s+"Width"),i=o["padding"+s]=cssNum(e,"padding"+s),o["offset"+s]=t+i,e==$Container&&(o[s.toLowerCase()]=$.boxModel?i:0)}),o.innerWidth=o.outerWidth=e.outerWidth(),o.innerHeight=o.outerHeight=e.outerHeight(),$.boxModel&&(o.innerWidth-=o.offsetLeft+o.offsetRight,o.innerHeight-=o.offsetTop+o.offsetBottom),o},setTimer=function(e,s,t,i){var o=window.layout=window.layout||{},n=o.timers=o.timers||{},a="layout_"+state.id+"_"+e+"_"+s;n[a]||(n[a]=setTimeout(t,i))},clearTimer=function(e,s){var t=window.layout=window.layout||{},i=t.timers=t.timers||{},o="layout_"+state.id+"_"+e+"_"+s;return i[o]?(clearTimeout(i[o]),delete i[o],!0):!1},create=function(){if(initOptions(),initContainer(),initPanes(),initHandles(),initResizable(),sizeContent("all"),options.scrollToBookmarkOnLoad)with(self.location)hash&&replace(hash);initHotkeys()},initContainer=function(){try{if("BODY"==$Container[0].tagName)$("html").css({height:"100%",overflow:"hidden"}),$("body").css({position:"relative",height:"100%",overflow:"hidden",margin:0,padding:0,border:"none"});else{var e={overflow:"hidden"},s=$Container.css("position"),t=$Container.css("height");$Container.hasClass("ui-layout-pane")||((!s||"fixed,absolute,relative".indexOf(s)<0)&&(e.position="relative"),t&&"auto"!=t||(e.height="100%")),$Container.css(e)}}catch(i){}cDims=state.container=getElemDims($Container)},initHotkeys=function(){$.each(c.borderPanes.split(","),function(e,s){var t=options[s];return t.enableCursorHotkey||t.customHotkey?($(document).keydown(keyDown),!1):void 0})},initOptions=function(){opts=transformData(opts),opts.effects&&($.extend(effects,opts.effects),delete opts.effects),$.each("name,scrollToBookmarkOnLoad".split(","),function(e,s){void 0!==opts[s]?options[s]=opts[s]:void 0!==opts.defaults[s]&&(options[s]=opts.defaults[s],delete opts.defaults[s])}),$.each("paneSelector,resizerCursor,customHotkey".split(","),function(e,s){delete opts.defaults[s]}),$.extend(options.defaults,opts.defaults),c.center=$.extend(!0,{},c.defaults,c.center),$.extend(options.center,opts.center);var e=$.extend(!0,{},options.defaults,opts.defaults,options.center);$.each("paneClass,contentSelector,contentIgnoreSelector,applyDefaultStyles,showOverflowOnHover".split(","),function(s,t){options.center[t]=e[t]});var s=options.defaults;$.each(c.borderPanes.split(","),function(e,t){c[t]=$.extend(!0,{},c.defaults,c[t]),o=options[t]=$.extend(!0,{},options.defaults,options[t],opts.defaults,opts[t]),o.paneClass||(o.paneClass=defaults.paneClass),o.resizerClass||(o.resizerClass=defaults.resizerClass),o.togglerClass||(o.togglerClass=defaults.togglerClass),$.each(["_open","_close",""],function(e,i){var n="fxName"+i,a="fxSpeed"+i,r="fxSettings"+i;o[n]=opts[t][n]||opts[t].fxName||opts.defaults[n]||opts.defaults.fxName||o[n]||o.fxName||s[n]||s.fxName||"none";var l=o[n];"none"!=l&&$.effects&&$.effects[l]&&(effects[l]||o[r]||o.fxSettings)||(l=o[n]="none");var c=effects[l]||{},d=c.all||{},f=c[t]||{};o[r]=$.extend({},d,f,s.fxSettings||{},s[r]||{},o.fxSettings,o[r],opts.defaults.fxSettings,opts.defaults[r]||{},opts[t].fxSettings,opts[t][r]||{}),o[a]=opts[t][a]||opts[t].fxSpeed||opts.defaults[a]||opts.defaults.fxSpeed||o[a]||o[r].duration||o.fxSpeed||o.fxSettings.duration||s.fxSpeed||s.fxSettings.duration||f.duration||d.duration||"normal"})})},initPanes=function(){$.each(c.allPanes.split(","),function(){var e,s,t=str(this),i=options[t],o=state[t],n=(o.fx,c[t].dir),a="auto"==i.size||isNaN(i.size)?0:i.size,r=i.minSize||1,l=i.maxSize||9999,d=i.spacing_open||0,f=i.paneSelector,p=($.browser.msie&&$.browser.version<7,{});if($Cs[t]=!1,"#"===f.substr(0,1)?e=$Ps[t]=$Container.find(f+":first"):(e=$Ps[t]=$Container.children(f+":first"),e.length||(e=$Ps[t]=$Container.children("form:first").children(f+":first"))),!e.length)return $Ps[t]=!1,!0;switch(e.attr("pane",t).addClass(i.paneClass+" "+i.paneClass+"-"+t),"center"!=t&&(o.isClosed=!1,o.isSliding=!1,o.isResizing=!1,o.isHidden=!1,o.noRoom=!1,c[t].pins=[]),p=$.extend({visibility:"visible",display:"block"},c.defaults.cssReq,c[t].cssReq),i.applyDefaultStyles&&$.extend(p,c.defaults.cssDef,c[t].cssDef),e.css(p),p={},t){case"north":p.top=cDims.top,p.left=cDims.left,p.right=cDims.right;break;case"south":p.bottom=cDims.bottom,p.left=cDims.left,p.right=cDims.right;break;case"west":p.left=cDims.left;break;case"east":p.right=cDims.right;break;case"center":}if("horz"==n?((0===a||"auto"==a)&&(e.css({height:"auto"}),a=e.outerHeight()),a=max(a,r),a=min(a,l),a=min(a,cDims.innerHeight-d),p.height=max(1,cssH(t,a)),o.size=a,o.maxSize=l,o.minSize=max(r,a-p.height+1),e.css(p)):"vert"==n?((0===a||"auto"==a)&&(e.css({width:"auto","float":"left"}),a=e.outerWidth(),e.css({"float":"none"})),a=max(a,r),a=min(a,l),a=min(a,cDims.innerWidth-d),p.width=max(1,cssW(t,a)),o.size=a,o.maxSize=l,o.minSize=max(r,a-p.width+1),e.css(p),sizeMidPanes(t,null,!0)):"center"==t&&(e.css(p),sizeMidPanes("center",null,!0)),i.initClosed&&i.closable?(e.hide().addClass("closed"),o.isClosed=!0):i.initHidden||i.initClosed?(hide(t,!0),o.isHidden=!0):e.addClass("open"),i.showOverflowOnHover&&e.hover(allowOverflow,resetOverflow),i.contentSelector){if(s=$Cs[t]=e.children(i.contentSelector+":first"),!s.length)return $Cs[t]=!1,!0;s.css(c.content.cssReq),i.applyDefaultStyles&&s.css(c.content.cssDef),e.css({overflow:"hidden"})}})},initHandles=function(){$.each(c.borderPanes.split(","),function(){var e=str(this),s=options[e],t=state[e],i=s.resizerClass,o=s.togglerClass,n=$Ps[e];if($Rs[e]=!1,$Ts[e]=!1,n&&(s.closable||s.resizable)){var a,r,l=c[e].edge,d=n.is(":visible"),f=(d?s.spacing_open:s.spacing_closed,"-"+e),p=d?"-open":"-closed";a=$Rs[e]=$("<span></span>"),d&&s.resizable||!d&&s.slidable&&a.attr("title",s.sliderTip).css("cursor",s.sliderCursor),a.attr("id","#"==s.paneSelector.substr(0,1)?s.paneSelector.substr(1)+"-resizer":"").attr("resizer",e).css(c.resizers.cssReq).css(l,cDims[l]+getPaneSize(e)).addClass(i+" "+i+f+" "+i+p+" "+i+f+p).appendTo($Container),s.applyDefaultStyles&&a.css(c.resizers.cssDef),s.closable&&(r=$Ts[e]=$("<div></div>"),r.attr("id","#"==s.paneSelector.substr(0,1)?s.paneSelector.substr(1)+"-toggler":"").css(c.togglers.cssReq).attr("title",d?s.togglerTip_open:s.togglerTip_closed).click(function(s){toggle(e),s.stopPropagation()}).mouseover(function(e){e.stopPropagation()}).addClass(o+" "+o+f+" "+o+p+" "+o+f+p).appendTo(a),s.togglerContent_open&&$("<span>"+s.togglerContent_open+"</span>").addClass("content content-open").css("display",t.isClosed?"none":"block").appendTo(r),s.togglerContent_closed&&$("<span>"+s.togglerContent_closed+"</span>").addClass("content content-closed").css("display",t.isClosed?"block":"none").appendTo(r),s.applyDefaultStyles&&r.css(c.togglers.cssDef),d||bindStartSlidingEvent(e,!0))}}),sizeHandles("all",!0)},initResizable=function(){var e,s="function"==typeof $.fn.draggable;$.each(c.borderPanes.split(","),function(){var t=str(this),i=options[t],o=state[t];if(!s||!$Ps[t]||!i.resizable)return i.resizable=!1,!0;var n=i.resizerClass,a=n+"-drag",r=n+"-"+t+"-drag",l=n+"-dragging",d=n+"-"+t+"-dragging",f=!1,p=($Ps[t],$Rs[t]);o.isClosed||p.attr("title",i.resizerTip).css("cursor",i.resizerCursor),p.draggable({containment:$Container[0],axis:"horz"==c[t].dir?"y":"x",delay:200,distance:1,helper:"clone",opacity:i.resizerDragOpacity,zIndex:c.zIndex.resizing,start:function(){if(!1===execUserCallback(t,i.onresize_start))return!1;o.isResizing=!0,clearTimer(t,"closeSlider"),p.addClass(a+" "+r),f=!1;var s="east"==t||"south"==t?i.spacing_open:0;setPaneMinMaxSizes(t),o.minPosition-=s,o.maxPosition-=s,e="horz"==c[t].dir?"top":"left",$(i.maskIframesOnResize===!0?"iframe":i.maskIframesOnResize).each(function(){$('<div class="ui-layout-mask"/>').css({background:"#fff",opacity:"0.001",zIndex:9,position:"absolute",width:this.offsetWidth+"px",height:this.offsetHeight+"px"}).css($(this).offset()).appendTo(this.parentNode)})},drag:function(s,i){f||($(".ui-draggable-dragging").addClass(l+" "+d).children().css("visibility","hidden"),f=!0,o.isSliding&&$Ps[t].css("zIndex",c.zIndex.sliding)),i.position[e]<o.minPosition?i.position[e]=o.minPosition:i.position[e]>o.maxPosition&&(i.position[e]=o.maxPosition)},stop:function(e,s){var i,n,l=s.position;switch(p.removeClass(a+" "+r),t){case"north":i=l.top;break;case"west":i=l.left;break;case"south":i=cDims.outerHeight-l.top-p.outerHeight();break;case"east":i=cDims.outerWidth-l.left-p.outerWidth()}n=i-cDims[c[t].edge],sizePane(t,n),$("div.ui-layout-mask").remove(),o.isResizing=!1}})})},hide=function(e,s){var t=options[e],i=state[e],o=$Ps[e],n=$Rs[e];o&&!i.isHidden&&!1!==execUserCallback(e,t.onhide_start)&&(i.isSliding=!1,n&&n.hide(),s||i.isClosed?(i.isClosed=!0,i.isHidden=!0,o.hide(),sizeMidPanes("horz"==c[e].dir?"all":"center"),execUserCallback(e,t.onhide_end||t.onhide)):(i.isHiding=!0,close(e,!1)))},show=function(e,s){var t=options[e],i=state[e],o=$Ps[e],n=$Rs[e];o&&i.isHidden&&!1!==execUserCallback(e,t.onshow_start)&&(i.isSliding=!1,i.isShowing=!0,n&&t.spacing_open>0&&n.show(),s===!1?close(e,!0):open(e))},toggle=function(e){var s=state[e];s.isHidden?show(e):s.isClosed?open(e):close(e)},close=function(e,s,t){function i(){bindStartSlidingEvent(e,!0),z||execUserCallback(e,r.onclose_end||r.onclose),z&&execUserCallback(e,r.onshow_end||r.onshow),b&&execUserCallback(e,r.onhide_end||r.onhide),execFlowCallback(e)}var o=$Ps[e],n=$Rs[e],a=$Ts[e],r=options[e],l=state[e],d=!t&&!l.isClosed&&"none"!=r.fxName_close,f=c[e].edge,p=r.resizerClass,u=r.togglerClass,g="-"+e,h="-open",m="-sliding",v="-closed",z=l.isShowing,b=l.isHiding;return delete l.isShowing,delete l.isHiding,o&&(r.resizable||r.closable)&&(s||!l.isClosed||z)?c.isLayoutBusy?void setFlowCallback("close",e,s):void((z||!1!==execUserCallback(e,r.onclose_start))&&(c[e].isMoving=!0,c.isLayoutBusy=!0,l.isClosed=!0,b?l.isHidden=!0:z&&(l.isHidden=!1),syncPinBtns(e,!1),l.isSliding||sizeMidPanes("horz"==c[e].dir?"all":"center"),n&&(n.css(f,cDims[f]).removeClass(p+h+" "+p+g+h).removeClass(p+m+" "+p+g+m).addClass(p+v+" "+p+g+v),r.resizable&&n.draggable("disable").css("cursor","default").attr("title",""),a&&a.removeClass(u+h+" "+u+g+h).addClass(u+v+" "+u+g+v).attr("title",r.togglerTip_closed),sizeHandles()),d?(lockPaneForFX(e,!0),o.hide(r.fxName_close,r.fxSettings_close,r.fxSpeed_close,function(){lockPaneForFX(e,!1),l.isClosed&&i()})):(o.hide(),i()))):void 0},open=function(e,s,t){function i(){l.isSliding||sizeMidPanes("vert"==c[e].dir?"center":"all"),n&&(n.css(f,cDims[f]+getPaneSize(e)).removeClass(p+m+" "+p+g+m).addClass(p+h+" "+p+g+h).addClass(l.isSliding?p+v+" "+p+g+v:""),r.resizable?n.draggable("enable").css("cursor",r.resizerCursor).attr("title",r.resizerTip):n.css("cursor","default"),a&&a.removeClass(u+m+" "+u+g+m).addClass(u+h+" "+u+g+h).attr("title",r.togglerTip_open),sizeHandles("all")),sizeContent(e),syncPinBtns(e,!l.isSliding),execUserCallback(e,r.onopen_end||r.onopen),z&&execUserCallback(e,r.onshow_end||r.onshow),execFlowCallback(e)}var o=$Ps[e],n=$Rs[e],a=$Ts[e],r=options[e],l=state[e],d=!t&&l.isClosed&&"none"!=r.fxName_open,f=c[e].edge,p=r.resizerClass,u=r.togglerClass,g="-"+e,h="-open",m="-closed",v="-sliding",z=l.isShowing;return delete l.isShowing,o&&(r.resizable||r.closable)&&(l.isClosed||l.isSliding)?l.isHidden&&!z?void show(e,!0):c.isLayoutBusy?void setFlowCallback("open",e,s):void(!1!==execUserCallback(e,r.onopen_start)&&(c[e].isMoving=!0,c.isLayoutBusy=!0,l.isSliding&&!s&&bindStopSlidingEvents(e,!1),l.isClosed=!1,z&&(l.isHidden=!1),setPaneMinMaxSizes(e),l.size>l.maxSize&&o.css(c[e].sizeType,max(1,cssSize(e,l.maxSize))),bindStartSlidingEvent(e,!1),d?(lockPaneForFX(e,!0),o.show(r.fxName_open,r.fxSettings_open,r.fxSpeed_open,function(){lockPaneForFX(e,!1),l.isClosed||i()})):(o.show(),i()))):void 0},lockPaneForFX=function(e,s){var t=$Ps[e];s?(t.css({zIndex:c.zIndex.animation}),"south"==e?t.css({top:cDims.top+cDims.innerHeight-t.outerHeight()}):"east"==e&&t.css({left:cDims.left+cDims.innerWidth-t.outerWidth()})):(state[e].isSliding||t.css({zIndex:c.zIndex.pane_normal}),"south"==e?t.css({top:"auto"}):"east"==e&&t.css({left:"auto"}))},bindStartSlidingEvent=function(e,s){var t=options[e],i=$Rs[e],o=t.slideTrigger_open;i&&t.slidable&&("click"!=o&&"dblclick"!=o&&"mouseover"!=o&&(o="click"),i[s?"bind":"unbind"](o,slideOpen).css("cursor",s?t.sliderCursor:"default").attr("title",s?t.sliderTip:""))},bindStopSlidingEvents=function(e,s){function t(s){clearTimer(e,"closeSlider"),s.stopPropagation()}var i=options[e],o=state[e],n=i.slideTrigger_close,a=$Ps[e],r=$Rs[e];o.isSliding=s,clearTimer(e,"closeSlider"),a.css({zIndex:s?c.zIndex.sliding:c.zIndex.pane_normal}),r.css({zIndex:s?c.zIndex.sliding:c.zIndex.resizer_normal}),"click"!=n&&"mouseout"!=n&&(n="mouseout"),s?(a.bind(n,slideClosed),r.bind(n,slideClosed),(n="mouseout")&&(a.bind("mouseover",t),r.bind("mouseover",t))):(a.unbind(n),r.unbind(n),(n="mouseout")&&(a.unbind("mouseover"),r.unbind("mouseover"),clearTimer(e,"closeSlider")))},slideOpen=function(){var e=$(this).attr("resizer");state[e].isClosed&&(bindStopSlidingEvents(e,!0),open(e,!0))},slideClosed=function(){function e(){bindStopSlidingEvents(t,!1),o.isClosed||close(t)}var s=$(this),t=s.attr("pane")||s.attr("resizer"),i=options[t],o=state[t];o.isClosed||o.isResizing||("click"==i.slideTrigger_close?e():setTimer(t,"closeSlider",e,300))},sizePane=function(e,s){var t=c[e].edge,i=c[e].dir,o=options[e],n=state[e],a=$Ps[e],r=$Rs[e];setPaneMinMaxSizes(e),n.minSize=max(n.minSize,o.minSize),o.maxSize>0&&(n.maxSize=min(n.maxSize,o.maxSize)),s=max(s,n.minSize),s=min(s,n.maxSize),n.size=s,r.css(t,s+cDims[t]),a.css(c[e].sizeType,max(1,cssSize(e,s))),n.isSliding||sizeMidPanes("horz"==i?"all":"center"),sizeHandles(),sizeContent(e),execUserCallback(e,o.onresize_end||o.onresize)},sizeMidPanes=function(e,s,t){e&&"all"!=e||(e="east,west,center");var i=getPaneDims();s&&$.extend(i,s),$.each(e.split(","),function(){if($Ps[this]){var e=str(this),s=options[e],o=state[e],n=$Ps[e],a=$Rs[e],r=!0,l={};if("center"==e?(i=getPaneDims(),l=$.extend({},i),l.width=max(1,cssW(e,l.width)),l.height=max(1,cssH(e,l.height)),r=l.width>1&&l.height>1,$.browser.msie&&(!$.boxModel||$.browser.version<7)&&($Ps.north&&$Ps.north.css({width:cssW($Ps.north,cDims.innerWidth)}),$Ps.south&&$Ps.south.css({width:cssW($Ps.south,cDims.innerWidth)}))):(l.top=i.top,l.bottom=i.bottom,l.height=max(1,cssH(e,i.height)),r=l.height>1),r){if(n.css(l),o.noRoom){if(o.noRoom=!1,o.isHidden)return;show(e,!o.isClosed)}t||(sizeContent(e),execUserCallback(e,s.onresize_end||s.onresize))}else if(!o.noRoom){if(o.noRoom=!0,o.isHidden)return;t?(n.hide(),a&&a.hide()):hide(e)}}})},sizeContent=function(e){e&&"all"!=e||(e=c.allPanes),$.each(e.split(","),function(){if($Cs[this]){var e=str(this),s=options[e].contentIgnoreSelector,t=$Ps[e],i=$Cs[e],o=i[0],n=cssH(t);t.children().each(function(){if(this!=o){var e=$(this);s&&e.is(s)||(n-=e.outerHeight())}}),n>0&&(n=cssH(i,n)),1>n?i.hide():i.css({height:n}).show()}})},sizeHandles=function(e,s){e&&"all"!=e||(e=c.borderPanes),$.each(e.split(","),function(){var e=str(this),t=options[e],i=state[e],o=$Ps[e],n=$Rs[e],a=$Ts[e];if(o&&n&&(t.resizable||t.closable)){var r,l,d=c[e].dir,f=i.isClosed?"_closed":"_open",p=t["spacing"+f],u=t["togglerAlign"+f],g=t["togglerLength"+f];if(0==p)return void n.hide();if(i.noRoom||i.isHidden||n.show(),"horz"==d?(r=o.outerWidth(),n.css({width:max(1,cssW(n,r)),height:max(1,cssH(n,p)),left:cssNum(o,"left")})):(r=o.outerHeight(),n.css({height:max(1,cssH(n,r)),width:max(1,cssW(n,p)),top:cDims.top+getPaneSize("north",!0)})),a){if(0==g||i.isSliding&&t.hideTogglerOnSlide)return void a.hide();if(a.show(),!(g>0)||"100%"==g||g>r)g=r,l=0;else if("string"==typeof u)switch(u){case"top":case"left":l=0;break;case"bottom":case"right":l=r-g;break;case"middle":case"center":default:l=Math.floor((r-g)/2)}else{var h=parseInt(u);l=u>=0?h:r-g+h}var m=t.togglerContent_open?a.children(".content-open"):!1,v=t.togglerContent_closed?a.children(".content-closed"):!1,z=i.isClosed?v:m;if(m&&m.css("display",i.isClosed?"none":"block"),v&&v.css("display",i.isClosed?"block":"none"),"horz"==d){var b=cssW(a,g);a.css({width:max(0,b),height:max(1,cssH(a,p)),left:l}),z&&z.css("marginLeft",Math.floor((b-z.outerWidth())/2))}else{var C=cssH(a,g);a.css({height:max(0,C),width:max(1,cssW(a,p)),top:l}),z&&z.css("marginTop",Math.floor((C-z.outerHeight())/2))}}s&&t.initHidden&&(n.hide(),a&&a.hide())}})},resizeAll=function(){var e=cDims.innerWidth,s=cDims.innerHeight;cDims=state.container=getElemDims($Container);var t,i,o=cDims.innerHeight<s,n=cDims.innerWidth<e;(o||n)&&$.each(["south","north","east","west"],function(e,s){t=state[s],i=c[s].dir,!t.isClosed&&(o&&"horz"==i||n&&"vert"==i)&&(setPaneMinMaxSizes(s),t.size>t.maxSize&&sizePane(s,t.maxSize))}),sizeMidPanes("all"),sizeHandles("all")},$Container=$(this).css({overflow:"hidden"}),$Ps={},$Cs={},$Rs={},$Ts={},c=config,cDims=state.container;create();var rs={options:options,state:state,panes:$Ps,toggle:toggle,open:open,close:close,hide:hide,show:show,resizeContent:sizeContent,sizePane:sizePane,resizeAll:resizeAll,addToggleBtn:addToggleBtn,addOpenBtn:addOpenBtn,addCloseBtn:addCloseBtn,addPinBtn:addPinBtn,allowOverflow:allowOverflow,resetOverflow:resetOverflow,cssWidth:cssW,cssHeight:cssH};if(com.ue&&com.ue.hp){var _webosWin=com.ue.hp.getCurrentWindow();if(_webosWin){var key=_webosWin.id;if(key){var layoutRs;layoutMap?(layoutRs=layoutMap.containsKey(key)?layoutMap.get(key):new Array,layoutRs.push(rs)):(layoutMap=new Hashtable,layoutRs=new Array,layoutRs.push(rs)),layoutMap.put(key,layoutRs)}}}return rs}}(jQuery);
;///platform/component/ueditor/ueditor.config.js
!function(){function e(e,o){return r(e||self.document.URL||self.location.href,o||t())}function t(){var e=document.getElementsByTagName("script");return e[e.length-1].src}function r(e,t){var r=t;return/^(\/|\\\\)/.test(t)?r=/^.+?\w(\/|\\\\)/.exec(e)[0]+t.replace(/^(\/|\\\\)/,""):/^[a-z]+:/i.test(t)||(e=e.split("#")[0].split("?")[0].replace(/[^\\\/]+$/,""),r=e+""+t),o(r)}function o(e){var t=/^[a-z]+:\/\//.exec(e)[0],r=null,o=[];for(e=e.replace(t,"").split("?")[0].split("#")[0],e=e.replace(/\\/g,"/").split(/\//),e[e.length-1]="";e.length;)".."===(r=e.shift())?o.pop():"."!==r&&o.push(r);return t+o.join("/")}window.UEDITOR_HOME_URL||(window.UEDITOR_HOME_URL=com.ue.global.path+"/platform/component/ueditor/");var i=window.UEDITOR_HOME_URL||e();window.UEDITOR_CONFIG={UEDITOR_HOME_URL:i,serverUrl:com.ue.global.path+"/sys/ueditor/exec.do",toolbars:[["undo","redo","|","bold","italic","underline","fontborder","strikethrough","superscript","subscript","removeformat","formatmatch","autotypeset","blockquote","pasteplain","|","forecolor","backcolor","insertorderedlist","insertunorderedlist","selectall","cleardoc","|","rowspacingtop","rowspacingbottom","lineheight","|","customstyle","paragraph","fontfamily","fontsize","|","directionalityltr","directionalityrtl","indent","|","justifyleft","justifycenter","justifyright","justifyjustify","|","touppercase","tolowercase","|","link","unlink","anchor","|","imagenone","imageleft","imageright","imagecenter","|","simpleupload","insertimage","insertframe","pagebreak","template","background","|","horizontal","date","time","spechars","wordimage","|","inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols","|","searchreplace","help"]],zIndex:2e3,enableAutoSave:!1,sourceEditor:"textarea"},window.UE={getUEBasePath:e}}();
;///platform/component/ueditor/ueditor.all.js
!function(){function getListener(e,t,i){var n;return t=t.toLowerCase(),(n=e.__allListeners||i&&(e.__allListeners={}))&&(n[t]||i&&(n[t]=[]))}function getDomNode(e,t,i,n,o,r){var a,s=n&&e[t];for(!s&&(s=e[i]);!s&&(a=(a||e).parentNode);){if("BODY"==a.tagName||r&&!r(a))return null;s=a[i]}return s&&o&&!o(s)?getDomNode(s,t,i,!1,o):s}UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var baidu=window.baidu||{};window.baidu=baidu,window.UE=baidu.editor=window.UE||{},UE.plugins={},UE.commands={},UE.instants={},UE.I18N={},UE._customizeUI={},UE.version="1.4.3";var dom=UE.dom={},browser=UE.browser=function(){var e=navigator.userAgent.toLowerCase(),t=window.opera,i={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(e),opera:!!t&&t.version,webkit:e.indexOf(" applewebkit/")>-1,mac:e.indexOf("macintosh")>-1,quirks:"BackCompat"==document.compatMode};i.gecko="Gecko"==navigator.product&&!i.webkit&&!i.opera&&!i.ie;var n=0;if(i.ie){var o=e.match(/(?:msie\s([\w.]+))/),r=e.match(/(?:trident.*rv:([\w.]+))/);n=o&&r&&o[1]&&r[1]?Math.max(1*o[1],1*r[1]):o&&o[1]?1*o[1]:r&&r[1]?1*r[1]:0,i.ie11Compat=11==document.documentMode,i.ie9Compat=9==document.documentMode,i.ie8=!!document.documentMode,i.ie8Compat=8==document.documentMode,i.ie7Compat=7==n&&!document.documentMode||7==document.documentMode,i.ie6Compat=7>n||i.quirks,i.ie9above=n>8,i.ie9below=9>n,i.ie11above=n>10,i.ie11below=11>n}if(i.gecko){var a=e.match(/rv:([\d\.]+)/);a&&(a=a[1].split("."),n=1e4*a[0]+100*(a[1]||0)+1*(a[2]||0))}return/chrome\/(\d+\.\d)/i.test(e)&&(i.chrome=+RegExp.$1),/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(e)&&!/chrome/i.test(e)&&(i.safari=+(RegExp.$1||RegExp.$2)),i.opera&&(n=parseFloat(t.version())),i.webkit&&(n=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),i.version=n,i.isCompatible=!i.mobile&&(i.ie&&n>=6||i.gecko&&n>=10801||i.opera&&n>=9.5||i.air&&n>=1||i.webkit&&n>=522||!1),i}(),ie=browser.ie,webkit=browser.webkit,gecko=browser.gecko,opera=browser.opera,utils=UE.utils={each:function(e,t,i){if(null!=e)if(e.length===+e.length){for(var n=0,o=e.length;o>n;n++)if(t.call(i,e[n],n,e)===!1)return!1}else for(var r in e)if(e.hasOwnProperty(r)&&t.call(i,e[r],r,e)===!1)return!1},makeInstance:function(e){var t=new Function;return t.prototype=e,e=new t,t.prototype=null,e},extend:function(e,t,i){if(t)for(var n in t)i&&e.hasOwnProperty(n)||(e[n]=t[n]);return e},extend2:function(e){for(var t=arguments,i=1;i<t.length;i++){var n=t[i];for(var o in n)e.hasOwnProperty(o)||(e[o]=n[o])}return e},inherits:function(e,t){var i=e.prototype,n=utils.makeInstance(t.prototype);return utils.extend(n,i,!0),e.prototype=n,n.constructor=e},bind:function(e,t){return function(){return e.apply(t,arguments)}},defer:function(e,t,i){var n;return function(){i&&clearTimeout(n),n=setTimeout(e,t)}},indexOf:function(e,t,i){var n=-1;return i=this.isNumber(i)?i:0,this.each(e,function(e,o){return o>=i&&e===t?(n=o,!1):void 0}),n},removeItem:function(e,t){for(var i=0,n=e.length;n>i;i++)e[i]===t&&(e.splice(i,1),i--)},trim:function(e){return e.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(e){if(!e)return{};e=utils.isArray(e)?e:e.split(",");for(var t,i=0,n={};t=e[i++];)n[t.toUpperCase()]=n[t]=1;return n},unhtml:function(e,t){return e?e.replace(t||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(e,t){return t?e:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[e]}):""},html:function(e){return e?e.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function(e){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'","&nbsp;":" "}[e]}):""},cssStyleToDomStyle:function(){var e=document.createElement("div").style,t={"float":void 0!=e.cssFloat?"cssFloat":void 0!=e.styleFloat?"styleFloat":"float"};return function(e){return t[e]||(t[e]=e.toLowerCase().replace(/-./g,function(e){return e.charAt(1).toUpperCase()}))}}(),loadFile:function(){function e(e,i){try{for(var n,o=0;n=t[o++];)if(n.doc===e&&n.url==(i.src||i.href))return n}catch(r){return null}}var t=[];return function(i,n,o){var r=e(i,n);if(r)return void(r.ready?o&&o():r.funs.push(o));if(t.push({doc:i,url:n.src||n.href,funs:[o]}),!i.body){var a=[];for(var s in n)"tag"!=s&&a.push(s+'="'+n[s]+'"');return void i.write("<"+n.tag+" "+a.join(" ")+" ></"+n.tag+">")}if(!n.id||!i.getElementById(n.id)){var l=i.createElement(n.tag);delete n.tag;for(var s in n)l.setAttribute(s,n[s]);l.onload=l.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if(r=e(i,n),r.funs.length>0){r.ready=1;for(var t;t=r.funs.pop();)t()}l.onload=l.onreadystatechange=null}},l.onerror=function(){throw Error("The load "+(n.href||n.src)+" fails,check the url settings of file ueditor.config.js ")},i.getElementsByTagName("head")[0].appendChild(l)}}}(),isEmptyObject:function(e){if(null==e)return!0;if(this.isArray(e)||this.isString(e))return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},fixColor:function(e,t){if(/color/i.test(e)&&/rgba?/.test(t)){var i=t.split(",");if(i.length>3)return"";t="#";for(var n,o=0;n=i[o++];)n=parseInt(n.replace(/[^\d]/gi,""),10).toString(16),t+=1==n.length?"0"+n:n;t=t.toUpperCase()}return t},optCss:function(e){function t(e,t){if(!e)return"";var i=e.top,n=e.bottom,o=e.left,r=e.right,a="";if(i&&o&&n&&r)a+=";"+t+":"+(i==n&&n==o&&o==r?i:i==n&&o==r?i+" "+o:o==r?i+" "+o+" "+n:i+" "+r+" "+n+" "+o)+";";else for(var s in e)a+=";"+t+"-"+s+":"+e[s]+";";return a}var i,n;return e=e.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(e,t,o,r){if(1==r.split(" ").length)switch(t){case"padding":return!i&&(i={}),i[o]=r,"";case"margin":return!n&&(n={}),n[o]=r,"";case"border":return"initial"==r?"":e}return e}),e+=t(i,"padding")+t(n,"margin"),e.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(e,t){return t?t+";;":";"})},clone:function(e,t){var i;t=t||{};for(var n in e)e.hasOwnProperty(n)&&(i=e[n],"object"==typeof i?(t[n]=utils.isArray(i)?[]:{},utils.clone(e[n],t[n])):t[n]=i);return t},transUnitToPx:function(e){if(!/(pt|cm)/.test(e))return e;var t;switch(e.replace(/([\d.]+)(\w+)/,function(i,n,o){e=n,t=o}),t){case"cm":e=25*parseFloat(e);break;case"pt":e=Math.round(96*parseFloat(e)/72)}return e+(e?"px":"")},domReady:function(){function e(e){e.isReady=!0;for(var i;i=t.pop();i());}var t=[];return function(i,n){n=n||window;var o=n.document;i&&t.push(i),"complete"===o.readyState?e(o):(o.isReady&&e(o),browser.ie&&11!=browser.version?(!function(){if(!o.isReady){try{o.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e(o)}}(),n.attachEvent("onload",function(){e(o)})):(o.addEventListener("DOMContentLoaded",function(){o.removeEventListener("DOMContentLoaded",arguments.callee,!1),e(o)},!1),n.addEventListener("load",function(){e(o)},!1)))}}(),cssRule:browser.ie&&11!=browser.version?function(e,t,i){var n,o;return void 0===t||t&&t.nodeType&&9==t.nodeType?(i=t&&t.nodeType&&9==t.nodeType?t:i||document,n=i.indexList||(i.indexList={}),o=n[e],void 0!==o?i.styleSheets[o].cssText:void 0):(i=i||document,n=i.indexList||(i.indexList={}),o=n[e],""===t?void 0!==o?(i.styleSheets[o].cssText="",delete n[e],!0):!1:(void 0!==o?sheetStyle=i.styleSheets[o]:(sheetStyle=i.createStyleSheet("",o=i.styleSheets.length),n[e]=o),void(sheetStyle.cssText=t)))}:function(e,t,i){var n;return void 0===t||t&&t.nodeType&&9==t.nodeType?(i=t&&t.nodeType&&9==t.nodeType?t:i||document,n=i.getElementById(e),n?n.innerHTML:void 0):(i=i||document,n=i.getElementById(e),""===t?n?(n.parentNode.removeChild(n),!0):!1:void(n?n.innerHTML=t:(n=i.createElement("style"),n.id=e,n.innerHTML=t,i.getElementsByTagName("head")[0].appendChild(n))))},sort:function(e,t){t=t||function(e,t){return e.localeCompare(t)};for(var i=0,n=e.length;n>i;i++)for(var o=i,r=e.length;r>o;o++)if(t(e[i],e[o])>0){var a=e[i];e[i]=e[o],e[o]=a}return e},serializeParam:function(e){var t=[];for(var i in e)if("method"!=i&&"timeout"!=i&&"async"!=i)if("function"!=(typeof e[i]).toLowerCase()&&"object"!=(typeof e[i]).toLowerCase())t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));else if(utils.isArray(e[i]))for(var n=0;n<e[i].length;n++)t.push(encodeURIComponent(i)+"[]="+encodeURIComponent(e[i][n]));return t.join("&")},formatUrl:function(e){var t=e.replace(/&&/g,"&");return t=t.replace(/\?&/g,"?"),t=t.replace(/&$/g,""),t=t.replace(/&#/g,"#"),t=t.replace(/&+/g,"&")},isCrossDomainUrl:function(e){var t=document.createElement("a");return t.href=e,browser.ie&&(t.href=t.href),!(t.protocol==location.protocol&&t.hostname==location.hostname&&(t.port==location.port||"80"==t.port&&""==location.port||""==t.port&&"80"==location.port))},clearEmptyAttrs:function(e){for(var t in e)""===e[t]&&delete e[t];return e},str2json:function(e){return utils.isString(e)?window.JSON?JSON.parse(e):new Function("return "+utils.trim(e||""))():null},json2str:function(){function e(e){return/["\\\x00-\x1f]/.test(e)&&(e=e.replace(/["\\\x00-\x1f]/g,function(e){var t=o[e];return t?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})),'"'+e+'"'}function t(e){var t,i,n,o=["["],r=e.length;for(i=0;r>i;i++)switch(n=e[i],typeof n){case"undefined":case"function":case"unknown":break;default:t&&o.push(","),o.push(utils.json2str(n)),t=1}return o.push("]"),o.join("")}function i(e){return 10>e?"0"+e:e}function n(e){return'"'+e.getFullYear()+"-"+i(e.getMonth()+1)+"-"+i(e.getDate())+"T"+i(e.getHours())+":"+i(e.getMinutes())+":"+i(e.getSeconds())+'"'}if(window.JSON)return JSON.stringify;var o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(i){switch(typeof i){case"undefined":return"undefined";case"number":return isFinite(i)?String(i):"null";case"string":return e(i);case"boolean":return String(i);default:if(null===i)return"null";if(utils.isArray(i))return t(i);if(utils.isDate(i))return n(i);var o,r,a=["{"],s=utils.json2str;for(var l in i)if(Object.prototype.hasOwnProperty.call(i,l))switch(r=i[l],typeof r){case"undefined":case"unknown":case"function":break;default:o&&a.push(","),o=1,a.push(s(l)+":"+s(r))}return a.push("}"),a.join("")}}}()};utils.each(["String","Function","Array","Number","RegExp","Object","Date"],function(e){UE.utils["is"+e]=function(t){return Object.prototype.toString.apply(t)=="[object "+e+"]"}});var EventBase=UE.EventBase=function(){};EventBase.prototype={addListener:function(e,t){e=utils.trim(e).split(/\s+/);for(var i,n=0;i=e[n++];)getListener(this,i,!0).push(t)},on:function(e,t){return this.addListener(e,t)},off:function(e,t){return this.removeListener(e,t)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(e,t){e=utils.trim(e).split(/\s+/);for(var i,n=0;i=e[n++];)utils.removeItem(getListener(this,i)||[],t)},fireEvent:function(){var e=arguments[0];e=utils.trim(e).split(" ");for(var t,i=0;t=e[i++];){var n,o,r,a=getListener(this,t);if(a)for(r=a.length;r--;)if(a[r]){if(o=a[r].apply(this,arguments),o===!0)return o;void 0!==o&&(n=o)}(o=this["on"+t.toLowerCase()])&&(n=o.apply(this,arguments))}return n}};var dtd=dom.dtd=function(){function e(e){for(var t in e)e[t.toUpperCase()]=e[t];return e}var t=utils.extend2,i=e({isindex:1,fieldset:1}),n=e({input:1,button:1,select:1,textarea:1,label:1}),o=t(e({a:1}),n),r=t({iframe:1},o),a=e({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),s=e({ins:1,del:1,script:1,style:1}),l=t(e({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),s),d=t(e({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),l),c=t(e({p:1}),d),u=t(e({iframe:1}),d,n),m=e({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),f=t(e({a:0}),u),h=e({tr:1}),p=e({"#":1}),g=t(e({param:1}),m),v=t(e({form:1}),i,r,a,c),b=e({li:1,ol:1,ul:1}),y=e({style:1,script:1}),C=e({base:1,link:1,meta:1,title:1}),N=t(C,y),x=e({head:1,body:1}),w=e({html:1}),U=e({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),E=e({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return e({$nonBodyContent:t(w,x,C),$block:U,$inline:f,$inlineWithA:t(e({a:1}),f),$body:t(e({script:1,style:1}),U),$cdata:e({script:1,style:1}),$empty:E,$nonChild:e({iframe:1,textarea:1}),$listItem:e({dd:1,dt:1,li:1}),$list:e({ul:1,ol:1,dl:1}),$isNotEmpty:e({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:e({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:e({p:1,div:1}),$tableContent:e({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:e({pre:1,script:1,style:1,textarea:1}),html:x,head:N,style:p,script:p,body:v,base:{},link:{},meta:{},title:p,col:{},tr:e({td:1,th:1}),img:{},embed:{},colgroup:e({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:v,td:v,br:{},th:v,center:v,kbd:f,button:t(c,a),basefont:{},h5:f,h4:f,samp:f,h6:f,ol:b,h1:f,h3:f,option:p,h2:f,form:t(i,r,a,c),select:e({optgroup:1,option:1}),font:f,ins:f,menu:b,abbr:f,label:f,table:e({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:f,tfoot:h,cite:f,li:v,input:{},iframe:v,strong:f,textarea:p,noframes:v,big:f,small:f,span:e({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:f,dt:f,sub:f,optgroup:e({option:1}),param:{},bdo:f,"var":f,div:v,object:g,sup:f,dd:v,strike:f,area:{},dir:b,map:t(e({area:1,form:1,p:1}),i,s,a),applet:g,dl:e({dt:1,dd:1}),del:f,isindex:{},fieldset:t(e({legend:1}),m),thead:h,ul:b,acronym:f,b:f,a:t(e({a:1}),u),blockquote:t(e({td:1,tr:1,tbody:1,li:1}),v),caption:f,i:f,u:f,tbody:h,s:f,address:t(r,c),tt:f,legend:f,q:f,pre:t(l,o),p:t(e({a:1}),f),em:f,dfn:f})}(),attrFix=ie&&browser.version<9?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},styleBlock=utils.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]),domUtils=dom.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ie&&"6"==browser.version?"":"",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(e,t){if(e===t)return 0;var i,n=[e],o=[t];for(i=e;i=i.parentNode;){if(i===t)return 10;n.push(i)}for(i=t;i=i.parentNode;){if(i===e)return 20;o.push(i)}if(n.reverse(),o.reverse(),n[0]!==o[0])return 1;for(var r=-1;r++,n[r]===o[r];);for(e=n[r],t=o[r];e=e.nextSibling;)if(e===t)return 4;return 2},getNodeIndex:function(e,t){for(var i=e,n=0;i=i.previousSibling;)t&&3==i.nodeType?i.nodeType!=i.nextSibling.nodeType&&n++:n++;return n},inDoc:function(e,t){return 10==domUtils.getPosition(e,t)},findParent:function(e,t,i){if(e&&!domUtils.isBody(e))for(e=i?e:e.parentNode;e;){if(!t||t(e)||domUtils.isBody(e))return t&&!t(e)&&domUtils.isBody(e)?null:e;e=e.parentNode}return null},findParentByTagName:function(e,t,i,n){return t=utils.listToMap(utils.isArray(t)?t:[t]),domUtils.findParent(e,function(e){return t[e.tagName]&&!(n&&n(e))},i)},findParents:function(e,t,i,n){for(var o=t&&(i&&i(e)||!i)?[e]:[];e=domUtils.findParent(e,i);)o.push(e);return n?o:o.reverse()},insertAfter:function(e,t){return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)},remove:function(e,t){var i,n=e.parentNode;if(n){if(t&&e.hasChildNodes())for(;i=e.firstChild;)n.insertBefore(i,e);n.removeChild(e)}return e},getNextDomNode:function(e,t,i,n){return getDomNode(e,"firstChild","nextSibling",t,i,n)},getPreDomNode:function(e,t,i,n){return getDomNode(e,"lastChild","previousSibling",t,i,n)},isBookmarkNode:function(e){return 1==e.nodeType&&e.id&&/^_baidu_bookmark_/i.test(e.id)},getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getCommonAncestor:function(e,t){if(e===t)return e;for(var i=[e],n=[t],o=e,r=-1;o=o.parentNode;){if(o===t)return o;i.push(o)}for(o=t;o=o.parentNode;){if(o===e)return o;n.push(o)}for(i.reverse(),n.reverse();r++,i[r]===n[r];);return 0==r?null:i[r-1]},clearEmptySibling:function(e,t,i){function n(e,t){for(var i;e&&!domUtils.isBookmarkNode(e)&&(domUtils.isEmptyInlineElement(e)||!new RegExp("[^	\n\r"+domUtils.fillChar+"]").test(e.nodeValue));)i=e[t],domUtils.remove(e),e=i}!t&&n(e.nextSibling,"nextSibling"),!i&&n(e.previousSibling,"previousSibling")},split:function(e,t){var i=e.ownerDocument;if(browser.ie&&t==e.nodeValue.length){var n=i.createTextNode("");return domUtils.insertAfter(e,n)}var o=e.splitText(t);if(browser.ie8){var r=i.createTextNode("");domUtils.insertAfter(o,r),domUtils.remove(r)}return o},isWhitespace:function(e){return!new RegExp("[^ 	\n\r"+domUtils.fillChar+"]").test(e.nodeValue)},getXY:function(e){for(var t=0,i=0;e.offsetParent;)i+=e.offsetTop,t+=e.offsetLeft,e=e.offsetParent;return{x:t,y:i}},on:function(e,t,i){var n=utils.isArray(t)?t:utils.trim(t).split(/\s+/),o=n.length;if(o)for(;o--;)if(t=n[o],e.addEventListener)e.addEventListener(t,i,!1);else{i._d||(i._d={els:[]});var r=t+i.toString(),a=utils.indexOf(i._d.els,e);i._d[r]&&-1!=a||(-1==a&&i._d.els.push(e),i._d[r]||(i._d[r]=function(e){return i.call(e.srcElement,e||window.event)}),e.attachEvent("on"+t,i._d[r]))}e=null},un:function(e,t,i){var n=utils.isArray(t)?t:utils.trim(t).split(/\s+/),o=n.length;if(o)for(;o--;)if(t=n[o],e.removeEventListener)e.removeEventListener(t,i,!1);else{var r=t+i.toString();try{e.detachEvent("on"+t,i._d?i._d[r]:i)}catch(a){}if(i._d&&i._d[r]){var s=utils.indexOf(i._d.els,e);-1!=s&&i._d.els.splice(s,1),0==i._d.els.length&&delete i._d[r]}}},isSameElement:function(e,t){if(e.tagName!=t.tagName)return!1;var i=e.attributes,n=t.attributes;if(!ie&&i.length!=n.length)return!1;for(var o,r,a=0,s=0,l=0;o=i[l++];){if("style"==o.nodeName){if(o.specified&&a++,domUtils.isSameStyle(e,t))continue;return!1}if(ie){if(!o.specified)continue;a++,r=n.getNamedItem(o.nodeName)}else r=t.attributes[o.nodeName];if(!r.specified||o.nodeValue!=r.nodeValue)return!1}if(ie){for(l=0;r=n[l++];)r.specified&&s++;if(a!=s)return!1}return!0},isSameStyle:function(e,t){var i=e.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),n=t.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(browser.opera){if(i=e.style,n=t.style,i.length!=n.length)return!1;for(var o in i)if(!/^(\d+|csstext)$/i.test(o)&&i[o]!=n[o])return!1;return!0}if(!i||!n)return i==n;if(i=i.split(";"),n=n.split(";"),i.length!=n.length)return!1;for(var r,a=0;r=i[a++];)if(-1==utils.indexOf(n,r))return!1;return!0},isBlockElm:function(e){return 1==e.nodeType&&(dtd.$block[e.tagName]||styleBlock[domUtils.getComputedStyle(e,"display")])&&!dtd.$nonChild[e.tagName]},isBody:function(e){return e&&1==e.nodeType&&"body"==e.tagName.toLowerCase()},breakParent:function(e,t){var i,n,o,r=e,a=e;do{for(r=r.parentNode,n?(i=r.cloneNode(!1),i.appendChild(n),n=i,i=r.cloneNode(!1),i.appendChild(o),o=i):(n=r.cloneNode(!1),o=n.cloneNode(!1));i=a.previousSibling;)n.insertBefore(i,n.firstChild);for(;i=a.nextSibling;)o.appendChild(i);a=r}while(t!==r);return i=t.parentNode,i.insertBefore(n,t),i.insertBefore(o,t),i.insertBefore(e,o),domUtils.remove(t),e},isEmptyInlineElement:function(e){if(1!=e.nodeType||!dtd.$removeEmpty[e.tagName])return 0;for(e=e.firstChild;e;){if(domUtils.isBookmarkNode(e))return 0;if(1==e.nodeType&&!domUtils.isEmptyInlineElement(e)||3==e.nodeType&&!domUtils.isWhitespace(e))return 0;e=e.nextSibling}return 1},trimWhiteTextNode:function(e){function t(t){for(var i;(i=e[t])&&3==i.nodeType&&domUtils.isWhitespace(i);)e.removeChild(i)}t("firstChild"),t("lastChild")},mergeChild:function(e,t,i){for(var n,o=domUtils.getElementsByTagName(e,e.tagName.toLowerCase()),r=0;n=o[r++];)if(n.parentNode&&!domUtils.isBookmarkNode(n))if("span"!=n.tagName.toLowerCase())domUtils.isSameElement(e,n)&&domUtils.remove(n,!0);else{if(e===n.parentNode&&(domUtils.trimWhiteTextNode(e),1==e.childNodes.length)){e.style.cssText=n.style.cssText+";"+e.style.cssText,domUtils.remove(n,!0);continue}if(n.style.cssText=e.style.cssText+";"+n.style.cssText,i){var a=i.style;if(a){a=a.split(";");for(var s,l=0;s=a[l++];)n.style[utils.cssStyleToDomStyle(s.split(":")[0])]=s.split(":")[1]}}domUtils.isSameStyle(n,e)&&domUtils.remove(n,!0)}},getElementsByTagName:function(e,t,i){if(i&&utils.isString(i)){var n=i;i=function(e){return domUtils.hasClass(e,n)}}t=utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var o,r=[],a=0;o=t[a++];)for(var s,l=e.getElementsByTagName(o),d=0;s=l[d++];)(!i||i(s))&&r.push(s);return r},mergeToParent:function(e){for(var t=e.parentNode;t&&dtd.$removeEmpty[t.tagName];){if(t.tagName==e.tagName||"A"==t.tagName){if(domUtils.trimWhiteTextNode(t),"SPAN"==t.tagName&&!domUtils.isSameStyle(t,e)||"A"==t.tagName&&"SPAN"==e.tagName){if(t.childNodes.length>1||t!==e.parentNode){e.style.cssText=t.style.cssText+";"+e.style.cssText,t=t.parentNode;continue}t.style.cssText+=";"+e.style.cssText,"A"==t.tagName&&(t.style.textDecoration="underline")}if("A"!=t.tagName){t===e.parentNode&&domUtils.remove(e,!0);break}}t=t.parentNode}},mergeSibling:function(e,t,i){function n(e,t,i){var n;if((n=i[e])&&!domUtils.isBookmarkNode(n)&&1==n.nodeType&&domUtils.isSameElement(i,n)){for(;n.firstChild;)"firstChild"==t?i.insertBefore(n.lastChild,i.firstChild):i.appendChild(n.firstChild);domUtils.remove(n)}}!t&&n("previousSibling","firstChild",e),!i&&n("nextSibling","lastChild",e)},unSelectable:ie&&browser.ie9below||browser.opera?function(e){e.onselectstart=function(){return!1},e.onclick=e.onkeyup=e.onkeydown=function(){return!1},e.unselectable="on",e.setAttribute("unselectable","on");for(var t,i=0;t=e.all[i++];)switch(t.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:t.unselectable="on",e.setAttribute("unselectable","on")}}:function(e){e.style.MozUserSelect=e.style.webkitUserSelect=e.style.msUserSelect=e.style.KhtmlUserSelect="none"},removeAttributes:function(e,t){t=utils.isArray(t)?t:utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var i,n=0;i=t[n++];){switch(i=attrFix[i]||i){case"className":e[i]="";break;case"style":e.style.cssText="";var o=e.getAttributeNode("style");!browser.ie&&o&&e.removeAttributeNode(o)}e.removeAttribute(i)}},createElement:function(e,t,i){return domUtils.setAttributes(e.createElement(t),i)},setAttributes:function(e,t){for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];switch(i){case"class":e.className=n;break;case"style":e.style.cssText=e.style.cssText+";"+n;break;case"innerHTML":e[i]=n;break;case"value":e.value=n;break;default:e.setAttribute(attrFix[i]||i,n)}}return e},getComputedStyle:function(e,t){var i="width height top left";if(i.indexOf(t)>-1)return e["offset"+t.replace(/^\w/,function(e){return e.toUpperCase()})]+"px";if(3==e.nodeType&&(e=e.parentNode),browser.ie&&browser.version<9&&"font-size"==t&&!e.style.fontSize&&!dtd.$empty[e.tagName]&&!dtd.$nonChild[e.tagName]){var n=e.ownerDocument.createElement("span");n.style.cssText="padding:0;border:0;font-family:simsun;",n.innerHTML=".",e.appendChild(n);var o=n.offsetHeight;return e.removeChild(n),n=null,o+"px"}try{var r=domUtils.getStyle(e,t)||(window.getComputedStyle?domUtils.getWindow(e).getComputedStyle(e,"").getPropertyValue(t):(e.currentStyle||e.style)[utils.cssStyleToDomStyle(t)])}catch(a){return""}return utils.transUnitToPx(utils.fixColor(t,r))},removeClasses:function(e,t){t=utils.isArray(t)?t:utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var i,n=0,o=e.className;i=t[n++];)o=o.replace(new RegExp("\\b"+i+"\\b"),"");o=utils.trim(o).replace(/[ ]{2,}/g," "),o?e.className=o:domUtils.removeAttributes(e,["class"])},addClass:function(e,t){if(e){t=utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var i,n=0,o=e.className;i=t[n++];)new RegExp("\\b"+i+"\\b").test(o)||(o+=" "+i);e.className=utils.trim(o)}},hasClass:function(e,t){if(utils.isRegExp(t))return t.test(e.className);t=utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var i,n=0,o=e.className;i=t[n++];)if(!new RegExp("\\b"+i+"\\b","i").test(o))return!1;return n-1==t.length},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},removeStyle:function(e,t){browser.ie?("color"==t&&(t="(^|;)"+t),e.style.cssText=e.style.cssText.replace(new RegExp(t+"[^:]*:[^;]+;?","ig"),"")):e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(utils.cssStyleToDomStyle(t)),e.style.cssText||domUtils.removeAttributes(e,["style"])},getStyle:function(e,t){var i=e.style[utils.cssStyleToDomStyle(t)];return utils.fixColor(t,i)},setStyle:function(e,t,i){e.style[utils.cssStyleToDomStyle(t)]=i,utils.trim(e.style.cssText)||this.removeAttributes(e,"style")},setStyles:function(e,t){for(var i in t)t.hasOwnProperty(i)&&domUtils.setStyle(e,i,t[i])},removeDirtyAttr:function(e){for(var t,i=0,n=e.getElementsByTagName("*");t=n[i++];)t.removeAttribute("_moz_dirty");e.removeAttribute("_moz_dirty")},getChildCount:function(e,t){var i=0,n=e.firstChild;for(t=t||function(){return 1};n;)t(n)&&i++,n=n.nextSibling;return i},isEmptyNode:function(e){return!e.firstChild||0==domUtils.getChildCount(e,function(e){return!domUtils.isBr(e)&&!domUtils.isBookmarkNode(e)&&!domUtils.isWhitespace(e)})},clearSelectedArr:function(e){for(var t;t=e.pop();)domUtils.removeAttributes(t,["class"])},scrollToView:function(e,t,i){var n=function(){var e=t.document,i="CSS1Compat"==e.compatMode;return{width:(i?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(i?e.documentElement.clientHeight:e.body.clientHeight)||0}},o=function(e){if("pageXOffset"in e)return{x:e.pageXOffset||0,y:e.pageYOffset||0};var t=e.document;return{x:t.documentElement.scrollLeft||t.body.scrollLeft||0,y:t.documentElement.scrollTop||t.body.scrollTop||0}},r=n().height,a=-1*r+i;a+=e.offsetHeight||0;var s=domUtils.getXY(e);a+=s.y;var l=o(t).y;(a>l||l-r>a)&&t.scrollTo(0,a+(0>a?-20:20))},isBr:function(e){return 1==e.nodeType&&"BR"==e.tagName},isFillChar:function(e,t){if(3!=e.nodeType)return!1;var i=e.nodeValue;return t?new RegExp("^"+domUtils.fillChar).test(i):!i.replace(new RegExp(domUtils.fillChar,"g"),"").length},isStartInblock:function(e){var t,i=e.cloneRange(),n=0,o=i.startContainer;if(1==o.nodeType&&o.childNodes[i.startOffset]){o=o.childNodes[i.startOffset];for(var r=o.previousSibling;r&&domUtils.isFillChar(r);)o=r,r=r.previousSibling}for(this.isFillChar(o,!0)&&1==i.startOffset&&(i.setStartBefore(o),o=i.startContainer);o&&domUtils.isFillChar(o);)t=o,o=o.previousSibling;for(t&&(i.setStartBefore(t),o=i.startContainer),1==o.nodeType&&domUtils.isEmptyNode(o)&&1==i.startOffset&&i.setStart(o,0).collapse(!0);!i.startOffset;){if(o=i.startContainer,domUtils.isBlockElm(o)||domUtils.isBody(o)){n=1;break}var a,r=i.startContainer.previousSibling;if(r){for(;r&&domUtils.isFillChar(r);)a=r,r=r.previousSibling;i.setStartBefore(a?a:i.startContainer)}else i.setStartBefore(i.startContainer)}return n&&!domUtils.isBody(i.startContainer)?1:0},isEmptyBlock:function(e,t){if(1!=e.nodeType)return 0;if(t=t||new RegExp("[ 	\r\n"+domUtils.fillChar+"]","g"),e[browser.ie?"innerText":"textContent"].replace(t,"").length>0)return 0;for(var i in dtd.$isNotEmpty)if(e.getElementsByTagName(i).length)return 0;return 1},setViewportOffset:function(e,t){var i=0|parseInt(e.style.left),n=0|parseInt(e.style.top),o=e.getBoundingClientRect(),r=t.left-o.left,a=t.top-o.top;r&&(e.style.left=i+r+"px"),a&&(e.style.top=n+a+"px")},fillNode:function(e,t){var i=browser.ie?e.createTextNode(domUtils.fillChar):e.createElement("br");t.innerHTML="",t.appendChild(i)},moveChild:function(e,t,i){for(;e.firstChild;)i&&t.firstChild?t.insertBefore(e.lastChild,t.firstChild):t.appendChild(e.firstChild)},hasNoAttributes:function(e){return browser.ie?/^<\w+\s*?>/.test(e.outerHTML):0==e.attributes.length},isCustomeNode:function(e){return 1==e.nodeType&&e.getAttribute("_ue_custom_node_")},isTagNode:function(e,t){return 1==e.nodeType&&new RegExp("\\b"+e.tagName+"\\b","i").test(t)},filterNodeList:function(e,t,i){var n=[];if(!utils.isFunction(t)){var o=t;t=function(e){return-1!=utils.indexOf(utils.isArray(o)?o:o.split(" "),e.tagName.toLowerCase())}}return utils.each(e,function(e){t(e)&&n.push(e)}),0==n.length?null:1!=n.length&&i?n:n[0]},isInNodeEndBoundary:function(e,t){var i=e.startContainer;if(3==i.nodeType&&e.startOffset!=i.nodeValue.length)return 0;if(1==i.nodeType&&e.startOffset!=i.childNodes.length)return 0;for(;i!==t;){if(i.nextSibling)return 0;i=i.parentNode}return 1},isBoundaryNode:function(e,t){for(var i;!domUtils.isBody(e);)if(i=e,e=e.parentNode,i!==e[t])return!1;return!0},fillHtml:browser.ie11below?"&nbsp;":"<br/>"},fillCharReg=new RegExp(domUtils.fillChar,"g");!function(){function e(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer===e.endContainer&&e.startOffset==e.endOffset}function t(e){return!e.collapsed&&1==e.startContainer.nodeType&&e.startContainer===e.endContainer&&e.endOffset-e.startOffset==1}function i(t,i,n,o){return 1==i.nodeType&&(dtd.$empty[i.tagName]||dtd.$nonChild[i.tagName])&&(n=domUtils.getNodeIndex(i)+(t?0:1),i=i.parentNode),t?(o.startContainer=i,o.startOffset=n,o.endContainer||o.collapse(!0)):(o.endContainer=i,o.endOffset=n,o.startContainer||o.collapse(!1)),e(o),o}function n(e,t){var i,n,o=e.startContainer,r=e.endContainer,a=e.startOffset,s=e.endOffset,l=e.document,d=l.createDocumentFragment();if(1==o.nodeType&&(o=o.childNodes[a]||(i=o.appendChild(l.createTextNode("")))),1==r.nodeType&&(r=r.childNodes[s]||(n=r.appendChild(l.createTextNode("")))),o===r&&3==o.nodeType)return d.appendChild(l.createTextNode(o.substringData(a,s-a))),t&&(o.deleteData(a,s-a),e.collapse(!0)),d;for(var c,u,m=d,f=domUtils.findParents(o,!0),h=domUtils.findParents(r,!0),p=0;f[p]==h[p];)p++;for(var g,v=p;g=f[v];v++){for(c=g.nextSibling,g==o?i||(3==e.startContainer.nodeType?(m.appendChild(l.createTextNode(o.nodeValue.slice(a))),t&&o.deleteData(a,o.nodeValue.length-a)):m.appendChild(t?o:o.cloneNode(!0))):(u=g.cloneNode(!1),m.appendChild(u));c&&c!==r&&c!==h[v];)g=c.nextSibling,m.appendChild(t?c:c.cloneNode(!0)),c=g;m=u}m=d,f[p]||(m.appendChild(f[p-1].cloneNode(!1)),m=m.firstChild);for(var b,v=p;b=h[v];v++){if(c=b.previousSibling,b==r?n||3!=e.endContainer.nodeType||(m.appendChild(l.createTextNode(r.substringData(0,s))),t&&r.deleteData(0,s)):(u=b.cloneNode(!1),m.appendChild(u)),v!=p||!f[p])for(;c&&c!==o;)b=c.previousSibling,m.insertBefore(t?c:c.cloneNode(!0),m.firstChild),c=b;m=u}return t&&e.setStartBefore(h[p]?f[p]?h[p]:f[p-1]:h[p-1]).collapse(!0),i&&domUtils.remove(i),n&&domUtils.remove(n),d}function o(e,t){try{if(a&&domUtils.inDoc(a,e))if(a.nodeValue.replace(fillCharReg,"").length)a.nodeValue=a.nodeValue.replace(fillCharReg,"");else{var i=a.parentNode;for(domUtils.remove(a);i&&domUtils.isEmptyInlineElement(i)&&(browser.safari?!(domUtils.getPosition(i,t)&domUtils.POSITION_CONTAINS):!i.contains(t));)a=i.parentNode,domUtils.remove(i),i=a}}catch(n){}}function r(e,t){var i;for(e=e[t];e&&domUtils.isFillChar(e);)i=e[t],domUtils.remove(e),e=i}var a,s=0,l=domUtils.fillChar,d=dom.Range=function(e){var t=this;t.startContainer=t.startOffset=t.endContainer=t.endOffset=null,t.document=e,t.collapsed=!0
};d.prototype={cloneContents:function(){return this.collapsed?null:n(this,0)},deleteContents:function(){var e;return this.collapsed||n(this,1),browser.webkit&&(e=this.startContainer,3!=e.nodeType||e.nodeValue.length||(this.setStartBefore(e).collapse(!0),domUtils.remove(e))),this},extractContents:function(){return this.collapsed?null:n(this,2)},setStart:function(e,t){return i(!0,e,t,this)},setEnd:function(e,t){return i(!1,e,t,this)},setStartAfter:function(e){return this.setStart(e.parentNode,domUtils.getNodeIndex(e)+1)},setStartBefore:function(e){return this.setStart(e.parentNode,domUtils.getNodeIndex(e))},setEndAfter:function(e){return this.setEnd(e.parentNode,domUtils.getNodeIndex(e)+1)},setEndBefore:function(e){return this.setEnd(e.parentNode,domUtils.getNodeIndex(e))},setStartAtFirst:function(e){return this.setStart(e,0)},setStartAtLast:function(e){return this.setStart(e,3==e.nodeType?e.nodeValue.length:e.childNodes.length)},setEndAtFirst:function(e){return this.setEnd(e,0)},setEndAtLast:function(e){return this.setEnd(e,3==e.nodeType?e.nodeValue.length:e.childNodes.length)},selectNode:function(e){return this.setStartBefore(e).setEndAfter(e)},selectNodeContents:function(e){return this.setStart(e,0).setEndAtLast(e)},cloneRange:function(){var e=this;return new d(e.document).setStart(e.startContainer,e.startOffset).setEnd(e.endContainer,e.endOffset)},collapse:function(e){var t=this;return e?(t.endContainer=t.startContainer,t.endOffset=t.startOffset):(t.startContainer=t.endContainer,t.startOffset=t.endOffset),t.collapsed=!0,t},shrinkBoundary:function(e){function t(e){return 1==e.nodeType&&!domUtils.isBookmarkNode(e)&&!dtd.$empty[e.tagName]&&!dtd.$nonChild[e.tagName]}for(var i,n=this,o=n.collapsed;1==n.startContainer.nodeType&&(i=n.startContainer.childNodes[n.startOffset])&&t(i);)n.setStart(i,0);if(o)return n.collapse(!0);if(!e)for(;1==n.endContainer.nodeType&&n.endOffset>0&&(i=n.endContainer.childNodes[n.endOffset-1])&&t(i);)n.setEnd(i,i.childNodes.length);return n},getCommonAncestor:function(e,i){var n=this,o=n.startContainer,r=n.endContainer;return o===r?e&&t(this)&&(o=o.childNodes[n.startOffset],1==o.nodeType)?o:i&&3==o.nodeType?o.parentNode:o:domUtils.getCommonAncestor(o,r)},trimBoundary:function(e){this.txtToElmBoundary();var t=this.startContainer,i=this.startOffset,n=this.collapsed,o=this.endContainer;if(3==t.nodeType){if(0==i)this.setStartBefore(t);else if(i>=t.nodeValue.length)this.setStartAfter(t);else{var r=domUtils.split(t,i);t===o?this.setEnd(r,this.endOffset-i):t.parentNode===o&&(this.endOffset+=1),this.setStartBefore(r)}if(n)return this.collapse(!0)}return e||(i=this.endOffset,o=this.endContainer,3==o.nodeType&&(0==i?this.setEndBefore(o):(i<o.nodeValue.length&&domUtils.split(o,i),this.setEndAfter(o)))),this},txtToElmBoundary:function(e){function t(e,t){var i=e[t+"Container"],n=e[t+"Offset"];3==i.nodeType&&(n?n>=i.nodeValue.length&&e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"After"](i):e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"Before"](i))}return(e||!this.collapsed)&&(t(this,"start"),t(this,"end")),this},insertNode:function(e){var t=e,i=1;11==e.nodeType&&(t=e.firstChild,i=e.childNodes.length),this.trimBoundary(!0);var n=this.startContainer,o=this.startOffset,r=n.childNodes[o];return r?n.insertBefore(e,r):n.appendChild(e),t.parentNode===this.endContainer&&(this.endOffset=this.endOffset+i),this.setStartBefore(t)},setCursor:function(e,t){return this.collapse(!e).select(t)},createBookmark:function(e,t){var i,n=this.document.createElement("span");return n.style.cssText="display:none;line-height:0px;",n.appendChild(this.document.createTextNode("")),n.id="_baidu_bookmark_start_"+(t?"":s++),this.collapsed||(i=n.cloneNode(!0),i.id="_baidu_bookmark_end_"+(t?"":s++)),this.insertNode(n),i&&this.collapse().insertNode(i).setEndBefore(i),this.setStartAfter(n),{start:e?n.id:n,end:i?e?i.id:i:null,id:e}},moveToBookmark:function(e){var t=e.id?this.document.getElementById(e.start):e.start,i=e.end&&e.id?this.document.getElementById(e.end):e.end;return this.setStartBefore(t),domUtils.remove(t),i?(this.setEndBefore(i),domUtils.remove(i)):this.collapse(!0),this},enlarge:function(e,t){var i,n,o=domUtils.isBody,r=this.document.createTextNode("");if(e){for(n=this.startContainer,1==n.nodeType?n.childNodes[this.startOffset]?i=n=n.childNodes[this.startOffset]:(n.appendChild(r),i=n=r):i=n;;){if(domUtils.isBlockElm(n)){for(n=i;(i=n.previousSibling)&&!domUtils.isBlockElm(i);)n=i;this.setStartBefore(n);break}i=n,n=n.parentNode}for(n=this.endContainer,1==n.nodeType?((i=n.childNodes[this.endOffset])?n.insertBefore(r,i):n.appendChild(r),i=n=r):i=n;;){if(domUtils.isBlockElm(n)){for(n=i;(i=n.nextSibling)&&!domUtils.isBlockElm(i);)n=i;this.setEndAfter(n);break}i=n,n=n.parentNode}r.parentNode===this.endContainer&&this.endOffset--,domUtils.remove(r)}if(!this.collapsed){for(;!(0!=this.startOffset||t&&t(this.startContainer)||o(this.startContainer));)this.setStartBefore(this.startContainer);for(;!(this.endOffset!=(1==this.endContainer.nodeType?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)||t&&t(this.endContainer)||o(this.endContainer));)this.setEndAfter(this.endContainer)}return this},enlargeToBlockElm:function(e){for(;!domUtils.isBlockElm(this.startContainer);)this.setStartBefore(this.startContainer);if(!e)for(;!domUtils.isBlockElm(this.endContainer);)this.setEndAfter(this.endContainer);return this},adjustmentBoundary:function(){if(!this.collapsed){for(;!domUtils.isBody(this.startContainer)&&this.startOffset==this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length&&this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length;)this.setStartAfter(this.startContainer);for(;!domUtils.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[3==this.endContainer.nodeType?"nodeValue":"childNodes"].length;)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(e,t,i){if(this.collapsed)return this;this.trimBoundary().enlarge(!1,function(e){return 1==e.nodeType&&domUtils.isBlockElm(e)}).adjustmentBoundary();for(var n,o,r=this.createBookmark(),a=r.end,s=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase():!domUtils.isWhitespace(e)},l=domUtils.getNextDomNode(r.start,!1,s),d=this.cloneRange();l&&domUtils.getPosition(l,a)&domUtils.POSITION_PRECEDING;)if(3==l.nodeType||dtd[e][l.tagName]){for(d.setStartBefore(l),n=l;n&&(3==n.nodeType||dtd[e][n.tagName])&&n!==a;)o=n,n=domUtils.getNextDomNode(n,1==n.nodeType,null,function(t){return dtd[e][t.tagName]});var c,u=d.setEndAfter(o).extractContents();if(i&&i.length>0){var m,f;f=m=i[0].cloneNode(!1);for(var h,p=1;h=i[p++];)m.appendChild(h.cloneNode(!1)),m=m.firstChild;c=m}else c=d.document.createElement(e);t&&domUtils.setAttributes(c,t),c.appendChild(u),d.insertNode(i?f:c);var g;if("span"==e&&t.style&&/text\-decoration/.test(t.style)&&(g=domUtils.findParentByTagName(c,"a",!0))?(domUtils.setAttributes(g,t),domUtils.remove(c,!0),c=g):(domUtils.mergeSibling(c),domUtils.clearEmptySibling(c)),domUtils.mergeChild(c,t),l=domUtils.getNextDomNode(c,!1,s),domUtils.mergeToParent(c),n===a)break}else l=domUtils.getNextDomNode(l,!0,s);return this.moveToBookmark(r)},removeInlineStyle:function(e){if(this.collapsed)return this;e=utils.isArray(e)?e:[e],this.shrinkBoundary().adjustmentBoundary();for(var t=this.startContainer,i=this.endContainer;;){if(1==t.nodeType){if(utils.indexOf(e,t.tagName.toLowerCase())>-1)break;if("body"==t.tagName.toLowerCase()){t=null;break}}t=t.parentNode}for(;;){if(1==i.nodeType){if(utils.indexOf(e,i.tagName.toLowerCase())>-1)break;if("body"==i.tagName.toLowerCase()){i=null;break}}i=i.parentNode}var n,o,r=this.createBookmark();t&&(o=this.cloneRange().setEndBefore(r.start).setStartBefore(t),n=o.extractContents(),o.insertNode(n),domUtils.clearEmptySibling(t,!0),t.parentNode.insertBefore(r.start,t)),i&&(o=this.cloneRange().setStartAfter(r.end).setEndAfter(i),n=o.extractContents(),o.insertNode(n),domUtils.clearEmptySibling(i,!1,!0),i.parentNode.insertBefore(r.end,i.nextSibling));for(var a,s=domUtils.getNextDomNode(r.start,!1,function(e){return 1==e.nodeType});s&&s!==r.end;)a=domUtils.getNextDomNode(s,!0,function(e){return 1==e.nodeType}),utils.indexOf(e,s.tagName.toLowerCase())>-1&&domUtils.remove(s,!0),s=a;return this.moveToBookmark(r)},getClosedNode:function(){var e;if(!this.collapsed){var i=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(t(i)){var n=i.startContainer.childNodes[i.startOffset];n&&1==n.nodeType&&(dtd.$empty[n.tagName]||dtd.$nonChild[n.tagName])&&(e=n)}}return e},select:browser.ie?function(e,t){var i;this.collapsed||this.shrinkBoundary();var n=this.getClosedNode();if(n&&!t){try{i=this.document.body.createControlRange(),i.addElement(n),i.select()}catch(s){}return this}var d,c=this.createBookmark(),u=c.start;if(i=this.document.body.createTextRange(),i.moveToElementText(u),i.moveStart("character",1),this.collapsed){if(!e&&3!=this.startContainer.nodeType){var m=this.document.createTextNode(l),f=this.document.createElement("span");f.appendChild(this.document.createTextNode(l)),u.parentNode.insertBefore(f,u),u.parentNode.insertBefore(m,u),o(this.document,m),a=m,r(f,"previousSibling"),r(u,"nextSibling"),i.moveStart("character",-1),i.collapse(!0)}}else{var h=this.document.body.createTextRange();d=c.end,h.moveToElementText(d),i.setEndPoint("EndToEnd",h)}this.moveToBookmark(c),f&&domUtils.remove(f);try{i.select()}catch(s){}return this}:function(e){function t(e){function t(t,i,n){3==t.nodeType&&t.nodeValue.length<i&&(e[n+"Offset"]=t.nodeValue.length)}t(e.startContainer,e.startOffset,"start"),t(e.endContainer,e.endOffset,"end")}var i,n=domUtils.getWindow(this.document),s=n.getSelection();if(browser.gecko?this.document.body.focus():n.focus(),s){if(s.removeAllRanges(),this.collapsed&&!e){var d=this.startContainer,c=d;1==d.nodeType&&(c=d.childNodes[this.startOffset]),3==d.nodeType&&this.startOffset||(c?c.previousSibling&&3==c.previousSibling.nodeType:d.lastChild&&3==d.lastChild.nodeType)||(i=this.document.createTextNode(l),this.insertNode(i),o(this.document,i),r(i,"previousSibling"),r(i,"nextSibling"),a=i,this.setStart(i,browser.webkit?1:0).collapse(!0))}var u=this.document.createRange();if(this.collapsed&&browser.opera&&1==this.startContainer.nodeType){var c=this.startContainer.childNodes[this.startOffset];if(c){for(;c&&domUtils.isBlockElm(c)&&1==c.nodeType&&c.childNodes[0];)c=c.childNodes[0];c&&this.setStartBefore(c).collapse(!0)}else c=this.startContainer.lastChild,c&&domUtils.isBr(c)&&this.setStartBefore(c).collapse(!0)}t(this),u.setStart(this.startContainer,this.startOffset),u.setEnd(this.endContainer,this.endOffset),s.addRange(u)}return this},scrollToView:function(e,t){e=e?window:domUtils.getWindow(this.document);var i=this,n=i.document.createElement("span");return n.innerHTML="&nbsp;",i.cloneRange().insertNode(n),domUtils.scrollToView(n,e,t),domUtils.remove(n),i},inFillChar:function(){var e=this.startContainer;return this.collapsed&&3==e.nodeType&&e.nodeValue.replace(new RegExp("^"+domUtils.fillChar),"").length+1==e.nodeValue.length?!0:!1},createAddress:function(e,t){function i(e){for(var i,n=e?o.startContainer:o.endContainer,r=domUtils.findParents(n,!0,function(e){return!domUtils.isBody(e)}),a=[],s=0;i=r[s++];)a.push(domUtils.getNodeIndex(i,t));var l=0;if(t)if(3==n.nodeType){for(var d=n.previousSibling;d&&3==d.nodeType;)l+=d.nodeValue.replace(fillCharReg,"").length,d=d.previousSibling;l+=e?o.startOffset:o.endOffset}else if(n=n.childNodes[e?o.startOffset:o.endOffset])l=domUtils.getNodeIndex(n,t);else{n=e?o.startContainer:o.endContainer;for(var c=n.firstChild;c;)if(domUtils.isFillChar(c))c=c.nextSibling;else if(l++,3==c.nodeType)for(;c&&3==c.nodeType;)c=c.nextSibling;else c=c.nextSibling}else l=e?domUtils.isFillChar(n)?0:o.startOffset:o.endOffset;return 0>l&&(l=0),a.push(l),a}var n={},o=this;return n.startAddress=i(!0),e||(n.endAddress=o.collapsed?[].concat(n.startAddress):i()),n},moveToAddress:function(e,t){function i(e,t){for(var i,o,r,a=n.document.body,s=0,l=e.length;l>s;s++)if(r=e[s],i=a,a=a.childNodes[r],!a){o=r;break}t?a?n.setStartBefore(a):n.setStart(i,o):a?n.setEndBefore(a):n.setEnd(i,o)}var n=this;return i(e.startAddress,!0),!t&&e.endAddress&&i(e.endAddress),n},equals:function(e){for(var t in this)if(this.hasOwnProperty(t)&&this[t]!==e[t])return!1;return!0},traversal:function(e,t){if(this.collapsed)return this;for(var i=this.createBookmark(),n=i.end,o=domUtils.getNextDomNode(i.start,!1,t);o&&o!==n&&domUtils.getPosition(o,n)&domUtils.POSITION_PRECEDING;){var r=domUtils.getNextDomNode(o,!1,t);e(o),o=r}return this.moveToBookmark(i)}}}(),function(){function e(e,t){var i=domUtils.getNodeIndex;e=e.duplicate(),e.collapse(t);var n=e.parentElement();if(!n.hasChildNodes())return{container:n,offset:0};for(var o,r,a=n.children,s=e.duplicate(),l=0,d=a.length-1,c=-1;d>=l;){c=Math.floor((l+d)/2),o=a[c],s.moveToElementText(o);var u=s.compareEndPoints("StartToStart",e);if(u>0)d=c-1;else{if(!(0>u))return{container:n,offset:i(o)};l=c+1}}if(-1==c){if(s.moveToElementText(n),s.setEndPoint("StartToStart",e),r=s.text.replace(/(\r\n|\r)/g,"\n").length,a=n.childNodes,!r)return o=a[a.length-1],{container:o,offset:o.nodeValue.length};for(var m=a.length;r>0;)r-=a[--m].nodeValue.length;return{container:a[m],offset:-r}}if(s.collapse(u>0),s.setEndPoint(u>0?"StartToStart":"EndToStart",e),r=s.text.replace(/(\r\n|\r)/g,"\n").length,!r)return dtd.$empty[o.tagName]||dtd.$nonChild[o.tagName]?{container:n,offset:i(o)+(u>0?0:1)}:{container:o,offset:u>0?0:o.childNodes.length};for(;r>0;)try{var f=o;o=o[u>0?"previousSibling":"nextSibling"],r-=o.nodeValue.length}catch(h){return{container:n,offset:i(f)}}return{container:o,offset:u>0?-r:o.nodeValue.length+r}}function t(t,i){if(t.item)i.selectNode(t.item(0));else{var n=e(t,!0);i.setStart(n.container,n.offset),0!=t.compareEndPoints("StartToEnd",t)&&(n=e(t,!1),i.setEnd(n.container,n.offset))}return i}function i(e){var t;try{t=e.getNative().createRange()}catch(i){return null}var n=t.item?t.item(0):t.parentElement();return(n.ownerDocument||n)===e.document?t:null}var n=dom.Selection=function(e){var t,n=this;n.document=e,browser.ie9below&&(t=domUtils.getWindow(e).frameElement,domUtils.on(t,"beforedeactivate",function(){n._bakIERange=n.getIERange()}),domUtils.on(t,"activate",function(){try{!i(n)&&n._bakIERange&&n._bakIERange.select()}catch(e){}n._bakIERange=null})),t=e=null};n.prototype={rangeInBody:function(e,t){var i=browser.ie9below||t?e.item?e.item():e.parentElement():e.startContainer;return i===this.document.body||domUtils.inDoc(i,this.document)},getNative:function(){var e=this.document;try{return e?browser.ie9below?e.selection:domUtils.getWindow(e).getSelection():null}catch(t){return null}},getIERange:function(){var e=i(this);return!e&&this._bakIERange?this._bakIERange:e},cache:function(){this.clear(),this._cachedRange=this.getRange(),this._cachedStartElement=this.getStart(),this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var e=this.getStart();return e?domUtils.findParents(e,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(browser.ie9below){var e=i(this);return!(!e||!this.rangeInBody(e))}return!!this.getNative().rangeCount}catch(t){return!1}},getRange:function(){function e(e){for(var t=i.document.body.firstChild,n=e.collapsed;t&&t.firstChild;)e.setStart(t,0),t=t.firstChild;e.startContainer||e.setStart(i.document.body,0),n&&e.collapse(!0)}var i=this;if(null!=i._cachedRange)return this._cachedRange;var n=new baidu.editor.dom.Range(i.document);if(browser.ie9below){var o=i.getIERange();if(o)try{t(o,n)}catch(r){e(n)}else e(n)}else{var a=i.getNative();if(a&&a.rangeCount){var s=a.getRangeAt(0),l=a.getRangeAt(a.rangeCount-1);n.setStart(s.startContainer,s.startOffset).setEnd(l.endContainer,l.endOffset),n.collapsed&&domUtils.isBody(n.startContainer)&&!n.startOffset&&e(n)}else{if(this._bakRange&&domUtils.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;e(n)}}return this._bakRange=n},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var e,t,i,n,o=browser.ie9below?this.getIERange():this.getRange();if(browser.ie9below){if(!o)return this.document.body.firstChild;if(o.item)return o.item(0);for(e=o.duplicate(),e.text.length>0&&e.moveStart("character",1),e.collapse(1),t=e.parentElement(),n=i=o.parentElement();i=i.parentNode;)if(i==t){t=n;break}}else if(o.shrinkBoundary(),t=o.startContainer,1==t.nodeType&&t.hasChildNodes()&&(t=t.childNodes[Math.min(t.childNodes.length-1,o.startOffset)]),3==t.nodeType)return t.parentNode;return t},getText:function(){var e,t;return this.isFocus()&&(e=this.getNative())?(t=browser.ie9below?e.createRange():e.getRangeAt(0),browser.ie9below?t.text:t.toString()):""},clearRange:function(){this.getNative()[browser.ie9below?"empty":"removeAllRanges"]()}}}(),function(){function e(e,t){var i;if(t.textarea)if(utils.isString(t.textarea)){for(var n,o=0,r=domUtils.getElementsByTagName(e,"textarea");n=r[o++];)if(n.id=="ueditor_textarea_"+t.options.textarea){i=n;break}}else i=t.textarea;i||(e.appendChild(i=domUtils.createElement(document,"textarea",{name:t.options.textarea,id:"ueditor_textarea_"+t.options.textarea,style:"display:none"})),t.textarea=i),!i.getAttribute("name")&&i.setAttribute("name",t.options.textarea),i.value=t.hasContents()?t.options.allHtmlEnabled?t.getAllHtml():t.getContent(null,null,!0):""}function t(e){for(var t in e)return t}function i(e){e.langIsReady=!0,e.fireEvent("langReady")}var n,o=0,r=UE.Editor=function(e){var n=this;n.uid=o++,EventBase.call(n),n.commands={},n.options=utils.extend(utils.clone(e||{}),UEDITOR_CONFIG,!0),n.shortcutkeys={},n.inputRules=[],n.outputRules=[],n.setOpt(r.defaultOptions(n)),n.loadServerConfig(),utils.isEmptyObject(UE.I18N)?utils.loadFile(document,{src:n.options.langPath+n.options.lang+"/"+n.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){UE.plugin.load(n),i(n)}):(n.options.lang=t(UE.I18N),UE.plugin.load(n),i(n)),UE.instants["ueditorInstant"+n.uid]=n};r.prototype={registerCommand:function(e,t){this.commands[e]=t},ready:function(e){var t=this;e&&(t.isReady?e.apply(t):t.addListener("ready",e))},setOpt:function(e,t){var i={};utils.isString(e)?i[e]=t:i=e,utils.extend(this.options,i,!0)},getOpt:function(e){return this.options[e]},destroy:function(){var e=this;e.fireEvent("destroy");var t=e.container.parentNode,i=e.textarea;i?i.style.display="":(i=document.createElement("textarea"),t.parentNode.insertBefore(i,t)),i.style.width=e.iframe.offsetWidth+"px",i.style.height=e.iframe.offsetHeight+"px",i.value=e.getContent(),i.id=e.key,t.innerHTML="",domUtils.remove(t);var n=e.key;for(var o in e)e.hasOwnProperty(o)&&delete this[o];UE.delEditor(n)},render:function(e){var t=this,i=t.options,n=function(t){return parseInt(domUtils.getComputedStyle(e,t))};if(utils.isString(e)&&(e=document.getElementById(e)),e){i.minFrameWidth=i.initialFrameWidth?i.initialFrameWidth:i.initialFrameWidth=e.offsetWidth,i.initialFrameHeight?i.minFrameHeight=i.initialFrameHeight:i.initialFrameHeight=i.minFrameHeight=e.offsetHeight,e.style.width=/%$/.test(i.initialFrameWidth)?"100%":i.initialFrameWidth-n("padding-left")-n("padding-right")+"px",e.style.height=/%$/.test(i.initialFrameHeight)?"100%":i.initialFrameHeight-n("padding-top")-n("padding-bottom")+"px",e.style.zIndex=i.zIndex;var o=(ie&&browser.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head><style type='text/css'>.view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\nbody{margin:8px;font-family:sans-serif;font-size:16px;}p{margin:5px 0;}</style>"+(i.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+utils.unhtml(i.iframeCssUrl)+"'/>":"")+(i.initialStyle?"<style>"+i.initialStyle+"</style>":"")+"</head><body class='view' ></body><script type='text/javascript' "+(ie?"defer='defer'":"")+" id='_initialScript'>setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant"+t.uid+"'];editor._setup(document);},0);var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);</script></html>";e.appendChild(domUtils.createElement(document,"iframe",{id:"ueditor_"+t.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(i.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+'document.write("'+o+'");document.close();}())'})),e.style.overflow="hidden",setTimeout(function(){/%$/.test(i.initialFrameWidth)&&(i.minFrameWidth=i.initialFrameWidth=e.offsetWidth),/%$/.test(i.initialFrameHeight)&&(i.minFrameHeight=i.initialFrameHeight=e.offsetHeight,e.style.height=i.initialFrameHeight+"px")})}},_setup:function(t){var i=this,n=i.options;ie?(t.body.disabled=!0,t.body.contentEditable=!0,t.body.disabled=!1):t.body.contentEditable=!0,t.body.spellcheck=!1,i.document=t,i.window=t.defaultView||t.parentWindow,i.iframe=i.window.frameElement,i.body=t.body,i.selection=new dom.Selection(t);var o;browser.gecko&&(o=this.selection.getNative())&&o.removeAllRanges(),this._initEvents();for(var r=this.iframe.parentNode;!domUtils.isBody(r);r=r.parentNode)if("FORM"==r.tagName){i.form=r,i.options.autoSyncData?domUtils.on(i.window,"blur",function(){e(r,i)}):domUtils.on(r,"submit",function(){e(this,i)});break}if(n.initialContent)if(n.autoClearinitialContent){var a=i.execCommand;i.execCommand=function(){return i.fireEvent("firstBeforeExecCommand"),a.apply(i,arguments)},this._setDefaultContent(n.initialContent)}else this.setContent(n.initialContent,!1,!0);domUtils.isEmptyNode(i.body)&&(i.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>"),n.focus&&setTimeout(function(){i.focus(i.options.focusInEnd),!i.options.autoClearinitialContent&&i._selectionChange()},0),i.container||(i.container=this.iframe.parentNode),n.fullscreen&&i.ui&&i.ui.setFullScreen(!0);try{i.document.execCommand("2D-position",!1,!1)}catch(s){}try{i.document.execCommand("enableInlineTableEditing",!1,!1)}catch(s){}try{i.document.execCommand("enableObjectResizing",!1,!1)}catch(s){}i._bindshortcutKeys(),i.isReady=1,i.fireEvent("ready"),n.onready&&n.onready.call(i),browser.ie9below||domUtils.on(i.window,["blur","focus"],function(e){if("blur"==e.type){i._bakRange=i.selection.getRange();try{i._bakNativeRange=i.selection.getNative().getRangeAt(0),i.selection.getNative().removeAllRanges()}catch(e){i._bakNativeRange=null}}else try{i._bakRange&&i._bakRange.select()}catch(e){}}),browser.gecko&&browser.version<=10902&&(i.body.contentEditable=!1,setTimeout(function(){i.body.contentEditable=!0},100),setInterval(function(){i.body.style.height=i.iframe.offsetHeight-20+"px"},100)),!n.isShow&&i.setHide(),n.readonly&&i.setDisabled()},sync:function(t){var i=this,n=t?document.getElementById(t):domUtils.findParent(i.iframe.parentNode,function(e){return"FORM"==e.tagName},!0);n&&e(n,i)},setHeight:function(e,t){e!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=e+"px"),!t&&(this.options.minFrameHeight=this.options.initialFrameHeight=e),this.body.style.height=e+"px",!t&&this.trigger("setHeight")},addshortcutkey:function(e,t){var i={};t?i[e]=t:i=e,utils.extend(this.shortcutkeys,i)},_bindshortcutKeys:function(){var e=this,t=this.shortcutkeys;e.addListener("keydown",function(i,n){var o=n.keyCode||n.which;for(var r in t)for(var a,s=t[r].split(","),l=0;a=s[l++];){a=a.split(":");var d=a[0],c=a[1];(/^(ctrl)(\+shift)?\+(\d+)$/.test(d.toLowerCase())||/^(\d+)$/.test(d))&&(("ctrl"==RegExp.$1?n.ctrlKey||n.metaKey:0)&&(""!=RegExp.$2?n[RegExp.$2.slice(1)+"Key"]:1)&&o==RegExp.$3||o==RegExp.$1)&&(-1!=e.queryCommandState(r,c)&&e.execCommand(r,c),domUtils.preventDefault(n))}})},getContent:function(e,t,i,n,o){var r=this;if(e&&utils.isFunction(e)&&(t=e,e=""),t?!t():!this.hasContents())return"";r.fireEvent("beforegetcontent");var a=UE.htmlparser(r.body.innerHTML,n);return r.filterOutputRule(a),r.fireEvent("aftergetcontent",e,a),a.toHtml(o)},getAllHtml:function(){var e=this,t=[];if(e.fireEvent("getAllHtml",t),browser.ie&&browser.version>8){var i="";utils.each(e.document.styleSheets,function(e){i+=e.href?'<link rel="stylesheet" type="text/css" href="'+e.href+'" />':"<style>"+e.cssText+"</style>"}),utils.each(e.document.getElementsByTagName("script"),function(e){i+=e.outerHTML})}return"<html><head>"+(e.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+e.options.charset+'"/>':"")+(i||e.document.getElementsByTagName("head")[0].innerHTML)+t.join("\n")+"</head><body "+(ie&&browser.version<9?'class="view"':"")+">"+e.getContent(null,null,!0)+"</body></html>"},getPlainTxt:function(){var e=new RegExp(domUtils.fillChar,"g"),t=this.body.innerHTML.replace(/[\n\r]/g,"");return t=t.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(e,t,i){return dtd.$block[i]?"\n":t?t:""}),t.replace(e,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var e=new RegExp(domUtils.fillChar,"g");return this.body[browser.ie?"innerText":"textContent"].replace(e,"").replace(/\u00a0/g," ")},setContent:function(t,i,n){function o(e){return"DIV"==e.tagName&&e.getAttribute("cdata_tag")}var r=this;r.fireEvent("beforesetcontent",t);var a=UE.htmlparser(t);if(r.filterInputRule(a),t=a.toHtml(),r.body.innerHTML=(i?r.body.innerHTML:"")+t,"p"==r.options.enterTag){var s,l=this.body.firstChild;if(!l||1==l.nodeType&&(dtd.$cdata[l.tagName]||o(l)||domUtils.isCustomeNode(l))&&l===this.body.lastChild)this.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML;else for(var d=r.document.createElement("p");l;){for(;l&&(3==l.nodeType||1==l.nodeType&&dtd.p[l.tagName]&&!dtd.$cdata[l.tagName]);)s=l.nextSibling,d.appendChild(l),l=s;if(d.firstChild){if(!l){r.body.appendChild(d);break}l.parentNode.insertBefore(d,l),d=r.document.createElement("p")}l=l.nextSibling}}r.fireEvent("aftersetcontent"),r.fireEvent("contentchange"),!n&&r._selectionChange(),r._bakRange=r._bakIERange=r._bakNativeRange=null;var c;browser.gecko&&(c=this.selection.getNative())&&c.removeAllRanges(),r.options.autoSyncData&&r.form&&e(r.form,r)},focus:function(e){try{var t=this,i=t.selection.getRange();if(e){var n=t.body.lastChild;n&&1==n.nodeType&&!dtd.$empty[n.tagName]&&(domUtils.isEmptyBlock(n)?i.setStartAtFirst(n):i.setStartAtLast(n),i.collapse(!0)),i.setCursor(!0)}else{if(!i.collapsed&&domUtils.isBody(i.startContainer)&&0==i.startOffset){var n=t.body.firstChild;n&&1==n.nodeType&&!dtd.$empty[n.tagName]&&i.setStartAtFirst(n).collapse(!0)}i.select(!0)}this.fireEvent("focus selectionchange")}catch(o){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var e=this.selection.getNative();if(e.empty&&browser.ie){var t=document.body.createTextRange();t.moveToElementText(document.body),t.collapse(!0),t.select(),e.empty()}else e.removeAllRanges()},_initEvents:function(){var e=this,t=e.document,i=e.window;e._proxyDomEvent=utils.bind(e._proxyDomEvent,e),domUtils.on(t,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],e._proxyDomEvent),domUtils.on(i,["focus","blur"],e._proxyDomEvent),domUtils.on(e.body,"drop",function(t){browser.gecko&&t.stopPropagation&&t.stopPropagation(),e.fireEvent("contentchange")}),domUtils.on(t,["mouseup","keydown"],function(t){"keydown"==t.type&&(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)||2!=t.button&&e._selectionChange(250,t)})},_proxyDomEvent:function(e){return this.fireEvent("before"+e.type.replace(/^on/,"").toLowerCase())===!1?!1:this.fireEvent(e.type.replace(/^on/,""),e)===!1?!1:this.fireEvent("after"+e.type.replace(/^on/,"").toLowerCase())},_selectionChange:function(e,t){var i,o,r=this,a=!1;if(browser.ie&&browser.version<9&&t&&"mouseup"==t.type){var s=this.selection.getRange();s.collapsed||(a=!0,i=t.clientX,o=t.clientY)}clearTimeout(n),n=setTimeout(function(){if(r.selection&&r.selection.getNative()){var e;if(a&&"None"==r.selection.getNative().type){e=r.document.body.createTextRange();try{e.moveToPoint(i,o)}catch(n){e=null}}var s;e&&(s=r.selection.getIERange,r.selection.getIERange=function(){return e}),r.selection.cache(),s&&(r.selection.getIERange=s),r.selection._cachedRange&&r.selection._cachedStartElement&&(r.fireEvent("beforeselectionchange"),r.fireEvent("selectionchange",!!t),r.fireEvent("afterselectionchange"),r.selection.clear())}},e||50)},_callCmdFn:function(e,t){var i,n,o=t[0].toLowerCase();return i=this.commands[o]||UE.commands[o],n=i&&i[e],i&&n||"queryCommandState"!=e?n?n.apply(this,t):void 0:0},execCommand:function(e){e=e.toLowerCase();var t,i=this,n=i.commands[e]||UE.commands[e];return n&&n.execCommand?(n.notNeedUndo||i.__hasEnterExecCommand?(t=this._callCmdFn("execCommand",arguments),!i.__hasEnterExecCommand&&!n.ignoreContentChange&&!i._ignoreContentChange&&i.fireEvent("contentchange")):(i.__hasEnterExecCommand=!0,-1!=i.queryCommandState.apply(i,arguments)&&(i.fireEvent("saveScene"),i.fireEvent.apply(i,["beforeexeccommand",e].concat(arguments)),t=this._callCmdFn("execCommand",arguments),i.fireEvent.apply(i,["afterexeccommand",e].concat(arguments)),i.fireEvent("saveScene")),i.__hasEnterExecCommand=!1),!i.__hasEnterExecCommand&&!n.ignoreContentChange&&!i._ignoreContentChange&&i._selectionChange(),t):null},queryCommandState:function(){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(e){if(e)for(var t,i=0;t=e[i++];)if(this.document.getElementsByTagName(t).length>0)return!0;if(!domUtils.isEmptyBlock(this.body))return!0;for(e=["div"],i=0;t=e[i++];)for(var n,o=domUtils.getElementsByTagName(this.document,t),r=0;n=o[r++];)if(domUtils.isCustomeNode(n))return!0;return!1},reset:function(){this.fireEvent("reset")},setEnabled:function(){var e,t=this;if("false"==t.body.contentEditable){t.body.contentEditable=!0,e=t.selection.getRange();try{e.moveToBookmark(t.lastBk),delete t.lastBk}catch(i){e.setStartAtFirst(t.body).collapse(!0)}e.select(!0),t.bkqueryCommandState&&(t.queryCommandState=t.bkqueryCommandState,delete t.bkqueryCommandState),t.bkqueryCommandValue&&(t.queryCommandValue=t.bkqueryCommandValue,delete t.bkqueryCommandValue),t.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(e){var t=this;e=e?utils.isArray(e)?e:[e]:[],"true"==t.body.contentEditable&&(t.lastBk||(t.lastBk=t.selection.getRange().createBookmark(!0)),t.body.contentEditable=!1,t.bkqueryCommandState=t.queryCommandState,t.bkqueryCommandValue=t.queryCommandValue,t.queryCommandState=function(i){return-1!=utils.indexOf(e,i)?t.bkqueryCommandState.apply(t,arguments):-1},t.queryCommandValue=function(i){return-1!=utils.indexOf(e,i)?t.bkqueryCommandValue.apply(t,arguments):null},t.fireEvent("selectionchange"))},disable:function(e){return this.setDisabled(e)},_setDefaultContent:function(){function e(){var t=this;t.document.getElementById("initContent")&&(t.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>",t.removeListener("firstBeforeExecCommand focus",e),setTimeout(function(){t.focus(),t._selectionChange()},0))}return function(t){var i=this;i.body.innerHTML='<p id="initContent">'+t+"</p>",i.addListener("firstBeforeExecCommand focus",e)}}(),setShow:function(){var e=this,t=e.selection.getRange();if("none"==e.container.style.display){try{t.moveToBookmark(e.lastBk),delete e.lastBk}catch(i){t.setStartAtFirst(e.body).collapse(!0)}setTimeout(function(){t.select(!0)},100),e.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){var e=this;e.lastBk||(e.lastBk=e.selection.getRange().createBookmark(!0)),e.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(e){var t=UE.I18N[this.options.lang];if(!t)throw Error("not import language file");e=(e||"").split(".");
for(var i,n=0;(i=e[n++])&&(t=t[i],t););return t},getContentLength:function(e,t){var i=this.getContent(!1,!1,!0).length;if(e){t=(t||[]).concat(["hr","img","iframe"]),i=this.getContentTxt().replace(/[\t\r\n]+/g,"").length;for(var n,o=0;n=t[o++];)i+=this.document.getElementsByTagName(n).length}return i},addInputRule:function(e){this.inputRules.push(e)},filterInputRule:function(e){for(var t,i=0;t=this.inputRules[i++];)t.call(this,e)},addOutputRule:function(e){this.outputRules.push(e)},filterOutputRule:function(e){for(var t,i=0;t=this.outputRules[i++];)t.call(this,e)},getActionUrl:function(e){var t=this.getOpt(e)||e,i=this.getOpt("imageUrl"),n=this.getOpt("serverUrl");return!n&&i&&(n=i.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2")),n?(n=n+(-1==n.indexOf("?")?"?":"&")+"action="+(t||""),utils.formatUrl(n)):""}},utils.inherits(r,EventBase)}(),UE.Editor.defaultOptions=function(e){var t=e.options.UEDITOR_HOME_URL;return{isShow:!0,initialContent:"",initialStyle:"",autoClearinitialContent:!1,iframeCssUrl:t+"themes/iframe.css",textarea:"editorValue",focus:!1,focusInEnd:!0,autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,zIndex:999,imagePopup:!0,enterTag:"p",customDomain:!1,lang:"zh-cn",langPath:t+"lang/",theme:"default",themePath:t+"themes/",allHtmlEnabled:!1,scaleEnabled:!1,tableNativeEditInFF:!1,autoSyncData:!0,fileNameFormat:"{time}{rand:6}"}},function(){UE.Editor.prototype.loadServerConfig=function(){function showErrorMsg(e){console&&console.error(e)}var me=this;setTimeout(function(){try{me.options.imageUrl&&me.setOpt("serverUrl",me.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var configUrl=me.getActionUrl("config"),isJsonp=utils.isCrossDomainUrl(configUrl);me._serverConfigLoaded=!1,configUrl&&UE.ajax.request(configUrl,{method:"GET",dataType:isJsonp?"jsonp":"",onsuccess:function(r){try{var config=isJsonp?r:eval("("+r.responseText+")");utils.extend(me.options,config),me.fireEvent("serverConfigLoaded"),me._serverConfigLoaded=!0}catch(e){showErrorMsg(me.getLang("loadconfigFormatError"))}},onerror:function(){showErrorMsg(me.getLang("loadconfigHttpError"))}})}catch(e){showErrorMsg(me.getLang("loadconfigError"))}})},UE.Editor.prototype.isServerConfigLoaded=function(){var e=this;return e._serverConfigLoaded||!1},UE.Editor.prototype.afterConfigReady=function(e){if(e&&utils.isFunction(e)){var t=this,i=function(){e.apply(t,arguments),t.removeListener("serverConfigLoaded",i)};t.isServerConfigLoaded()?e.call(t,"serverConfigLoaded"):t.addListener("serverConfigLoaded",i)}}}(),UE.ajax=function(){function e(e){var t=[];for(var i in e)if("method"!=i&&"timeout"!=i&&"async"!=i&&"dataType"!=i&&"callback"!=i&&void 0!=e[i]&&null!=e[i])if("function"!=(typeof e[i]).toLowerCase()&&"object"!=(typeof e[i]).toLowerCase())t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));else if(utils.isArray(e[i]))for(var n=0;n<e[i].length;n++)t.push(encodeURIComponent(i)+"[]="+encodeURIComponent(e[i][n]));return t.join("&")}function t(t,i){var n=r(),o=!1,a={method:"POST",timeout:5e3,async:!0,data:{},onsuccess:function(){},onerror:function(){}};if("object"==typeof t&&(i=t,t=i.url),n&&t){var s=i?utils.extend(a,i):a,l=e(s);utils.isEmptyObject(s.data)||(l+=(l?"&":"")+e(s.data));var d=setTimeout(function(){4!=n.readyState&&(o=!0,n.abort(),clearTimeout(d))},s.timeout),c=s.method.toUpperCase(),u=t+(-1==t.indexOf("?")?"?":"&")+("POST"==c?"":l+"&noCache="+ +new Date);n.open(c,u,s.async),n.onreadystatechange=function(){4==n.readyState&&(o||200!=n.status?s.onerror(n):s.onsuccess(n))},"POST"==c?(n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(l)):n.send(null)}}function i(t,i){function n(e,t,i){e.setAttribute("type","text/javascript"),e.setAttribute("defer","defer"),i&&e.setAttribute("charset",i),e.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(e)}function o(e){return function(){try{if(e)c.onerror&&c.onerror();else try{clearTimeout(a),l.apply(window,arguments)}catch(t){}}catch(i){c.onerror&&c.onerror.call(window,i)}finally{c.oncomplete&&c.oncomplete.apply(window,arguments),d.parentNode&&d.parentNode.removeChild(d),window[r]=null;try{delete window[r]}catch(t){}}}}var r,a,s,l=i.onsuccess||function(){},d=document.createElement("SCRIPT"),c=i||{},u=c.charset,m=c.jsonp||"callback",f=c.timeOut||0,h=new RegExp("(\\?|&)"+m+"=([^&]*)");utils.isFunction(l)?(r="bd__editor__"+Math.floor(2147483648*Math.random()).toString(36),window[r]=o(0)):utils.isString(l)?r=l:(s=h.exec(t))&&(r=s[2]),t=t.replace(h,"$1"+m+"="+r),t.search(h)<0&&(t+=(t.indexOf("?")<0?"?":"&")+m+"="+r);var p=e(i);utils.isEmptyObject(i.data)||(p+=(p?"&":"")+e(i.data)),p&&(t=t.replace(/\?/,"?"+p+"&")),d.onerror=o(1),f&&(a=setTimeout(o(1),f)),n(d,t,u)}var n="XMLHttpRequest()";try{new ActiveXObject("Msxml2.XMLHTTP"),n="ActiveXObject('Msxml2.XMLHTTP')"}catch(o){try{new ActiveXObject("Microsoft.XMLHTTP"),n="ActiveXObject('Microsoft.XMLHTTP')"}catch(o){}}var r=new Function("return new "+n);return{request:function(e,n){n&&"jsonp"==n.dataType?i(e,n):t(e,n)},getJSONP:function(e,t,n){var o={data:t,oncomplete:n};i(e,o)}}}();var filterWord=UE.filterWord=function(){function e(e){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/gi.test(e)}function t(e){return e=e.replace(/[\d.]+\w+/g,function(e){return utils.transUnitToPx(e)})}function i(e){return e.replace(/[\t\r\n]+/g," ").replace(/<!--[\s\S]*?-->/gi,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(e){if(browser.opera)return"";try{if(/Bitmap/i.test(e))return"";var i=e.match(/width:([ \d.]*p[tx])/i)[1],n=e.match(/height:([ \d.]*p[tx])/i)[1],o=e.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+t(i)+'" height="'+t(n)+'" src="'+o+'" />'}catch(r){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/gi,function(e,t,i,n){return"class"==t&&"MsoListParagraph"==n?e:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(e,t,i){return i.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(e,i,n,o){for(var r,a=[],s=o.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(e){return utils.transUnitToPx(e)}).split(/;\s*/g),l=0;r=s[l];l++){var d,c,u=r.split(":");if(2==u.length){if(d=u[0].toLowerCase(),c=u[1].toLowerCase(),/^(background)\w*/.test(d)&&0==c.replace(/(initial|\s)/g,"").length||/^(margin)\w*/.test(d)&&/^0\w+$/.test(c))continue;switch(d){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":/<table/.test(i)||(a[l]=d.replace(/^mso-|-alt$/g,"")+":"+t(c));continue;case"horiz-align":a[l]="text-align:"+c;continue;case"vert-align":a[l]="vertical-align:"+c;continue;case"font-color":case"mso-foreground":a[l]="color:"+c;continue;case"mso-background":case"mso-highlight":a[l]="background:"+c;continue;case"mso-default-height":a[l]="min-height:"+t(c);continue;case"mso-default-width":a[l]="min-width:"+t(c);continue;case"mso-padding-between-alt":a[l]="border-collapse:separate;border-spacing:"+t(c);continue;case"text-line-through":("single"==c||"double"==c)&&(a[l]="text-decoration:line-through");continue;case"mso-zero-height":"yes"==c&&(a[l]="display:none");continue;case"margin":if(!/[1-9]/.test(c))continue}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(d)||/text\-indent|padding|margin/.test(d)&&/\-[\d.]+/.test(c))continue;a[l]=d+":"+u[1]}}return i+(a.length?' style="'+a.join(";").replace(/;{2,}/g,";")+'"':"")})}return function(t){return e(t)?i(t):t}}();!function(){function e(e,t,i){return e.push(f),t+(i?1:-1)}function t(e,t){for(var i=0;t>i;i++)e.push(m)}function i(a,s,l,d){switch(a.type){case"root":for(var c,u=0;c=a.children[u++];)l&&"element"==c.type&&!dtd.$inlineWithA[c.tagName]&&u>1&&(e(s,d,!0),t(s,d)),i(c,s,l,d);break;case"text":n(a,s);break;case"element":o(a,s,l,d);break;case"comment":r(a,s,l)}return s}function n(e,t){t.push("pre"==e.parentNode.tagName?e.data:u[e.parentNode.tagName]?utils.html(e.data):e.data.replace(/[ ]{2}/g," &nbsp;"))}function o(n,o,r,a){var s="";if(n.attrs){s=[];var l=n.attrs;for(var d in l)s.push(d+(void 0!==l[d]?'="'+(c[d]?utils.html(l[d]).replace(/["]/g,function(){return"&quot;"}):utils.unhtml(l[d]))+'"':""));s=s.join(" ")}if(o.push("<"+n.tagName+(s?" "+s:"")+(dtd.$empty[n.tagName]?"/":"")+">"),r&&!dtd.$inlineWithA[n.tagName]&&"pre"!=n.tagName&&n.children&&n.children.length&&(a=e(o,a,!0),t(o,a)),n.children&&n.children.length)for(var u,m=0;u=n.children[m++];)r&&"element"==u.type&&!dtd.$inlineWithA[u.tagName]&&m>1&&(e(o,a),t(o,a)),i(u,o,r,a);dtd.$empty[n.tagName]||(r&&!dtd.$inlineWithA[n.tagName]&&"pre"!=n.tagName&&n.children&&n.children.length&&(a=e(o,a),t(o,a)),o.push("</"+n.tagName+">"))}function r(e,t){t.push("<!--"+e.data+"-->")}function a(e,t){var i;if("element"==e.type&&e.getAttr("id")==t)return e;if(e.children&&e.children.length)for(var n,o=0;n=e.children[o++];)if(i=a(n,t))return i}function s(e,t,i){if("element"==e.type&&e.tagName==t&&i.push(e),e.children&&e.children.length)for(var n,o=0;n=e.children[o++];)s(n,t,i)}function l(e,t){if(e.children&&e.children.length)for(var i,n=0;i=e.children[n];)l(i,t),i.parentNode&&(i.children&&i.children.length&&t(i),i.parentNode&&n++);else t(e)}var d=UE.uNode=function(e){this.type=e.type,this.data=e.data,this.tagName=e.tagName,this.parentNode=e.parentNode,this.attrs=e.attrs||{},this.children=e.children},c={href:1,src:1,_src:1,_href:1,cdata_data:1},u={style:1,script:1},m="    ",f="\n";d.createElement=function(e){return/[<>]/.test(e)?UE.htmlparser(e).children[0]:new d({type:"element",children:[],tagName:e})},d.createText=function(e,t){return new UE.uNode({type:"text",data:t?e:utils.unhtml(e||"")})},d.prototype={toHtml:function(e){var t=[];return i(this,t,e,0),t.join("")},innerHTML:function(e){if("element"!=this.type||dtd.$empty[this.tagName])return this;if(utils.isString(e)){if(this.children)for(var t,i=0;t=this.children[i++];)t.parentNode=null;this.children=[];for(var t,n=UE.htmlparser(e),i=0;t=n.children[i++];)this.children.push(t),t.parentNode=this;return this}var n=new UE.uNode({type:"root",children:this.children});return n.toHtml()},innerText:function(e,t){if("element"!=this.type||dtd.$empty[this.tagName])return this;if(e){if(this.children)for(var i,n=0;i=this.children[n++];)i.parentNode=null;return this.children=[],this.appendChild(d.createText(e,t)),this}return this.toHtml().replace(/<[^>]+>/g,"")},getData:function(){return"element"==this.type?"":this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){for(var e,t=this.parentNode,i=0;e=t.children[i];i++)if(e===this)return 0==i?null:t.children[i-1]},nextSibling:function(){for(var e,t=this.parentNode,i=0;e=t.children[i++];)if(e===this)return t.children[i]},replaceChild:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var i,n=0;i=this.children[n];n++)if(i===t)return this.children.splice(n,1,e),t.parentNode=null,e.parentNode=this,e}},appendChild:function(e){if("root"==this.type||"element"==this.type&&!dtd.$empty[this.tagName]){this.children||(this.children=[]),e.parentNode&&e.parentNode.removeChild(e);for(var t,i=0;t=this.children[i];i++)if(t===e){this.children.splice(i,1);break}return this.children.push(e),e.parentNode=this,e}},insertBefore:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var i,n=0;i=this.children[n];n++)if(i===t)return this.children.splice(n,0,e),e.parentNode=this,e}},insertAfter:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var i,n=0;i=this.children[n];n++)if(i===t)return this.children.splice(n+1,0,e),e.parentNode=this,e}},removeChild:function(e,t){if(this.children)for(var i,n=0;i=this.children[n];n++)if(i===e){if(this.children.splice(n,1),i.parentNode=null,t&&i.children&&i.children.length)for(var o,r=0;o=i.children[r];r++)this.children.splice(n+r,0,o),o.parentNode=this;return i}},getAttr:function(e){return this.attrs&&this.attrs[e.toLowerCase()]},setAttr:function(e,t){if(!e)return void delete this.attrs;if(this.attrs||(this.attrs={}),utils.isObject(e))for(var i in e)e[i]?this.attrs[i.toLowerCase()]=e[i]:delete this.attrs[i];else t?this.attrs[e.toLowerCase()]=t:delete this.attrs[e]},getIndex:function(){for(var e,t=this.parentNode,i=0;e=t.children[i];i++)if(e===this)return i;return-1},getNodeById:function(e){var t;if(this.children&&this.children.length)for(var i,n=0;i=this.children[n++];)if(t=a(i,e))return t},getNodesByTagName:function(e){e=utils.trim(e).replace(/[ ]{2,}/g," ").split(" ");var t=[],i=this;return utils.each(e,function(e){if(i.children&&i.children.length)for(var n,o=0;n=i.children[o++];)s(n,e,t)}),t},getStyle:function(e){var t=this.getAttr("style");if(!t)return"";var i=new RegExp("(^|;)\\s*"+e+":([^;]+)","i"),n=t.match(i);return n&&n[0]?n[2]:""},setStyle:function(e,t){function i(e,t){var i=new RegExp("(^|;)\\s*"+e+":([^;]+;?)","gi");n=n.replace(i,"$1"),t&&(n=e+":"+utils.unhtml(t)+";"+n)}var n=this.getAttr("style");if(n||(n=""),utils.isObject(e))for(var o in e)i(o,e[o]);else i(e,t);this.setAttr("style",utils.trim(n))},traversal:function(e){return this.children&&this.children.length&&l(this,e),this}}}();var htmlparser=UE.htmlparser=function(e,t){function i(e,t){if(m[e.tagName]){var i=c.createElement(m[e.tagName]);e.appendChild(i),i.appendChild(c.createText(t)),e=i}else e.appendChild(c.createText(t))}function n(e,t,i){var o;if(o=u[t]){for(var r,s=e;"root"!=s.type;){if(utils.isArray(o)?-1!=utils.indexOf(o,s.tagName):o==s.tagName){e=s,r=!0;break}s=s.parentNode}r||(e=n(e,utils.isArray(o)?o[0]:o))}var l=new c({parentNode:e,type:"element",tagName:t.toLowerCase(),children:dtd.$empty[t]?null:[]});if(i){for(var m,f={};m=a.exec(i);)f[m[1].toLowerCase()]=d[m[1].toLowerCase()]?m[2]||m[3]||m[4]:utils.unhtml(m[2]||m[3]||m[4]);l.attrs=f}return e.children.push(l),dtd.$empty[t]?e:l}function o(e,t){e.children.push(new c({type:"comment",data:t,parentNode:e}))}var r=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,a=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,s={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};e=e.replace(new RegExp(domUtils.fillChar,"g"),""),t||(e=e.replace(new RegExp("[\\r\\t\\n"+(t?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(t?"":" ")+"]*","g"),function(e,i){return i&&s[i.toLowerCase()]?e.replace(/(^[\n\r]+)|([\n\r]+$)/g,""):e.replace(new RegExp("^[\\r\\n"+(t?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(t?"":" ")+"]+$"),"")}));for(var l,d={href:1,src:1},c=UE.uNode,u={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},m={ol:"li",ul:"li"},f=0,h=0,p=new c({type:"root",children:[]}),g=p;l=r.exec(e);){f=l.index;try{if(f>h&&i(g,e.slice(h,f)),l[3])dtd.$cdata[g.tagName]?i(g,l[0]):g=n(g,l[3].toLowerCase(),l[4]);else if(l[1]){if("root"!=g.type)if(dtd.$cdata[g.tagName]&&!dtd.$cdata[l[1]])i(g,l[0]);else{for(var v=g;"element"==g.type&&g.tagName!=l[1].toLowerCase();)if(g=g.parentNode,"root"==g.type)throw g=v,"break";g=g.parentNode}}else l[2]&&o(g,l[2])}catch(b){}h=r.lastIndex}return h<e.length&&i(g,e.slice(h)),p},filterNode=UE.filterNode=function(){function e(t,i){switch(t.type){case"text":break;case"element":var n;if(n=i[t.tagName])if("-"===n)t.parentNode.removeChild(t);else if(utils.isFunction(n)){var o=t.parentNode,r=t.getIndex();if(n(t),t.parentNode){if(t.children)for(var a,s=0;a=t.children[s];)e(a,i),a.parentNode&&s++}else for(var a,s=r;a=o.children[s];)e(a,i),a.parentNode&&s++}else{var l=n.$;if(l&&t.attrs){var d,c={};for(var u in l){if(d=t.getAttr(u),"style"==u&&utils.isArray(l[u])){var m=[];utils.each(l[u],function(e){var i;(i=t.getStyle(e))&&m.push(e+":"+i)}),d=m.join(";")}d&&(c[u]=d)}t.attrs=c}if(t.children)for(var a,s=0;a=t.children[s];)e(a,i),a.parentNode&&s++}else if(dtd.$cdata[t.tagName])t.parentNode.removeChild(t);else{var o=t.parentNode,r=t.getIndex();t.parentNode.removeChild(t,!0);for(var a,s=r;a=o.children[s];)e(a,i),a.parentNode&&s++}break;case"comment":t.parentNode.removeChild(t)}}return function(t,i){if(utils.isEmptyObject(i))return t;var n;(n=i["-"])&&utils.each(n.split(" "),function(e){i[e]="-"});for(var o,r=0;o=t.children[r];)e(o,i),o.parentNode&&r++;return t}}();UE.plugin=function(){var e={};return{register:function(t,i,n,o){n&&utils.isFunction(n)&&(o=n,n=null),e[t]={optionName:n||t,execFn:i,afterDisabled:o}},load:function(t){utils.each(e,function(e){var i=e.execFn.call(t);t.options[e.optionName]!==!1?i&&utils.each(i,function(e,i){switch(i.toLowerCase()){case"shortcutkey":t.addshortcutkey(e);break;case"bindevents":utils.each(e,function(e,i){t.addListener(i,e)});break;case"bindmultievents":utils.each(utils.isArray(e)?e:[e],function(e){var i=utils.trim(e.type).split(/\s+/);utils.each(i,function(i){t.addListener(i,e.handler)})});break;case"commands":utils.each(e,function(e,i){t.commands[i]=e});break;case"outputrule":t.addOutputRule(e);break;case"inputrule":t.addInputRule(e);break;case"defaultoptions":t.setOpt(e)}}):e.afterDisabled&&e.afterDisabled.call(t)}),utils.each(UE.plugins,function(e){e.call(t)})},run:function(t,i){var n=e[t];n&&n.exeFn.call(i)}}}();var keymap=UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,"=":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78},LocalStorage=UE.LocalStorage=function(){function e(){var e=document.createElement("div");return e.style.display="none",e.addBehavior?(e.addBehavior("#default#userdata"),{getItem:function(t){var n=null;try{document.body.appendChild(e),e.load(i),n=e.getAttribute(t),document.body.removeChild(e)}catch(o){}return n},setItem:function(t,n){document.body.appendChild(e),e.setAttribute(t,n),e.save(i),document.body.removeChild(e)},removeItem:function(t){document.body.appendChild(e),e.removeAttribute(t),e.save(i),document.body.removeChild(e)}}):null}var t=window.localStorage||e()||null,i="localStorage";return{saveLocalData:function(e,i){return t&&i?(t.setItem(e,i),!0):!1},getLocalData:function(e){return t?t.getItem(e):null},removeItem:function(e){t&&t.removeItem(e)}}}();!function(){var e="ueditor_preference";UE.Editor.prototype.setPreferences=function(t,i){var n={};utils.isString(t)?n[t]=i:n=t;var o=LocalStorage.getLocalData(e);o&&(o=utils.str2json(o))?utils.extend(o,n):o=n,o&&LocalStorage.saveLocalData(e,utils.json2str(o))},UE.Editor.prototype.getPreferences=function(t){var i=LocalStorage.getLocalData(e);return i&&(i=utils.str2json(i))?t?i[t]:i:null},UE.Editor.prototype.removePreferences=function(t){var i=LocalStorage.getLocalData(e);i&&(i=utils.str2json(i))&&(i[t]=void 0,delete i[t]),i&&LocalStorage.saveLocalData(e,utils.json2str(i))}}(),UE.plugins.defaultfilter=function(){var e=this;e.setOpt({allowDivTransToP:!0,disabledTableInTable:!0}),e.addInputRule(function(t){function i(e){for(;e&&"element"==e.type;){if("td"==e.tagName)return!0;e=e.parentNode}return!1}var n,o=this.options.allowDivTransToP;t.traversal(function(t){if("element"==t.type){if(!dtd.$cdata[t.tagName]&&e.options.autoClearEmptyNode&&dtd.$inline[t.tagName]&&!dtd.$empty[t.tagName]&&(!t.attrs||utils.isEmptyObject(t.attrs)))return void(t.firstChild()?"span"!=t.tagName||t.attrs&&!utils.isEmptyObject(t.attrs)||t.parentNode.removeChild(t,!0):t.parentNode.removeChild(t));switch(t.tagName){case"style":case"script":t.setAttr({cdata_tag:t.tagName,cdata_data:t.innerHTML()||"",_ue_custom_node_:"true"}),t.tagName="div",t.innerHTML("");break;case"a":(n=t.getAttr("href"))&&t.setAttr("_href",n);break;case"img":if((n=t.getAttr("src"))&&/^data:/.test(n)){t.parentNode.removeChild(t);break}t.setAttr("_src",t.getAttr("src"));break;case"span":browser.webkit&&(n=t.getStyle("white-space"))&&/nowrap|normal/.test(n)&&(t.setStyle("white-space",""),e.options.autoClearEmptyNode&&utils.isEmptyObject(t.attrs)&&t.parentNode.removeChild(t,!0)),n=t.getAttr("id"),n&&/^_baidu_bookmark_/i.test(n)&&t.parentNode.removeChild(t);break;case"p":(n=t.getAttr("align"))&&(t.setAttr("align"),t.setStyle("text-align",n)),utils.each(t.children,function(e){if("element"==e.type&&"p"==e.tagName){var i=e.nextSibling();t.parentNode.insertAfter(e,t);for(var n=e;i;){var o=i.nextSibling();t.parentNode.insertAfter(i,n),n=i,i=o}return!1}}),t.firstChild()||t.innerHTML(browser.ie?"&nbsp;":"<br/>");break;case"div":if(t.getAttr("cdata_tag"))break;if(n=t.getAttr("class"),n&&/^line number\d+/.test(n))break;if(!o)break;for(var r,a=UE.uNode.createElement("p");r=t.firstChild();)"text"!=r.type&&UE.dom.dtd.$block[r.tagName]?a.firstChild()?(t.parentNode.insertBefore(a,t),a=UE.uNode.createElement("p")):t.parentNode.insertBefore(r,t):a.appendChild(r);a.firstChild()&&t.parentNode.insertBefore(a,t),t.parentNode.removeChild(t);break;case"dl":t.tagName="ul";break;case"dt":case"dd":t.tagName="li";break;case"li":var s=t.getAttr("class");s&&/list\-/.test(s)||t.setAttr();var l=t.getNodesByTagName("ol ul");UE.utils.each(l,function(e){t.parentNode.insertAfter(e,t)});break;case"td":case"th":case"caption":t.children&&t.children.length||t.appendChild(browser.ie11below?UE.uNode.createText(" "):UE.uNode.createElement("br"));break;case"table":e.options.disabledTableInTable&&i(t)&&(t.parentNode.insertBefore(UE.uNode.createText(t.innerText()),t),t.parentNode.removeChild(t))}}})}),e.addOutputRule(function(t){var i;t.traversal(function(t){if("element"==t.type){if(e.options.autoClearEmptyNode&&dtd.$inline[t.tagName]&&!dtd.$empty[t.tagName]&&(!t.attrs||utils.isEmptyObject(t.attrs)))return void(t.firstChild()?"span"!=t.tagName||t.attrs&&!utils.isEmptyObject(t.attrs)||t.parentNode.removeChild(t,!0):t.parentNode.removeChild(t));switch(t.tagName){case"div":(i=t.getAttr("cdata_tag"))&&(t.tagName=i,t.appendChild(UE.uNode.createText(t.getAttr("cdata_data"))),t.setAttr({cdata_tag:"",cdata_data:"",_ue_custom_node_:""}));break;case"a":(i=t.getAttr("_href"))&&t.setAttr({href:utils.html(i),_href:""});break;case"span":i=t.getAttr("id"),i&&/^_baidu_bookmark_/i.test(i)&&t.parentNode.removeChild(t);break;case"img":(i=t.getAttr("_src"))&&t.setAttr({src:t.getAttr("_src"),_src:""})}}})})},UE.commands.inserthtml={execCommand:function(e,t,i){var n,o,r=this;if(t&&r.fireEvent("beforeinserthtml",t)!==!0){if(n=r.selection.getRange(),o=n.document.createElement("div"),o.style.display="inline",!i){var a=UE.htmlparser(t);r.options.filterRules&&UE.filterNode(a,r.options.filterRules),r.filterInputRule(a),t=a.toHtml()}if(o.innerHTML=utils.trim(t),!n.collapsed){var s=n.startContainer;if(domUtils.isFillChar(s)&&n.setStartBefore(s),s=n.endContainer,domUtils.isFillChar(s)&&n.setEndAfter(s),n.txtToElmBoundary(),n.endContainer&&1==n.endContainer.nodeType&&(s=n.endContainer.childNodes[n.endOffset],s&&domUtils.isBr(s)&&n.setEndAfter(s)),0==n.startOffset&&(s=n.startContainer,domUtils.isBoundaryNode(s,"firstChild")&&(s=n.endContainer,n.endOffset==(3==s.nodeType?s.nodeValue.length:s.childNodes.length)&&domUtils.isBoundaryNode(s,"lastChild")&&(r.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",n.setStart(r.body.firstChild,0).collapse(!0)))),!n.collapsed&&n.deleteContents(),1==n.startContainer.nodeType){var l,d=n.startContainer.childNodes[n.startOffset];if(d&&domUtils.isBlockElm(d)&&(l=d.previousSibling)&&domUtils.isBlockElm(l)){for(n.setEnd(l,l.childNodes.length).collapse();d.firstChild;)l.appendChild(d.firstChild);domUtils.remove(d)}}}var d,c,l,u,m,f=0;n.inFillChar()&&(d=n.startContainer,domUtils.isFillChar(d)?(n.setStartBefore(d).collapse(!0),domUtils.remove(d)):domUtils.isFillChar(d,!0)&&(d.nodeValue=d.nodeValue.replace(fillCharReg,""),n.startOffset--,n.collapsed&&n.collapse(!0)));var h=domUtils.findParentByTagName(n.startContainer,"li",!0);if(h){for(var p,g;d=o.firstChild;){for(;d&&(3==d.nodeType||!domUtils.isBlockElm(d)||"HR"==d.tagName);)p=d.nextSibling,n.insertNode(d).collapse(),g=d,d=p;if(d)if(/^(ol|ul)$/i.test(d.tagName)){for(;d.firstChild;)g=d.firstChild,domUtils.insertAfter(h,d.firstChild),h=h.nextSibling;domUtils.remove(d)}else{var v;p=d.nextSibling,v=r.document.createElement("li"),domUtils.insertAfter(h,v),v.appendChild(d),g=d,d=p,h=v}}h=domUtils.findParentByTagName(n.startContainer,"li",!0),domUtils.isEmptyBlock(h)&&domUtils.remove(h),g&&n.setStartAfter(g).collapse(!0).select(!0)}else{for(;d=o.firstChild;){if(f){for(var b=r.document.createElement("p");d&&(3==d.nodeType||!dtd.$block[d.tagName]);)m=d.nextSibling,b.appendChild(d),d=m;b.firstChild&&(d=b)}if(n.insertNode(d),m=d.nextSibling,!f&&d.nodeType==domUtils.NODE_ELEMENT&&domUtils.isBlockElm(d)&&(c=domUtils.findParent(d,function(e){return domUtils.isBlockElm(e)}),c&&"body"!=c.tagName.toLowerCase()&&(!dtd[c.tagName][d.nodeName]||d.parentNode!==c))){if(dtd[c.tagName][d.nodeName])for(u=d.parentNode;u!==c;)l=u,u=u.parentNode;else l=c;domUtils.breakParent(d,l||u);var l=d.previousSibling;domUtils.trimWhiteTextNode(l),l.childNodes.length||domUtils.remove(l),!browser.ie&&(p=d.nextSibling)&&domUtils.isBlockElm(p)&&p.lastChild&&!domUtils.isBr(p.lastChild)&&p.appendChild(r.document.createElement("br")),f=1}var p=d.nextSibling;if(!o.firstChild&&p&&domUtils.isBlockElm(p)){n.setStart(p,0).collapse(!0);break}n.setEndAfter(d).collapse()}if(d=n.startContainer,m&&domUtils.isBr(m)&&domUtils.remove(m),domUtils.isBlockElm(d)&&domUtils.isEmptyNode(d))if(m=d.nextSibling)domUtils.remove(d),1==m.nodeType&&dtd.$block[m.tagName]&&n.setStart(m,0).collapse(!0).shrinkBoundary();else try{d.innerHTML=browser.ie?domUtils.fillChar:"<br/>"}catch(y){n.setStartBefore(d),domUtils.remove(d)}try{n.select(!0)}catch(y){}}setTimeout(function(){n=r.selection.getRange(),n.scrollToView(r.autoHeightEnabled,r.autoHeightEnabled?domUtils.getXY(r.iframe).y:0),r.fireEvent("afterinserthtml",t)},200)}}},UE.plugins.autotypeset=function(){function e(e,t){return e&&3!=e.nodeType?domUtils.isBr(e)?1:e&&e.parentNode&&u[e.tagName.toLowerCase()]?a&&a.contains(e)||e.getAttribute("pagebreak")?0:t?!domUtils.isEmptyBlock(e):domUtils.isEmptyBlock(e,new RegExp("[\\s"+domUtils.fillChar+"]","g")):void 0:0}function t(e){e.style.cssText||(domUtils.removeAttributes(e,["style"]),"span"==e.tagName.toLowerCase()&&domUtils.hasNoAttributes(e)&&domUtils.remove(e,!0))}function i(i,r){var s,u=this;if(r){if(!l.pasteFilter)return;s=u.document.createElement("div"),s.innerHTML=r.html}else s=u.document.body;for(var m,f=domUtils.getElementsByTagName(s,"*"),h=0;m=f[h++];)if(u.fireEvent("excludeNodeinautotype",m)!==!0){if(l.clearFontSize&&m.style.fontSize&&(domUtils.removeStyle(m,"font-size"),t(m)),l.clearFontFamily&&m.style.fontFamily&&(domUtils.removeStyle(m,"font-family"),t(m)),e(m)){if(l.mergeEmptyline)for(var p,g=m.nextSibling,v=domUtils.isBr(m);e(g)&&(p=g,g=p.nextSibling,!v||g&&(!g||domUtils.isBr(g)));)domUtils.remove(p);if(l.removeEmptyline&&domUtils.inDoc(m,s)&&!c[m.parentNode.tagName.toLowerCase()]){if(domUtils.isBr(m)&&(g=m.nextSibling,g&&!domUtils.isBr(g)))continue;domUtils.remove(m);continue}}if(e(m,!0)&&"SPAN"!=m.tagName&&(l.indent&&(m.style.textIndent=l.indentValue),l.textAlign&&(m.style.textAlign=l.textAlign)),l.removeClass&&m.className&&!d[m.className.toLowerCase()]){if(a&&a.contains(m))continue;domUtils.removeAttributes(m,["class"])}if(l.imageBlockLine&&"img"==m.tagName.toLowerCase()&&!m.getAttribute("emotion"))if(r){var b=m;switch(l.imageBlockLine){case"left":case"right":case"none":for(var p,y,g,C=b.parentNode;dtd.$inline[C.tagName]||"A"==C.tagName;)C=C.parentNode;if(p=C,"P"==p.tagName&&"center"==domUtils.getStyle(p,"text-align")&&!domUtils.isBody(p)&&1==domUtils.getChildCount(p,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)}))if(y=p.previousSibling,g=p.nextSibling,y&&g&&1==y.nodeType&&1==g.nodeType&&y.tagName==g.tagName&&domUtils.isBlockElm(y)){for(y.appendChild(p.firstChild);g.firstChild;)y.appendChild(g.firstChild);domUtils.remove(p),domUtils.remove(g)}else domUtils.setStyle(p,"text-align","");domUtils.setStyle(b,"float",l.imageBlockLine);break;case"center":if("center"!=u.queryCommandValue("imagefloat")){for(C=b.parentNode,domUtils.setStyle(b,"float","none"),p=b;C&&1==domUtils.getChildCount(C,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)})&&(dtd.$inline[C.tagName]||"A"==C.tagName);)p=C,C=C.parentNode;var N=u.document.createElement("p");domUtils.setAttributes(N,{style:"text-align:center"}),p.parentNode.insertBefore(N,p),N.appendChild(p),domUtils.setStyle(p,"float","")}}}else{var x=u.selection.getRange();x.selectNode(m).select(),u.execCommand("imagefloat",l.imageBlockLine)}l.removeEmptyNode&&l.removeTagNames[m.tagName.toLowerCase()]&&domUtils.hasNoAttributes(m)&&domUtils.isEmptyBlock(m)&&domUtils.remove(m)}if(l.tobdc){var w=UE.htmlparser(s.innerHTML);w.traversal(function(e){"text"==e.type&&(e.data=o(e.data))}),s.innerHTML=w.toHtml()}if(l.bdc2sb){var w=UE.htmlparser(s.innerHTML);w.traversal(function(e){"text"==e.type&&(e.data=n(e.data))}),s.innerHTML=w.toHtml()}r&&(r.html=s.innerHTML)}function n(e){for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);t+=n>=65281&&65373>=n?String.fromCharCode(e.charCodeAt(i)-65248):12288==n?String.fromCharCode(e.charCodeAt(i)-12288+32):e.charAt(i)}return t}function o(e){e=utils.html(e);for(var t="",i=0;i<e.length;i++)t+=32==e.charCodeAt(i)?String.fromCharCode(12288):e.charCodeAt(i)<127?String.fromCharCode(e.charCodeAt(i)+65248):e.charAt(i);return t}function r(){var e=s.getPreferences("autotypeset");utils.extend(s.options.autotypeset,e)}this.setOpt({autotypeset:{mergeEmptyline:!0,removeClass:!0,removeEmptyline:!1,textAlign:"left",imageBlockLine:"center",pasteFilter:!1,clearFontSize:!1,clearFontFamily:!1,removeEmptyNode:!1,removeTagNames:utils.extend({div:1},dtd.$removeEmpty),indent:!1,indentValue:"2em",bdc2sb:!1,tobdc:!1}});var a,s=this,l=s.options.autotypeset,d={selectTdClass:1,pagebreak:1,anchorclass:1},c={li:1},u={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,span:1};l&&(r(),l.pasteFilter&&s.addListener("beforepaste",i),s.commands.autotypeset={execCommand:function(){s.removeListener("beforepaste",i),l.pasteFilter&&s.addListener("beforepaste",i),i.call(s)}})},UE.plugin.register("autosubmit",function(){return{shortcutkey:{autosubmit:"ctrl+13"},commands:{autosubmit:{execCommand:function(){var e=this,t=domUtils.findParentByTagName(e.iframe,"form",!1);if(t){if(e.fireEvent("beforesubmit")===!1)return;e.sync(),t.submit()}}}}}}),UE.plugin.register("background",function(){function e(e){var t={},i=e.split(";");return utils.each(i,function(e){var i=e.indexOf(":"),n=utils.trim(e.substr(0,i)).toLowerCase();n&&(t[n]=utils.trim(e.substr(i+1)||""))}),t}function t(e){if(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i+":"+e[i]+"; ");utils.cssRule(o,t.length?"body{"+t.join("")+"}":"",n.document)}else utils.cssRule(o,"",n.document)}var i,n=this,o="editor_background",r=new RegExp("body[\\s]*\\{(.+)\\}","i"),a=n.hasContents;return n.hasContents=function(){return n.queryCommandValue("background")?!0:a.apply(n,arguments)},{bindEvents:{getAllHtml:function(e,t){var i=this.body,o=domUtils.getComputedStyle(i,"background-image"),r="";r=o.indexOf(n.options.imagePath)>0?o.substring(o.indexOf(n.options.imagePath),o.length-1).replace(/"|\(|\)/gi,""):"none"!=o?o.replace(/url\("?|"?\)/gi,""):"";var a='<style type="text/css">body{',s={"background-color":domUtils.getComputedStyle(i,"background-color")||"#ffffff","background-image":r?"url("+r+")":"","background-repeat":domUtils.getComputedStyle(i,"background-repeat")||"","background-position":browser.ie?domUtils.getComputedStyle(i,"background-position-x")+" "+domUtils.getComputedStyle(i,"background-position-y"):domUtils.getComputedStyle(i,"background-position"),height:domUtils.getComputedStyle(i,"height")};
for(var l in s)s.hasOwnProperty(l)&&(a+=l+":"+s[l]+"; ");a+="}</style> ",t.push(a)},aftersetcontent:function(){0==i&&t()}},inputRule:function(n){i=!1,utils.each(n.getNodesByTagName("p"),function(n){var o=n.getAttr("data-background");o&&(i=!0,t(e(o)),n.parentNode.removeChild(n))})},outputRule:function(e){var t=this,i=(utils.cssRule(o,t.document)||"").replace(/[\n\r]+/g,"").match(r);i&&e.appendChild(UE.uNode.createElement('<p style="display:none;" data-background="'+utils.trim(i[1].replace(/"/g,"").replace(/[\s]+/g," "))+'"><br/></p>'))},commands:{background:{execCommand:function(e,i){t(i)},queryCommandValue:function(){var t=this,i=(utils.cssRule(o,t.document)||"").replace(/[\n\r]+/g,"").match(r);return i?e(i[1]):null},notNeedUndo:!0}}}}),UE.commands.imagefloat={execCommand:function(e,t){var i=this,n=i.selection.getRange();if(!n.collapsed){var o=n.getClosedNode();if(o&&"IMG"==o.tagName)switch(t){case"left":case"right":case"none":for(var r,a,s,l=o.parentNode;dtd.$inline[l.tagName]||"A"==l.tagName;)l=l.parentNode;if(r=l,"P"==r.tagName&&"center"==domUtils.getStyle(r,"text-align")){if(!domUtils.isBody(r)&&1==domUtils.getChildCount(r,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)}))if(a=r.previousSibling,s=r.nextSibling,a&&s&&1==a.nodeType&&1==s.nodeType&&a.tagName==s.tagName&&domUtils.isBlockElm(a)){for(a.appendChild(r.firstChild);s.firstChild;)a.appendChild(s.firstChild);domUtils.remove(r),domUtils.remove(s)}else domUtils.setStyle(r,"text-align","");n.selectNode(o).select()}domUtils.setStyle(o,"float","none"==t?"":t),"none"==t&&domUtils.removeAttributes(o,"align");break;case"center":if("center"!=i.queryCommandValue("imagefloat")){for(l=o.parentNode,domUtils.setStyle(o,"float",""),domUtils.removeAttributes(o,"align"),r=o;l&&1==domUtils.getChildCount(l,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)})&&(dtd.$inline[l.tagName]||"A"==l.tagName);)r=l,l=l.parentNode;n.setStartBefore(r).setCursor(!1),l=i.document.createElement("div"),l.appendChild(r),domUtils.setStyle(r,"float",""),i.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+l.innerHTML+"</p>"),r=i.document.getElementById("_img_parent_tmp"),r.removeAttribute("id"),r=r.firstChild,n.selectNode(r).select(),s=r.parentNode.nextSibling,s&&domUtils.isEmptyNode(s)&&domUtils.remove(s)}}}},queryCommandValue:function(){var e,t,i=this.selection.getRange();return i.collapsed?"none":(e=i.getClosedNode(),e&&1==e.nodeType&&"IMG"==e.tagName?(t=domUtils.getComputedStyle(e,"float")||e.getAttribute("align"),"none"==t&&(t="center"==domUtils.getComputedStyle(e.parentNode,"text-align")?"center":t),{left:1,right:1,center:1}[t]?t:"none"):"none")},queryCommandState:function(){var e,t=this.selection.getRange();return t.collapsed?-1:(e=t.getClosedNode(),e&&1==e.nodeType&&"IMG"==e.tagName?0:-1)}},UE.commands.insertimage={execCommand:function(e,t){if(t=utils.isArray(t)?t:[t],t.length){var i=this,n=i.selection.getRange(),o=n.getClosedNode();if(i.fireEvent("beforeinsertimage",t)!==!0){if(!o||!/img/i.test(o.tagName)||"edui-faked-video"==o.className&&-1==o.className.indexOf("edui-upload-video")||o.getAttribute("word_img")){var r,a=[],s="";if(r=t[0],1==t.length)s='<img src="'+r.src+'" '+(r._src?' _src="'+r._src+'" ':"")+(r.width?'width="'+r.width+'" ':"")+(r.height?' height="'+r.height+'" ':"")+("left"==r.floatStyle||"right"==r.floatStyle?' style="float:'+r.floatStyle+';"':"")+(r.title&&""!=r.title?' title="'+r.title+'"':"")+(r.border&&"0"!=r.border?' border="'+r.border+'"':"")+(r.alt&&""!=r.alt?' alt="'+r.alt+'"':"")+(r.hspace&&"0"!=r.hspace?' hspace = "'+r.hspace+'"':"")+(r.vspace&&"0"!=r.vspace?' vspace = "'+r.vspace+'"':"")+"/>","center"==r.floatStyle&&(s='<p style="text-align: center">'+s+"</p>"),a.push(s);else for(var l=0;r=t[l++];)s="<p "+("center"==r.floatStyle?'style="text-align: center" ':"")+'><img src="'+r.src+'" '+(r.width?'width="'+r.width+'" ':"")+(r._src?' _src="'+r._src+'" ':"")+(r.height?' height="'+r.height+'" ':"")+' style="'+(r.floatStyle&&"center"!=r.floatStyle?"float:"+r.floatStyle+";":"")+(r.border||"")+'" '+(r.title?' title="'+r.title+'"':"")+" /></p>",a.push(s);i.execCommand("insertHtml",a.join(""))}else{var d=t.shift(),c=d.floatStyle;delete d.floatStyle,domUtils.setAttributes(o,d),i.execCommand("imagefloat",c),t.length>0&&(n.setStartAfter(o).setCursor(!1,!0),i.execCommand("insertimage",t))}i.fireEvent("afterinsertimage",t)}}}},UE.plugins.justify=function(){var e=domUtils.isBlockElm,t={left:1,right:1,center:1,justify:1},i=function(t,i){var n=t.createBookmark(),o=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase()&&!domUtils.isBookmarkNode(e):!domUtils.isWhitespace(e)};t.enlarge(!0);for(var r,a=t.createBookmark(),s=domUtils.getNextDomNode(a.start,!1,o),l=t.cloneRange();s&&!(domUtils.getPosition(s,a.end)&domUtils.POSITION_FOLLOWING);)if(3!=s.nodeType&&e(s))s=domUtils.getNextDomNode(s,!0,o);else{for(l.setStartBefore(s);s&&s!==a.end&&!e(s);)r=s,s=domUtils.getNextDomNode(s,!1,null,function(t){return!e(t)});l.setEndAfter(r);var d=l.getCommonAncestor();if(!domUtils.isBody(d)&&e(d))domUtils.setStyles(d,utils.isString(i)?{"text-align":i}:i),s=d;else{var c=t.document.createElement("p");domUtils.setStyles(c,utils.isString(i)?{"text-align":i}:i);var u=l.extractContents();c.appendChild(u),l.insertNode(c),s=c}s=domUtils.getNextDomNode(s,!1,o)}return t.moveToBookmark(a).moveToBookmark(n)};UE.commands.justify={execCommand:function(e,t){var n,o=this.selection.getRange();return o.collapsed&&(n=this.document.createTextNode("p"),o.insertNode(n)),i(o,t),n&&(o.setStartBefore(n).collapse(!0),domUtils.remove(n)),o.select(),!0},queryCommandValue:function(){var e=this.selection.getStart(),i=domUtils.getComputedStyle(e,"text-align");return t[i]?i:"left"},queryCommandState:function(){var e=this.selection.getStart(),t=e&&domUtils.findParentByTagName(e,["td","th","caption"],!0);return t?-1:0}}},UE.plugins.font=function(){function e(e){for(var t;(t=e.parentNode)&&"SPAN"==t.tagName&&1==domUtils.getChildCount(t,function(e){return!domUtils.isBookmarkNode(e)&&!domUtils.isBr(e)});)t.style.cssText+=e.style.cssText,domUtils.remove(e,!0),e=t}function t(e,t,i){if(a[t]&&(e.adjustmentBoundary(),!e.collapsed&&1==e.startContainer.nodeType)){var n=e.startContainer.childNodes[e.startOffset];if(n&&domUtils.isTagNode(n,"span")){var o=e.createBookmark();utils.each(domUtils.getElementsByTagName(n,"span"),function(e){e.parentNode&&!domUtils.isBookmarkNode(e)&&("backcolor"!=t||domUtils.getComputedStyle(e,"background-color").toLowerCase()!==i)&&(domUtils.removeStyle(e,a[t]),0==e.style.cssText.replace(/^\s+$/,"").length&&domUtils.remove(e,!0))}),e.moveToBookmark(o)}}}function i(i,n,o){var r,a=i.collapsed,s=i.createBookmark();if(a)for(r=s.start.parentNode;dtd.$inline[r.tagName];)r=r.parentNode;else r=domUtils.getCommonAncestor(s.start,s.end);utils.each(domUtils.getElementsByTagName(r,"span"),function(t){if(t.parentNode&&!domUtils.isBookmarkNode(t)){if(/\s*border\s*:\s*none;?\s*/i.test(t.style.cssText))return void(/^\s*border\s*:\s*none;?\s*$/.test(t.style.cssText)?domUtils.remove(t,!0):domUtils.removeStyle(t,"border"));if(/border/i.test(t.style.cssText)&&"SPAN"==t.parentNode.tagName&&/border/i.test(t.parentNode.style.cssText)&&(t.style.cssText=t.style.cssText.replace(/border[^:]*:[^;]+;?/gi,"")),"fontborder"!=n||"none"!=o)for(var i=t.nextSibling;i&&1==i.nodeType&&"SPAN"==i.tagName;)if(domUtils.isBookmarkNode(i)&&"fontborder"==n)t.appendChild(i),i=t.nextSibling;else{if(i.style.cssText==t.style.cssText&&(domUtils.moveChild(i,t),domUtils.remove(i)),t.nextSibling===i)break;i=t.nextSibling}if(e(t),browser.ie&&browser.version>8){var r=domUtils.findParent(t,function(e){return"SPAN"==e.tagName&&/background-color/.test(e.style.cssText)});r&&!/background-color/.test(t.style.cssText)&&(t.style.backgroundColor=r.style.backgroundColor)}}}),i.moveToBookmark(s),t(i,n,o)}var n=this,o={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration",fontborder:"border"},r={underline:1,strikethrough:1,fontborder:1},a={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family"};n.setOpt({fontfamily:[{name:"songti",val:",SimSun"},{name:"yahei",val:",Microsoft YaHei"},{name:"kaiti",val:",_GB2312, SimKai"},{name:"heiti",val:", SimHei"},{name:"lishu",val:", SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]}),n.addInputRule(function(e){utils.each(e.getNodesByTagName("u s del font strike"),function(e){if("font"==e.tagName){var t=[];for(var i in e.attrs)switch(i){case"size":t.push("font-size:"+({1:"10",2:"12",3:"16",4:"18",5:"24",6:"32",7:"48"}[e.attrs[i]]||e.attrs[i])+"px");break;case"color":t.push("color:"+e.attrs[i]);break;case"face":t.push("font-family:"+e.attrs[i]);break;case"style":t.push(e.attrs[i])}e.attrs={style:t.join(";")}}else{var n="u"==e.tagName?"underline":"line-through";e.attrs={style:(e.getAttr("style")||"")+"text-decoration:"+n+";"}}e.tagName="span"})});for(var s in o)!function(e,t){UE.commands[e]={execCommand:function(n,o){o=o||(this.queryCommandState(n)?"none":"underline"==n?"underline":"fontborder"==n?"1px solid #000":"line-through");var a,s=this,l=this.selection.getRange();if("default"==o)l.collapsed&&(a=s.document.createTextNode("font"),l.insertNode(a).select()),s.execCommand("removeFormat","span,a",t),a&&(l.setStartBefore(a).collapse(!0),domUtils.remove(a)),i(l,n,o),l.select();else if(l.collapsed){var d=domUtils.findParentByTagName(l.startContainer,"span",!0);if(a=s.document.createTextNode("font"),!d||d.children.length||d[browser.ie?"innerText":"textContent"].replace(fillCharReg,"").length){if(l.insertNode(a),l.selectNode(a).select(),d=l.document.createElement("span"),r[e]){if(domUtils.findParentByTagName(a,"a",!0))return l.setStartBefore(a).setCursor(),void domUtils.remove(a);s.execCommand("removeFormat","span,a",t)}if(d.style.cssText=t+":"+o,a.parentNode.insertBefore(d,a),!browser.ie||browser.ie&&9==browser.version)for(var c=d.parentNode;!domUtils.isBlockElm(c);)"SPAN"==c.tagName&&(d.style.cssText=c.style.cssText+";"+d.style.cssText),c=c.parentNode;opera?setTimeout(function(){l.setStart(d,0).collapse(!0),i(l,n,o),l.select()}):(l.setStart(d,0).collapse(!0),i(l,n,o),l.select())}else l.insertNode(a),r[e]&&(l.selectNode(a).select(),s.execCommand("removeFormat","span,a",t,null),d=domUtils.findParentByTagName(a,"span",!0),l.setStartBefore(a)),d&&(d.style.cssText+=";"+t+":"+o),l.collapse(!0).select();domUtils.remove(a)}else r[e]&&s.queryCommandValue(e)&&s.execCommand("removeFormat","span,a",t),l=s.selection.getRange(),l.applyInlineStyle("span",{style:t+":"+o}),i(l,n,o),l.select();return!0},queryCommandValue:function(e){var i=this.selection.getStart();if("underline"==e||"strikethrough"==e){for(var n,o=i;o&&!domUtils.isBlockElm(o)&&!domUtils.isBody(o);){if(1==o.nodeType&&(n=domUtils.getComputedStyle(o,t),"none"!=n))return n;o=o.parentNode}return"none"}if("fontborder"==e){for(var r,a=i;a&&dtd.$inline[a.tagName];){if((r=domUtils.getComputedStyle(a,"border"))&&/1px/.test(r)&&/solid/.test(r))return r;a=a.parentNode}return""}if("FontSize"==e){var s=domUtils.getComputedStyle(i,t),a=/^([\d\.]+)(\w+)$/.exec(s);return a?Math.floor(a[1])+a[2]:s}return domUtils.getComputedStyle(i,t)},queryCommandState:function(e){if(!r[e])return 0;var t=this.queryCommandValue(e);return"fontborder"==e?/1px/.test(t)&&/solid/.test(t):"underline"==e?/underline/.test(t):/line\-through/.test(t)}}}(s,o[s])},UE.plugins.link=function(){function e(e){var t=e.startContainer,i=e.endContainer;(t=domUtils.findParentByTagName(t,"a",!0))&&e.setStartBefore(t),(i=domUtils.findParentByTagName(i,"a",!0))&&e.setEndAfter(i)}function t(t,i,n){var o=t.cloneRange(),r=n.queryCommandValue("link");e(t=t.adjustmentBoundary());var a=t.startContainer;if(1==a.nodeType&&r&&(a=a.childNodes[t.startOffset],a&&1==a.nodeType&&"A"==a.tagName&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(a[browser.ie?"innerText":"textContent"])&&(a[browser.ie?"innerText":"textContent"]=utils.html(i.textValue||i.href))),(!o.collapsed||r)&&(t.removeInlineStyle("a"),o=t.cloneRange()),o.collapsed){var s=t.document.createElement("a"),l="";i.textValue?(l=utils.html(i.textValue),delete i.textValue):l=utils.html(i.href),domUtils.setAttributes(s,i),a=domUtils.findParentByTagName(o.startContainer,"a",!0),a&&domUtils.isInNodeEndBoundary(o,a)&&t.setStartAfter(a).collapse(!0),s[browser.ie?"innerText":"textContent"]=l,t.insertNode(s).selectNode(s)}else t.applyInlineStyle("a",i)}UE.commands.unlink={execCommand:function(){var t,i=this.selection.getRange();(!i.collapsed||domUtils.findParentByTagName(i.startContainer,"a",!0))&&(t=i.createBookmark(),e(i),i.removeInlineStyle("a").moveToBookmark(t).select())},queryCommandState:function(){return!this.highlight&&this.queryCommandValue("link")?0:-1}},UE.commands.link={execCommand:function(e,i){var n;i._href&&(i._href=utils.unhtml(i._href,/[<">]/g)),i.href&&(i.href=utils.unhtml(i.href,/[<">]/g)),i.textValue&&(i.textValue=utils.unhtml(i.textValue,/[<">]/g)),t(n=this.selection.getRange(),i,this),n.collapse().select(!0)},queryCommandValue:function(){var e,t=this.selection.getRange();if(!t.collapsed){t.shrinkBoundary();var i=3!=t.startContainer.nodeType&&t.startContainer.childNodes[t.startOffset]?t.startContainer.childNodes[t.startOffset]:t.startContainer,n=3==t.endContainer.nodeType||0==t.endOffset?t.endContainer:t.endContainer.childNodes[t.endOffset-1],o=t.getCommonAncestor();if(e=domUtils.findParentByTagName(o,"a",!0),!e&&1==o.nodeType)for(var r,a,s,l=o.getElementsByTagName("a"),d=0;s=l[d++];)if(r=domUtils.getPosition(s,i),a=domUtils.getPosition(s,n),(r&domUtils.POSITION_FOLLOWING||r&domUtils.POSITION_CONTAINS)&&(a&domUtils.POSITION_PRECEDING||a&domUtils.POSITION_CONTAINS)){e=s;break}return e}return e=t.startContainer,e=1==e.nodeType?e:e.parentNode,e&&(e=domUtils.findParentByTagName(e,"a",!0))&&!domUtils.isInNodeEndBoundary(t,e)?e:void 0},queryCommandState:function(){var e=this.selection.getRange().getClosedNode(),t=e&&("edui-faked-video"==e.className||-1!=e.className.indexOf("edui-upload-video"));return t?-1:0}}},UE.plugins.insertframe=function(){function e(){t._iframe&&delete t._iframe}var t=this;t.addListener("selectionchange",function(){e()})},UE.commands.scrawl={queryCommandState:function(){return browser.ie&&browser.version<=8?-1:0}},UE.plugins.removeformat=function(){var e=this;e.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"}),e.commands.removeformat={execCommand:function(e,t,i,n,o){function r(e){if(3==e.nodeType||"span"!=e.tagName.toLowerCase())return 0;if(browser.ie){var t=e.attributes;if(t.length){for(var i=0,n=t.length;n>i;i++)if(t[i].specified)return 0;return 1}}return!e.attributes.length}function a(e){var t=e.createBookmark();if(e.collapsed&&e.enlarge(!0),!o){var n=domUtils.findParentByTagName(e.startContainer,"a",!0);n&&e.setStartBefore(n),n=domUtils.findParentByTagName(e.endContainer,"a",!0),n&&e.setEndAfter(n)}for(s=e.createBookmark(),p=s.start;(l=p.parentNode)&&!domUtils.isBlockElm(l);)domUtils.breakParent(p,l),domUtils.clearEmptySibling(p);if(s.end){for(p=s.end;(l=p.parentNode)&&!domUtils.isBlockElm(l);)domUtils.breakParent(p,l),domUtils.clearEmptySibling(p);for(var a,u=domUtils.getNextDomNode(s.start,!1,m);u&&u!=s.end;)a=domUtils.getNextDomNode(u,!0,m),dtd.$empty[u.tagName.toLowerCase()]||domUtils.isBookmarkNode(u)||(d.test(u.tagName)?i?(domUtils.removeStyle(u,i),r(u)&&"text-decoration"!=i&&domUtils.remove(u,!0)):domUtils.remove(u,!0):dtd.$tableContent[u.tagName]||dtd.$list[u.tagName]||(domUtils.removeAttributes(u,c),r(u)&&domUtils.remove(u,!0))),u=a}var f=s.start.parentNode;!domUtils.isBlockElm(f)||dtd.$tableContent[f.tagName]||dtd.$list[f.tagName]||domUtils.removeAttributes(f,c),f=s.end.parentNode,s.end&&domUtils.isBlockElm(f)&&!dtd.$tableContent[f.tagName]&&!dtd.$list[f.tagName]&&domUtils.removeAttributes(f,c),e.moveToBookmark(s).moveToBookmark(t);for(var h,p=e.startContainer,g=e.collapsed;1==p.nodeType&&domUtils.isEmptyNode(p)&&dtd.$removeEmpty[p.tagName];)h=p.parentNode,e.setStartBefore(p),e.startContainer===e.endContainer&&e.endOffset--,domUtils.remove(p),p=h;if(!g)for(p=e.endContainer;1==p.nodeType&&domUtils.isEmptyNode(p)&&dtd.$removeEmpty[p.tagName];)h=p.parentNode,e.setEndBefore(p),domUtils.remove(p),p=h}var s,l,d=new RegExp("^(?:"+(t||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),c=i?[]:(n||this.options.removeFormatAttributes).split(","),u=new dom.Range(this.document),m=function(e){return 1==e.nodeType};u=this.selection.getRange(),a(u),u.select()}}},UE.plugins.blockquote=function(){function e(e){return domUtils.filterNodeList(e.selection.getStartElementPath(),"blockquote")}var t=this;t.commands.blockquote={execCommand:function(t,i){var n=this.selection.getRange(),o=e(this),r=dtd.blockquote,a=n.createBookmark();if(o){var s=n.startContainer,l=domUtils.isBlockElm(s)?s:domUtils.findParent(s,function(e){return domUtils.isBlockElm(e)}),d=n.endContainer,c=domUtils.isBlockElm(d)?d:domUtils.findParent(d,function(e){return domUtils.isBlockElm(e)});l=domUtils.findParentByTagName(l,"li",!0)||l,c=domUtils.findParentByTagName(c,"li",!0)||c,"LI"==l.tagName||"TD"==l.tagName||l===o||domUtils.isBody(l)?domUtils.remove(o,!0):domUtils.breakParent(l,o),l!==c&&(o=domUtils.findParentByTagName(c,"blockquote"),o&&("LI"==c.tagName||"TD"==c.tagName||domUtils.isBody(c)?o.parentNode&&domUtils.remove(o,!0):domUtils.breakParent(c,o)));for(var u,m=domUtils.getElementsByTagName(this.document,"blockquote"),f=0;u=m[f++];)u.childNodes.length?domUtils.getPosition(u,l)&domUtils.POSITION_FOLLOWING&&domUtils.getPosition(u,c)&domUtils.POSITION_PRECEDING&&domUtils.remove(u,!0):domUtils.remove(u)}else{for(var h=n.cloneRange(),p=1==h.startContainer.nodeType?h.startContainer:h.startContainer.parentNode,g=p,v=1;;){if(domUtils.isBody(p)){g!==p?n.collapsed?(h.selectNode(g),v=0):h.setStartBefore(g):h.setStart(p,0);break}if(!r[p.tagName]){n.collapsed?h.selectNode(g):h.setStartBefore(g);break}g=p,p=p.parentNode}if(v)for(g=p=p=1==h.endContainer.nodeType?h.endContainer:h.endContainer.parentNode;;){if(domUtils.isBody(p)){g!==p?h.setEndAfter(g):h.setEnd(p,p.childNodes.length);break}if(!r[p.tagName]){h.setEndAfter(g);break}g=p,p=p.parentNode}p=n.document.createElement("blockquote"),domUtils.setAttributes(p,i),p.appendChild(h.extractContents()),h.insertNode(p);for(var b,y=domUtils.getElementsByTagName(p,"blockquote"),f=0;b=y[f++];)b.parentNode&&domUtils.remove(b,!0)}n.moveToBookmark(a).select()},queryCommandState:function(){return e(this)?1:0}}},UE.commands.touppercase=UE.commands.tolowercase={execCommand:function(e){var t=this,i=t.selection.getRange();if(i.collapsed)return i;for(var n=i.createBookmark(),o=n.end,r=function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)},a=domUtils.getNextDomNode(n.start,!1,r);a&&domUtils.getPosition(a,o)&domUtils.POSITION_PRECEDING&&(3==a.nodeType&&(a.nodeValue=a.nodeValue["touppercase"==e?"toUpperCase":"toLowerCase"]()),a=domUtils.getNextDomNode(a,!0,r),a!==o););i.moveToBookmark(n).select()}},UE.commands.indent={execCommand:function(){var e=this,t=e.queryCommandState("indent")?"0em":e.options.indentValue||"2em";e.execCommand("Paragraph","p",{style:"text-indent:"+t})},queryCommandState:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return e&&e.style.textIndent&&parseInt(e.style.textIndent)?1:0}},UE.commands.print={execCommand:function(){this.window.print()},notNeedUndo:1},UE.commands.preview={execCommand:function(){var e=window.open("","_blank",""),t=e.document;t.open(),t.write('<!DOCTYPE html><html><head><meta charset="utf-8"/><script src="'+this.options.UEDITOR_HOME_URL+"ueditor.parse.js\"></script><script>setTimeout(function(){uParse('div',{rootPath: '"+this.options.UEDITOR_HOME_URL+"'})},300)</script></head><body><div>"+this.getContent(null,null,!0)+"</div></body></html>"),t.close()},notNeedUndo:1},UE.plugins.selectall=function(){var e=this;e.commands.selectall={execCommand:function(){var e=this,t=e.body,i=e.selection.getRange();i.selectNodeContents(t),domUtils.isEmptyBlock(t)&&(browser.opera&&t.firstChild&&1==t.firstChild.nodeType&&i.setStartAtFirst(t.firstChild),i.collapse(!0)),i.select(!0)},notNeedUndo:1},e.addshortcutkey({selectAll:"ctrl+65"})},UE.plugins.paragraph=function(){var e=this,t=domUtils.isBlockElm,i=["TD","LI","PRE"],n=function(e,n,o,r){var a,s=e.createBookmark(),l=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase()&&!domUtils.isBookmarkNode(e):!domUtils.isWhitespace(e)};e.enlarge(!0);for(var d,c=e.createBookmark(),u=domUtils.getNextDomNode(c.start,!1,l),m=e.cloneRange();u&&!(domUtils.getPosition(u,c.end)&domUtils.POSITION_FOLLOWING);)if(3!=u.nodeType&&t(u))u=domUtils.getNextDomNode(u,!0,l);else{for(m.setStartBefore(u);u&&u!==c.end&&!t(u);)d=u,u=domUtils.getNextDomNode(u,!1,null,function(e){return!t(e)});m.setEndAfter(d),a=e.document.createElement(n),o&&(domUtils.setAttributes(a,o),r&&"customstyle"==r&&o.style&&(a.style.cssText=o.style)),a.appendChild(m.extractContents()),domUtils.isEmptyNode(a)&&domUtils.fillChar(e.document,a),m.insertNode(a);var f=a.parentNode;t(f)&&!domUtils.isBody(a.parentNode)&&-1==utils.indexOf(i,f.tagName)&&(r&&"customstyle"==r||(f.getAttribute("dir")&&a.setAttribute("dir",f.getAttribute("dir")),f.style.cssText&&(a.style.cssText=f.style.cssText+";"+a.style.cssText),f.style.textAlign&&!a.style.textAlign&&(a.style.textAlign=f.style.textAlign),f.style.textIndent&&!a.style.textIndent&&(a.style.textIndent=f.style.textIndent),f.style.padding&&!a.style.padding&&(a.style.padding=f.style.padding)),o&&/h\d/i.test(f.tagName)&&!/h\d/i.test(a.tagName)?(domUtils.setAttributes(f,o),r&&"customstyle"==r&&o.style&&(f.style.cssText=o.style),domUtils.remove(a,!0),a=f):domUtils.remove(a.parentNode,!0)),u=-1!=utils.indexOf(i,f.tagName)?f:a,u=domUtils.getNextDomNode(u,!1,l)}return e.moveToBookmark(c).moveToBookmark(s)};e.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""}),e.commands.paragraph={execCommand:function(e,t,i,o){var r=this.selection.getRange();if(r.collapsed){var a=this.document.createTextNode("p");if(r.insertNode(a),browser.ie){var s=a.previousSibling;s&&domUtils.isWhitespace(s)&&domUtils.remove(s),s=a.nextSibling,s&&domUtils.isWhitespace(s)&&domUtils.remove(s)}}if(r=n(r,t,i,o),a&&(r.setStartBefore(a).collapse(!0),pN=a.parentNode,domUtils.remove(a),domUtils.isBlockElm(pN)&&domUtils.isEmptyNode(pN)&&domUtils.fillNode(this.document,pN)),browser.gecko&&r.collapsed&&1==r.startContainer.nodeType){var l=r.startContainer.childNodes[r.startOffset];l&&1==l.nodeType&&l.tagName.toLowerCase()==t&&r.setStart(l,0).collapse(!0)}return r.select(),!0},queryCommandValue:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return e?e.tagName.toLowerCase():""}}},function(){var e=domUtils.isBlockElm,t=function(e){return domUtils.filterNodeList(e.selection.getStartElementPath(),function(e){return e&&1==e.nodeType&&e.getAttribute("dir")})},i=function(i,n,o){var r,a=function(e){return 1==e.nodeType?!domUtils.isBookmarkNode(e):!domUtils.isWhitespace(e)},s=t(n);if(s&&i.collapsed)return s.setAttribute("dir",o),i;r=i.createBookmark(),i.enlarge(!0);for(var l,d=i.createBookmark(),c=domUtils.getNextDomNode(d.start,!1,a),u=i.cloneRange();c&&!(domUtils.getPosition(c,d.end)&domUtils.POSITION_FOLLOWING);)if(3!=c.nodeType&&e(c))c=domUtils.getNextDomNode(c,!0,a);else{for(u.setStartBefore(c);c&&c!==d.end&&!e(c);)l=c,c=domUtils.getNextDomNode(c,!1,null,function(t){return!e(t)});u.setEndAfter(l);var m=u.getCommonAncestor();if(!domUtils.isBody(m)&&e(m))m.setAttribute("dir",o),c=m;else{var f=i.document.createElement("p");f.setAttribute("dir",o);var h=u.extractContents();f.appendChild(h),u.insertNode(f),c=f}c=domUtils.getNextDomNode(c,!1,a)}return i.moveToBookmark(d).moveToBookmark(r)};UE.commands.directionality={execCommand:function(e,t){var n=this.selection.getRange();if(n.collapsed){var o=this.document.createTextNode("d");n.insertNode(o)}return i(n,this,t),o&&(n.setStartBefore(o).collapse(!0),domUtils.remove(o)),n.select(),!0},queryCommandValue:function(){var e=t(this);return e?e.getAttribute("dir"):"ltr"}}}(),UE.plugins.horizontal=function(){var e=this;e.commands.horizontal={execCommand:function(e){var t=this;if(-1!==t.queryCommandState(e)){t.execCommand("insertHtml","<hr>");var i=t.selection.getRange(),n=i.startContainer;if(1==n.nodeType&&!n.childNodes[i.startOffset]){var o;(o=n.childNodes[i.startOffset-1])&&1==o.nodeType&&"HR"==o.tagName&&("p"==t.options.enterTag?(o=t.document.createElement("p"),i.insertNode(o),i.setStart(o,0).setCursor()):(o=t.document.createElement("br"),i.insertNode(o),i.setStartBefore(o).setCursor()))}return!0}},queryCommandState:function(){return domUtils.filterNodeList(this.selection.getStartElementPath(),"table")?-1:0}},e.addListener("delkeydown",function(e,t){var i=this.selection.getRange();if(i.txtToElmBoundary(!0),domUtils.isStartInblock(i)){var n=i.startContainer,o=n.previousSibling;if(o&&domUtils.isTagNode(o,"hr"))return domUtils.remove(o),i.select(),domUtils.preventDefault(t),!0}})},UE.commands.time=UE.commands.date={execCommand:function(e,t){function i(e,t){var i=("0"+e.getHours()).slice(-2),n=("0"+e.getMinutes()).slice(-2),o=("0"+e.getSeconds()).slice(-2);return t=t||"hh:ii:ss",t.replace(/hh/gi,i).replace(/ii/gi,n).replace(/ss/gi,o)}function n(e,t){var i=("000"+e.getFullYear()).slice(-4),n=i.slice(-2),o=("0"+(e.getMonth()+1)).slice(-2),r=("0"+e.getDate()).slice(-2);return t=t||"yyyy-mm-dd",t.replace(/yyyy/gi,i).replace(/yy/gi,n).replace(/mm/gi,o).replace(/dd/gi,r)}var o=new Date;this.execCommand("insertHtml","time"==e?i(o,t):n(o,t))}},UE.plugins.rowspacing=function(){var e=this;e.setOpt({rowspacingtop:["5","10","15","20","25"],rowspacingbottom:["5","10","15","20","25"]}),e.commands.rowspacing={execCommand:function(e,t,i){return this.execCommand("paragraph","p",{style:"margin-"+i+":"+t+"px"}),!0},queryCommandValue:function(e,t){var i,n=domUtils.filterNodeList(this.selection.getStartElementPath(),function(e){return domUtils.isBlockElm(e)});return n?(i=domUtils.getComputedStyle(n,"margin-"+t).replace(/[^\d]/g,""),i?i:0):0}}},UE.plugins.lineheight=function(){var e=this;e.setOpt({lineheight:["1","1.5","1.75","2","3","4","5"]}),e.commands.lineheight={execCommand:function(e,t){return this.execCommand("paragraph","p",{style:"line-height:"+("1"==t?"normal":t+"em")}),!0},queryCommandValue:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),function(e){return domUtils.isBlockElm(e)});if(e){var t=domUtils.getComputedStyle(e,"line-height");return"normal"==t?1:t.replace(/[^\d.]*/gi,"")}}}},UE.plugins.insertcode=function(){var e=this;e.ready(function(){utils.cssRule("pre","pre{margin:.5em 0;padding:.4em .6em;border-radius:8px;background:#f8f8f8;}",e.document)}),e.setOpt("insertcode",{as3:"ActionScript3",bash:"Bash/Shell",cpp:"C/C++",css:"Css",cf:"CodeFunction","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"Html",java:"Java",jfx:"JavaFx",js:"Javascript",pl:"Perl",php:"Php",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"Sql",vb:"Vb",xml:"Xml"}),e.commands.insertcode={execCommand:function(e,t){var i=this,n=i.selection.getRange(),o=domUtils.findParentByTagName(n.startContainer,"pre",!0);if(o)o.className="brush:"+t+";toolbar:false;";else{var r="";if(n.collapsed)r=browser.ie&&browser.ie11below?browser.version<=8?"&nbsp;":"":"<br/>";else{var a=n.extractContents(),s=i.document.createElement("div");s.appendChild(a),utils.each(UE.filterNode(UE.htmlparser(s.innerHTML.replace(/[\r\t]/g,"")),i.options.filterTxtRules).children,function(e){if(browser.ie&&browser.ie11below&&browser.version>8)"element"==e.type?"br"==e.tagName?r+="\n":dtd.$empty[e.tagName]||(utils.each(e.children,function(t){"element"==t.type?"br"==t.tagName?r+="\n":dtd.$empty[e.tagName]||(r+=t.innerText()):r+=t.data}),/\n$/.test(r)||(r+="\n")):r+=e.data+"\n",!e.nextSibling()&&/\n$/.test(r)&&(r=r.replace(/\n$/,""));else if(browser.ie&&browser.ie11below)"element"==e.type?"br"==e.tagName?r+="<br>":dtd.$empty[e.tagName]||(utils.each(e.children,function(t){"element"==t.type?"br"==t.tagName?r+="<br>":dtd.$empty[e.tagName]||(r+=t.innerText()):r+=t.data}),/br>$/.test(r)||(r+="<br>")):r+=e.data+"<br>",!e.nextSibling()&&/<br>$/.test(r)&&(r=r.replace(/<br>$/,""));else if(r+="element"==e.type?dtd.$empty[e.tagName]?"":e.innerText():e.data,!/br\/?\s*>$/.test(r)){if(!e.nextSibling())return;r+="<br>"}})}i.execCommand("inserthtml",'<pre id="coder"class="brush:'+t+';toolbar:false">'+r+"</pre>",!0),o=i.document.getElementById("coder"),domUtils.removeAttributes(o,"id");var l=o.previousSibling;l&&(3==l.nodeType&&1==l.nodeValue.length&&browser.ie&&6==browser.version||domUtils.isEmptyBlock(l))&&domUtils.remove(l);var n=i.selection.getRange();domUtils.isEmptyBlock(o)?n.setStart(o,0).setCursor(!1,!0):n.selectNodeContents(o).select()}},queryCommandValue:function(){var e=this.selection.getStartElementPath(),t="";return utils.each(e,function(e){if("PRE"==e.nodeName){var i=e.className.match(/brush:([^;]+)/);return t=i&&i[1]?i[1]:"",!1}}),t}},e.addInputRule(function(e){utils.each(e.getNodesByTagName("pre"),function(e){var t=e.getNodesByTagName("br");if(t.length)return void(browser.ie&&browser.ie11below&&browser.version>8&&utils.each(t,function(e){var t=UE.uNode.createText("\n");e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}));if(!(browser.ie&&browser.ie11below&&browser.version>8)){var i=e.innerText().split(/\n/);e.innerHTML(""),utils.each(i,function(t){t.length&&e.appendChild(UE.uNode.createText(t)),e.appendChild(UE.uNode.createElement("br"))})}})}),e.addOutputRule(function(e){utils.each(e.getNodesByTagName("pre"),function(e){var t="";utils.each(e.children,function(e){t+="text"==e.type?e.data.replace(/[ ]/g,"&nbsp;").replace(/\n$/,""):"br"==e.tagName?"\n":dtd.$empty[e.tagName]?e.innerText():""}),e.innerText(t.replace(/(&nbsp;|\n)+$/,""))})}),e.notNeedCodeQuery={help:1,undo:1,redo:1,source:1,print:1,searchreplace:1,fullscreen:1,preview:1,insertparagraph:1,elementpath:1,insertcode:1,inserthtml:1,selectall:1};e.queryCommandState;e.queryCommandState=function(e){var t=this;return!t.notNeedCodeQuery[e.toLowerCase()]&&t.selection&&t.queryCommandValue("insertcode")?-1:UE.Editor.prototype.queryCommandState.apply(this,arguments)},e.addListener("beforeenterkeydown",function(){var t=e.selection.getRange(),i=domUtils.findParentByTagName(t.startContainer,"pre",!0);if(i){if(e.fireEvent("saveScene"),t.collapsed||t.deleteContents(),!browser.ie||browser.ie9above){var i,n=e.document.createElement("br");t.insertNode(n).setStartAfter(n).collapse(!0);var o=n.nextSibling;o||browser.ie&&!(browser.version>10)?t.setStartAfter(n):t.insertNode(n.cloneNode(!1)),i=n.previousSibling;for(var r;i;)if(r=i,i=i.previousSibling,!i||"BR"==i.nodeName){i=r;break}if(i){for(var a="";i&&"BR"!=i.nodeName&&new RegExp("^[\\s"+domUtils.fillChar+"]*$").test(i.nodeValue);)a+=i.nodeValue,i=i.nextSibling;if("BR"!=i.nodeName){var s=i.nodeValue.match(new RegExp("^([\\s"+domUtils.fillChar+"]+)"));s&&s[1]&&(a+=s[1])}a&&(a=e.document.createTextNode(a),t.insertNode(a).setStartAfter(a))}t.collapse(!0).select(!0)}else if(browser.version>8){var l=e.document.createTextNode("\n"),d=t.startContainer;if(0==t.startOffset){var c=d.previousSibling;if(c){t.insertNode(l);var u=e.document.createTextNode(" ");t.setStartAfter(l).insertNode(u).setStart(u,0).collapse(!0).select(!0)}}else{t.insertNode(l).setStartAfter(l);var u=e.document.createTextNode(" ");d=t.startContainer.childNodes[t.startOffset],d&&!/^\n/.test(d.nodeValue)&&t.setStartBefore(l),t.insertNode(u).setStart(u,0).collapse(!0).select(!0)
}}else{var n=e.document.createElement("br");t.insertNode(n),t.insertNode(e.document.createTextNode(domUtils.fillChar)),t.setStartAfter(n),i=n.previousSibling;for(var r;i;)if(r=i,i=i.previousSibling,!i||"BR"==i.nodeName){i=r;break}if(i){for(var a="";i&&"BR"!=i.nodeName&&new RegExp("^[ "+domUtils.fillChar+"]*$").test(i.nodeValue);)a+=i.nodeValue,i=i.nextSibling;if("BR"!=i.nodeName){var s=i.nodeValue.match(new RegExp("^([ "+domUtils.fillChar+"]+)"));s&&s[1]&&(a+=s[1])}a=e.document.createTextNode(a),t.insertNode(a).setStartAfter(a)}t.collapse(!0).select()}return e.fireEvent("saveScene"),!0}}),e.addListener("tabkeydown",function(t,i){var n=e.selection.getRange(),o=domUtils.findParentByTagName(n.startContainer,"pre",!0);if(o){if(e.fireEvent("saveScene"),i.shiftKey);else if(n.collapsed){var r=e.document.createTextNode("    ");n.insertNode(r).setStartAfter(r).collapse(!0).select(!0)}else{for(var a=n.createBookmark(),s=a.start.previousSibling;s;){if(o.firstChild===s&&!domUtils.isBr(s)){o.insertBefore(e.document.createTextNode("    "),s);break}if(domUtils.isBr(s)){o.insertBefore(e.document.createTextNode("    "),s.nextSibling);break}s=s.previousSibling}var l=a.end;for(s=a.start.nextSibling,o.firstChild===a.start&&o.insertBefore(e.document.createTextNode("    "),s.nextSibling);s&&s!==l;){if(domUtils.isBr(s)&&s.nextSibling){if(s.nextSibling===l)break;o.insertBefore(e.document.createTextNode("    "),s.nextSibling)}s=s.nextSibling}n.moveToBookmark(a).select()}return e.fireEvent("saveScene"),!0}}),e.addListener("beforeinserthtml",function(e,t){var i=this,n=i.selection.getRange(),o=domUtils.findParentByTagName(n.startContainer,"pre",!0);if(o){n.collapsed||n.deleteContents();var r="";if(browser.ie&&browser.version>8){utils.each(UE.filterNode(UE.htmlparser(t),i.options.filterTxtRules).children,function(e){"element"==e.type?"br"==e.tagName?r+="\n":dtd.$empty[e.tagName]||(utils.each(e.children,function(t){"element"==t.type?"br"==t.tagName?r+="\n":dtd.$empty[e.tagName]||(r+=t.innerText()):r+=t.data}),/\n$/.test(r)||(r+="\n")):r+=e.data+"\n",!e.nextSibling()&&/\n$/.test(r)&&(r=r.replace(/\n$/,""))});var a=i.document.createTextNode(utils.html(r.replace(/&nbsp;/g," ")));n.insertNode(a).selectNode(a).select()}else{var s=i.document.createDocumentFragment();utils.each(UE.filterNode(UE.htmlparser(t),i.options.filterTxtRules).children,function(e){"element"==e.type?"br"==e.tagName?s.appendChild(i.document.createElement("br")):dtd.$empty[e.tagName]||(utils.each(e.children,function(t){"element"==t.type?"br"==t.tagName?s.appendChild(i.document.createElement("br")):dtd.$empty[e.tagName]||s.appendChild(i.document.createTextNode(utils.html(t.innerText().replace(/&nbsp;/g," ")))):s.appendChild(i.document.createTextNode(utils.html(t.data.replace(/&nbsp;/g," "))))}),"BR"!=s.lastChild.nodeName&&s.appendChild(i.document.createElement("br"))):s.appendChild(i.document.createTextNode(utils.html(e.data.replace(/&nbsp;/g," ")))),e.nextSibling()||"BR"!=s.lastChild.nodeName||s.removeChild(s.lastChild)}),n.insertNode(s).select()}return!0}}),e.addListener("keydown",function(e,t){var i=this,n=t.keyCode||t.which;if(40==n){var o,r=i.selection.getRange(),a=r.startContainer;if(r.collapsed&&(o=domUtils.findParentByTagName(r.startContainer,"pre",!0))&&!o.nextSibling){for(var s=o.lastChild;s&&"BR"==s.nodeName;)s=s.previousSibling;(s===a||r.startContainer===o&&r.startOffset==o.childNodes.length)&&(i.execCommand("insertparagraph"),domUtils.preventDefault(t))}}}),e.addListener("delkeydown",function(t,i){var n=this.selection.getRange();n.txtToElmBoundary(!0);var o=n.startContainer;if(domUtils.isTagNode(o,"pre")&&n.collapsed&&domUtils.isStartInblock(n)){var r=e.document.createElement("p");return domUtils.fillNode(e.document,r),o.parentNode.insertBefore(r,o),domUtils.remove(o),n.setStart(r,0).setCursor(!1,!0),domUtils.preventDefault(i),!0}})},UE.commands.cleardoc={execCommand:function(){var e=this,t=e.options.enterTag,i=e.selection.getRange();"br"==t?(e.body.innerHTML="<br/>",i.setStart(e.body,0).setCursor()):(e.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>",i.setStart(e.body.firstChild,0).setCursor(!1,!0)),setTimeout(function(){e.fireEvent("clearDoc")},0)}},UE.plugin.register("anchor",function(){return{bindEvents:{ready:function(){utils.cssRule("anchor",".anchorclass{background: url('"+this.options.themePath+this.options.theme+"/images/anchor.gif') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}",this.document)}},outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){var t;(t=e.getAttr("anchorname"))&&(e.tagName="a",e.setAttr({anchorname:"",name:t,"class":""}))})},inputRule:function(e){utils.each(e.getNodesByTagName("a"),function(e){var t;(t=e.getAttr("name"))&&!e.getAttr("href")&&(e.tagName="img",e.setAttr({anchorname:e.getAttr("name"),"class":"anchorclass"}),e.setAttr("name"))})},commands:{anchor:{execCommand:function(e,t){var i=this.selection.getRange(),n=i.getClosedNode();if(n&&n.getAttribute("anchorname"))t?n.setAttribute("anchorname",t):(i.setStartBefore(n).setCursor(),domUtils.remove(n));else if(t){var o=this.document.createElement("img");i.collapse(!0),domUtils.setAttributes(o,{anchorname:t,"class":"anchorclass"}),i.insertNode(o).setStartAfter(o).setCursor(!1,!0)}}}}}}),UE.plugins.wordcount=function(){var e=this;e.setOpt("wordCount",!0),e.addListener("contentchange",function(){e.fireEvent("wordcount")});var t;e.addListener("ready",function(){var e=this;domUtils.on(e.body,"keyup",function(i){var n=i.keyCode||i.which,o={16:1,18:1,20:1,37:1,38:1,39:1,40:1};n in o||(clearTimeout(t),t=setTimeout(function(){e.fireEvent("wordcount")},200))})})},UE.plugins.pagebreak=function(){function e(e){if(domUtils.isEmptyBlock(e)){for(var t,n=e.firstChild;n&&1==n.nodeType&&domUtils.isEmptyBlock(n);)t=n,n=n.firstChild;!t&&(t=e),domUtils.fillNode(i.document,t)}}function t(e){return e&&1==e.nodeType&&"HR"==e.tagName&&"pagebreak"==e.className}var i=this,n=["td"];i.setOpt("pageBreakTag","_ueditor_page_break_tag_"),i.ready(function(){utils.cssRule("pagebreak",".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}",i.document)}),i.addInputRule(function(e){e.traversal(function(e){if("text"==e.type&&e.data==i.options.pageBreakTag){var t=UE.uNode.createElement('<hr class="pagebreak" noshade="noshade" size="5" style="-webkit-user-select: none;">');e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}})}),i.addOutputRule(function(e){utils.each(e.getNodesByTagName("hr"),function(e){if("pagebreak"==e.getAttr("class")){var t=UE.uNode.createText(i.options.pageBreakTag);e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}})}),i.commands.pagebreak={execCommand:function(){var o=i.selection.getRange(),r=i.document.createElement("hr");domUtils.setAttributes(r,{"class":"pagebreak",noshade:"noshade",size:"5"}),domUtils.unSelectable(r);var a,s=domUtils.findParentByTagName(o.startContainer,n,!0),l=[];if(s)switch(s.tagName){case"TD":if(a=s.parentNode,a.previousSibling)a.parentNode.insertBefore(r,a),l=domUtils.findParents(r);else{var d=domUtils.findParentByTagName(a,"table");d.parentNode.insertBefore(r,d),l=domUtils.findParents(r,!0)}a=l[1],r!==a&&domUtils.breakParent(r,a),i.fireEvent("afteradjusttable",i.document)}else{if(!o.collapsed){o.deleteContents();for(var c=o.startContainer;!domUtils.isBody(c)&&domUtils.isBlockElm(c)&&domUtils.isEmptyNode(c);)o.setStartBefore(c).collapse(!0),domUtils.remove(c),c=o.startContainer}o.insertNode(r);for(var u,a=r.parentNode;!domUtils.isBody(a);)domUtils.breakParent(r,a),u=r.nextSibling,u&&domUtils.isEmptyBlock(u)&&domUtils.remove(u),a=r.parentNode;u=r.nextSibling;var m=r.previousSibling;if(t(m)?domUtils.remove(m):m&&e(m),u)t(u)?domUtils.remove(u):e(u),o.setEndAfter(r).collapse(!1);else{var f=i.document.createElement("p");r.parentNode.appendChild(f),domUtils.fillNode(i.document,f),o.setStart(f,0).collapse(!0)}o.select(!0)}}}},UE.plugin.register("wordimage",function(){var e=this,t=[];return{commands:{wordimage:{execCommand:function(){for(var t,i=domUtils.getElementsByTagName(e.body,"img"),n=[],o=0;t=i[o++];){var r=t.getAttribute("word_img");r&&n.push(r)}return n},queryCommandState:function(){t=domUtils.getElementsByTagName(e.body,"img");for(var i,n=0;i=t[n++];)if(i.getAttribute("word_img"))return 1;return-1},notNeedUndo:!0}},inputRule:function(t){utils.each(t.getNodesByTagName("img"),function(t){var i=t.attrs,n=parseInt(i.width)<128||parseInt(i.height)<43,o=e.options,r=o.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";i.src&&/^(?:(file:\/+))/.test(i.src)&&t.setAttr({width:i.width,height:i.height,alt:i.alt,word_img:i.src,src:r,style:"background:url("+(n?o.themePath+o.theme+"/images/word.gif":o.langPath+o.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd"})})}}}),UE.plugins.dragdrop=function(){var e=this;e.ready(function(){domUtils.on(this.body,"dragend",function(){var t=e.selection.getRange(),i=t.getClosedNode()||e.selection.getStart();if(i&&"IMG"==i.tagName){for(var n,o=i.previousSibling;(n=i.nextSibling)&&1==n.nodeType&&"SPAN"==n.tagName&&!n.firstChild;)domUtils.remove(n);(!o||1!=o.nodeType||domUtils.isEmptyBlock(o))&&o||n&&(!n||domUtils.isEmptyBlock(n))||(o&&"P"==o.tagName&&!domUtils.isEmptyBlock(o)?(o.appendChild(i),domUtils.moveChild(n,o),domUtils.remove(n)):n&&"P"==n.tagName&&!domUtils.isEmptyBlock(n)&&n.insertBefore(i,n.firstChild),o&&"P"==o.tagName&&domUtils.isEmptyBlock(o)&&domUtils.remove(o),n&&"P"==n.tagName&&domUtils.isEmptyBlock(n)&&domUtils.remove(n),t.selectNode(i).select(),e.fireEvent("saveScene"))}})}),e.addListener("keyup",function(t,i){var n=i.keyCode||i.which;if(13==n){var o,r=e.selection.getRange();(o=domUtils.findParentByTagName(r.startContainer,"p",!0))&&"center"==domUtils.getComputedStyle(o,"text-align")&&domUtils.removeStyle(o,"text-align")}})},UE.plugins.undo=function(){function e(e,t){if(e.length!=t.length)return 0;for(var i=0,n=e.length;n>i;i++)if(e[i]!=t[i])return 0;return 1}function t(t,i){return t.collapsed!=i.collapsed?0:e(t.startAddress,i.startAddress)&&e(t.endAddress,i.endAddress)?1:0}function i(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.undo=function(){if(this.hasUndo){if(!this.list[this.index-1]&&1==this.list.length)return void this.reset();for(;this.list[this.index].content==this.list[this.index-1].content;)if(this.index--,0==this.index)return this.restore(0);this.restore(--this.index)}},this.redo=function(){if(this.hasRedo){for(;this.list[this.index].content==this.list[this.index+1].content;)if(this.index++,this.index==this.list.length-1)return this.restore(this.index);this.restore(++this.index)}},this.restore=function(){var e=this.editor,t=this.list[this.index],i=UE.htmlparser(t.content.replace(s,""));e.options.autoClearEmptyNode=!1,e.filterInputRule(i),e.options.autoClearEmptyNode=d,e.document.body.innerHTML=i.toHtml(),e.fireEvent("afterscencerestore"),browser.ie&&utils.each(domUtils.getElementsByTagName(e.document,"td th caption p"),function(t){domUtils.isEmptyNode(t)&&domUtils.fillNode(e.document,t)});try{var n=new dom.Range(e.document).moveToAddress(t.address);n.select(l[n.startContainer.nodeName.toLowerCase()])}catch(o){}this.update(),this.clearKey(),e.fireEvent("reset",!0)},this.getScene=function(){var e=this.editor,t=e.selection.getRange(),i=t.createAddress(!1,!0);e.fireEvent("beforegetscene");var n=UE.htmlparser(e.body.innerHTML);e.options.autoClearEmptyNode=!1,e.filterOutputRule(n),e.options.autoClearEmptyNode=d;var o=n.toHtml();return e.fireEvent("aftergetscene"),{address:i,content:o}},this.save=function(e,i){clearTimeout(n);var a=this.getScene(i),s=this.list[this.index];s&&s.content!=a.content&&o.trigger("contentchange"),s&&s.content==a.content&&(e?1:t(s.address,a.address))||(this.list=this.list.slice(0,this.index+1),this.list.push(a),this.list.length>r&&this.list.shift(),this.index=this.list.length-1,this.clearKey(),this.update())},this.update=function(){this.hasRedo=!!this.list[this.index+1],this.hasUndo=!!this.list[this.index-1]},this.reset=function(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.clearKey()},this.clearKey=function(){m=0,c=null}}var n,o=this,r=o.options.maxUndoCount||20,a=o.options.maxInputCount||20,s=new RegExp(domUtils.fillChar+"|</hr>","gi"),l={ol:1,ul:1,table:1,tbody:1,tr:1,body:1},d=o.options.autoClearEmptyNode;o.undoManger=new i,o.undoManger.editor=o,o.addListener("saveScene",function(){var e=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,e)}),o.addListener("reset",function(e,t){t||this.undoManger.reset()}),o.commands.redo=o.commands.undo={execCommand:function(e){this.undoManger[e]()},queryCommandState:function(e){return this.undoManger["has"+("undo"==e.toLowerCase()?"Undo":"Redo")]?0:-1},notNeedUndo:1};var c,u={16:1,17:1,18:1,37:1,38:1,39:1,40:1},m=0,f=!1;o.addListener("ready",function(){domUtils.on(this.body,"compositionstart",function(){f=!0}),domUtils.on(this.body,"compositionend",function(){f=!1})}),o.addshortcutkey({Undo:"ctrl+90",Redo:"ctrl+89"});var h=!0;o.addListener("keydown",function(e,t){function i(e){e.undoManger.save(!1,!0),e.fireEvent("selectionchange")}var o=this,r=t.keyCode||t.which;if(!(u[r]||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){if(f)return;if(!o.selection.getRange().collapsed)return o.undoManger.save(!1,!0),void(h=!1);0==o.undoManger.list.length&&o.undoManger.save(!0),clearTimeout(n),n=setTimeout(function(){if(f)var e=setInterval(function(){f||(i(o),clearInterval(e))},300);else i(o)},200),c=r,m++,m>=a&&i(o)}}),o.addListener("keyup",function(e,t){var i=t.keyCode||t.which;if(!(u[i]||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){if(f)return;h||(this.undoManger.save(!1,!0),h=!0)}}),o.stopCmdUndo=function(){o.__hasEnterExecCommand=!0},o.startCmdUndo=function(){o.__hasEnterExecCommand=!1}},UE.plugin.register("copy",function(){function e(){ZeroClipboardUeditor.config({debug:!1,swfPath:t.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.swf"});var e=t.zeroclipboard=new ZeroClipboardUeditor;e.on("copy",function(e){var i=e.client,n=t.selection.getRange(),o=document.createElement("div");o.appendChild(n.cloneContents()),i.setText(o.innerText||o.textContent),i.setHtml(o.innerHTML),n.select()}),e.on("mouseover mouseout",function(e){var t=e.target;"mouseover"==e.type?domUtils.addClass(t,"edui-state-hover"):"mouseout"==e.type&&domUtils.removeClasses(t,"edui-state-hover")}),e.on("wrongflash noflash",function(){ZeroClipboardUeditor.destroy()})}var t=this;return{bindEvents:{ready:function(){browser.ie||(window.ZeroClipboardUeditor?e():utils.loadFile(document,{src:t.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.js",tag:"script",type:"text/javascript",defer:"defer"},function(){e()}))}},commands:{copy:{execCommand:function(){t.document.execCommand("copy")||alert(t.getLang("copymsg"))}}}}}),UE.plugins.paste=function(){function e(e){var t=this.document;if(!t.getElementById("baidu_pastebin")){var i=this.selection.getRange(),n=i.createBookmark(),o=t.createElement("div");o.id="baidu_pastebin",browser.webkit&&o.appendChild(t.createTextNode(domUtils.fillChar+domUtils.fillChar)),t.body.appendChild(o),n.start.style.display="",o.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+domUtils.getXY(n.start).y+"px",i.selectNodeContents(o).select(!0),setTimeout(function(){if(browser.webkit)for(var r,a=0,s=t.querySelectorAll("#baidu_pastebin");r=s[a++];){if(!domUtils.isEmptyNode(r)){o=r;break}domUtils.remove(r)}try{o.parentNode.removeChild(o)}catch(l){}i.moveToBookmark(n).select(!0),e(o)},0)}}function t(e){return e.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,function(e,t,i,n){return i=i.toLowerCase(),{img:1}[i]?e:(n=n.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,function(e,t,i){return{src:1,href:1,name:1}[t.toLowerCase()]?t+"="+i+" ":""}),{span:1,div:1}[i]?"":"<"+t+i+" "+utils.trim(n)+">")})}function i(e){var i;if(e.firstChild){for(var s,l=domUtils.getElementsByTagName(e,"span"),d=0;s=l[d++];)("_baidu_cut_start"==s.id||"_baidu_cut_end"==s.id)&&domUtils.remove(s);if(browser.webkit){for(var c,u=e.querySelectorAll("div br"),d=0;c=u[d++];){var m=c.parentNode;"DIV"==m.tagName&&1==m.childNodes.length&&(m.innerHTML="<p><br/></p>",domUtils.remove(m))}for(var f,h=e.querySelectorAll("#baidu_pastebin"),d=0;f=h[d++];){var p=n.document.createElement("p");for(f.parentNode.insertBefore(p,f);f.firstChild;)p.appendChild(f.firstChild);domUtils.remove(f)}for(var g,v=e.querySelectorAll("meta"),d=0;g=v[d++];)domUtils.remove(g);var u=e.querySelectorAll("br");for(d=0;g=u[d++];)/^apple-/i.test(g.className)&&domUtils.remove(g)}if(browser.gecko){var b=e.querySelectorAll("[_moz_dirty]");for(d=0;g=b[d++];)g.removeAttribute("_moz_dirty")}if(!browser.ie)for(var g,y=e.querySelectorAll("span.Apple-style-span"),d=0;g=y[d++];)domUtils.remove(g,!0);i=e.innerHTML,i=UE.filterWord(i);var C=UE.htmlparser(i);if(n.options.filterRules&&UE.filterNode(C,n.options.filterRules),n.filterInputRule(C),browser.webkit){var N=C.lastChild();N&&"element"==N.type&&"br"==N.tagName&&C.removeChild(N),utils.each(n.body.querySelectorAll("div"),function(e){domUtils.isEmptyBlock(e)&&domUtils.remove(e,!0)})}if(i={html:C.toHtml()},n.fireEvent("beforepaste",i,C),!i.html)return;C=UE.htmlparser(i.html,!0),1===n.queryCommandState("pasteplain")?n.execCommand("insertHtml",UE.filterNode(C,n.options.filterTxtRules).toHtml(),!0):(UE.filterNode(C,n.options.filterTxtRules),o=C.toHtml(),r=i.html,a=n.selection.getRange().createAddress(!0),n.execCommand("insertHtml",n.getOpt("retainOnlyLabelPasted")===!0?t(r):r,!0)),n.fireEvent("afterpaste",i)}}var n=this;n.setOpt({retainOnlyLabelPasted:!1});var o,r,a;n.addListener("pasteTransfer",function(e,i){if(a&&o&&r&&o!=r){var s=n.selection.getRange();if(s.moveToAddress(a,!0),!s.collapsed){for(;!domUtils.isBody(s.startContainer);){var l=s.startContainer;if(1==l.nodeType){if(l=l.childNodes[s.startOffset],!l){s.setStartBefore(s.startContainer);continue}var d=l.previousSibling;d&&3==d.nodeType&&new RegExp("^[\n\r	 "+domUtils.fillChar+"]*$").test(d.nodeValue)&&s.setStartBefore(d)}if(0!=s.startOffset)break;s.setStartBefore(s.startContainer)}for(;!domUtils.isBody(s.endContainer);){var c=s.endContainer;if(1==c.nodeType){if(c=c.childNodes[s.endOffset],!c){s.setEndAfter(s.endContainer);continue}var u=c.nextSibling;u&&3==u.nodeType&&new RegExp("^[\n\r	"+domUtils.fillChar+"]*$").test(u.nodeValue)&&s.setEndAfter(u)}if(s.endOffset!=s.endContainer[3==s.endContainer.nodeType?"nodeValue":"childNodes"].length)break;s.setEndAfter(s.endContainer)}}s.deleteContents(),s.select(!0),n.__hasEnterExecCommand=!0;var m=r;2===i?m=t(m):i&&(m=o),n.execCommand("inserthtml",m,!0),n.__hasEnterExecCommand=!1;for(var f=n.selection.getRange();!domUtils.isBody(f.startContainer)&&!f.startOffset&&f.startContainer[3==f.startContainer.nodeType?"nodeValue":"childNodes"].length;)f.setStartBefore(f.startContainer);var h=f.createAddress(!0);a.endAddress=h.startAddress}}),n.addListener("ready",function(){domUtils.on(n.body,"cut",function(){var e=n.selection.getRange();!e.collapsed&&n.undoManger&&n.undoManger.save()}),domUtils.on(n.body,browser.ie||browser.opera?"keydown":"paste",function(t){(!browser.ie&&!browser.opera||(t.ctrlKey||t.metaKey)&&"86"==t.keyCode)&&e.call(n,function(e){i(e)})})}),n.commands.paste={execCommand:function(){browser.ie?(e.call(n,function(e){i(e)}),n.document.execCommand("paste")):alert(n.getLang("pastemsg"))}}},UE.plugins.pasteplain=function(){var e=this;e.setOpt({pasteplain:!1,filterTxtRules:function(){function e(e){e.tagName="p",e.setStyle()}function t(e){e.parentNode.removeChild(e,!0)}return{"-":"script style object iframe embed input select",p:{$:{}},br:{$:{}},div:function(e){for(var t,i=UE.uNode.createElement("p");t=e.firstChild();)"text"!=t.type&&UE.dom.dtd.$block[t.tagName]?i.firstChild()?(e.parentNode.insertBefore(i,e),i=UE.uNode.createElement("p")):e.parentNode.insertBefore(t,e):i.appendChild(t);i.firstChild()&&e.parentNode.insertBefore(i,e),e.parentNode.removeChild(e)},ol:t,ul:t,dl:t,dt:t,dd:t,li:t,caption:e,th:e,tr:e,h1:e,h2:e,h3:e,h4:e,h5:e,h6:e,td:function(e){var t=!!e.innerText();t&&e.parentNode.insertAfter(UE.uNode.createText(" &nbsp; &nbsp;"),e),e.parentNode.removeChild(e,e.innerText())}}}()});var t=e.options.pasteplain;e.commands.pasteplain={queryCommandState:function(){return t?1:0},execCommand:function(){t=0|!t},notNeedUndo:1}},UE.plugins.list=function(){function e(e){var t=[];for(var i in e)t.push(i);return t}function t(e){var t=e.className;return domUtils.hasClass(e,/custom_/)?t.match(/custom_(\w+)/)[1]:domUtils.getStyle(e,"list-style-type")}function i(e,i){utils.each(domUtils.getElementsByTagName(e,"ol ul"),function(r){if(domUtils.inDoc(r,e)){var a=r.parentNode;if(a.tagName==r.tagName){var s=t(r)||("OL"==r.tagName?"decimal":"disc"),l=t(a)||("OL"==a.tagName?"decimal":"disc");if(s==l){var u=utils.indexOf(c[r.tagName],s);u=u+1==c[r.tagName].length?0:u+1,o(r,c[r.tagName][u])}}var m=0,f=2;domUtils.hasClass(r,/custom_/)?/[ou]l/i.test(a.tagName)&&domUtils.hasClass(a,/custom_/)||(f=1):/[ou]l/i.test(a.tagName)&&domUtils.hasClass(a,/custom_/)&&(f=3);var h=domUtils.getStyle(r,"list-style-type");h&&(r.style.cssText="list-style-type:"+h),r.className=utils.trim(r.className.replace(/list-paddingleft-\w+/,""))+" list-paddingleft-"+f,utils.each(domUtils.getElementsByTagName(r,"li"),function(e){if(e.style.cssText&&(e.style.cssText=""),!e.firstChild)return void domUtils.remove(e);if(e.parentNode===r){if(m++,domUtils.hasClass(r,/custom_/)){var i=1,n=t(r);if("OL"==r.tagName){if(n)switch(n){case"cn":case"cn1":case"cn2":m>10&&(m%10==0||m>10&&20>m)?i=2:m>20&&(i=3);break;case"num2":m>9&&(i=2)}e.className="list-"+d[n]+m+" list-"+n+"-paddingleft-"+i}else e.className="list-"+d[n]+" list-"+n+"-paddingleft"}else e.className=e.className.replace(/list-[\w\-]+/gi,"");var o=e.getAttribute("class");null===o||o.replace(/\s/g,"")||domUtils.removeAttributes(e,"class")}}),!i&&n(r,r.tagName.toLowerCase(),t(r)||domUtils.getStyle(r,"list-style-type"),!0)}})}function n(e,n,o,r){var a=e.nextSibling;a&&1==a.nodeType&&a.tagName.toLowerCase()==n&&(t(a)||domUtils.getStyle(a,"list-style-type")||("ol"==n?"decimal":"disc"))==o&&(domUtils.moveChild(a,e),0==a.childNodes.length&&domUtils.remove(a)),a&&domUtils.isFillChar(a)&&domUtils.remove(a);var s=e.previousSibling;s&&1==s.nodeType&&s.tagName.toLowerCase()==n&&(t(s)||domUtils.getStyle(s,"list-style-type")||("ol"==n?"decimal":"disc"))==o&&domUtils.moveChild(e,s),s&&domUtils.isFillChar(s)&&domUtils.remove(s),!r&&domUtils.isEmptyBlock(e)&&domUtils.remove(e),t(e)&&i(e.ownerDocument,!0)}function o(e,t){d[t]&&(e.className="custom_"+t);try{domUtils.setStyle(e,"list-style-type",t)}catch(i){}}function r(e){var t=e.previousSibling;t&&domUtils.isEmptyBlock(t)&&domUtils.remove(t),t=e.nextSibling,t&&domUtils.isEmptyBlock(t)&&domUtils.remove(t)}function a(e){for(;e&&!domUtils.isBody(e);){if("TABLE"==e.nodeName)return null;if("LI"==e.nodeName)return e;e=e.parentNode}}var s=this,l={TD:1,PRE:1,BLOCKQUOTE:1},d={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};s.setOpt({autoTransWordToList:!1,insertorderedlist:{num:"",num1:"",num2:"",cn:"",cn1:"",cn2:"",decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:"",dash:"",dot:""},listDefaultPaddingLeft:"30",listiconpath:"http://bs.baidu.com/listicon/",maxListLevel:-1,disablePInList:!1});var c={OL:e(s.options.insertorderedlist),UL:e(s.options.insertunorderedlist)},u=s.options.listiconpath;for(var m in d)s.options.insertorderedlist.hasOwnProperty(m)||s.options.insertunorderedlist.hasOwnProperty(m)||delete d[m];s.ready(function(){var e=[];for(var t in d){if("dash"==t||"dot"==t)e.push("li.list-"+d[t]+"{background-image:url("+u+d[t]+".gif)}"),e.push("ul.custom_"+t+"{list-style:none;}ul.custom_"+t+" li{background-position:0 3px;background-repeat:no-repeat}");else{for(var i=0;99>i;i++)e.push("li.list-"+d[t]+i+"{background-image:url("+u+"list-"+d[t]+i+".gif)}");e.push("ol.custom_"+t+"{list-style:none;}ol.custom_"+t+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(t){case"cn":e.push("li.list-"+t+"-paddingleft-1{padding-left:25px}"),e.push("li.list-"+t+"-paddingleft-2{padding-left:40px}"),e.push("li.list-"+t+"-paddingleft-3{padding-left:55px}");break;case"cn1":e.push("li.list-"+t+"-paddingleft-1{padding-left:30px}"),e.push("li.list-"+t+"-paddingleft-2{padding-left:40px}"),e.push("li.list-"+t+"-paddingleft-3{padding-left:55px}");break;case"cn2":e.push("li.list-"+t+"-paddingleft-1{padding-left:40px}"),e.push("li.list-"+t+"-paddingleft-2{padding-left:55px}"),e.push("li.list-"+t+"-paddingleft-3{padding-left:68px}");break;case"num":case"num1":e.push("li.list-"+t+"-paddingleft-1{padding-left:25px}");break;case"num2":e.push("li.list-"+t+"-paddingleft-1{padding-left:35px}"),e.push("li.list-"+t+"-paddingleft-2{padding-left:40px}");break;case"dash":e.push("li.list-"+t+"-paddingleft{padding-left:35px}");break;case"dot":e.push("li.list-"+t+"-paddingleft{padding-left:20px}")}}e.push(".list-paddingleft-1{padding-left:0}"),e.push(".list-paddingleft-2{padding-left:"+s.options.listDefaultPaddingLeft+"px}"),e.push(".list-paddingleft-3{padding-left:"+2*s.options.listDefaultPaddingLeft+"px}"),utils.cssRule("list","ol,ul{margin:0;pading:0;"+(browser.ie?"":"width:95%")+"}li{clear:both;}"+e.join("\n"),s.document)}),s.ready(function(){domUtils.on(s.body,"cut",function(){setTimeout(function(){var e,t=s.selection.getRange();if(!t.collapsed&&(e=domUtils.findParentByTagName(t.startContainer,"li",!0))&&!e.nextSibling&&domUtils.isEmptyBlock(e)){var i,n=e.parentNode;if(i=n.previousSibling)domUtils.remove(n),t.setStartAtLast(i).collapse(!0),t.select(!0);else if(i=n.nextSibling)domUtils.remove(n),t.setStartAtFirst(i).collapse(!0),t.select(!0);else{var o=s.document.createElement("p");domUtils.fillNode(s.document,o),n.parentNode.insertBefore(o,n),domUtils.remove(n),t.setStart(o,0).collapse(!0),t.select(!0)}}})})}),s.addListener("beforepaste",function(e,i){var n,o=this,r=o.selection.getRange(),a=UE.htmlparser(i.html,!0);if(n=domUtils.findParentByTagName(r.startContainer,"li",!0)){var s=n.parentNode,l="OL"==s.tagName?"ul":"ol";utils.each(a.getNodesByTagName(l),function(i){if(i.tagName=s.tagName,i.setAttr(),i.parentNode===a)e=t(s)||("OL"==s.tagName?"decimal":"disc");else{var n=i.parentNode.getAttr("class");e=n&&/custom_/.test(n)?n.match(/custom_(\w+)/)[1]:i.parentNode.getStyle("list-style-type"),e||(e="OL"==s.tagName?"decimal":"disc")}var o=utils.indexOf(c[s.tagName],e);i.parentNode!==a&&(o=o+1==c[s.tagName].length?0:o+1);var r=c[s.tagName][o];d[r]?i.setAttr("class","custom_"+r):i.setStyle("list-style-type",r)})}i.html=a.toHtml()}),s.getOpt("disablePInList")===!0&&s.addOutputRule(function(e){utils.each(e.getNodesByTagName("li"),function(e){var t=[],i=0;utils.each(e.children,function(n){if("p"==n.tagName){for(var o;o=n.children.pop();)t.splice(i,0,o),o.parentNode=e,lastNode=o;if(o=t[t.length-1],!o||"element"!=o.type||"br"!=o.tagName){var r=UE.uNode.createElement("br");r.parentNode=e,t.push(r)}i=t.length}}),t.length&&(e.children=t)})}),s.addInputRule(function(e){function t(e,t){var o=t.firstChild();if(o&&"element"==o.type&&"span"==o.tagName&&/Wingdings|Symbol/.test(o.getStyle("font-family"))){for(var r in n)if(n[r]==o.data)return r;return"disc"}for(var r in i)if(i[r].test(e))return r}if(utils.each(e.getNodesByTagName("li"),function(e){for(var t,i=UE.uNode.createElement("p"),n=0;t=e.children[n];)"text"==t.type||dtd.p[t.tagName]?i.appendChild(t):i.firstChild()?(e.insertBefore(i,t),i=UE.uNode.createElement("p"),n+=2):n++;(i.firstChild()&&!i.parentNode||!e.firstChild())&&e.appendChild(i),i.firstChild()||i.innerHTML(browser.ie?"&nbsp;":"<br/>");var o=e.firstChild(),r=o.lastChild();r&&"text"==r.type&&/^\s*$/.test(r.data)&&o.removeChild(r)}),s.options.autoTransWordToList){var i={num1:/^\d+\)/,decimal:/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,cn:/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,cn2:/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},n={square:"n"};utils.each(e.getNodesByTagName("p"),function(e){function n(e,t,n){if("ol"==e.tagName)if(browser.ie){var o=t.firstChild();"element"==o.type&&"span"==o.tagName&&i[n].test(o.innerText())&&t.removeChild(o)}else t.innerHTML(t.innerHTML().replace(i[n],""));else t.removeChild(t.firstChild());var r=UE.uNode.createElement("li");r.appendChild(t),e.appendChild(r)}if("MsoListParagraph"==e.getAttr("class")){e.setStyle("margin",""),e.setStyle("margin-left",""),e.setAttr("class","");var o,r=e,a=e;if("li"!=e.parentNode.tagName&&(o=t(e.innerText(),e))){var l=UE.uNode.createElement(s.options.insertorderedlist.hasOwnProperty(o)?"ol":"ul");for(d[o]?l.setAttr("class","custom_"+o):l.setStyle("list-style-type",o);e&&"li"!=e.parentNode.tagName&&t(e.innerText(),e);)r=e.nextSibling(),r||e.parentNode.insertBefore(l,e),n(l,e,o),e=r;!l.parentNode&&e&&e.parentNode&&e.parentNode.insertBefore(l,e)}var c=a.firstChild();c&&"element"==c.type&&"span"==c.tagName&&/^\s*(&nbsp;)+\s*$/.test(c.innerText())&&c.parentNode.removeChild(c)}})}}),s.addListener("contentchange",function(){i(s.document)}),s.addListener("keydown",function(e,t){function i(){t.preventDefault?t.preventDefault():t.returnValue=!1,s.fireEvent("contentchange"),s.undoManger&&s.undoManger.save()}function n(e,t){for(;e&&!domUtils.isBody(e);){if(t(e))return null;if(1==e.nodeType&&/[ou]l/i.test(e.tagName))return e;e=e.parentNode}return null}var o=t.keyCode||t.which;if(13==o&&!t.shiftKey){var a=s.selection.getRange(),l=domUtils.findParent(a.startContainer,function(e){return domUtils.isBlockElm(e)},!0),d=domUtils.findParentByTagName(a.startContainer,"li",!0);if(l&&"PRE"!=l.tagName&&!d){var c=l.innerHTML.replace(new RegExp(domUtils.fillChar,"g"),"");/^\s*1\s*\.[^\d]/.test(c)&&(l.innerHTML=c.replace(/^\s*1\s*\./,""),a.setStartAtLast(l).collapse(!0).select(),s.__hasEnterExecCommand=!0,s.execCommand("insertorderedlist"),s.__hasEnterExecCommand=!1)}var u=s.selection.getRange(),m=n(u.startContainer,function(e){return"TABLE"==e.tagName}),f=u.collapsed?m:n(u.endContainer,function(e){return"TABLE"==e.tagName});if(m&&f&&m===f){if(!u.collapsed){if(m=domUtils.findParentByTagName(u.startContainer,"li",!0),f=domUtils.findParentByTagName(u.endContainer,"li",!0),!m||!f||m!==f){var h=u.cloneRange(),p=h.collapse(!1).createBookmark();u.deleteContents(),h.moveToBookmark(p);var d=domUtils.findParentByTagName(h.startContainer,"li",!0);return r(d),h.select(),void i()}if(u.deleteContents(),d=domUtils.findParentByTagName(u.startContainer,"li",!0),d&&domUtils.isEmptyBlock(d))return N=d.previousSibling,next=d.nextSibling,b=s.document.createElement("p"),domUtils.fillNode(s.document,b),g=d.parentNode,N&&next?(u.setStart(next,0).collapse(!0).select(!0),domUtils.remove(d)):((N||next)&&N?d.parentNode.parentNode.insertBefore(b,g.nextSibling):g.parentNode.insertBefore(b,g),domUtils.remove(d),g.firstChild||domUtils.remove(g),u.setStart(b,0).setCursor()),void i()}if(d=domUtils.findParentByTagName(u.startContainer,"li",!0)){if(domUtils.isEmptyBlock(d)){p=u.createBookmark();var g=d.parentNode;if(d!==g.lastChild?(domUtils.breakParent(d,g),r(d)):(g.parentNode.insertBefore(d,g.nextSibling),domUtils.isEmptyNode(g)&&domUtils.remove(g)),!dtd.$list[d.parentNode.tagName])if(domUtils.isBlockElm(d.firstChild))domUtils.remove(d,!0);else{for(b=s.document.createElement("p"),d.parentNode.insertBefore(b,d);d.firstChild;)b.appendChild(d.firstChild);domUtils.remove(d)}u.moveToBookmark(p).select()}else{var v=d.firstChild;if(!v||!domUtils.isBlockElm(v)){var b=s.document.createElement("p");for(!d.firstChild&&domUtils.fillNode(s.document,b);d.firstChild;)b.appendChild(d.firstChild);d.appendChild(b),v=b}var y=s.document.createElement("span");u.insertNode(y),domUtils.breakParent(y,d);var C=y.nextSibling;v=C.firstChild,v||(b=s.document.createElement("p"),domUtils.fillNode(s.document,b),C.appendChild(b),v=b),domUtils.isEmptyNode(v)&&(v.innerHTML="",domUtils.fillNode(s.document,v)),u.setStart(v,0).collapse(!0).shrinkBoundary().select(),domUtils.remove(y);
var N=C.previousSibling;N&&domUtils.isEmptyBlock(N)&&(N.innerHTML="<p></p>",domUtils.fillNode(s.document,N.firstChild))}i()}}}if(8==o&&(u=s.selection.getRange(),u.collapsed&&domUtils.isStartInblock(u)&&(h=u.cloneRange().trimBoundary(),d=domUtils.findParentByTagName(u.startContainer,"li",!0),d&&domUtils.isStartInblock(h)))){if(m=domUtils.findParentByTagName(u.startContainer,"p",!0),m&&m!==d.firstChild){var g=domUtils.findParentByTagName(m,["ol","ul"]);return domUtils.breakParent(m,g),r(m),s.fireEvent("contentchange"),u.setStart(m,0).setCursor(!1,!0),s.fireEvent("saveScene"),void domUtils.preventDefault(t)}if(d&&(N=d.previousSibling)){if(46==o&&d.childNodes.length)return;if(dtd.$list[N.tagName]&&(N=N.lastChild),s.undoManger&&s.undoManger.save(),v=d.firstChild,domUtils.isBlockElm(v))if(domUtils.isEmptyNode(v))for(N.appendChild(v),u.setStart(v,0).setCursor(!1,!0);d.firstChild;)N.appendChild(d.firstChild);else y=s.document.createElement("span"),u.insertNode(y),domUtils.isEmptyBlock(N)&&(N.innerHTML=""),domUtils.moveChild(d,N),u.setStartBefore(y).collapse(!0).select(!0),domUtils.remove(y);else if(domUtils.isEmptyNode(d)){var b=s.document.createElement("p");N.appendChild(b),u.setStart(b,0).setCursor()}else for(u.setEnd(N,N.childNodes.length).collapse().select(!0);d.firstChild;)N.appendChild(d.firstChild);return domUtils.remove(d),s.fireEvent("contentchange"),s.fireEvent("saveScene"),void domUtils.preventDefault(t)}if(d&&!d.previousSibling){var g=d.parentNode,p=u.createBookmark();if(domUtils.isTagNode(g.parentNode,"ol ul"))g.parentNode.insertBefore(d,g),domUtils.isEmptyNode(g)&&domUtils.remove(g);else{for(;d.firstChild;)g.parentNode.insertBefore(d.firstChild,g);domUtils.remove(d),domUtils.isEmptyNode(g)&&domUtils.remove(g)}return u.moveToBookmark(p).setCursor(!1,!0),s.fireEvent("contentchange"),s.fireEvent("saveScene"),void domUtils.preventDefault(t)}}}),s.addListener("keyup",function(e,i){var o=i.keyCode||i.which;if(8==o){var r,a=s.selection.getRange();(r=domUtils.findParentByTagName(a.startContainer,["ol","ul"],!0))&&n(r,r.tagName.toLowerCase(),t(r)||domUtils.getComputedStyle(r,"list-style-type"),!0)}}),s.addListener("tabkeydown",function(){function e(e){if(-1!=s.options.maxListLevel){for(var t=e.parentNode,i=0;/[ou]l/i.test(t.tagName);)i++,t=t.parentNode;if(i>=s.options.maxListLevel)return!0}}var i=s.selection.getRange(),r=domUtils.findParentByTagName(i.startContainer,"li",!0);if(r){var a;if(!i.collapsed){s.fireEvent("saveScene"),a=i.createBookmark();for(var l,d,u=0,m=domUtils.findParents(r);d=m[u++];)if(domUtils.isTagNode(d,"ol ul")){l=d;break}var f=r;if(a.end)for(;f&&!(domUtils.getPosition(f,a.end)&domUtils.POSITION_FOLLOWING);)if(e(f))f=domUtils.getNextDomNode(f,!1,null,function(e){return e!==l});else{var h=f.parentNode,p=s.document.createElement(h.tagName),g=utils.indexOf(c[p.tagName],t(h)||domUtils.getComputedStyle(h,"list-style-type")),v=g+1==c[p.tagName].length?0:g+1,b=c[p.tagName][v];for(o(p,b),h.insertBefore(p,f);f&&!(domUtils.getPosition(f,a.end)&domUtils.POSITION_FOLLOWING);){if(r=f.nextSibling,p.appendChild(f),!r||domUtils.isTagNode(r,"ol ul")){if(r)for(;(r=r.firstChild)&&"LI"!=r.tagName;);else r=domUtils.getNextDomNode(f,!1,null,function(e){return e!==l});break}f=r}n(p,p.tagName.toLowerCase(),b),f=r}return s.fireEvent("contentchange"),i.moveToBookmark(a).select(),!0}if(e(r))return!0;var h=r.parentNode,p=s.document.createElement(h.tagName),g=utils.indexOf(c[p.tagName],t(h)||domUtils.getComputedStyle(h,"list-style-type"));g=g+1==c[p.tagName].length?0:g+1;var b=c[p.tagName][g];if(o(p,b),domUtils.isStartInblock(i))return s.fireEvent("saveScene"),a=i.createBookmark(),h.insertBefore(p,r),p.appendChild(r),n(p,p.tagName.toLowerCase(),b),s.fireEvent("contentchange"),i.moveToBookmark(a).select(!0),!0}}),s.commands.insertorderedlist=s.commands.insertunorderedlist={execCommand:function(e,i){i||(i="insertorderedlist"==e.toLowerCase()?"decimal":"disc");var r=this,s=this.selection.getRange(),d=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase():!domUtils.isWhitespace(e)},c="insertorderedlist"==e.toLowerCase()?"ol":"ul",u=r.document.createDocumentFragment();s.adjustmentBoundary().shrinkBoundary();var m,f,h,p,g=s.createBookmark(!0),v=a(r.document.getElementById(g.start)),b=0,y=a(r.document.getElementById(g.end)),C=0;if(v||y){if(v&&(m=v.parentNode),g.end||(y=v),y&&(f=y.parentNode),m===f){for(;v!==y;){if(p=v,v=v.nextSibling,!domUtils.isBlockElm(p.firstChild)){for(var N=r.document.createElement("p");p.firstChild;)N.appendChild(p.firstChild);p.appendChild(N)}u.appendChild(p)}if(p=r.document.createElement("span"),m.insertBefore(p,y),!domUtils.isBlockElm(y.firstChild)){for(N=r.document.createElement("p");y.firstChild;)N.appendChild(y.firstChild);y.appendChild(N)}u.appendChild(y),domUtils.breakParent(p,m),domUtils.isEmptyNode(p.previousSibling)&&domUtils.remove(p.previousSibling),domUtils.isEmptyNode(p.nextSibling)&&domUtils.remove(p.nextSibling);var x=t(m)||domUtils.getComputedStyle(m,"list-style-type")||("insertorderedlist"==e.toLowerCase()?"decimal":"disc");if(m.tagName.toLowerCase()==c&&x==i){for(var w,U=0,E=r.document.createDocumentFragment();w=u.firstChild;)if(domUtils.isTagNode(w,"ol ul"))E.appendChild(w);else for(;w.firstChild;)E.appendChild(w.firstChild),domUtils.remove(w);p.parentNode.insertBefore(E,p)}else h=r.document.createElement(c),o(h,i),h.appendChild(u),p.parentNode.insertBefore(h,p);return domUtils.remove(p),h&&n(h,c,i),void s.moveToBookmark(g).select()}if(v){for(;v;){if(p=v.nextSibling,domUtils.isTagNode(v,"ol ul"))u.appendChild(v);else{for(var T=r.document.createDocumentFragment(),S=0;v.firstChild;)domUtils.isBlockElm(v.firstChild)&&(S=1),T.appendChild(v.firstChild);if(S)u.appendChild(T);else{var k=r.document.createElement("p");k.appendChild(T),u.appendChild(k)}domUtils.remove(v)}v=p}m.parentNode.insertBefore(u,m.nextSibling),domUtils.isEmptyNode(m)?(s.setStartBefore(m),domUtils.remove(m)):s.setStartAfter(m),b=1}if(y&&domUtils.inDoc(f,r.document)){for(v=f.firstChild;v&&v!==y;){if(p=v.nextSibling,domUtils.isTagNode(v,"ol ul"))u.appendChild(v);else{for(T=r.document.createDocumentFragment(),S=0;v.firstChild;)domUtils.isBlockElm(v.firstChild)&&(S=1),T.appendChild(v.firstChild);S?u.appendChild(T):(k=r.document.createElement("p"),k.appendChild(T),u.appendChild(k)),domUtils.remove(v)}v=p}var B=domUtils.createElement(r.document,"div",{tmpDiv:1});domUtils.moveChild(y,B),u.appendChild(B),domUtils.remove(y),f.parentNode.insertBefore(u,f),s.setEndBefore(f),domUtils.isEmptyNode(f)&&domUtils.remove(f),C=1}}b||s.setStartBefore(r.document.getElementById(g.start)),g.end&&!C&&s.setEndAfter(r.document.getElementById(g.end)),s.enlarge(!0,function(e){return l[e.tagName]}),u=r.document.createDocumentFragment();for(var I,_=s.createBookmark(),A=domUtils.getNextDomNode(_.start,!1,d),R=s.cloneRange(),L=domUtils.isBlockElm;A&&A!==_.end&&domUtils.getPosition(A,_.end)&domUtils.POSITION_PRECEDING;)if(3==A.nodeType||dtd.li[A.tagName]){if(1==A.nodeType&&dtd.$list[A.tagName]){for(;A.firstChild;)u.appendChild(A.firstChild);I=domUtils.getNextDomNode(A,!1,d),domUtils.remove(A),A=I;continue}for(I=A,R.setStartBefore(A);A&&A!==_.end&&(!L(A)||domUtils.isBookmarkNode(A));)I=A,A=domUtils.getNextDomNode(A,!1,null,function(e){return!l[e.tagName]});A&&L(A)&&(p=domUtils.getNextDomNode(I,!1,d),p&&domUtils.isBookmarkNode(p)&&(A=domUtils.getNextDomNode(p,!1,d),I=p)),R.setEndAfter(I),A=domUtils.getNextDomNode(I,!1,d);var D=s.document.createElement("li");if(D.appendChild(R.extractContents()),domUtils.isEmptyNode(D)){for(var I=s.document.createElement("p");D.firstChild;)I.appendChild(D.firstChild);D.appendChild(I)}u.appendChild(D)}else A=domUtils.getNextDomNode(A,!0,d);s.moveToBookmark(_).collapse(!0),h=r.document.createElement(c),o(h,i),h.appendChild(u),s.insertNode(h),n(h,c,i);for(var w,U=0,O=domUtils.getElementsByTagName(h,"div");w=O[U++];)w.getAttribute("tmpDiv")&&domUtils.remove(w,!0);s.moveToBookmark(g).select()},queryCommandState:function(e){for(var t,i="insertorderedlist"==e.toLowerCase()?"ol":"ul",n=this.selection.getStartElementPath(),o=0;t=n[o++];){if("TABLE"==t.nodeName)return 0;if(i==t.nodeName.toLowerCase())return 1}return 0},queryCommandValue:function(e){for(var i,n,o="insertorderedlist"==e.toLowerCase()?"ol":"ul",r=this.selection.getStartElementPath(),a=0;n=r[a++];){if("TABLE"==n.nodeName){i=null;break}if(o==n.nodeName.toLowerCase()){i=n;break}}return i?t(i)||domUtils.getComputedStyle(i,"list-style-type"):null}}},function(){var e={textarea:function(e,t){var i=t.ownerDocument.createElement("textarea");return i.style.cssText="position:absolute;resize:none;width:100%;height:100%;border:0;padding:0;margin:0;overflow-y:auto;",browser.ie&&browser.version<8&&(i.style.width=t.offsetWidth+"px",i.style.height=t.offsetHeight+"px",t.onresize=function(){i.style.width=t.offsetWidth+"px",i.style.height=t.offsetHeight+"px"}),t.appendChild(i),{setContent:function(e){i.value=e},getContent:function(){return i.value},select:function(){var e;browser.ie?(e=i.createTextRange(),e.collapse(!0),e.select()):(i.setSelectionRange(0,0),i.focus())},dispose:function(){t.removeChild(i),t.onresize=null,i=null,t=null}}},codemirror:function(e,t){var i=window.CodeMirror(t,{mode:"text/html",tabMode:"indent",lineNumbers:!0,lineWrapping:!0}),n=i.getWrapperElement();return n.style.cssText='position:absolute;left:0;top:0;width:100%;height:100%;font-family:consolas,"Courier new",monospace;font-size:13px;',i.getScrollerElement().style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;",i.refresh(),{getCodeMirror:function(){return i},setContent:function(e){i.setValue(e)},getContent:function(){return i.getValue()},select:function(){i.focus()},dispose:function(){t.removeChild(n),n=null,i=null}}}};UE.plugins.source=function(){function t(t){return e["codemirror"==r.sourceEditor&&window.CodeMirror?"codemirror":"textarea"](o,t)}var i,n,o=this,r=this.options,a=!1;r.sourceEditor=browser.ie?"textarea":r.sourceEditor||"codemirror",o.setOpt({sourceEditorFirst:!1});var s,l,d;o.commands.source={execCommand:function(){if(a=!a){d=o.selection.getRange().createAddress(!1,!0),o.undoManger&&o.undoManger.save(!0),browser.gecko&&(o.body.contentEditable=!1),s=o.iframe.style.cssText,o.iframe.style.cssText+="position:absolute;left:-32768px;top:-32768px;",o.fireEvent("beforegetcontent");var e=UE.htmlparser(o.body.innerHTML);o.filterOutputRule(e),e.traversal(function(e){if("element"==e.type)switch(e.tagName){case"td":case"th":case"caption":e.children&&1==e.children.length&&"br"==e.firstChild().tagName&&e.removeChild(e.firstChild());break;case"pre":e.innerText(e.innerText().replace(/&nbsp;/g," "))}}),o.fireEvent("aftergetcontent");var r=e.toHtml(!0);i=t(o.iframe.parentNode),i.setContent(r),n=o.setContent,o.setContent=function(e){var t=UE.htmlparser(e);o.filterInputRule(t),e=t.toHtml(),i.setContent(e)},setTimeout(function(){i.select(),o.addListener("fullscreenchanged",function(){try{i.getCodeMirror().refresh()}catch(e){}})}),l=o.getContent,o.getContent=function(){return i.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>"}}else{o.iframe.style.cssText=s;var c=i.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>";c=c.replace(new RegExp("[\\r\\t\\n ]*</?(\\w+)\\s*(?:[^>]*)>","g"),function(e,t){return t&&!dtd.$inlineWithA[t.toLowerCase()]?e.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,""):e.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,"")}),o.setContent=n,o.setContent(c),i.dispose(),i=null,o.getContent=l;var u=o.body.firstChild;if(u||(o.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",u=o.body.firstChild),o.undoManger&&o.undoManger.save(!0),browser.gecko){var m=document.createElement("input");m.style.cssText="position:absolute;left:0;top:-32768px",document.body.appendChild(m),o.body.contentEditable=!1,setTimeout(function(){domUtils.setViewportOffset(m,{left:-32768,top:0}),m.focus(),setTimeout(function(){o.body.contentEditable=!0,o.selection.getRange().moveToAddress(d).select(!0),domUtils.remove(m)})})}else try{o.selection.getRange().moveToAddress(d).select(!0)}catch(f){}}this.fireEvent("sourcemodechanged",a)},queryCommandState:function(){return 0|a},notNeedUndo:1};var c=o.queryCommandState;o.queryCommandState=function(e){return e=e.toLowerCase(),a?e in{source:1,fullscreen:1}?1:-1:c.apply(this,arguments)},"codemirror"==r.sourceEditor&&o.addListener("ready",function(){utils.loadFile(document,{src:r.codeMirrorJsUrl||r.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.js",tag:"script",type:"text/javascript",defer:"defer"},function(){r.sourceEditorFirst&&setTimeout(function(){o.execCommand("source")},0)}),utils.loadFile(document,{tag:"link",rel:"stylesheet",type:"text/css",href:r.codeMirrorCssUrl||r.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.css"})})}}(),UE.plugins.enterkey=function(){var e,t=this,i=t.options.enterTag;t.addListener("keyup",function(i,n){var o=n.keyCode||n.which;if(13==o){var r,a=t.selection.getRange(),s=a.startContainer;if(browser.ie)t.fireEvent("saveScene",!0,!0);else{if(/h\d/i.test(e)){if(browser.gecko){var l=domUtils.findParentByTagName(s,["h1","h2","h3","h4","h5","h6","blockquote","caption","table"],!0);l||(t.document.execCommand("formatBlock",!1,"<p>"),r=1)}else if(1==s.nodeType){var d,c=t.document.createTextNode("");if(a.insertNode(c),d=domUtils.findParentByTagName(c,"div",!0)){for(var u=t.document.createElement("p");d.firstChild;)u.appendChild(d.firstChild);d.parentNode.insertBefore(u,d),domUtils.remove(d),a.setStartBefore(c).setCursor(),r=1}domUtils.remove(c)}t.undoManger&&r&&t.undoManger.save()}browser.opera&&a.select()}}}),t.addListener("keydown",function(n,o){var r=o.keyCode||o.which;if(13==r){if(t.fireEvent("beforeenterkeydown"))return void domUtils.preventDefault(o);t.fireEvent("saveScene",!0,!0),e="";var a=t.selection.getRange();if(!a.collapsed){var s=a.startContainer,l=a.endContainer,d=domUtils.findParentByTagName(s,"td",!0),c=domUtils.findParentByTagName(l,"td",!0);if(d&&c&&d!==c||!d&&c||d&&!c)return void(o.preventDefault?o.preventDefault():o.returnValue=!1)}if("p"==i)browser.ie||(s=domUtils.findParentByTagName(a.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote","caption"],!0),s||browser.opera?(e=s.tagName,"p"==s.tagName.toLowerCase()&&browser.gecko&&domUtils.removeDirtyAttr(s)):(t.document.execCommand("formatBlock",!1,"<p>"),browser.gecko&&(a=t.selection.getRange(),s=domUtils.findParentByTagName(a.startContainer,"p",!0),s&&domUtils.removeDirtyAttr(s))));else if(o.preventDefault?o.preventDefault():o.returnValue=!1,a.collapsed){m=a.document.createElement("br"),a.insertNode(m);var u=m.parentNode;u.lastChild===m?(m.parentNode.insertBefore(m.cloneNode(!0),m),a.setStartBefore(m)):a.setStartAfter(m),a.setCursor()}else if(a.deleteContents(),s=a.startContainer,1==s.nodeType&&(s=s.childNodes[a.startOffset])){for(;1==s.nodeType;){if(dtd.$empty[s.tagName])return a.setStartBefore(s).setCursor(),t.undoManger&&t.undoManger.save(),!1;if(!s.firstChild){var m=a.document.createElement("br");return s.appendChild(m),a.setStart(s,0).setCursor(),t.undoManger&&t.undoManger.save(),!1}s=s.firstChild}s===a.startContainer.childNodes[a.startOffset]?(m=a.document.createElement("br"),a.insertNode(m).setCursor()):a.setStart(s,0).setCursor()}else m=a.document.createElement("br"),a.insertNode(m).setStartAfter(m).setCursor()}})},UE.plugins.keystrokes=function(){var e=this,t=!0;e.addListener("keydown",function(i,n){var o=n.keyCode||n.which,r=e.selection.getRange();if(!r.collapsed&&!(n.ctrlKey||n.shiftKey||n.altKey||n.metaKey)&&(o>=65&&90>=o||o>=48&&57>=o||o>=96&&111>=o||{13:1,8:1,46:1}[o])){var a=r.startContainer;if(domUtils.isFillChar(a)&&r.setStartBefore(a),a=r.endContainer,domUtils.isFillChar(a)&&r.setEndAfter(a),r.txtToElmBoundary(),r.endContainer&&1==r.endContainer.nodeType&&(a=r.endContainer.childNodes[r.endOffset],a&&domUtils.isBr(a)&&r.setEndAfter(a)),0==r.startOffset&&(a=r.startContainer,domUtils.isBoundaryNode(a,"firstChild")&&(a=r.endContainer,r.endOffset==(3==a.nodeType?a.nodeValue.length:a.childNodes.length)&&domUtils.isBoundaryNode(a,"lastChild"))))return e.fireEvent("saveScene"),e.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",r.setStart(e.body.firstChild,0).setCursor(!1,!0),void e._selectionChange()}if(o==keymap.Backspace){if(r=e.selection.getRange(),t=r.collapsed,e.fireEvent("delkeydown",n))return;var s,l;if(r.collapsed&&r.inFillChar()&&(s=r.startContainer,domUtils.isFillChar(s)?(r.setStartBefore(s).shrinkBoundary(!0).collapse(!0),domUtils.remove(s)):(s.nodeValue=s.nodeValue.replace(new RegExp("^"+domUtils.fillChar),""),r.startOffset--,r.collapse(!0).select(!0))),s=r.getClosedNode())return e.fireEvent("saveScene"),r.setStartBefore(s),domUtils.remove(s),r.setCursor(),e.fireEvent("saveScene"),void domUtils.preventDefault(n);if(!browser.ie&&(s=domUtils.findParentByTagName(r.startContainer,"table",!0),l=domUtils.findParentByTagName(r.endContainer,"table",!0),s&&!l||!s&&l||s!==l))return void n.preventDefault()}if(o==keymap.Tab){var d={ol:1,ul:1,table:1};if(e.fireEvent("tabkeydown",n))return void domUtils.preventDefault(n);var c=e.selection.getRange();e.fireEvent("saveScene");for(var u=0,m="",f=e.options.tabSize||4,h=e.options.tabNode||"&nbsp;";f>u;u++)m+=h;var p=e.document.createElement("span");if(p.innerHTML=m+domUtils.fillChar,c.collapsed)c.insertNode(p.cloneNode(!0).firstChild).setCursor(!0);else{var g=function(e){return domUtils.isBlockElm(e)&&!d[e.tagName.toLowerCase()]};if(s=domUtils.findParent(c.startContainer,g,!0),l=domUtils.findParent(c.endContainer,g,!0),s&&l&&s===l)c.deleteContents(),c.insertNode(p.cloneNode(!0).firstChild).setCursor(!0);else{var v=c.createBookmark();c.enlarge(!0);for(var b=c.createBookmark(),y=domUtils.getNextDomNode(b.start,!1,g);y&&!(domUtils.getPosition(y,b.end)&domUtils.POSITION_FOLLOWING);)y.insertBefore(p.cloneNode(!0).firstChild,y.firstChild),y=domUtils.getNextDomNode(y,!1,g);c.moveToBookmark(b).moveToBookmark(v).select()}}domUtils.preventDefault(n)}if(browser.gecko&&46==o&&(c=e.selection.getRange(),c.collapsed&&(s=c.startContainer,domUtils.isEmptyBlock(s)))){for(var C=s.parentNode;1==domUtils.getChildCount(C)&&!domUtils.isBody(C);)s=C,C=C.parentNode;return void(s===C.lastChild&&n.preventDefault())}}),e.addListener("keyup",function(e,i){var n,o=i.keyCode||i.which,r=this;if(o==keymap.Backspace){if(r.fireEvent("delkeyup"))return;if(n=r.selection.getRange(),n.collapsed){var a,s=["h1","h2","h3","h4","h5","h6"];if((a=domUtils.findParentByTagName(n.startContainer,s,!0))&&domUtils.isEmptyBlock(a)){var l=a.previousSibling;if(l&&"TABLE"!=l.nodeName)return domUtils.remove(a),void n.setStartAtLast(l).setCursor(!1,!0);var d=a.nextSibling;if(d&&"TABLE"!=d.nodeName)return domUtils.remove(a),void n.setStartAtFirst(d).setCursor(!1,!0)}if(domUtils.isBody(n.startContainer)){var a=domUtils.createElement(r.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"});n.insertNode(a).setStart(a,0).setCursor(!1,!0)}}if(!t&&(3==n.startContainer.nodeType||1==n.startContainer.nodeType&&domUtils.isEmptyBlock(n.startContainer)))if(browser.ie){var c=n.document.createElement("span");n.insertNode(c).setStartBefore(c).collapse(!0),n.select(),domUtils.remove(c)}else n.select()}})},UE.plugins.fiximgclick=function(){function e(){this.editor=null,this.resizer=null,this.cover=null,this.doc=document,this.prePos={x:0,y:0},this.startPos={x:0,y:0}}var t=!1;return function(){var n=[[0,0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]];e.prototype={init:function(e){var t=this;t.editor=e,t.startPos=this.prePos={x:0,y:0},t.dragId=-1;var n=[],o=t.cover=document.createElement("div"),r=t.resizer=document.createElement("div");for(o.id=t.editor.ui.id+"_imagescale_cover",o.style.cssText="position:absolute;display:none;z-index:"+t.editor.options.zIndex+";filter:alpha(opacity=0); opacity:0;background:#CCC;",domUtils.on(o,"mousedown click",function(){t.hide()}),i=0;8>i;i++)n.push('<span class="edui-editor-imagescale-hand'+i+'"></span>');r.id=t.editor.ui.id+"_imagescale",r.className="edui-editor-imagescale",r.innerHTML=n.join(""),r.style.cssText+=";display:none;border:1px solid #3b77ff;z-index:"+t.editor.options.zIndex+";",t.editor.ui.getDom().appendChild(o),t.editor.ui.getDom().appendChild(r),t.initStyle(),t.initEvents()},initStyle:function(){utils.cssRule("imagescale",".edui-editor-imagescale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}.edui-editor-imagescale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}.edui-editor-imagescale .edui-editor-imagescale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}")},initEvents:function(){var e=this;e.startPos.x=e.startPos.y=0,e.isDraging=!1},_eventHandler:function(e){var i=this;switch(e.type){case"mousedown":var n,n=e.target||e.srcElement;-1!=n.className.indexOf("edui-editor-imagescale-hand")&&-1==i.dragId&&(i.dragId=n.className.slice(-1),i.startPos.x=i.prePos.x=e.clientX,i.startPos.y=i.prePos.y=e.clientY,domUtils.on(i.doc,"mousemove",i.proxy(i._eventHandler,i)));break;case"mousemove":-1!=i.dragId&&(i.updateContainerStyle(i.dragId,{x:e.clientX-i.prePos.x,y:e.clientY-i.prePos.y}),i.prePos.x=e.clientX,i.prePos.y=e.clientY,t=!0,i.updateTargetElement());break;case"mouseup":-1!=i.dragId&&(i.updateContainerStyle(i.dragId,{x:e.clientX-i.prePos.x,y:e.clientY-i.prePos.y}),i.updateTargetElement(),i.target.parentNode&&i.attachTo(i.target),i.dragId=-1),domUtils.un(i.doc,"mousemove",i.proxy(i._eventHandler,i)),t&&(t=!1,i.editor.fireEvent("contentchange"))}},updateTargetElement:function(){var e=this;domUtils.setStyles(e.target,{width:e.resizer.style.width,height:e.resizer.style.height}),e.target.width=parseInt(e.resizer.style.width),e.target.height=parseInt(e.resizer.style.height),e.attachTo(e.target)},updateContainerStyle:function(e,t){var i,o=this,r=o.resizer;0!=n[e][0]&&(i=parseInt(r.style.left)+t.x,r.style.left=o._validScaledProp("left",i)+"px"),0!=n[e][1]&&(i=parseInt(r.style.top)+t.y,r.style.top=o._validScaledProp("top",i)+"px"),0!=n[e][2]&&(i=r.clientWidth+n[e][2]*t.x,r.style.width=o._validScaledProp("width",i)+"px"),0!=n[e][3]&&(i=r.clientHeight+n[e][3]*t.y,r.style.height=o._validScaledProp("height",i)+"px")},_validScaledProp:function(e,t){var i=this.resizer,n=document;switch(t=isNaN(t)?0:t,e){case"left":return 0>t?0:t+i.clientWidth>n.clientWidth?n.clientWidth-i.clientWidth:t;case"top":return 0>t?0:t+i.clientHeight>n.clientHeight?n.clientHeight-i.clientHeight:t;case"width":return 0>=t?1:t+i.offsetLeft>n.clientWidth?n.clientWidth-i.offsetLeft:t;case"height":return 0>=t?1:t+i.offsetTop>n.clientHeight?n.clientHeight-i.offsetTop:t}},hideCover:function(){this.cover.style.display="none"},showCover:function(){var e=this,t=domUtils.getXY(e.editor.ui.getDom()),i=domUtils.getXY(e.editor.iframe);domUtils.setStyles(e.cover,{width:e.editor.iframe.offsetWidth+"px",height:e.editor.iframe.offsetHeight+"px",top:i.y-t.y+"px",left:i.x-t.x+"px",position:"absolute",display:""})},show:function(e){var t=this;t.resizer.style.display="block",e&&t.attachTo(e),domUtils.on(this.resizer,"mousedown",t.proxy(t._eventHandler,t)),domUtils.on(t.doc,"mouseup",t.proxy(t._eventHandler,t)),t.showCover(),t.editor.fireEvent("afterscaleshow",t),t.editor.fireEvent("saveScene")},hide:function(){var e=this;e.hideCover(),e.resizer.style.display="none",domUtils.un(e.resizer,"mousedown",e.proxy(e._eventHandler,e)),domUtils.un(e.doc,"mouseup",e.proxy(e._eventHandler,e)),e.editor.fireEvent("afterscalehide",e)},proxy:function(e,t){return function(){return e.apply(t||this,arguments)}},attachTo:function(e){var t=this,i=t.target=e,n=this.resizer,o=domUtils.getXY(i),r=domUtils.getXY(t.editor.iframe),a=domUtils.getXY(n.parentNode);domUtils.setStyles(n,{width:i.width+"px",height:i.height+"px",left:r.x+o.x-t.editor.document.body.scrollLeft-a.x-parseInt(n.style.borderLeftWidth)+"px",top:r.y+o.y-t.editor.document.body.scrollTop-a.y-parseInt(n.style.borderTopWidth)+"px"})}}}(),function(){var t,i=this;i.setOpt("imageScaleEnabled",!0),!browser.ie&&i.options.imageScaleEnabled&&i.addListener("click",function(){var n=i.selection.getRange(),o=n.getClosedNode();if(o&&"IMG"==o.tagName&&"false"!=i.body.contentEditable){if(-1!=o.className.indexOf("edui-faked-music")||o.getAttribute("anchorname")||domUtils.hasClass(o,"loadingclass")||domUtils.hasClass(o,"loaderrorclass"))return;if(!t){t=new e,t.init(i),i.ui.getDom().appendChild(t.resizer);var r,a=function(){t.hide(),t.target&&i.selection.getRange().selectNode(t.target).select()},s=function(e){var t=e.target||e.srcElement;!t||void 0!==t.className&&-1!=t.className.indexOf("edui-editor-imagescale")||a(e)};i.addListener("afterscaleshow",function(){i.addListener("beforekeydown",a),i.addListener("beforemousedown",s),domUtils.on(document,"keydown",a),domUtils.on(document,"mousedown",s),i.selection.getNative().removeAllRanges()}),i.addListener("afterscalehide",function(){i.removeListener("beforekeydown",a),i.removeListener("beforemousedown",s),domUtils.un(document,"keydown",a),domUtils.un(document,"mousedown",s);var e=t.target;e.parentNode&&i.selection.getRange().selectNode(e).select()}),domUtils.on(t.resizer,"mousedown",function(e){i.selection.getNative().removeAllRanges();var n=e.target||e.srcElement;n&&-1==n.className.indexOf("edui-editor-imagescale-hand")&&(r=setTimeout(function(){t.hide(),t.target&&i.selection.getRange().selectNode(n).select()},200))}),domUtils.on(t.resizer,"mouseup",function(e){var t=e.target||e.srcElement;t&&-1==t.className.indexOf("edui-editor-imagescale-hand")&&clearTimeout(r)})}t.show(o)}else t&&"none"!=t.resizer.style.display&&t.hide()}),browser.webkit&&i.addListener("click",function(e,t){if("IMG"==t.target.tagName&&"false"!=i.body.contentEditable){var n=new dom.Range(i.document);n.selectNode(t.target).select()}})}}(),UE.plugin.register("autolink",function(){var e=0;return browser.ie?{}:{bindEvents:{reset:function(){e=0},keydown:function(e,t){var i=this,n=t.keyCode||t.which;if(32==n||13==n){for(var o,r,a=i.selection.getNative(),s=a.getRangeAt(0).cloneRange(),l=s.startContainer;1==l.nodeType&&s.startOffset>0&&(l=s.startContainer.childNodes[s.startOffset-1]);)s.setStart(l,1==l.nodeType?l.childNodes.length:l.nodeValue.length),s.collapse(!0),l=s.startContainer;do{if(0==s.startOffset){for(l=s.startContainer.previousSibling;l&&1==l.nodeType;)l=l.lastChild;if(!l||domUtils.isFillChar(l))break;o=l.nodeValue.length}else l=s.startContainer,o=s.startOffset;s.setStart(l,o-1),r=s.toString().charCodeAt(0)}while(160!=r&&32!=r);if(s.toString().replace(new RegExp(domUtils.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){for(;s.toString().length&&!/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(s.toString());)try{s.setStart(s.startContainer,s.startOffset+1)}catch(d){for(var l=s.startContainer;!(next=l.nextSibling);){if(domUtils.isBody(l))return;l=l.parentNode}s.setStart(next,0)}if(domUtils.findParentByTagName(s.startContainer,"a",!0))return;var c,u=i.document.createElement("a"),m=i.document.createTextNode(" ");i.undoManger&&i.undoManger.save(),u.appendChild(s.extractContents()),u.href=u.innerHTML=u.innerHTML.replace(/<[^>]+>/g,""),c=u.getAttribute("href").replace(new RegExp(domUtils.fillChar,"g"),""),c=/^(?:https?:\/\/)/gi.test(c)?c:"http://"+c,u.setAttribute("_src",utils.html(c)),u.href=utils.html(c),s.insertNode(u),u.parentNode.insertBefore(m,u.nextSibling),s.setStart(m,0),s.collapse(!0),a.removeAllRanges(),a.addRange(s),i.undoManger&&i.undoManger.save()}}}}}},function(){function e(e){if(3==e.nodeType)return null;if("A"==e.nodeName)return e;for(var t=e.lastChild;t;){if("A"==t.nodeName)return t;if(3==t.nodeType){if(domUtils.isWhitespace(t)){t=t.previousSibling;continue}return null}t=t.lastChild}}var t={37:1,38:1,39:1,40:1,13:1,32:1};browser.ie&&this.addListener("keyup",function(i,n){var o=this,r=n.keyCode;if(t[r]){var a=o.selection.getRange(),s=a.startContainer;if(13==r){for(;s&&!domUtils.isBody(s)&&!domUtils.isBlockElm(s);)s=s.parentNode;if(s&&!domUtils.isBody(s)&&"P"==s.nodeName){var l=s.previousSibling;if(l&&1==l.nodeType){var l=e(l);l&&!l.getAttribute("_href")&&domUtils.remove(l,!0)}}}else if(32==r)3==s.nodeType&&/^\s$/.test(s.nodeValue)&&(s=s.previousSibling,s&&"A"==s.nodeName&&!s.getAttribute("_href")&&domUtils.remove(s,!0));else if(s=domUtils.findParentByTagName(s,"a",!0),s&&!s.getAttribute("_href")){var d=a.createBookmark();domUtils.remove(s,!0),a.moveToBookmark(d).select(!0)}}})}),UE.plugins.autoheight=function(){function e(){var e=this;clearTimeout(o),r||(!e.queryCommandState||e.queryCommandState&&1!=e.queryCommandState("source"))&&(o=setTimeout(function(){for(var t=e.body.lastChild;t&&1!=t.nodeType;)t=t.previousSibling;t&&1==t.nodeType&&(t.style.clear="both",n=Math.max(domUtils.getXY(t).y+t.offsetHeight+25,Math.max(s.minFrameHeight,s.initialFrameHeight)),n!=a&&(n!==parseInt(e.iframe.parentNode.style.height)&&(e.iframe.parentNode.style.height=n+"px"),e.body.style.height=n+"px",a=n),domUtils.removeStyle(t,"clear"))},50))}var t=this;if(t.autoHeightEnabled=t.options.autoHeightEnabled!==!1,t.autoHeightEnabled){var i,n,o,r,a=0,s=t.options;t.addListener("fullscreenchanged",function(e,t){r=t}),t.addListener("destroy",function(){t.removeListener("contentchange afterinserthtml keyup mouseup",e)}),t.enableAutoHeight=function(){var t=this;if(t.autoHeightEnabled){var n=t.document;t.autoHeightEnabled=!0,i=n.body.style.overflowY,n.body.style.overflowY="hidden",t.addListener("contentchange afterinserthtml keyup mouseup",e),setTimeout(function(){e.call(t)},browser.gecko?100:0),t.fireEvent("autoheightchanged",t.autoHeightEnabled)}},t.disableAutoHeight=function(){t.body.style.overflowY=i||"",t.removeListener("contentchange",e),t.removeListener("keyup",e),t.removeListener("mouseup",e),t.autoHeightEnabled=!1,t.fireEvent("autoheightchanged",t.autoHeightEnabled)},t.on("setHeight",function(){t.disableAutoHeight()}),t.addListener("ready",function(){t.enableAutoHeight();var i;domUtils.on(browser.ie?t.body:t.document,browser.webkit?"dragover":"drop",function(){clearTimeout(i),i=setTimeout(function(){e.call(t)},100)});var n;window.onscroll=function(){null===n?n=this.scrollY:0==this.scrollY&&0!=n&&(t.window.scrollTo(0,0),n=null)}})}},UE.plugins.autofloat=function(){function e(){return UE.ui?1:(alert(a.autofloatMsg),0)}function t(){var e=document.body.style;e.backgroundImage='url("about:blank")',e.backgroundAttachment="fixed"}function i(){var e=domUtils.getXY(c),t=domUtils.getComputedStyle(c,"position"),i=domUtils.getComputedStyle(c,"left");c.style.width=c.offsetWidth+"px",c.style.zIndex=1*r.options.zIndex+1,c.parentNode.insertBefore(g,c),h||p&&browser.ie?("absolute"!=c.style.position&&(c.style.position="absolute"),c.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-u+l+"px"):(browser.ie7Compat&&v&&(v=!1,c.style.left=domUtils.getXY(c).x-document.documentElement.getBoundingClientRect().left+2+"px"),"fixed"!=c.style.position&&(c.style.position="fixed",c.style.top=l+"px",("absolute"==t||"relative"==t)&&parseFloat(i)&&(c.style.left=e.x+"px")))}function n(){v=!0,g.parentNode&&g.parentNode.removeChild(g),c.style.cssText=d}function o(){var e=m(r.container),t=r.options.toolbarTopOffset||0;
e.top<0&&e.bottom-c.offsetHeight>t?i():n()}var r=this,a=r.getLang();r.setOpt({topOffset:0});var s=r.options.autoFloatEnabled!==!1,l=r.options.topOffset;if(s){var d,c,u,m,f=UE.ui.uiUtils,h=browser.ie&&browser.version<=6,p=browser.quirks,g=document.createElement("div"),v=!0,b=utils.defer(function(){o()},browser.ie?200:100,!0);r.addListener("destroy",function(){domUtils.un(window,["scroll","resize"],o),r.removeListener("keydown",b)}),r.addListener("ready",function(){if(e(r)){if(!r.ui)return;m=f.getClientRect,c=r.ui.getDom("toolbarbox"),u=m(c).top,d=c.style.cssText,g.style.height=c.offsetHeight+"px",h&&t(),domUtils.on(window,["scroll","resize"],o),r.addListener("keydown",b),r.addListener("beforefullscreenchange",function(e,t){t&&n()}),r.addListener("fullscreenchanged",function(e,t){t||o()}),r.addListener("sourcemodechanged",function(){setTimeout(function(){o()},0)}),r.addListener("clearDoc",function(){setTimeout(function(){o()},0)})}})}},UE.plugins.video=function(){function e(e,t,n,o,r,a,s){var l;switch(s){case"image":l="<img "+(o?'id="'+o+'"':"")+' width="'+t+'" height="'+n+'" _url="'+e+'" class="'+a.replace(/\bvideo-js\b/,"")+'" src="'+i.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+i.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+(r?"float:"+r+";":"")+'" />';break;case"embed":l='<embed type="application/x-shockwave-flash" class="'+a+'" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+utils.html(e)+'" width="'+t+'" height="'+n+'"'+(r?' style="float:'+r+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >';break;case"video":var d=e.substr(e.lastIndexOf(".")+1);"ogv"==d&&(d="ogg"),l="<video"+(o?' id="'+o+'"':"")+' class="'+a+' video-js" '+(r?' style="float:'+r+'"':"")+' controls preload="none" width="'+t+'" height="'+n+'" src="'+e+'" data-setup="{}"><source src="'+e+'" type="video/'+d+'" /></video>'}return l}function t(t,i){utils.each(t.getNodesByTagName(i?"img":"embed video"),function(t){var n=t.getAttr("class");if(n&&-1!=n.indexOf("edui-faked-video")){var o=e(t.getAttr(i?"_url":"src"),t.getAttr("width"),t.getAttr("height"),null,t.getStyle("float")||"",n,i?"embed":"image");t.parentNode.replaceChild(UE.uNode.createElement(o),t)}if(n&&-1!=n.indexOf("edui-upload-video")){var o=e(t.getAttr(i?"_url":"src"),t.getAttr("width"),t.getAttr("height"),null,t.getStyle("float")||"",n,i?"video":"image");t.parentNode.replaceChild(UE.uNode.createElement(o),t)}})}var i=this;i.addOutputRule(function(e){t(e,!0)}),i.addInputRule(function(e){t(e)}),i.commands.insertvideo={execCommand:function(t,n,o){n=utils.isArray(n)?n:[n];for(var r,a,s=[],l="tmpVedio",d=0,c=n.length;c>d;d++)a=n[d],r="upload"==o?"edui-upload-video video-js vjs-default-skin":"edui-faked-video",s.push(e(a.url,a.width||420,a.height||280,l+d,null,r,"image"));i.execCommand("inserthtml",s.join(""),!0);for(var u=this.selection.getRange(),d=0,c=n.length;c>d;d++){var m=this.document.getElementById("tmpVedio"+d);domUtils.removeAttributes(m,"id"),u.selectNode(m).select(),i.execCommand("imagefloat",n[d].align)}},queryCommandState:function(){var e=i.selection.getRange().getClosedNode(),t=e&&("edui-faked-video"==e.className||-1!=e.className.indexOf("edui-upload-video"));return t?1:0}}},function(){function e(){}var t=UE.UETable=function(e){this.table=e,this.indexTable=[],this.selectedTds=[],this.cellsRange={},this.update(e)};t.removeSelectedClass=function(e){utils.each(e,function(e){domUtils.removeClasses(e,"selectTdClass")})},t.addSelectedClass=function(e){utils.each(e,function(e){domUtils.addClass(e,"selectTdClass")})},t.isEmptyBlock=function(e){var t=new RegExp(domUtils.fillChar,"g");if(e[browser.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(t,"").length>0)return 0;for(var i in dtd.$isNotEmpty)if(dtd.$isNotEmpty.hasOwnProperty(i)&&e.getElementsByTagName(i).length)return 0;return 1},t.getWidth=function(e){return e?parseInt(domUtils.getComputedStyle(e,"width"),10):0},t.getTableCellAlignState=function(e){!utils.isArray(e)&&(e=[e]);var t={},i=["align","valign"],n=null,o=!0;return utils.each(e,function(e){return utils.each(i,function(i){if(n=e.getAttribute(i),!t[i]&&n)t[i]=n;else if(!t[i]||n!==t[i])return o=!1,!1}),o}),o?t:null},t.getTableItemsByRange=function(e){var t=e.selection.getStart();t&&t.id&&0===t.id.indexOf("_baidu_bookmark_start_")&&t.nextSibling&&(t=t.nextSibling);var i=t&&domUtils.findParentByTagName(t,["td","th"],!0),n=i&&i.parentNode,o=t&&domUtils.findParentByTagName(t,"caption",!0),r=o?o.parentNode:n&&n.parentNode.parentNode;return{cell:i,tr:n,table:r,caption:o}},t.getUETableBySelected=function(e){var i=t.getTableItemsByRange(e).table;return i&&i.ueTable&&i.ueTable.selectedTds.length?i.ueTable:null},t.getDefaultValue=function(e,t){var i,n,o,r,a={thin:"0px",medium:"1px",thick:"2px"};if(t)return s=t.getElementsByTagName("td")[0],r=domUtils.getComputedStyle(t,"border-left-width"),i=parseInt(a[r]||r,10),r=domUtils.getComputedStyle(s,"padding-left"),n=parseInt(a[r]||r,10),r=domUtils.getComputedStyle(s,"border-left-width"),o=parseInt(a[r]||r,10),{tableBorder:i,tdPadding:n,tdBorder:o};t=e.document.createElement("table"),t.insertRow(0).insertCell(0).innerHTML="xxx",e.body.appendChild(t);var s=t.getElementsByTagName("td")[0];return r=domUtils.getComputedStyle(t,"border-left-width"),i=parseInt(a[r]||r,10),r=domUtils.getComputedStyle(s,"padding-left"),n=parseInt(a[r]||r,10),r=domUtils.getComputedStyle(s,"border-left-width"),o=parseInt(a[r]||r,10),domUtils.remove(t),{tableBorder:i,tdPadding:n,tdBorder:o}},t.getUETable=function(e){var i=e.tagName.toLowerCase();return e="td"==i||"th"==i||"caption"==i?domUtils.findParentByTagName(e,"table",!0):e,e.ueTable||(e.ueTable=new t(e)),e.ueTable},t.cloneCell=function(e,t,i){if(!e||utils.isString(e))return this.table.ownerDocument.createElement(e||"td");var n=domUtils.hasClass(e,"selectTdClass");n&&domUtils.removeClasses(e,"selectTdClass");var o=e.cloneNode(!0);return t&&(o.rowSpan=o.colSpan=1),!i&&domUtils.removeAttributes(o,"width height"),!i&&domUtils.removeAttributes(o,"style"),o.style.borderLeftStyle="",o.style.borderTopStyle="",o.style.borderLeftColor=e.style.borderRightColor,o.style.borderLeftWidth=e.style.borderRightWidth,o.style.borderTopColor=e.style.borderBottomColor,o.style.borderTopWidth=e.style.borderBottomWidth,n&&domUtils.addClass(e,"selectTdClass"),o},t.prototype={getMaxRows:function(){for(var e,t=this.table.rows,i=1,n=0;e=t[n];n++){for(var o,r=1,a=0;o=e.cells[a++];)r=Math.max(o.rowSpan||1,r);i=Math.max(r+n,i)}return i},getMaxCols:function(){for(var e,t=this.table.rows,i=0,n={},o=0;e=t[o];o++){for(var r,a=0,s=0;r=e.cells[s++];)if(a+=r.colSpan||1,r.rowSpan&&r.rowSpan>1)for(var l=1;l<r.rowSpan;l++)n["row_"+(o+l)]?n["row_"+(o+l)]++:n["row_"+(o+l)]=r.colSpan||1;a+=n["row_"+o]||0,i=Math.max(a,i)}return i},getCellColIndex:function(){},getHSideCell:function(t,i){try{var n,o,r=this.getCellInfo(t),a=this.selectedTds.length,s=this.cellsRange;return!i&&(a?!s.beginColIndex:!r.colIndex)||i&&(a?s.endColIndex==this.colsNum-1:r.colIndex==this.colsNum-1)?null:(n=a?s.beginRowIndex:r.rowIndex,o=i?a?s.endColIndex+1:r.colIndex+1:a?s.beginColIndex-1:r.colIndex<1?0:r.colIndex-1,this.getCell(this.indexTable[n][o].rowIndex,this.indexTable[n][o].cellIndex))}catch(l){e(l)}},getTabNextCell:function(e,t){var i,n=this.getCellInfo(e),o=t||n.rowIndex,r=n.colIndex+1+(n.colSpan-1);try{i=this.getCell(this.indexTable[o][r].rowIndex,this.indexTable[o][r].cellIndex)}catch(a){try{o=1*o+1,r=0,i=this.getCell(this.indexTable[o][r].rowIndex,this.indexTable[o][r].cellIndex)}catch(a){}}return i},getVSideCell:function(t,i,n){try{var o,r,a=this.getCellInfo(t),s=this.selectedTds.length&&!n,l=this.cellsRange;return!i&&0==a.rowIndex||i&&(s?l.endRowIndex==this.rowsNum-1:a.rowIndex+a.rowSpan>this.rowsNum-1)?null:(o=i?s?l.endRowIndex+1:a.rowIndex+a.rowSpan:s?l.beginRowIndex-1:a.rowIndex-1,r=s?l.beginColIndex:a.colIndex,this.getCell(this.indexTable[o][r].rowIndex,this.indexTable[o][r].cellIndex))}catch(d){e(d)}},getSameEndPosCells:function(t,i){try{for(var n="x"===i.toLowerCase(),o=domUtils.getXY(t)[n?"x":"y"]+t["offset"+(n?"Width":"Height")],r=this.table.rows,a=null,s=[],l=0;l<this.rowsNum;l++){a=r[l].cells;for(var d,c=0;d=a[c++];){var u=domUtils.getXY(d)[n?"x":"y"]+d["offset"+(n?"Width":"Height")];if(u>o&&n)break;if((t==d||o==u)&&(1==d[n?"colSpan":"rowSpan"]&&s.push(d),n))break}}return s}catch(m){e(m)}},setCellContent:function(e,t){e.innerHTML=t||(browser.ie?domUtils.fillChar:"<br />")},cloneCell:t.cloneCell,getSameStartPosXCells:function(t){try{for(var i,n=domUtils.getXY(t).x+t.offsetWidth,o=this.table.rows,r=[],a=0;a<this.rowsNum;a++){i=o[a].cells;for(var s,l=0;s=i[l++];){var d=domUtils.getXY(s).x;if(d>n)break;if(d==n&&1==s.colSpan){r.push(s);break}}}return r}catch(c){e(c)}},update:function(e){this.table=e||this.table,this.selectedTds=[],this.cellsRange={},this.indexTable=[];for(var t=this.table.rows,i=this.getMaxRows(),n=i-t.length,o=this.getMaxCols();n--;)this.table.insertRow(t.length);this.rowsNum=i,this.colsNum=o;for(var r=0,a=t.length;a>r;r++)this.indexTable[r]=new Array(o);for(var s,l=0;s=t[l];l++)for(var d,c=0,u=s.cells;d=u[c];c++){d.rowSpan>i&&(d.rowSpan=i);for(var m=c,f=d.rowSpan||1,h=d.colSpan||1;this.indexTable[l][m];)m++;for(var p=0;f>p;p++)for(var g=0;h>g;g++)this.indexTable[l+p][m+g]={rowIndex:l,cellIndex:c,colIndex:m,rowSpan:f,colSpan:h}}for(p=0;i>p;p++)for(g=0;o>g;g++)void 0===this.indexTable[p][g]&&(s=t[p],d=s.cells[s.cells.length-1],d=d?d.cloneNode(!0):this.table.ownerDocument.createElement("td"),this.setCellContent(d),1!==d.colSpan&&(d.colSpan=1),1!==d.rowSpan&&(d.rowSpan=1),s.appendChild(d),this.indexTable[p][g]={rowIndex:p,cellIndex:d.cellIndex,colIndex:g,rowSpan:1,colSpan:1});var v=domUtils.getElementsByTagName(this.table,"td"),b=[];if(utils.each(v,function(e){domUtils.hasClass(e,"selectTdClass")&&b.push(e)}),b.length){var y=b[0],C=b[b.length-1],N=this.getCellInfo(y),x=this.getCellInfo(C);this.selectedTds=b,this.cellsRange={beginRowIndex:N.rowIndex,beginColIndex:N.colIndex,endRowIndex:x.rowIndex+x.rowSpan-1,endColIndex:x.colIndex+x.colSpan-1}}if(!domUtils.hasClass(this.table.rows[0],"firstRow")){domUtils.addClass(this.table.rows[0],"firstRow");for(var r=1;r<this.table.rows.length;r++)domUtils.removeClasses(this.table.rows[r],"firstRow")}},getCellInfo:function(e){if(e)for(var t=e.cellIndex,i=e.parentNode.rowIndex,n=this.indexTable[i],o=this.colsNum,r=t;o>r;r++){var a=n[r];if(a.rowIndex===i&&a.cellIndex===t)return a}},getCell:function(e,t){return e<this.rowsNum&&this.table.rows[e].cells[t]||null},deleteCell:function(e,t){t="number"==typeof t?t:e.parentNode.rowIndex;var i=this.table.rows[t];i.deleteCell(e.cellIndex)},getCellsRange:function(e,t){function i(e,t,o,r){var a,s,l,d=e,c=t,u=o,m=r;if(e>0)for(s=t;r>s;s++)a=n.indexTable[e][s],l=a.rowIndex,e>l&&(d=Math.min(l,d));if(r<n.colsNum)for(l=e;o>l;l++)a=n.indexTable[l][r],s=a.colIndex+a.colSpan-1,s>r&&(m=Math.max(s,m));if(o<n.rowsNum)for(s=t;r>s;s++)a=n.indexTable[o][s],l=a.rowIndex+a.rowSpan-1,l>o&&(u=Math.max(l,u));if(t>0)for(l=e;o>l;l++)a=n.indexTable[l][t],s=a.colIndex,t>s&&(c=Math.min(a.colIndex,c));return d!=e||c!=t||u!=o||m!=r?i(d,c,u,m):{beginRowIndex:e,beginColIndex:t,endRowIndex:o,endColIndex:r}}try{var n=this,o=n.getCellInfo(e);if(e===t)return{beginRowIndex:o.rowIndex,beginColIndex:o.colIndex,endRowIndex:o.rowIndex+o.rowSpan-1,endColIndex:o.colIndex+o.colSpan-1};var r=n.getCellInfo(t),a=Math.min(o.rowIndex,r.rowIndex),s=Math.min(o.colIndex,r.colIndex),l=Math.max(o.rowIndex+o.rowSpan-1,r.rowIndex+r.rowSpan-1),d=Math.max(o.colIndex+o.colSpan-1,r.colIndex+r.colSpan-1);return i(a,s,l,d)}catch(c){}},getCells:function(e){this.clearSelected();for(var t,i,n,o=e.beginRowIndex,r=e.beginColIndex,a=e.endRowIndex,s=e.endColIndex,l={},d=[],c=o;a>=c;c++)for(var u=r;s>=u;u++){t=this.indexTable[c][u],i=t.rowIndex,n=t.colIndex;var m=i+"|"+n;if(!l[m]){if(l[m]=1,c>i||u>n||i+t.rowSpan-1>a||n+t.colSpan-1>s)return null;d.push(this.getCell(i,t.cellIndex))}}return d},clearSelected:function(){t.removeSelectedClass(this.selectedTds),this.selectedTds=[],this.cellsRange={}},setSelected:function(e){var i=this.getCells(e);t.addSelectedClass(i),this.selectedTds=i,this.cellsRange=e},isFullRow:function(){var e=this.cellsRange;return e.endColIndex-e.beginColIndex+1==this.colsNum},isFullCol:function(){var e=this.cellsRange,t=this.table,i=t.getElementsByTagName("th"),n=e.endRowIndex-e.beginRowIndex+1;return i.length?n==this.rowsNum||n==this.rowsNum-1:n==this.rowsNum},getNextCell:function(t,i,n){try{var o,r,a=this.getCellInfo(t),s=this.selectedTds.length&&!n,l=this.cellsRange;return!i&&0==a.rowIndex||i&&(s?l.endRowIndex==this.rowsNum-1:a.rowIndex+a.rowSpan>this.rowsNum-1)?null:(o=i?s?l.endRowIndex+1:a.rowIndex+a.rowSpan:s?l.beginRowIndex-1:a.rowIndex-1,r=s?l.beginColIndex:a.colIndex,this.getCell(this.indexTable[o][r].rowIndex,this.indexTable[o][r].cellIndex))}catch(d){e(d)}},getPreviewCell:function(t,i){try{var n,o,r=this.getCellInfo(t),a=this.selectedTds.length,s=this.cellsRange;return!i&&(a?!s.beginColIndex:!r.colIndex)||i&&(a?s.endColIndex==this.colsNum-1:r.rowIndex>this.colsNum-1)?null:(n=i?a?s.beginRowIndex:r.rowIndex<1?0:r.rowIndex-1:a?s.beginRowIndex:r.rowIndex,o=i?a?s.endColIndex+1:r.colIndex:a?s.beginColIndex-1:r.colIndex<1?0:r.colIndex-1,this.getCell(this.indexTable[n][o].rowIndex,this.indexTable[n][o].cellIndex))}catch(l){e(l)}},moveContent:function(e,i){if(!t.isEmptyBlock(i)){if(t.isEmptyBlock(e))return void(e.innerHTML=i.innerHTML);var n=e.lastChild;for(3!=n.nodeType&&dtd.$block[n.tagName]||e.appendChild(e.ownerDocument.createElement("br"));n=i.firstChild;)e.appendChild(n)}},mergeRight:function(e){var t=this.getCellInfo(e),i=t.colIndex+t.colSpan,n=this.indexTable[t.rowIndex][i],o=this.getCell(n.rowIndex,n.cellIndex);e.colSpan=t.colSpan+n.colSpan,e.removeAttribute("width"),this.moveContent(e,o),this.deleteCell(o,n.rowIndex),this.update()},mergeDown:function(e){var t=this.getCellInfo(e),i=t.rowIndex+t.rowSpan,n=this.indexTable[i][t.colIndex],o=this.getCell(n.rowIndex,n.cellIndex);e.rowSpan=t.rowSpan+n.rowSpan,e.removeAttribute("height"),this.moveContent(e,o),this.deleteCell(o,n.rowIndex),this.update()},mergeRange:function(){var e=this.cellsRange,t=this.getCell(e.beginRowIndex,this.indexTable[e.beginRowIndex][e.beginColIndex].cellIndex);if("TH"==t.tagName&&e.endRowIndex!==e.beginRowIndex){var i=this.indexTable,n=this.getCellInfo(t);t=this.getCell(1,i[1][n.colIndex].cellIndex),e=this.getCellsRange(t,this.getCell(i[this.rowsNum-1][n.colIndex].rowIndex,i[this.rowsNum-1][n.colIndex].cellIndex))}for(var o,r=this.getCells(e),a=0;o=r[a++];)o!==t&&(this.moveContent(t,o),this.deleteCell(o));if(t.rowSpan=e.endRowIndex-e.beginRowIndex+1,t.rowSpan>1&&t.removeAttribute("height"),t.colSpan=e.endColIndex-e.beginColIndex+1,t.colSpan>1&&t.removeAttribute("width"),t.rowSpan==this.rowsNum&&1!=t.colSpan&&(t.colSpan=1),t.colSpan==this.colsNum&&1!=t.rowSpan){var s=t.parentNode.rowIndex;if(this.table.deleteRow)for(var a=s+1,l=s+1,d=t.rowSpan;d>a;a++)this.table.deleteRow(l);else for(var a=0,d=t.rowSpan-1;d>a;a++){var c=this.table.rows[s+1];c.parentNode.removeChild(c)}t.rowSpan=1}this.update()},insertRow:function(e,t){function i(e,t,i){if(0==e){var n=i.nextSibling||i.previousSibling,o=n.cells[e];"TH"==o.tagName&&(o=t.ownerDocument.createElement("th"),o.appendChild(t.firstChild),i.insertBefore(o,t),domUtils.remove(t))}else if("TH"==t.tagName){var r=t.ownerDocument.createElement("td");r.appendChild(t.firstChild),i.insertBefore(r,t),domUtils.remove(t)}}var n,o=this.colsNum,r=this.table,a=r.insertRow(e),s="string"==typeof t&&"TH"==t.toUpperCase();if(0==e||e==this.rowsNum)for(var l=0;o>l;l++)n=this.cloneCell(t,!0),this.setCellContent(n),n.getAttribute("vAlign")&&n.setAttribute("vAlign",n.getAttribute("vAlign")),a.appendChild(n),s||i(l,n,a);else{var d=this.indexTable[e];for(l=0;o>l;l++){var c=d[l];c.rowIndex<e?(n=this.getCell(c.rowIndex,c.cellIndex),n.rowSpan=c.rowSpan+1):(n=this.cloneCell(t,!0),this.setCellContent(n),a.appendChild(n)),s||i(l,n,a)}}return this.update(),a},deleteRow:function(e){for(var t=this.table.rows[e],i=this.indexTable[e],n=this.colsNum,o=0,r=0;n>r;){var a=i[r],s=this.getCell(a.rowIndex,a.cellIndex);if(s.rowSpan>1&&a.rowIndex==e){var l=s.cloneNode(!0);l.rowSpan=s.rowSpan-1,l.innerHTML="",s.rowSpan=1;var d,c=e+1,u=this.table.rows[c],m=this.getPreviewMergedCellsNum(c,r)-o;r>m?(d=r-m-1,domUtils.insertAfter(u.cells[d],l)):u.cells.length&&u.insertBefore(l,u.cells[0]),o+=1}r+=s.colSpan||1}var f=[],h={};for(r=0;n>r;r++){var p=i[r].rowIndex,g=i[r].cellIndex,v=p+"_"+g;h[v]||(h[v]=1,s=this.getCell(p,g),f.push(s))}var b=[];utils.each(f,function(e){1==e.rowSpan?e.parentNode.removeChild(e):b.push(e)}),utils.each(b,function(e){e.rowSpan--}),t.parentNode.removeChild(t),this.update()},insertCol:function(e,t,i){function n(e,t,i){if(0==e){var n=t.nextSibling||t.previousSibling;"TH"==n.tagName&&(n=t.ownerDocument.createElement("th"),n.appendChild(t.firstChild),i.insertBefore(n,t),domUtils.remove(t))}else if("TH"==t.tagName){var o=t.ownerDocument.createElement("td");o.appendChild(t.firstChild),i.insertBefore(o,t),domUtils.remove(t)}}var o,r,a,s=this.rowsNum,l=0,d=parseInt((this.table.offsetWidth-20*(this.colsNum+1)-(this.colsNum+1))/(this.colsNum+1),10),c="string"==typeof t&&"TH"==t.toUpperCase();if(0==e||e==this.colsNum)for(;s>l;l++)o=this.table.rows[l],a=o.cells[0==e?e:o.cells.length],r=this.cloneCell(t,!0),this.setCellContent(r),r.setAttribute("vAlign",r.getAttribute("vAlign")),a&&r.setAttribute("width",a.getAttribute("width")),e?domUtils.insertAfter(o.cells[o.cells.length-1],r):o.insertBefore(r,o.cells[0]),c||n(l,r,o);else for(;s>l;l++){var u=this.indexTable[l][e];u.colIndex<e?(r=this.getCell(u.rowIndex,u.cellIndex),r.colSpan=u.colSpan+1):(o=this.table.rows[l],a=o.cells[u.cellIndex],r=this.cloneCell(t,!0),this.setCellContent(r),r.setAttribute("vAlign",r.getAttribute("vAlign")),a&&r.setAttribute("width",a.getAttribute("width")),a?o.insertBefore(r,a):o.appendChild(r)),c||n(l,r,o)}this.update(),this.updateWidth(d,i||{tdPadding:10,tdBorder:1})},updateWidth:function(e,i){var n=this.table,o=t.getWidth(n)-2*i.tdPadding-i.tdBorder+e;if(o<n.ownerDocument.body.offsetWidth)return void n.setAttribute("width",o);var r=domUtils.getElementsByTagName(this.table,"td th");utils.each(r,function(t){t.setAttribute("width",e)})},deleteCol:function(e){for(var t=this.indexTable,i=this.table.rows,n=this.table.getAttribute("width"),o=0,r=this.rowsNum,a={},s=0;r>s;){var l=t[s],d=l[e],c=d.rowIndex+"_"+d.colIndex;if(!a[c]){a[c]=1;var u=this.getCell(d.rowIndex,d.cellIndex);o||(o=u&&parseInt(u.offsetWidth/u.colSpan,10).toFixed(0)),u.colSpan>1?u.colSpan--:i[s].deleteCell(d.cellIndex),s+=d.rowSpan||1}}this.table.setAttribute("width",n-o),this.update()},splitToCells:function(e){var t=this,i=this.splitToRows(e);utils.each(i,function(e){t.splitToCols(e)})},splitToRows:function(e){var t=this.getCellInfo(e),i=t.rowIndex,n=t.colIndex,o=[];e.rowSpan=1,o.push(e);for(var r=i,a=i+t.rowSpan;a>r;r++)if(r!=i){var s=this.table.rows[r],l=s.insertCell(n-this.getPreviewMergedCellsNum(r,n));l.colSpan=t.colSpan,this.setCellContent(l),l.setAttribute("vAlign",e.getAttribute("vAlign")),l.setAttribute("align",e.getAttribute("align")),e.style.cssText&&(l.style.cssText=e.style.cssText),o.push(l)}return this.update(),o},getPreviewMergedCellsNum:function(e,t){for(var i=this.indexTable[e],n=0,o=0;t>o;){var r=i[o].colSpan,a=i[o].rowIndex;n+=r-(a==e?1:0),o+=r}return n},splitToCols:function(e){var t=(e.offsetWidth/e.colSpan-22).toFixed(0),i=this.getCellInfo(e),n=i.rowIndex,o=i.colIndex,r=[];e.colSpan=1,e.setAttribute("width",t),r.push(e);for(var a=o,s=o+i.colSpan;s>a;a++)if(a!=o){var l=this.table.rows[n],d=l.insertCell(this.indexTable[n][a].cellIndex+1);if(d.rowSpan=i.rowSpan,this.setCellContent(d),d.setAttribute("vAlign",e.getAttribute("vAlign")),d.setAttribute("align",e.getAttribute("align")),d.setAttribute("width",t),e.style.cssText&&(d.style.cssText=e.style.cssText),"TH"==e.tagName){var c=e.ownerDocument.createElement("th");c.appendChild(d.firstChild),c.setAttribute("vAlign",e.getAttribute("vAlign")),c.rowSpan=d.rowSpan,l.insertBefore(c,d),domUtils.remove(d)}r.push(d)}return this.update(),r},isLastCell:function(e,t,i){t=t||this.rowsNum,i=i||this.colsNum;var n=this.getCellInfo(e);return n.rowIndex+n.rowSpan==t&&n.colIndex+n.colSpan==i},getLastCell:function(e){e=e||this.table.getElementsByTagName("td");var t,i=(this.getCellInfo(e[0]),this),n=e[0],o=n.parentNode,r=0,a=0;return utils.each(e,function(e){e.parentNode==o&&(a+=e.colSpan||1),r+=e.rowSpan*e.colSpan||1}),t=r/a,utils.each(e,function(e){return i.isLastCell(e,t,a)?(n=e,!1):void 0}),n},selectRow:function(e){var t=this.indexTable[e],i=this.getCell(t[0].rowIndex,t[0].cellIndex),n=this.getCell(t[this.colsNum-1].rowIndex,t[this.colsNum-1].cellIndex),o=this.getCellsRange(i,n);this.setSelected(o)},selectTable:function(){var e=this.table.getElementsByTagName("td"),t=this.getCellsRange(e[0],e[e.length-1]);this.setSelected(t)},setBackground:function(e,t){if("string"==typeof t)utils.each(e,function(e){e.style.backgroundColor=t});else if("object"==typeof t){t=utils.extend({repeat:!0,colorList:["#ddd","#fff"]},t);for(var i,n=this.getCellInfo(e[0]).rowIndex,o=0,r=t.colorList,a=function(e,t,i){return e[t]?e[t]:i?e[t%e.length]:""},s=0;i=e[s++];){var l=this.getCellInfo(i);i.style.backgroundColor=a(r,n+o==l.rowIndex?o:++o,t.repeat)}}},removeBackground:function(e){utils.each(e,function(e){e.style.backgroundColor=""})}}}(),function(){function e(e,i){var n=domUtils.getElementsByTagName(e,"td th");utils.each(n,function(e){e.removeAttribute("width")}),e.setAttribute("width",t(i,!0,a(i,e)));var o=[];setTimeout(function(){utils.each(n,function(e){1==e.colSpan&&o.push(e.offsetWidth)}),utils.each(n,function(e,t){1==e.colSpan&&e.setAttribute("width",o[t]+"")})},0)}function t(e,t,i){var n=e.body;return n.offsetWidth-(t?2*parseInt(domUtils.getComputedStyle(n,"margin-left"),10):0)-2*i.tableBorder-(e.options.offsetWidth||0)}function i(e){var t=o(e).cell;if(t){var i=s(t);return i.selectedTds.length?i.selectedTds:[t]}return[]}var n=UE.UETable,o=function(e){return n.getTableItemsByRange(e)},r=function(e){return n.getUETableBySelected(e)},a=function(e,t){return n.getDefaultValue(e,t)},s=function(e){return n.getUETable(e)};UE.commands.inserttable={queryCommandState:function(){return o(this).table?-1:0},execCommand:function(e,t){function i(e,t){for(var i=[],n=e.numRows,o=e.numCols,r=0;n>r;r++){i.push("<tr"+(0==r?' class="firstRow"':"")+">");for(var a=0;o>a;a++)i.push('<td width="'+t+'"  vAlign="'+e.tdvalign+'" >'+(browser.ie&&browser.version<11?domUtils.fillChar:"<br/>")+"</td>");i.push("</tr>")}return"<table><tbody>"+i.join("")+"</tbody></table>"}t||(t=utils.extend({},{numCols:this.options.defaultCols,numRows:this.options.defaultRows,tdvalign:this.options.tdvalign}));var n=this,o=this.selection.getRange(),r=o.startContainer,s=domUtils.findParent(r,function(e){return domUtils.isBlockElm(e)},!0)||n.body,l=a(n),d=s.offsetWidth,c=Math.floor(d/t.numCols-2*l.tdPadding-l.tdBorder);!t.tdvalign&&(t.tdvalign=n.options.tdvalign),n.execCommand("inserthtml",i(t,c))}},UE.commands.insertparagraphbeforetable={queryCommandState:function(){return o(this).cell?0:-1},execCommand:function(){var e=o(this).table;if(e){var t=this.document.createElement("p");t.innerHTML=browser.ie?"&nbsp;":"<br />",e.parentNode.insertBefore(t,e),this.selection.getRange().setStart(t,0).setCursor()}}},UE.commands.deletetable={queryCommandState:function(){var e=this.selection.getRange();return domUtils.findParentByTagName(e.startContainer,"table",!0)?0:-1},execCommand:function(e,t){var i=this.selection.getRange();if(t=t||domUtils.findParentByTagName(i.startContainer,"table",!0)){var n=t.nextSibling;n||(n=domUtils.createElement(this.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"}),t.parentNode.insertBefore(n,t)),domUtils.remove(t),i=this.selection.getRange(),3==n.nodeType?i.setStartBefore(n):i.setStart(n,0),i.setCursor(!1,!0),this.fireEvent("tablehasdeleted")}}},UE.commands.cellalign={queryCommandState:function(){return i(this).length?0:-1},execCommand:function(e,t){var n=i(this);if(n.length)for(var o,r=0;o=n[r++];)o.setAttribute("align",t)}},UE.commands.cellvalign={queryCommandState:function(){return i(this).length?0:-1},execCommand:function(e,t){var n=i(this);if(n.length)for(var o,r=0;o=n[r++];)o.setAttribute("vAlign",t)}},UE.commands.insertcaption={queryCommandState:function(){var e=o(this).table;return e?0==e.getElementsByTagName("caption").length?1:-1:-1},execCommand:function(){var e=o(this).table;if(e){var t=this.document.createElement("caption");t.innerHTML=browser.ie?domUtils.fillChar:"<br/>",e.insertBefore(t,e.firstChild);var i=this.selection.getRange();i.setStart(t,0).setCursor()}}},UE.commands.deletecaption={queryCommandState:function(){var e=this.selection.getRange(),t=domUtils.findParentByTagName(e.startContainer,"table");return t?0==t.getElementsByTagName("caption").length?-1:1:-1},execCommand:function(){var e=this.selection.getRange(),t=domUtils.findParentByTagName(e.startContainer,"table");if(t){domUtils.remove(t.getElementsByTagName("caption")[0]);var i=this.selection.getRange();i.setStart(t.rows[0].cells[0],0).setCursor()}}},UE.commands.inserttitle={queryCommandState:function(){var e=o(this).table;if(e){var t=e.rows[0];return"th"!=t.cells[t.cells.length-1].tagName.toLowerCase()?0:-1}return-1},execCommand:function(){var e=o(this).table;e&&s(e).insertRow(0,"th");var t=e.getElementsByTagName("th")[0];this.selection.getRange().setStart(t,0).setCursor(!1,!0)}},UE.commands.deletetitle={queryCommandState:function(){var e=o(this).table;if(e){var t=e.rows[0];return"th"==t.cells[t.cells.length-1].tagName.toLowerCase()?0:-1}return-1},execCommand:function(){var e=o(this).table;e&&domUtils.remove(e.rows[0]);var t=e.getElementsByTagName("td")[0];this.selection.getRange().setStart(t,0).setCursor(!1,!0)}},UE.commands.inserttitlecol={queryCommandState:function(){var e=o(this).table;if(e){var t=e.rows[e.rows.length-1];return t.getElementsByTagName("th").length?-1:0}return-1},execCommand:function(){var t=o(this).table;t&&s(t).insertCol(0,"th"),e(t,this);var i=t.getElementsByTagName("th")[0];this.selection.getRange().setStart(i,0).setCursor(!1,!0)}},UE.commands.deletetitlecol={queryCommandState:function(){var e=o(this).table;if(e){var t=e.rows[e.rows.length-1];return t.getElementsByTagName("th").length?0:-1}return-1},execCommand:function(){var t=o(this).table;if(t)for(var i=0;i<t.rows.length;i++)domUtils.remove(t.rows[i].children[0]);e(t,this);var n=t.getElementsByTagName("td")[0];this.selection.getRange().setStart(n,0).setCursor(!1,!0)}},UE.commands.mergeright={queryCommandState:function(){var e=o(this),t=e.table,i=e.cell;if(!t||!i)return-1;var n=s(t);if(n.selectedTds.length)return-1;var r=n.getCellInfo(i),a=r.colIndex+r.colSpan;if(a>=n.colsNum)return-1;var l=n.indexTable[r.rowIndex][a],d=t.rows[l.rowIndex].cells[l.cellIndex];return d&&i.tagName==d.tagName?l.rowIndex==r.rowIndex&&l.rowSpan==r.rowSpan?0:-1:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=o(this).cell,n=s(i);n.mergeRight(i),e.moveToBookmark(t).select()}},UE.commands.mergedown={queryCommandState:function(){var e=o(this),t=e.table,i=e.cell;if(!t||!i)return-1;var n=s(t);if(n.selectedTds.length)return-1;var r=n.getCellInfo(i),a=r.rowIndex+r.rowSpan;if(a>=n.rowsNum)return-1;var l=n.indexTable[a][r.colIndex],d=t.rows[l.rowIndex].cells[l.cellIndex];return d&&i.tagName==d.tagName?l.colIndex==r.colIndex&&l.colSpan==r.colSpan?0:-1:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=o(this).cell,n=s(i);n.mergeDown(i),e.moveToBookmark(t).select()}},UE.commands.mergecells={queryCommandState:function(){return r(this)?0:-1},execCommand:function(){var e=r(this);if(e&&e.selectedTds.length){var t=e.selectedTds[0];e.mergeRange();var i=this.selection.getRange();domUtils.isEmptyBlock(t)?i.setStart(t,0).collapse(!0):i.selectNodeContents(t),i.select()}}},UE.commands.insertrow={queryCommandState:function(){var e=o(this),t=e.cell;return t&&("TD"==t.tagName||"TH"==t.tagName&&e.tr!==e.table.rows[0])&&s(e.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=o(this),n=i.cell,r=i.table,a=s(r),l=a.getCellInfo(n);if(a.selectedTds.length)for(var d=a.cellsRange,c=0,u=d.endRowIndex-d.beginRowIndex+1;u>c;c++)a.insertRow(d.beginRowIndex,n);else a.insertRow(l.rowIndex,n);e.moveToBookmark(t).select(),"enabled"===r.getAttribute("interlaced")&&this.fireEvent("interlacetable",r)}},UE.commands.insertrownext={queryCommandState:function(){var e=o(this),t=e.cell;return t&&"TD"==t.tagName&&s(e.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=o(this),n=i.cell,r=i.table,a=s(r),l=a.getCellInfo(n);if(a.selectedTds.length)for(var d=a.cellsRange,c=0,u=d.endRowIndex-d.beginRowIndex+1;u>c;c++)a.insertRow(d.endRowIndex+1,n);else a.insertRow(l.rowIndex+l.rowSpan,n);e.moveToBookmark(t).select(),"enabled"===r.getAttribute("interlaced")&&this.fireEvent("interlacetable",r)}},UE.commands.deleterow={queryCommandState:function(){var e=o(this);return e.cell?0:-1},execCommand:function(){var e=o(this).cell,t=s(e),i=t.cellsRange,n=t.getCellInfo(e),r=t.getVSideCell(e),a=t.getVSideCell(e,!0),l=this.selection.getRange();if(utils.isEmptyObject(i))t.deleteRow(n.rowIndex);else for(var d=i.beginRowIndex;d<i.endRowIndex+1;d++)t.deleteRow(i.beginRowIndex);var c=t.table;if(c.getElementsByTagName("td").length)if(1==n.rowSpan||n.rowSpan==i.endRowIndex-i.beginRowIndex+1)(a||r)&&l.selectNodeContents(a||r).setCursor(!1,!0);else{var u=t.getCell(n.rowIndex,t.indexTable[n.rowIndex][n.colIndex].cellIndex);u&&l.selectNodeContents(u).setCursor(!1,!0)}else{var m=c.nextSibling;domUtils.remove(c),m&&l.setStart(m,0).setCursor(!1,!0)}"enabled"===c.getAttribute("interlaced")&&this.fireEvent("interlacetable",c)}},UE.commands.insertcol={queryCommandState:function(){var e=o(this),t=e.cell;return t&&("TD"==t.tagName||"TH"==t.tagName&&t!==e.tr.cells[0])&&s(e.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(e){var t=this.selection.getRange(),i=t.createBookmark(!0);if(-1!=this.queryCommandState(e)){var n=o(this).cell,r=s(n),a=r.getCellInfo(n);if(r.selectedTds.length)for(var l=r.cellsRange,d=0,c=l.endColIndex-l.beginColIndex+1;c>d;d++)r.insertCol(l.beginColIndex,n);else r.insertCol(a.colIndex,n);t.moveToBookmark(i).select(!0)}}},UE.commands.insertcolnext={queryCommandState:function(){var e=o(this),t=e.cell;return t&&s(e.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=o(this).cell,n=s(i),r=n.getCellInfo(i);if(n.selectedTds.length)for(var a=n.cellsRange,l=0,d=a.endColIndex-a.beginColIndex+1;d>l;l++)n.insertCol(a.endColIndex+1,i);else n.insertCol(r.colIndex+r.colSpan,i);e.moveToBookmark(t).select()}},UE.commands.deletecol={queryCommandState:function(){var e=o(this);return e.cell?0:-1},execCommand:function(){var e=o(this).cell,t=s(e),i=t.cellsRange,n=t.getCellInfo(e),r=t.getHSideCell(e),a=t.getHSideCell(e,!0);if(utils.isEmptyObject(i))t.deleteCol(n.colIndex);else for(var l=i.beginColIndex;l<i.endColIndex+1;l++)t.deleteCol(i.beginColIndex);var d=t.table,c=this.selection.getRange();if(d.getElementsByTagName("td").length)domUtils.inDoc(e,this.document)?c.setStart(e,0).setCursor(!1,!0):a&&domUtils.inDoc(a,this.document)?c.selectNodeContents(a).setCursor(!1,!0):r&&domUtils.inDoc(r,this.document)&&c.selectNodeContents(r).setCursor(!0,!0);else{var u=d.nextSibling;domUtils.remove(d),u&&c.setStart(u,0).setCursor(!1,!0)}}},UE.commands.splittocells={queryCommandState:function(){var e=o(this),t=e.cell;if(!t)return-1;var i=s(e.table);return i.selectedTds.length>0?-1:t&&(t.colSpan>1||t.rowSpan>1)?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=o(this).cell,n=s(i);
n.splitToCells(i),e.moveToBookmark(t).select()}},UE.commands.splittorows={queryCommandState:function(){var e=o(this),t=e.cell;if(!t)return-1;var i=s(e.table);return i.selectedTds.length>0?-1:t&&t.rowSpan>1?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=o(this).cell,n=s(i);n.splitToRows(i),e.moveToBookmark(t).select()}},UE.commands.splittocols={queryCommandState:function(){var e=o(this),t=e.cell;if(!t)return-1;var i=s(e.table);return i.selectedTds.length>0?-1:t&&t.colSpan>1?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=o(this).cell,n=s(i);n.splitToCols(i),e.moveToBookmark(t).select()}},UE.commands.adaptbytext=UE.commands.adaptbywindow={queryCommandState:function(){return o(this).table?0:-1},execCommand:function(t){var i=o(this),n=i.table;if(n)if("adaptbywindow"==t)e(n,this);else{var r=domUtils.getElementsByTagName(n,"td th");utils.each(r,function(e){e.removeAttribute("width")}),n.removeAttribute("width")}}},UE.commands.averagedistributecol={queryCommandState:function(){var e=r(this);return e?e.isFullRow()||e.isFullCol()?0:-1:-1},execCommand:function(){function e(){var e,t=n.table,o=0,r=0,s=a(i,t);if(n.isFullRow())o=t.offsetWidth,r=n.colsNum;else for(var l,d=n.cellsRange.beginColIndex,c=n.cellsRange.endColIndex,u=d;c>=u;)l=n.selectedTds[u],o+=l.offsetWidth,u+=l.colSpan,r+=1;return e=Math.ceil(o/r)-2*s.tdBorder-2*s.tdPadding}function t(e){utils.each(domUtils.getElementsByTagName(n.table,"th"),function(e){e.setAttribute("width","")});var t=n.isFullRow()?domUtils.getElementsByTagName(n.table,"td"):n.selectedTds;utils.each(t,function(t){1==t.colSpan&&t.setAttribute("width",e)})}var i=this,n=r(i);n&&n.selectedTds.length&&t(e())}},UE.commands.averagedistributerow={queryCommandState:function(){var e=r(this);return e?e.selectedTds&&/th/gi.test(e.selectedTds[0].tagName)?-1:e.isFullRow()||e.isFullCol()?0:-1:-1},execCommand:function(){function e(){var e,t,o=0,r=n.table,s=a(i,r),l=parseInt(domUtils.getComputedStyle(r.getElementsByTagName("td")[0],"padding-top"));if(n.isFullCol()){var d,c,u=domUtils.getElementsByTagName(r,"caption"),m=domUtils.getElementsByTagName(r,"th");u.length>0&&(d=u[0].offsetHeight),m.length>0&&(c=m[0].offsetHeight),o=r.offsetHeight-(d||0)-(c||0),t=0==m.length?n.rowsNum:n.rowsNum-1}else{for(var f=n.cellsRange.beginRowIndex,h=n.cellsRange.endRowIndex,p=0,g=domUtils.getElementsByTagName(r,"tr"),v=f;h>=v;v++)o+=g[v].offsetHeight,p+=1;t=p}return e=browser.ie&&browser.version<9?Math.ceil(o/t):Math.ceil(o/t)-2*s.tdBorder-2*l}function t(e){var t=n.isFullCol()?domUtils.getElementsByTagName(n.table,"td"):n.selectedTds;utils.each(t,function(t){1==t.rowSpan&&t.setAttribute("height",e)})}var i=this,n=r(i);n&&n.selectedTds.length&&t(e())}},UE.commands.cellalignment={queryCommandState:function(){return o(this).table?0:-1},execCommand:function(e,t){var i=this,n=r(i);if(n)utils.each(n.selectedTds,function(e){domUtils.setAttributes(e,t)});else{var o=i.selection.getStart(),a=o&&domUtils.findParentByTagName(o,["td","th","caption"],!0);/caption/gi.test(a.tagName)?(a.style.textAlign=t.align,a.style.verticalAlign=t.vAlign):domUtils.setAttributes(a,t),i.selection.getRange().setCursor(!0)}},queryCommandValue:function(){var e=o(this).cell;if(e||(e=i(this)[0]),e){var t=UE.UETable.getUETable(e).selectedTds;return!t.length&&(t=e),UE.UETable.getTableCellAlignState(t)}return null}},UE.commands.tablealignment={queryCommandState:function(){return browser.ie&&browser.version<8?-1:o(this).table?0:-1},execCommand:function(e,t){var i=this,n=i.selection.getStart(),o=n&&domUtils.findParentByTagName(n,["table"],!0);o&&o.setAttribute("align",t)}},UE.commands.edittable={queryCommandState:function(){return o(this).table?0:-1},execCommand:function(e,t){var i=this.selection.getRange(),n=domUtils.findParentByTagName(i.startContainer,"table");if(n){var o=domUtils.getElementsByTagName(n,"td").concat(domUtils.getElementsByTagName(n,"th"),domUtils.getElementsByTagName(n,"caption"));utils.each(o,function(e){e.style.borderColor=t})}}},UE.commands.edittd={queryCommandState:function(){return o(this).table?0:-1},execCommand:function(e,t){var i=this,n=r(i);if(n)utils.each(n.selectedTds,function(e){e.style.backgroundColor=t});else{var o=i.selection.getStart(),a=o&&domUtils.findParentByTagName(o,["td","th","caption"],!0);a&&(a.style.backgroundColor=t)}}},UE.commands.settablebackground={queryCommandState:function(){return i(this).length>1?0:-1},execCommand:function(e,t){var n,o;n=i(this),o=s(n[0]),o.setBackground(n,t)}},UE.commands.cleartablebackground={queryCommandState:function(){var e=i(this);if(!e.length)return-1;for(var t,n=0;t=e[n++];)if(""!==t.style.backgroundColor)return 0;return-1},execCommand:function(){var e=i(this),t=s(e[0]);t.removeBackground(e)}},UE.commands.interlacetable=UE.commands.uninterlacetable={queryCommandState:function(e){var t=o(this).table;if(!t)return-1;var i=t.getAttribute("interlaced");return"interlacetable"==e?"enabled"===i?-1:0:i&&"disabled"!==i?0:-1},execCommand:function(e,t){var i=o(this).table;"interlacetable"==e?(i.setAttribute("interlaced","enabled"),this.fireEvent("interlacetable",i,t)):(i.setAttribute("interlaced","disabled"),this.fireEvent("uninterlacetable",i))}},UE.commands.setbordervisible={queryCommandState:function(){var e=o(this).table;return e?0:-1},execCommand:function(){var e=o(this).table;utils.each(domUtils.getElementsByTagName(e,"td"),function(e){e.style.borderWidth="1px",e.style.borderStyle="solid"})}}}(),UE.plugins.table=function(){function e(){}function t(e){i(e,"width",!0),i(e,"height",!0)}function i(e,t,i){e.style[t]&&(i&&e.setAttribute(t,parseInt(e.style[t],10)),e.style[t]="")}function n(e){if("TD"==e.tagName||"TH"==e.tagName)return e;var t;return(t=domUtils.findParentByTagName(e,"td",!0)||domUtils.findParentByTagName(e,"th",!0))?t:null}function o(e){var t=new RegExp(domUtils.fillChar,"g");if(e[browser.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(t,"").length>0)return 0;for(var i in dtd.$isNotEmpty)if(e.getElementsByTagName(i).length)return 0;return 1}function r(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+H.document.body.scrollLeft-H.document.body.clientLeft,y:e.clientY+H.document.body.scrollTop-H.document.body.clientTop}}function a(t){if(!T())try{var i,o=n(t.target||t.srcElement);if(V&&(H.body.style.webkitUserSelect="none",(Math.abs(X.x-t.clientX)>W||Math.abs(X.y-t.clientY)>W)&&(y(),V=!1,j=0,N(t))),it&&st)return j=0,H.body.style.webkitUserSelect="none",H.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"](),i=r(t),m(H,!0,it,i,o),void("h"==it?at.style.left=c(st,t)+"px":"v"==it&&(at.style.top=u(st,t)+"px"));if(o){if(H.fireEvent("excludetable",o)===!0)return;i=r(t);var a=f(o,i),l=domUtils.findParentByTagName(o,"table",!0);if(d(l,o,t,!0)){if(H.fireEvent("excludetable",l)===!0)return;H.body.style.cursor="url("+H.options.cursorpath+"h.png),pointer"}else if(d(l,o,t)){if(H.fireEvent("excludetable",l)===!0)return;H.body.style.cursor="url("+H.options.cursorpath+"v.png),pointer"}else{H.body.style.cursor="text";/\d/.test(a)&&(a=a.replace(/\d/,""),o=G(o).getPreviewCell(o,"v"==a)),m(H,o?!!a:!1,o?a:"",i,o)}}else s(!1,l,H)}catch(h){e(h)}}function s(e,t,i){if(e)l(t,i);else{if(rt)return;mt=setTimeout(function(){!rt&&ot&&ot.parentNode&&ot.parentNode.removeChild(ot)},2e3)}}function l(e,t){function i(i,n){clearTimeout(a),a=setTimeout(function(){t.fireEvent("tableClicked",e,n)},300)}function n(){clearTimeout(a);var i=G(e),n=e.rows[0].cells[0],o=i.getLastCell(),r=i.getCellsRange(n,o);t.selection.getRange().setStart(n,0).setCursor(!1,!0),i.setSelected(r)}var o=domUtils.getXY(e),r=e.ownerDocument;if(ot&&ot.parentNode)return ot;ot=r.createElement("div"),ot.contentEditable=!1,ot.innerHTML="",ot.style.cssText="width:15px;height:15px;background-image:url("+t.options.UEDITOR_HOME_URL+"dialogs/table/dragicon.png);position: absolute;cursor:move;top:"+(o.y-15)+"px;left:"+o.x+"px;",domUtils.unSelectable(ot),ot.onmouseover=function(){rt=!0},ot.onmouseout=function(){rt=!1},domUtils.on(ot,"click",function(e,t){i(t,this)}),domUtils.on(ot,"dblclick",function(e,t){n(t)}),domUtils.on(ot,"dragstart",function(e,t){domUtils.preventDefault(t)});var a;r.body.appendChild(ot)}function d(e,t,i,n){var o=r(i),a=f(t,o);if(n){var s=e.getElementsByTagName("caption")[0],l=s?s.offsetHeight:0;return"v1"==a&&o.y-domUtils.getXY(e).y-l<8}return"h1"==a&&o.x-domUtils.getXY(e).x<8}function c(e,t){var i=G(e);if(i){var n=i.getSameEndPosCells(e,"x")[0],o=i.getSameStartPosXCells(e)[0],a=r(t).x,s=(n?domUtils.getXY(n).x:domUtils.getXY(i.table).x)+20,l=o?domUtils.getXY(o).x+o.offsetWidth-20:H.body.offsetWidth+5||parseInt(domUtils.getComputedStyle(H.body,"width"),10);return s+=q,l-=q,s>a?s:a>l?l:a}}function u(t,i){try{var n=domUtils.getXY(t).y,o=r(i).y;return n>o?n:o}catch(a){e(a)}}function m(t,i,n,o,r){try{t.body.style.cursor="h"==n?"col-resize":"v"==n?"row-resize":"text",browser.ie&&(!n||lt||J(t)?L(t):(R(t,t.document),D(n,r))),nt=i}catch(a){e(a)}}function f(e,t){var i=domUtils.getXY(e);return i?i.x+e.offsetWidth-t.x<z?"h":t.x-i.x<z?"h1":i.y+e.offsetHeight-t.y<z?"v":t.y-i.y<z?"v1":"":""}function h(e,t){if(!T())if(X={x:t.clientX,y:t.clientY},2==t.button){var i=J(H),n=!1;if(i){var o=M(H,t);utils.each(i.selectedTds,function(e){e===o&&(n=!0)}),n?(o=i.selectedTds[0],setTimeout(function(){H.selection.getRange().setStart(o,0).setCursor(!1,!0)},0)):(Q(domUtils.getElementsByTagName(H.body,"th td")),i.clearSelected())}}else g(t)}function p(e){j=0,e=e||H.window.event;var t=n(e.target||e.srcElement);if(t){var i;if(i=f(t,r(e))){if(L(H),"h1"==i)if(i="h",d(domUtils.findParentByTagName(t,"table"),t,e))H.execCommand("adaptbywindow");else if(t=G(t).getPreviewCell(t)){var o=H.selection.getRange();o.selectNodeContents(t).setCursor(!0,!0)}if("h"==i){var a=G(t),s=a.table,l=k(t,s,!0);l=b(l,"left"),a.width=a.offsetWidth;var c=[],u=[];utils.each(l,function(e){c.push(e.offsetWidth)}),utils.each(l,function(e){e.removeAttribute("width")}),window.setTimeout(function(){var e=!0;utils.each(l,function(t,i){var n=t.offsetWidth;return n>c[i]?(e=!1,!1):void u.push(n)});var t=e?u:c;utils.each(l,function(e,i){e.width=t[i]-A()})},0)}}}}function g(e){if(Q(domUtils.getElementsByTagName(H.body,"td th")),utils.each(H.document.getElementsByTagName("table"),function(e){e.ueTable=null}),et=M(H,e)){var t=domUtils.findParentByTagName(et,"table",!0);ut=G(t),ut&&ut.clearSelected(),nt?v(e):(H.document.body.style.webkitUserSelect="",lt=!0,H.addListener("mouseover",w))}}function v(e){browser.ie&&(e=C(e)),y(),V=!0,F=setTimeout(function(){N(e)},Y)}function b(e,t){for(var i=[],n=null,o=0,r=e.length;r>o;o++)n=e[o][t],n&&i.push(n);return i}function y(){F&&clearTimeout(F),F=null}function C(e){var t=["pageX","pageY","clientX","clientY","srcElement","target"],i={};if(e)for(var n,o,r=0;n=t[r];r++)o=e[n],o&&(i[n]=o);return i}function N(e){if(V=!1,et=e.target||e.srcElement){var t=f(et,r(e));/\d/.test(t)&&(t=t.replace(/\d/,""),et=G(et).getPreviewCell(et,"v"==t)),L(H),R(H,H.document),H.fireEvent("saveScene"),D(t,et),lt=!0,it=t,st=et}}function x(e,t){if(!T()){if(y(),V=!1,nt&&(j=++j%3,X={x:t.clientX,y:t.clientY},$=setTimeout(function(){j>0&&j--},Y),2===j))return j=0,void p(t);if(2!=t.button){var i=this,n=i.selection.getRange(),o=domUtils.findParentByTagName(n.startContainer,"table",!0),r=domUtils.findParentByTagName(n.endContainer,"table",!0);if((o||r)&&(o===r?(o=domUtils.findParentByTagName(n.startContainer,["td","th","caption"],!0),r=domUtils.findParentByTagName(n.endContainer,["td","th","caption"],!0),o!==r&&i.selection.clearRange()):i.selection.clearRange()),lt=!1,i.document.body.style.webkitUserSelect="",it&&st&&(i.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"](),j=0,at=i.document.getElementById("ue_tableDragLine"))){var a=domUtils.getXY(st),s=domUtils.getXY(at);switch(it){case"h":E(st,s.x-a.x);break;case"v":S(st,s.y-a.y-st.offsetHeight)}return it="",st=null,L(i),void i.fireEvent("saveScene")}if(et){var l=G(et),d=l?l.selectedTds[0]:null;if(d)n=new dom.Range(i.document),domUtils.isEmptyBlock(d)?n.setStart(d,0).setCursor(!1,!0):n.selectNodeContents(d).shrinkBoundary().setCursor(!1,!0);else if(n=i.selection.getRange().shrinkBoundary(),!n.collapsed){var o=domUtils.findParentByTagName(n.startContainer,["td","th"],!0),r=domUtils.findParentByTagName(n.endContainer,["td","th"],!0);(o&&!r||!o&&r||o&&r&&o!==r)&&n.setCursor(!1,!0)}et=null,i.removeListener("mouseover",w)}else{var c=domUtils.findParentByTagName(t.target||t.srcElement,"td",!0);if(c||(c=domUtils.findParentByTagName(t.target||t.srcElement,"th",!0)),c&&("TD"==c.tagName||"TH"==c.tagName)){if(i.fireEvent("excludetable",c)===!0)return;n=new dom.Range(i.document),n.setStart(c,0).setCursor(!1,!0)}}i._selectionChange(250,t)}}}function w(e,t){if(!T()){var i=this,n=t.target||t.srcElement;if(tt=domUtils.findParentByTagName(n,"td",!0)||domUtils.findParentByTagName(n,"th",!0),et&&tt&&("TD"==et.tagName&&"TD"==tt.tagName||"TH"==et.tagName&&"TH"==tt.tagName)&&domUtils.findParentByTagName(et,"table")==domUtils.findParentByTagName(tt,"table")){var o=G(tt);if(et!=tt){i.document.body.style.webkitUserSelect="none",i.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"]();var r=o.getCellsRange(et,tt);o.setSelected(r)}else i.document.body.style.webkitUserSelect="",o.clearSelected()}t.preventDefault?t.preventDefault():t.returnValue=!1}}function U(e,t,i){var n=parseInt(domUtils.getComputedStyle(e,"line-height"),10),o=i+t;t=n>o?n:o,e.style.height&&(e.style.height=""),1==e.rowSpan?e.setAttribute("height",t):e.removeAttribute&&e.removeAttribute("height")}function E(e,t){var i=G(e);if(i){var n=i.table,o=k(e,n);if(n.style.width="",n.removeAttribute("width"),t=B(t,e,o),e.nextSibling){utils.each(o,function(e){e.left.width=+e.left.width+t,e.right&&(e.right.width=+e.right.width-t)})}else utils.each(o,function(e){e.left.width-=-t})}}function T(){return"false"===H.body.contentEditable}function S(e,t){if(!(Math.abs(t)<10)){var i=G(e);if(i)for(var n,o=i.getSameEndPosCells(e,"y"),r=o[0]?o[0].offsetHeight:0,a=0;n=o[a++];)U(n,t,r)}}function k(e,t,i){if(t||(t=domUtils.findParentByTagName(e,"table")),!t)return null;for(var n=(domUtils.getNodeIndex(e),e),o=t.rows,r=0;n;)1===n.nodeType&&(r+=n.colSpan||1),n=n.previousSibling;n=null;var a=[];return utils.each(o,function(e){var t=e.cells,n=0;utils.each(t,function(e){return n+=e.colSpan||1,n===r?(a.push({left:e,right:e.nextSibling||null}),!1):n>r?(i&&a.push({left:e}),!1):void 0})}),a}function B(e,t,i){if(e-=A(),0>e)return 0;e-=I(t);var n=0>e?"left":"right";return e=Math.abs(e),utils.each(i,function(t){var i=t[n];i&&(e=Math.min(e,I(i)-q))}),e=0>e?0:e,"left"===n?-e:e}function I(e){var t=0,t=e.offsetWidth-A();e.nextSibling||(t-=_(e)),t=0>t?0:t;try{e.width=t}catch(i){}return t}function _(e){if(tab=domUtils.findParentByTagName(e,"table",!1),void 0===tab.offsetVal){var t=e.previousSibling;tab.offsetVal=t?e.offsetWidth-t.offsetWidth===K.borderWidth?K.borderWidth:0:0}return tab.offsetVal}function A(){if(void 0===K.tabcellSpace){var e=H.document.createElement("table"),t=H.document.createElement("tbody"),i=H.document.createElement("tr"),n=H.document.createElement("td"),o=null;n.style.cssText="border: 0;",n.width=1,i.appendChild(n),i.appendChild(o=n.cloneNode(!1)),t.appendChild(i),e.appendChild(t),e.style.cssText="visibility: hidden;",H.body.appendChild(e),K.paddingSpace=n.offsetWidth-1;var r=e.offsetWidth;n.style.cssText="",o.style.cssText="",K.borderWidth=(e.offsetWidth-r)/3,K.tabcellSpace=K.paddingSpace+K.borderWidth,H.body.removeChild(e)}return A=function(){return K.tabcellSpace},K.tabcellSpace}function R(e){lt||(at=e.document.createElement("div"),domUtils.setAttributes(at,{id:"ue_tableDragLine",unselectable:"on",contenteditable:!1,onresizestart:"return false",ondragstart:"return false",onselectstart:"return false",style:"background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity=0)"}),e.body.appendChild(at))}function L(e){if(!lt)for(var t;t=e.document.getElementById("ue_tableDragLine");)domUtils.remove(t)}function D(e,t){if(t){var i,n=domUtils.findParentByTagName(t,"table"),o=n.getElementsByTagName("caption"),r=n.offsetWidth,a=n.offsetHeight-(o.length>0?o[0].offsetHeight:0),s=domUtils.getXY(n),l=domUtils.getXY(t);switch(e){case"h":i="height:"+a+"px;top:"+(s.y+(o.length>0?o[0].offsetHeight:0))+"px;left:"+(l.x+t.offsetWidth),at.style.cssText=i+"px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity=30)";break;case"v":i="width:"+r+"px;left:"+s.x+"px;top:"+(l.y+t.offsetHeight),at.style.cssText=i+"px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity=20)"}}}function O(e,t){for(var i,n,o=domUtils.getElementsByTagName(e.body,"table"),r=0;n=o[r++];){var a=domUtils.getElementsByTagName(n,"td");a[0]&&(t?(i=a[0].style.borderColor.replace(/\s/g,""),/(#ffffff)|(rgb\(255,255,255\))/gi.test(i)&&domUtils.addClass(n,"noBorderTable")):domUtils.removeClasses(n,"noBorderTable"))}}function P(e,t,i){var n=e.body;return n.offsetWidth-(t?2*parseInt(domUtils.getComputedStyle(n,"margin-left"),10):0)-2*i.tableBorder-(e.options.offsetWidth||0)}function M(e,t){var i=domUtils.findParentByTagName(t.target||t.srcElement,["td","th"],!0),n=null;if(!i)return null;if(n=f(i,r(t)),!i)return null;if("h1"===n&&i.previousSibling){var o=domUtils.getXY(i),a=i.offsetWidth;Math.abs(o.x+a-t.clientX)>a/3&&(i=i.previousSibling)}else if("v1"===n&&i.parentNode.previousSibling){var o=domUtils.getXY(i),s=i.offsetHeight;Math.abs(o.y+s-t.clientY)>s/3&&(i=i.parentNode.previousSibling.firstChild)}return i&&e.fireEvent("excludetable",i)!==!0?i:null}var H=this,F=null,$=null,q=5,V=!1,z=5,W=10,j=0,X=null,Y=360,K=UE.UETable,G=function(e){return K.getUETable(e)},J=function(e){return K.getUETableBySelected(e)},Z=function(e,t){return K.getDefaultValue(e,t)},Q=function(e){return K.removeSelectedClass(e)};H.ready(function(){var e=this,t=e.selection.getText;e.selection.getText=function(){var i=J(e);if(i){var n="";return utils.each(i.selectedTds,function(e){n+=e[browser.ie?"innerText":"textContent"]}),n}return t.call(e.selection)}});var et=null,tt=null,it="",nt=!1,ot=null,rt=!1,at=null,st=null,lt=!1,dt=!0;H.setOpt({maxColNum:20,maxRowNum:100,defaultCols:5,defaultRows:5,tdvalign:"top",cursorpath:H.options.UEDITOR_HOME_URL+"themes/default/images/cursor_",tableDragable:!1,classList:["ue-table-interlace-color-single","ue-table-interlace-color-double"]}),H.getUETable=G;var ct={deletetable:1,inserttable:1,cellvalign:1,insertcaption:1,deletecaption:1,inserttitle:1,deletetitle:1,mergeright:1,mergedown:1,mergecells:1,insertrow:1,insertrownext:1,deleterow:1,insertcol:1,insertcolnext:1,deletecol:1,splittocells:1,splittorows:1,splittocols:1,adaptbytext:1,adaptbywindow:1,adaptbycustomer:1,insertparagraph:1,insertparagraphbeforetable:1,averagedistributecol:1,averagedistributerow:1};H.ready(function(){utils.cssRule("table",".selectTdClass{background-color:#edf5fa !important}table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}table{margin-bottom:10px;border-collapse:collapse;display:table;}td,th{padding: 5px 10px;border: 1px solid #DDD;}caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}th{border-top:1px solid #BBB;background-color:#F7F7F7;}table tr.firstRow th{border-top-width:2px;}.ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }td p{margin:0;padding:0;}",H.document);var e,i,r;H.addListener("keydown",function(t,n){var a=this,s=n.keyCode||n.which;if(8==s){var l=J(a);l&&l.selectedTds.length&&(l.isFullCol()?a.execCommand("deletecol"):l.isFullRow()?a.execCommand("deleterow"):a.fireEvent("delcells"),domUtils.preventDefault(n));var d=domUtils.findParentByTagName(a.selection.getStart(),"caption",!0),c=a.selection.getRange();if(c.collapsed&&d&&o(d)){a.fireEvent("saveScene");var u=d.parentNode;domUtils.remove(d),u&&c.setStart(u.rows[0].cells[0],0).setCursor(!1,!0),a.fireEvent("saveScene")}}if(46==s&&(l=J(a))){a.fireEvent("saveScene");for(var m,f=0;m=l.selectedTds[f++];)domUtils.fillNode(a.document,m);a.fireEvent("saveScene"),domUtils.preventDefault(n)}if(13==s){var h=a.selection.getRange(),d=domUtils.findParentByTagName(h.startContainer,"caption",!0);if(d){var u=domUtils.findParentByTagName(d,"table");return h.collapsed?d&&h.setStart(u.rows[0].cells[0],0).setCursor(!1,!0):(h.deleteContents(),a.fireEvent("saveScene")),void domUtils.preventDefault(n)}if(h.collapsed){var u=domUtils.findParentByTagName(h.startContainer,"table");if(u){var p=u.rows[0].cells[0],g=domUtils.findParentByTagName(a.selection.getStart(),["td","th"],!0),v=u.previousSibling;if(p===g&&(!v||1==v.nodeType&&"TABLE"==v.tagName)&&domUtils.isStartInblock(h)){var b=domUtils.findParent(a.selection.getStart(),function(e){return domUtils.isBlockElm(e)},!0);b&&(/t(h|d)/i.test(b.tagName)||b===g.firstChild)&&(a.execCommand("insertparagraphbeforetable"),domUtils.preventDefault(n))}}}}if((n.ctrlKey||n.metaKey)&&"67"==n.keyCode){e=null;var l=J(a);if(l){var y=l.selectedTds;i=l.isFullCol(),r=l.isFullRow(),e=[[l.cloneCell(y[0],null,!0)]];for(var m,f=1;m=y[f];f++)m.parentNode!==y[f-1].parentNode?e.push([l.cloneCell(m,null,!0)]):e[e.length-1].push(l.cloneCell(m,null,!0))}}}),H.addListener("tablehasdeleted",function(){m(this,!1,"",null),ot&&domUtils.remove(ot)}),H.addListener("beforepaste",function(n,a){var s=this,l=s.selection.getRange();if(domUtils.findParentByTagName(l.startContainer,"caption",!0)){var d=s.document.createElement("div");return d.innerHTML=a.html,void(a.html=d[browser.ie9below?"innerText":"textContent"])}var c=J(s);if(e){s.fireEvent("saveScene");var u,m,l=s.selection.getRange(),f=domUtils.findParentByTagName(l.startContainer,["td","th"],!0);if(f){var h=G(f);if(r){var p=h.getCellInfo(f).rowIndex;"TH"==f.tagName&&p++;for(var g,v=0;g=e[v++];){for(var b,y=h.insertRow(p++,"td"),C=0;b=g[C];C++){var N=y.cells[C];N||(N=y.insertCell(C)),N.innerHTML=b.innerHTML,b.getAttribute("width")&&N.setAttribute("width",b.getAttribute("width")),b.getAttribute("vAlign")&&N.setAttribute("vAlign",b.getAttribute("vAlign")),b.getAttribute("align")&&N.setAttribute("align",b.getAttribute("align")),b.style.cssText&&(N.style.cssText=b.style.cssText)}for(var b,C=0;(b=y.cells[C])&&g[C];C++)b.innerHTML=g[C].innerHTML,g[C].getAttribute("width")&&b.setAttribute("width",g[C].getAttribute("width")),g[C].getAttribute("vAlign")&&b.setAttribute("vAlign",g[C].getAttribute("vAlign")),g[C].getAttribute("align")&&b.setAttribute("align",g[C].getAttribute("align")),g[C].style.cssText&&(b.style.cssText=g[C].style.cssText)}}else{if(i){U=h.getCellInfo(f);for(var b,x=0,C=0,g=e[0];b=g[C++];)x+=b.colSpan||1;for(s.__hasEnterExecCommand=!0,v=0;x>v;v++)s.execCommand("insertcol");s.__hasEnterExecCommand=!1,f=h.table.rows[0].cells[U.cellIndex],"TH"==f.tagName&&(f=h.table.rows[1].cells[U.cellIndex])}for(var g,v=0;g=e[v++];){u=f;for(var b,C=0;b=g[C++];)if(f)f.innerHTML=b.innerHTML,b.getAttribute("width")&&f.setAttribute("width",b.getAttribute("width")),b.getAttribute("vAlign")&&f.setAttribute("vAlign",b.getAttribute("vAlign")),b.getAttribute("align")&&f.setAttribute("align",b.getAttribute("align")),b.style.cssText&&(f.style.cssText=b.style.cssText),m=f,f=f.nextSibling;else{var w=b.cloneNode(!0);domUtils.removeAttributes(w,["class","rowSpan","colSpan"]),m.parentNode.appendChild(w)}if(f=h.getNextCell(u,!0,!0),!e[v])break;if(!f){var U=h.getCellInfo(u);h.table.insertRow(h.table.rows.length),h.update(),f=h.getVSideCell(u,!0)}}}h.update()}else{c=s.document.createElement("table");for(var g,v=0;g=e[v++];){for(var b,y=c.insertRow(c.rows.length),C=0;b=g[C++];)w=K.cloneCell(b,null,!0),domUtils.removeAttributes(w,["class"]),y.appendChild(w);2==C&&w.rowSpan>1&&(w.rowSpan=1)}var E=Z(s),T=s.body.offsetWidth-(dt?2*parseInt(domUtils.getComputedStyle(s.body,"margin-left"),10):0)-2*E.tableBorder-(s.options.offsetWidth||0);s.execCommand("insertHTML","<table  "+(i&&r?'width="'+T+'"':"")+">"+c.innerHTML.replace(/>\s*</g,"><").replace(/\bth\b/gi,"td")+"</table>")}return s.fireEvent("contentchange"),s.fireEvent("saveScene"),a.html="",!0}var S,d=s.document.createElement("div");d.innerHTML=a.html,S=d.getElementsByTagName("table"),domUtils.findParentByTagName(s.selection.getStart(),"table")?(utils.each(S,function(e){domUtils.remove(e)}),domUtils.findParentByTagName(s.selection.getStart(),"caption",!0)&&(d.innerHTML=d[browser.ie?"innerText":"textContent"])):utils.each(S,function(e){t(e,!0),domUtils.removeAttributes(e,["style","border"]),utils.each(domUtils.getElementsByTagName(e,"td"),function(e){o(e)&&domUtils.fillNode(s.document,e),t(e,!0)})}),a.html=d.innerHTML}),H.addListener("afterpaste",function(){utils.each(domUtils.getElementsByTagName(H.body,"table"),function(e){if(e.offsetWidth>H.body.offsetWidth){var t=Z(H,e);e.style.width=H.body.offsetWidth-(dt?2*parseInt(domUtils.getComputedStyle(H.body,"margin-left"),10):0)-2*t.tableBorder-(H.options.offsetWidth||0)+"px"}})}),H.addListener("blur",function(){e=null});var l;H.addListener("keydown",function(){clearTimeout(l),l=setTimeout(function(){var e=H.selection.getRange(),t=domUtils.findParentByTagName(e.startContainer,["th","td"],!0);if(t){var i=t.parentNode.parentNode.parentNode;i.offsetWidth>i.getAttribute("width")&&(t.style.wordBreak="break-all")}},100)}),H.addListener("selectionchange",function(){m(H,!1,"",null)}),H.addListener("contentchange",function(){var e=this;if(L(e),!J(e)){var t=e.selection.getRange(),i=t.startContainer;i=domUtils.findParentByTagName(i,["td","th"],!0),utils.each(domUtils.getElementsByTagName(e.document,"table"),function(t){e.fireEvent("excludetable",t)!==!0&&(t.ueTable=new K(t),t.onmouseover=function(){e.fireEvent("tablemouseover",t)},t.onmousemove=function(){e.fireEvent("tablemousemove",t),e.options.tableDragable&&s(!0,this,e),utils.defer(function(){e.fireEvent("contentchange",50)},!0)},t.onmouseout=function(){e.fireEvent("tablemouseout",t),m(e,!1,"",null),L(e)},t.onclick=function(t){t=e.window.event||t;var i=n(t.target||t.srcElement);if(i){var o,r=G(i),a=r.table,s=r.getCellInfo(i),l=e.selection.getRange();if(d(a,i,t,!0)){var c=r.getCell(r.indexTable[r.rowsNum-1][s.colIndex].rowIndex,r.indexTable[r.rowsNum-1][s.colIndex].cellIndex);return void(t.shiftKey&&r.selectedTds.length?r.selectedTds[0]!==c?(o=r.getCellsRange(r.selectedTds[0],c),r.setSelected(o)):l&&l.selectNodeContents(c).select():i!==c?(o=r.getCellsRange(i,c),r.setSelected(o)):l&&l.selectNodeContents(c).select())}if(d(a,i,t)){var u=r.getCell(r.indexTable[s.rowIndex][r.colsNum-1].rowIndex,r.indexTable[s.rowIndex][r.colsNum-1].cellIndex);t.shiftKey&&r.selectedTds.length?r.selectedTds[0]!==u?(o=r.getCellsRange(r.selectedTds[0],u),r.setSelected(o)):l&&l.selectNodeContents(u).select():i!==u?(o=r.getCellsRange(i,u),r.setSelected(o)):l&&l.selectNodeContents(u).select()}}})}),O(e,!0)}}),domUtils.on(H.document,"mousemove",a),domUtils.on(H.document,"mouseout",function(e){var t=e.target||e.srcElement;"TABLE"==t.tagName&&m(H,!1,"",null)}),H.addListener("interlacetable",function(e,t,i){if(t)for(var n=this,o=t.rows,r=o.length,a=function(e,t,i){return e[t]?e[t]:i?e[t%e.length]:""},s=0;r>s;s++)o[s].className=a(i||n.options.classList,s,!0)}),H.addListener("uninterlacetable",function(e,t){if(t)for(var i=this,n=t.rows,o=i.options.classList,r=n.length,a=0;r>a;a++)domUtils.removeClasses(n[a],o)}),H.addListener("mousedown",h),H.addListener("mouseup",x),domUtils.on(H.body,"dragstart",function(e){x.call(H,"dragstart",e)}),H.addOutputRule(function(e){utils.each(e.getNodesByTagName("div"),function(e){"ue_tableDragLine"==e.getAttr("id")&&e.parentNode.removeChild(e)})});var c=0;H.addListener("mousedown",function(){c=0}),H.addListener("tabkeydown",function(){var e=this.selection.getRange(),t=e.getCommonAncestor(!0,!0),i=domUtils.findParentByTagName(t,"table");if(i){if(domUtils.findParentByTagName(t,"caption",!0)){var n=domUtils.getElementsByTagName(i,"th td");n&&n.length&&e.setStart(n[0],0).setCursor(!1,!0)}else{var n=domUtils.findParentByTagName(t,["td","th"],!0),r=G(n);c=n.rowSpan>1?c:r.getCellInfo(n).rowIndex;var a=r.getTabNextCell(n,c);a?o(a)?e.setStart(a,0).setCursor(!1,!0):e.selectNodeContents(a).select():(H.fireEvent("saveScene"),H.__hasEnterExecCommand=!0,this.execCommand("insertrownext"),H.__hasEnterExecCommand=!1,e=this.selection.getRange(),e.setStart(i.rows[i.rows.length-1].cells[0],0).setCursor(),H.fireEvent("saveScene"))}return!0}}),browser.ie&&H.addListener("selectionchange",function(){m(this,!1,"",null)}),H.addListener("keydown",function(e,t){var i=this,n=t.keyCode||t.which;if(8!=n&&46!=n){var o=!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey);o&&Q(domUtils.getElementsByTagName(i.body,"td"));var r=J(i);r&&o&&r.clearSelected()}}),H.addListener("beforegetcontent",function(){O(this,!1),browser.ie&&utils.each(this.document.getElementsByTagName("caption"),function(e){domUtils.isEmptyNode(e)&&(e.innerHTML="&nbsp;")})}),H.addListener("aftergetcontent",function(){O(this,!0)}),H.addListener("getAllHtml",function(){Q(H.document.getElementsByTagName("td"))}),H.addListener("fullscreenchanged",function(e,t){if(!t){var i=this.body.offsetWidth/document.body.offsetWidth,n=domUtils.getElementsByTagName(this.body,"table");utils.each(n,function(e){if(e.offsetWidth<H.body.offsetWidth)return!1;var t=domUtils.getElementsByTagName(e,"td"),n=[];utils.each(t,function(e){n.push(e.offsetWidth)});for(var o,r=0;o=t[r];r++)o.setAttribute("width",Math.floor(n[r]*i));e.setAttribute("width",Math.floor(P(H,dt,Z(H))))})}});var u=H.execCommand;H.execCommand=function(e){var t=this;e=e.toLowerCase();var i,n,r=J(t),a=new dom.Range(t.document),s=t.commands[e]||UE.commands[e];if(s){if(!r||ct[e]||s.notNeedUndo||t.__hasEnterExecCommand)n=u.apply(t,arguments);else{t.__hasEnterExecCommand=!0,t.fireEvent("beforeexeccommand",e),i=r.selectedTds;for(var l,d,c,m=-2,f=-2,h=0;c=i[h];h++)o(c)?a.setStart(c,0).setCursor(!1,!0):a.selectNode(c).select(!0),d=t.queryCommandState(e),l=t.queryCommandValue(e),-1!=d&&((m!==d||f!==l)&&(t._ignoreContentChange=!0,n=u.apply(t,arguments),t._ignoreContentChange=!1),m=t.queryCommandState(e),f=t.queryCommandValue(e),domUtils.isEmptyBlock(c)&&domUtils.fillNode(t.document,c));a.setStart(i[0],0).shrinkBoundary(!0).setCursor(!1,!0),t.fireEvent("contentchange"),t.fireEvent("afterexeccommand",e),t.__hasEnterExecCommand=!1,t._selectionChange()}return n}}});var mt},UE.UETable.prototype.sortTable=function(e,t){var i=this.table,n=i.rows,o=[],r="TH"===n[0].cells[0].tagName,a=0;if(this.selectedTds.length){for(var s=this.cellsRange,l=s.endRowIndex+1,d=s.beginRowIndex;l>d;d++)o[d]=n[d];o.splice(0,s.beginRowIndex),a=s.endRowIndex+1===this.rowsNum?0:s.endRowIndex+1}else for(var d=0,l=n.length;l>d;d++)o[d]=n[d];var c={reversecurrent:function(){return 1},orderbyasc:function(e,t){var i=e.innerText||e.textContent,n=t.innerText||t.textContent;return i.localeCompare(n)},reversebyasc:function(e,t){var i=e.innerHTML,n=t.innerHTML;return n.localeCompare(i)},orderbynum:function(e,t){var i=e[browser.ie?"innerText":"textContent"].match(/\d+/),n=t[browser.ie?"innerText":"textContent"].match(/\d+/);return i&&(i=+i[0]),n&&(n=+n[0]),(i||0)-(n||0)},reversebynum:function(e,t){var i=e[browser.ie?"innerText":"textContent"].match(/\d+/),n=t[browser.ie?"innerText":"textContent"].match(/\d+/);return i&&(i=+i[0]),n&&(n=+n[0]),(n||0)-(i||0)}};i.setAttribute("data-sort-type",t&&"string"==typeof t&&c[t]?t:""),r&&o.splice(0,1),o=utils.sort(o,function(i,n){var o;return o=t&&"function"==typeof t?t.call(this,i.cells[e],n.cells[e]):t&&"number"==typeof t?1:t&&"string"==typeof t&&c[t]?c[t].call(this,i.cells[e],n.cells[e]):c.orderbyasc.call(this,i.cells[e],n.cells[e])});for(var u=i.ownerDocument.createDocumentFragment(),m=0,l=o.length;l>m;m++)u.appendChild(o[m]);var f=i.getElementsByTagName("tbody")[0];a?f.insertBefore(u,n[a-s.endRowIndex+s.beginRowIndex-1]):f.appendChild(u)},UE.plugins.tablesort=function(){var e=this,t=UE.UETable,i=function(e){return t.getUETable(e)
},n=function(e){return t.getTableItemsByRange(e)};e.ready(function(){utils.cssRule("tablesort","table.sortEnabled tr.firstRow th,table.sortEnabled tr.firstRow td{padding-right:20px;background-repeat: no-repeat;background-position: center right;   background-image:url("+e.options.themePath+e.options.theme+"/images/sortable.png);}",e.document),e.addListener("afterexeccommand",function(e,t){("mergeright"==t||"mergedown"==t||"mergecells"==t)&&this.execCommand("disablesort")})}),UE.commands.sorttable={queryCommandState:function(){var e=this,t=n(e);if(!t.cell)return-1;for(var i,o=t.table,r=o.getElementsByTagName("td"),a=0;i=r[a++];)if(1!=i.rowSpan||1!=i.colSpan)return-1;return 0},execCommand:function(e,t){var o=this,r=o.selection.getRange(),a=r.createBookmark(!0),s=n(o),l=s.cell,d=i(s.table),c=d.getCellInfo(l);d.sortTable(c.cellIndex,t),r.moveToBookmark(a);try{r.select()}catch(u){}}},UE.commands.enablesort=UE.commands.disablesort={queryCommandState:function(e){var t=n(this).table;if(t&&"enablesort"==e)for(var i=domUtils.getElementsByTagName(t,"th td"),o=0;o<i.length;o++)if(i[o].getAttribute("colspan")>1||i[o].getAttribute("rowspan")>1)return-1;return t?"enablesort"==e^"sortEnabled"!=t.getAttribute("data-sort")?-1:0:-1},execCommand:function(e){var t=n(this).table;t.setAttribute("data-sort","enablesort"==e?"sortEnabled":"sortDisabled"),"enablesort"==e?domUtils.addClass(t,"sortEnabled"):domUtils.removeClasses(t,"sortEnabled")}}},UE.plugins.contextmenu=function(){var e=this;if(e.setOpt("enableContextMenu",!0),e.getOpt("enableContextMenu")!==!1){var t,i=e.getLang("contextMenu"),n=e.options.contextMenu||[{label:i.selectall,cmdName:"selectall"},{label:i.cleardoc,cmdName:"cleardoc",exec:function(){confirm(i.confirmclear,function(){this.execCommand("cleardoc")})}},"-",{label:i.unlink,cmdName:"unlink"},"-",{group:i.paragraph,icon:"justifyjustify",subMenu:[{label:i.justifyleft,cmdName:"justify",value:"left"},{label:i.justifyright,cmdName:"justify",value:"right"},{label:i.justifycenter,cmdName:"justify",value:"center"},{label:i.justifyjustify,cmdName:"justify",value:"justify"}]},"-",{group:i.table,icon:"table",subMenu:[{label:i.inserttable,cmdName:"inserttable"},{label:i.deletetable,cmdName:"deletetable"},"-",{label:i.deleterow,cmdName:"deleterow"},{label:i.deletecol,cmdName:"deletecol"},{label:i.insertcol,cmdName:"insertcol"},{label:i.insertcolnext,cmdName:"insertcolnext"},{label:i.insertrow,cmdName:"insertrow"},{label:i.insertrownext,cmdName:"insertrownext"},"-",{label:i.insertcaption,cmdName:"insertcaption"},{label:i.deletecaption,cmdName:"deletecaption"},{label:i.inserttitle,cmdName:"inserttitle"},{label:i.deletetitle,cmdName:"deletetitle"},{label:i.inserttitlecol,cmdName:"inserttitlecol"},{label:i.deletetitlecol,cmdName:"deletetitlecol"},"-",{label:i.mergecells,cmdName:"mergecells"},{label:i.mergeright,cmdName:"mergeright"},{label:i.mergedown,cmdName:"mergedown"},"-",{label:i.splittorows,cmdName:"splittorows"},{label:i.splittocols,cmdName:"splittocols"},{label:i.splittocells,cmdName:"splittocells"},"-",{label:i.averageDiseRow,cmdName:"averagedistributerow"},{label:i.averageDisCol,cmdName:"averagedistributecol"},"-",{label:i.edittd,cmdName:"edittd",exec:function(){UE.ui.edittd&&new UE.ui.edittd(this),this.getDialog("edittd").open()}},{label:i.edittable,cmdName:"edittable",exec:function(){UE.ui.edittable&&new UE.ui.edittable(this),this.getDialog("edittable").open()}},{label:i.setbordervisible,cmdName:"setbordervisible"}]},{group:i.tablesort,icon:"tablesort",subMenu:[{label:i.enablesort,cmdName:"enablesort"},{label:i.disablesort,cmdName:"disablesort"},"-",{label:i.reversecurrent,cmdName:"sorttable",value:"reversecurrent"},{label:i.orderbyasc,cmdName:"sorttable",value:"orderbyasc"},{label:i.reversebyasc,cmdName:"sorttable",value:"reversebyasc"},{label:i.orderbynum,cmdName:"sorttable",value:"orderbynum"},{label:i.reversebynum,cmdName:"sorttable",value:"reversebynum"}]},{group:i.borderbk,icon:"borderBack",subMenu:[{label:i.setcolor,cmdName:"interlacetable",exec:function(){this.execCommand("interlacetable")}},{label:i.unsetcolor,cmdName:"uninterlacetable",exec:function(){this.execCommand("uninterlacetable")}},{label:i.setbackground,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#bbb","#ccc"]})}},{label:i.unsetbackground,cmdName:"cleartablebackground",exec:function(){this.execCommand("cleartablebackground")}},{label:i.redandblue,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["red","blue"]})}},{label:i.threecolorgradient,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#aaa","#bbb","#ccc"]})}}]},{group:i.aligntd,icon:"aligntd",subMenu:[{cmdName:"cellalignment",value:{align:"left",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"bottom"}}]},{group:i.aligntable,icon:"aligntable",subMenu:[{cmdName:"tablealignment",className:"left",label:i.tableleft,value:"left"},{cmdName:"tablealignment",className:"center",label:i.tablecenter,value:"center"},{cmdName:"tablealignment",className:"right",label:i.tableright,value:"right"}]},"-",{label:i.insertparagraphbefore,cmdName:"insertparagraph",value:!0},{label:i.insertparagraphafter,cmdName:"insertparagraph"},{label:i.copy,cmdName:"copy"},{label:i.paste,cmdName:"paste"}];if(n.length){var o=UE.ui.uiUtils;e.addListener("contextmenu",function(r,a){var s=o.getViewportOffsetByEvent(a);e.fireEvent("beforeselectionchange"),t&&t.destroy();for(var l,d=0,c=[];l=n[d];d++){var u;!function(t){function n(){switch(t.icon){case"table":return e.getLang("contextMenu.table");case"justifyjustify":return e.getLang("contextMenu.paragraph");case"aligntd":return e.getLang("contextMenu.aligntd");case"aligntable":return e.getLang("contextMenu.aligntable");case"tablesort":return i.tablesort;case"borderBack":return i.borderbk;default:return""}}if("-"==t)(u=c[c.length-1])&&"-"!==u&&c.push("-");else if(t.hasOwnProperty("group")){for(var o,r=0,a=[];o=t.subMenu[r];r++)!function(t){"-"==t?(u=a[a.length-1])&&"-"!==u?a.push("-"):a.splice(a.length-1):(e.commands[t.cmdName]||UE.commands[t.cmdName]||t.query)&&(t.query?t.query():e.queryCommandState(t.cmdName))>-1&&a.push({label:t.label||e.getLang("contextMenu."+t.cmdName+(t.value||""))||"",className:"edui-for-"+t.cmdName+(t.className?" edui-for-"+t.cmdName+"-"+t.className:""),onclick:t.exec?function(){t.exec.call(e)}:function(){e.execCommand(t.cmdName,t.value)}})}(o);a.length&&c.push({label:n(),className:"edui-for-"+t.icon,subMenu:{items:a,editor:e}})}else(e.commands[t.cmdName]||UE.commands[t.cmdName]||t.query)&&(t.query?t.query.call(e):e.queryCommandState(t.cmdName))>-1&&c.push({label:t.label||e.getLang("contextMenu."+t.cmdName),className:"edui-for-"+(t.icon?t.icon:t.cmdName+(t.value||"")),onclick:t.exec?function(){t.exec.call(e)}:function(){e.execCommand(t.cmdName,t.value)}})}(l)}if("-"==c[c.length-1]&&c.pop(),t=new UE.ui.Menu({items:c,className:"edui-contextmenu",editor:e}),t.render(),t.showAt(s),e.fireEvent("aftershowcontextmenu",t),domUtils.preventDefault(a),browser.ie){var m;try{m=e.selection.getNative().createRange()}catch(f){return}if(m.item){var h=new dom.Range(e.document);h.selectNode(m.item(0)).select(!0,!0)}}}),e.addListener("aftershowcontextmenu",function(t,i){if(e.zeroclipboard){var n=i.items;for(var o in n)"edui-for-copy"==n[o].className&&e.zeroclipboard.clip(n[o].getDom())}})}}},UE.plugins.shortcutmenu=function(){var e,t=this,i=t.options.shortcutMenu||[];i.length&&(t.addListener("contextmenu mouseup",function(t,n){var o=this,r={type:t,target:n.target||n.srcElement,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY};if(setTimeout(function(){var n=o.selection.getRange();(n.collapsed===!1||"contextmenu"==t)&&(e||(e=new baidu.editor.ui.ShortCutMenu({editor:o,items:i,theme:o.options.theme,className:"edui-shortcutmenu"}),e.render(),o.fireEvent("afterrendershortcutmenu",e)),e.show(r,!!UE.plugins.contextmenu))}),"contextmenu"==t&&(domUtils.preventDefault(n),browser.ie9below)){var a;try{a=o.selection.getNative().createRange()}catch(n){return}if(a.item){var s=new dom.Range(o.document);s.selectNode(a.item(0)).select(!0,!0)}}}),t.addListener("keydown",function(t){"keydown"==t&&e&&!e.isHidden&&e.hide()}))},UE.plugins.basestyle=function(){var e={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},t=function(e,t){return domUtils.filterNodeList(e.selection.getStartElementPath(),t)},i=this;i.addshortcutkey({Bold:"ctrl+66",Italic:"ctrl+73",Underline:"ctrl+85"}),i.addInputRule(function(e){utils.each(e.getNodesByTagName("b i"),function(e){switch(e.tagName){case"b":e.tagName="strong";break;case"i":e.tagName="em"}})});for(var n in e)!function(e,n){i.commands[e]={execCommand:function(e){var o=i.selection.getRange(),r=t(this,n);if(o.collapsed){if(r){var a=i.document.createTextNode("");o.insertNode(a).removeInlineStyle(n),o.setStartBefore(a),domUtils.remove(a)}else{var s=o.document.createElement(n[0]);("superscript"==e||"subscript"==e)&&(a=i.document.createTextNode(""),o.insertNode(a).removeInlineStyle(["sub","sup"]).setStartBefore(a).collapse(!0)),o.insertNode(s).setStart(s,0)}o.collapse(!0)}else("superscript"==e||"subscript"==e)&&(r&&r.tagName.toLowerCase()==e||o.removeInlineStyle(["sub","sup"])),r?o.removeInlineStyle(n):o.applyInlineStyle(n[0]);o.select()},queryCommandState:function(){return t(this,n)?1:0}}}(n,e[n])},UE.plugins.elementpath=function(){var e,t,i=this;i.setOpt("elementPathEnabled",!0),i.options.elementPathEnabled&&(i.commands.elementpath={execCommand:function(n,o){var r=t[o],a=i.selection.getRange();e=1*o,a.selectNode(r).select()},queryCommandValue:function(){var i=[].concat(this.selection.getStartElementPath()).reverse(),n=[];t=i;for(var o,r=0;o=i[r];r++)if(3!=o.nodeType){var a=o.tagName.toLowerCase();if("img"==a&&o.getAttribute("anchorname")&&(a="anchor"),n[r]=a,e==r){e=-1;break}}return n}})},UE.plugins.formatmatch=function(){function e(r,a){function s(e){return m&&e.selectNode(m),e.applyInlineStyle(n[n.length-1].tagName,null,n)}if(browser.webkit)var l="IMG"==a.target.tagName?a.target:null;i.undoManger&&i.undoManger.save();var d=i.selection.getRange(),c=l||d.getClosedNode();if(t&&c&&"IMG"==c.tagName)c.style.cssText+=";float:"+(t.style.cssFloat||t.style.styleFloat||"none")+";display:"+(t.style.display||"inline"),t=null;else if(!t){var u=d.collapsed;if(u){var m=i.document.createTextNode("match");d.insertNode(m).select()}i.__hasEnterExecCommand=!0;var f=i.options.removeFormatAttributes;i.options.removeFormatAttributes="",i.execCommand("removeformat"),i.options.removeFormatAttributes=f,i.__hasEnterExecCommand=!1,d=i.selection.getRange(),n.length&&s(d),m&&d.setStartBefore(m).collapse(!0),d.select(),m&&domUtils.remove(m)}i.undoManger&&i.undoManger.save(),i.removeListener("mouseup",e),o=0}var t,i=this,n=[],o=0;i.addListener("reset",function(){n=[],o=0}),i.commands.formatmatch={execCommand:function(){if(o)return o=0,n=[],void i.removeListener("mouseup",e);var r=i.selection.getRange();if(t=r.getClosedNode(),!t||"IMG"!=t.tagName){r.collapse(!0).shrinkBoundary();var a=r.startContainer;n=domUtils.findParents(a,!0,function(e){return!domUtils.isBlockElm(e)&&1==e.nodeType});for(var s,l=0;s=n[l];l++)if("A"==s.tagName){n.splice(l,1);break}}i.addListener("mouseup",e),o=1},queryCommandState:function(){return o},notNeedUndo:1}},UE.plugin.register("searchreplace",function(){function e(e,t,i){var n=t.searchStr;-1==t.dir&&(e=e.split("").reverse().join(""),n=n.split("").reverse().join(""),i=e.length-i);for(var o,r=new RegExp(n,"g"+(t.casesensitive?"":"i"));o=r.exec(e);)if(o.index>=i)return-1==t.dir?e.length-o.index-t.searchStr.length:o.index;return-1}function t(t,i,n){var o,r,s=n.all||1==n.dir?"getNextDomNode":"getPreDomNode";domUtils.isBody(t)&&(t=t.firstChild);for(var l=1;t;){if(o=3==t.nodeType?t.nodeValue:t[browser.ie?"innerText":"textContent"],r=e(o,n,i),l=0,-1!=r)return{node:t,index:r};for(t=domUtils[s](t);t&&a[t.nodeName.toLowerCase()];)t=domUtils[s](t,!0);t&&(i=-1==n.dir?(3==t.nodeType?t.nodeValue:t[browser.ie?"innerText":"textContent"]).length:0)}}function i(e,t,n){for(var o,r=0,a=e.firstChild,s=0;a;){if(3==a.nodeType){if(s=a.nodeValue.replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length,r+=s,r>=t)return{node:a,index:s-(r-t)}}else if(!dtd.$empty[a.tagName]&&(s=a[browser.ie?"innerText":"textContent"].replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length,r+=s,r>=t&&(o=i(a,s-(r-t),n))))return o;a=domUtils.getNextDomNode(a)}}function n(e,n){var r,a=e.selection.getRange(),s=n.searchStr,l=e.document.createElement("span");if(l.innerHTML="$$ueditor_searchreplace_key$$",a.shrinkBoundary(!0),!a.collapsed){a.select();var d=e.selection.getText();if(new RegExp("^"+n.searchStr+"$",n.casesensitive?"":"i").test(d)){if(void 0!=n.replaceStr)return o(a,n.replaceStr),a.select(),!0;a.collapse(-1==n.dir)}}a.insertNode(l),a.enlargeToBlockElm(!0),r=a.startContainer;var c=r[browser.ie?"innerText":"textContent"].indexOf("$$ueditor_searchreplace_key$$");a.setStartBefore(l),domUtils.remove(l);var u=t(r,c,n);if(u){var m=i(u.node,u.index,s),f=i(u.node,u.index+s.length,s);return a.setStart(m.node,m.index).setEnd(f.node,f.index),void 0!==n.replaceStr&&o(a,n.replaceStr),a.select(),!0}a.setCursor()}function o(e,t){t=r.document.createTextNode(t),e.deleteContents().insertNode(t)}var r=this,a={table:1,tbody:1,tr:1,ol:1,ul:1};return{commands:{searchreplace:{execCommand:function(e,t){utils.extend(t,{all:!1,casesensitive:!1,dir:1},!0);var i=0;if(t.all){var o=r.selection.getRange(),a=r.body.firstChild;for(a&&1==a.nodeType?(o.setStart(a,0),o.shrinkBoundary(!0)):3==a.nodeType&&o.setStartBefore(a),o.collapse(!0).select(!0),void 0!==t.replaceStr&&r.fireEvent("saveScene");n(this,t);)i++;i&&r.fireEvent("saveScene")}else void 0!==t.replaceStr&&r.fireEvent("saveScene"),n(this,t)&&i++,i&&r.fireEvent("saveScene");return i},notNeedUndo:1}}}}),UE.plugins.customstyle=function(){var e=this;e.setOpt({customstyle:[{tag:"h1",name:"tc",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"},{tag:"h1",name:"tl",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;"},{tag:"span",name:"im",style:"font-size:16px;font-style:italic;font-weight:bold;line-height:18px;"},{tag:"span",name:"hi",style:"font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;"}]}),e.commands.customstyle={execCommand:function(e,t){var i,n,o=this,r=t.tag,a=domUtils.findParent(o.selection.getStart(),function(e){return e.getAttribute("label")},!0),s={};for(var l in t)void 0!==t[l]&&(s[l]=t[l]);if(delete s.tag,a&&a.getAttribute("label")==t.label){if(i=this.selection.getRange(),n=i.createBookmark(),i.collapsed)if(dtd.$block[a.tagName]){var d=o.document.createElement("p");domUtils.moveChild(a,d),a.parentNode.insertBefore(d,a),domUtils.remove(a)}else domUtils.remove(a,!0);else{var c=domUtils.getCommonAncestor(n.start,n.end),u=domUtils.getElementsByTagName(c,r);new RegExp(r,"i").test(c.tagName)&&u.push(c);for(var m,f=0;m=u[f++];)if(m.getAttribute("label")==t.label){var h=domUtils.getPosition(m,n.start),p=domUtils.getPosition(m,n.end);if((h&domUtils.POSITION_FOLLOWING||h&domUtils.POSITION_CONTAINS)&&(p&domUtils.POSITION_PRECEDING||p&domUtils.POSITION_CONTAINS)&&dtd.$block[r]){var d=o.document.createElement("p");domUtils.moveChild(m,d),m.parentNode.insertBefore(d,m)}domUtils.remove(m,!0)}a=domUtils.findParent(c,function(e){return e.getAttribute("label")==t.label},!0),a&&domUtils.remove(a,!0)}i.moveToBookmark(n).select()}else if(dtd.$block[r]){if(this.execCommand("paragraph",r,s,"customstyle"),i=o.selection.getRange(),!i.collapsed){i.collapse(),a=domUtils.findParent(o.selection.getStart(),function(e){return e.getAttribute("label")==t.label},!0);var g=o.document.createElement("p");domUtils.insertAfter(a,g),domUtils.fillNode(o.document,g),i.setStart(g,0).setCursor()}}else{if(i=o.selection.getRange(),i.collapsed)return a=o.document.createElement(r),domUtils.setAttributes(a,s),void i.insertNode(a).setStart(a,0).setCursor();n=i.createBookmark(),i.applyInlineStyle(r,s).moveToBookmark(n).select()}},queryCommandValue:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),function(e){return e.getAttribute("label")});return e?e.getAttribute("label"):""}},e.addListener("keyup",function(t,i){var n=i.keyCode||i.which;if(32==n||13==n){var o=e.selection.getRange();if(o.collapsed){var r=domUtils.findParent(e.selection.getStart(),function(e){return e.getAttribute("label")},!0);if(r&&dtd.$block[r.tagName]&&domUtils.isEmptyNode(r)){var a=e.document.createElement("p");domUtils.insertAfter(r,a),domUtils.fillNode(e.document,a),domUtils.remove(r),o.setStart(a,0).setCursor()}}}})},UE.plugins.catchremoteimage=function(){var me=this,ajax=UE.ajax;me.options.catchRemoteImageEnable!==!1&&(me.setOpt({catchRemoteImageEnable:!1}),me.addListener("afterpaste",function(){me.fireEvent("catchRemoteImage")}),me.addListener("catchRemoteImage",function(){function catchremoteimage(e,t){var i=utils.serializeParam(me.queryCommandValue("serverparam"))||"",n=utils.formatUrl(catcherActionUrl+(-1==catcherActionUrl.indexOf("?")?"?":"&")+i),o=utils.isCrossDomainUrl(n),r={method:"POST",dataType:o?"jsonp":"",timeout:6e4,onsuccess:t.success,onerror:t.error};r[catcherFieldName]=e,ajax.request(n,r)}for(var catcherLocalDomain=me.getOpt("catcherLocalDomain"),catcherActionUrl=me.getActionUrl(me.getOpt("catcherActionName")),catcherUrlPrefix=me.getOpt("catcherUrlPrefix"),catcherFieldName=me.getOpt("catcherFieldName"),remoteImages=[],imgs=domUtils.getElementsByTagName(me.document,"img"),test=function(e,t){if(-1!=e.indexOf(location.host)||/(^\.)|(^\/)/.test(e))return!0;if(t)for(var i,n=0;i=t[n++];)if(-1!==e.indexOf(i))return!0;return!1},i=0,ci;ci=imgs[i++];)if(!ci.getAttribute("word_img")){var src=ci.getAttribute("_src")||ci.src||"";/^(https?|ftp):/i.test(src)&&!test(src,catcherLocalDomain)&&remoteImages.push(src)}remoteImages.length&&catchremoteimage(remoteImages,{success:function(r){try{var info=void 0!==r.state?r:eval("("+r.responseText+")")}catch(e){return}var i,j,ci,cj,oldSrc,newSrc,list=info.list;for(i=0;ci=imgs[i++];)for(oldSrc=ci.getAttribute("_src")||ci.src||"",j=0;cj=list[j++];)if(oldSrc==cj.source&&"SUCCESS"==cj.state){newSrc=catcherUrlPrefix+cj.url,domUtils.setAttributes(ci,{src:newSrc,_src:newSrc});break}me.fireEvent("catchremotesuccess")},error:function(){me.fireEvent("catchremoteerror")}})}))},UE.plugin.register("snapscreen",function(){function getLocation(e){var t,i=document.createElement("a"),n=utils.serializeParam(me.queryCommandValue("serverparam"))||"";return i.href=e,browser.ie&&(i.href=i.href),t=i.search,n&&(t=t+(-1==t.indexOf("?")?"?":"&")+n,t=t.replace(/[&]+/gi,"&")),{port:i.port,hostname:i.hostname,path:i.pathname+t||+i.hash}}var me=this,snapplugin;return{commands:{snapscreen:{execCommand:function(cmd){function onSuccess(rs){try{if(rs=eval("("+rs+")"),"SUCCESS"==rs.state){var opt=me.options;me.execCommand("insertimage",{src:opt.snapscreenUrlPrefix+rs.url,_src:opt.snapscreenUrlPrefix+rs.url,alt:rs.title||"",floatStyle:opt.snapscreenImgAlign})}else alert(rs.state)}catch(e){alert(lang.callBackErrorMsg)}}var url,local,res,lang=me.getLang("snapScreen_plugin");if(!snapplugin){var container=me.container,doc=me.container.ownerDocument||me.container.document;snapplugin=doc.createElement("object");try{snapplugin.type="application/x-pluginbaidusnap"}catch(e){return}snapplugin.style.cssText="position:absolute;left:-9999px;width:0;height:0;",snapplugin.setAttribute("width","0"),snapplugin.setAttribute("height","0"),container.appendChild(snapplugin)}url=me.getActionUrl(me.getOpt("snapscreenActionName")),local=getLocation(url),setTimeout(function(){try{res=snapplugin.saveSnapshot(local.hostname,local.path,local.port)}catch(e){return void me.ui._dialogs.snapscreenDialog.open()}onSuccess(res)},50)},queryCommandState:function(){return-1!=navigator.userAgent.indexOf("Windows",0)?0:-1}}}}}),UE.commands.insertparagraph={execCommand:function(e,t){for(var i,n=this,o=n.selection.getRange(),r=o.startContainer;r&&!domUtils.isBody(r);)i=r,r=r.parentNode;if(i){var a=n.document.createElement("p");t?i.parentNode.insertBefore(a,i):i.parentNode.insertBefore(a,i.nextSibling),domUtils.fillNode(n.document,a),o.setStart(a,0).setCursor(!1,!0)}}},UE.plugin.register("webapp",function(){function e(e,i){return i?'<iframe class="edui-faked-webapp" title="'+e.title+'" '+(e.align&&!e.cssfloat?'align="'+e.align+'"':"")+(e.cssfloat?'style="float:'+e.cssfloat+'"':"")+'width="'+e.width+'" height="'+e.height+'"  scrolling="no" frameborder="0" src="'+e.url+'" logo_url = "'+e.logo+'"></iframe>':'<img title="'+e.title+'" width="'+e.width+'" height="'+e.height+'" src="'+t.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" _logo_url="'+e.logo+'" style="background:url('+e.logo+') no-repeat center center; border:1px solid gray;" class="edui-faked-webapp" _url="'+e.url+'" '+(e.align&&!e.cssfloat?'align="'+e.align+'"':"")+(e.cssfloat?'style="float:'+e.cssfloat+'"':"")+"/>"}var t=this;return{outputRule:function(t){utils.each(t.getNodesByTagName("img"),function(t){var i;if("edui-faked-webapp"==t.getAttr("class")){i=e({title:t.getAttr("title"),width:t.getAttr("width"),height:t.getAttr("height"),align:t.getAttr("align"),cssfloat:t.getStyle("float"),url:t.getAttr("_url"),logo:t.getAttr("_logo_url")},!0);var n=UE.uNode.createElement(i);t.parentNode.replaceChild(n,t)}})},inputRule:function(t){utils.each(t.getNodesByTagName("iframe"),function(t){if("edui-faked-webapp"==t.getAttr("class")){var i=UE.uNode.createElement(e({title:t.getAttr("title"),width:t.getAttr("width"),height:t.getAttr("height"),align:t.getAttr("align"),cssfloat:t.getStyle("float"),url:t.getAttr("src"),logo:t.getAttr("logo_url")}));t.parentNode.replaceChild(i,t)}})},commands:{webapp:{execCommand:function(t,i){var n=this,o=e(utils.extend(i,{align:"none"}),!1);n.execCommand("inserthtml",o)},queryCommandState:function(){var e=this,t=e.selection.getRange().getClosedNode(),i=t&&"edui-faked-webapp"==t.className;return i?1:0}}}}}),UE.plugins.template=function(){UE.commands.template={execCommand:function(e,t){t.html&&this.execCommand("inserthtml",t.html)}},this.addListener("click",function(e,t){var i=t.target||t.srcElement,n=this.selection.getRange(),o=domUtils.findParent(i,function(e){return e.className&&domUtils.hasClass(e,"ue_t")?e:void 0},!0);o&&n.selectNode(o).shrinkBoundary().select()}),this.addListener("keydown",function(e,t){var i=this.selection.getRange();if(!i.collapsed&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var n=domUtils.findParent(i.startContainer,function(e){return e.className&&domUtils.hasClass(e,"ue_t")?e:void 0},!0);n&&domUtils.removeClasses(n,["ue_t"])}})},UE.plugin.register("music",function(){function e(e,i,n,o,r,a){return a?'<embed type="application/x-shockwave-flash" class="edui-faked-music" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+e+'" width="'+i+'" height="'+n+'" '+(o&&!r?'align="'+o+'"':"")+(r?'style="float:'+r+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >':"<img "+(o&&!r?'align="'+o+'"':"")+(r?'style="float:'+r+'"':"")+' width="'+i+'" height="'+n+'" _url="'+e+'" class="edui-faked-music" src="'+t.options.langPath+t.options.lang+'/images/music.png" />'}var t=this;return{outputRule:function(t){utils.each(t.getNodesByTagName("img"),function(t){var i;if("edui-faked-music"==t.getAttr("class")){var n=t.getStyle("float"),o=t.getAttr("align");i=e(t.getAttr("_url"),t.getAttr("width"),t.getAttr("height"),o,n,!0);var r=UE.uNode.createElement(i);t.parentNode.replaceChild(r,t)}})},inputRule:function(t){utils.each(t.getNodesByTagName("embed"),function(t){if("edui-faked-music"==t.getAttr("class")){var i=t.getStyle("float"),n=t.getAttr("align");html=e(t.getAttr("src"),t.getAttr("width"),t.getAttr("height"),n,i,!1);var o=UE.uNode.createElement(html);t.parentNode.replaceChild(o,t)}})},commands:{music:{execCommand:function(t,i){var n=this,o=e(i.url,i.width||400,i.height||95,"none",!1);n.execCommand("inserthtml",o)},queryCommandState:function(){var e=this,t=e.selection.getRange().getClosedNode(),i=t&&"edui-faked-music"==t.className;return i?1:0}}}}}),UE.plugin.register("autoupload",function(){function e(e,t){var i,n,o,r,a,s,l,d,c=t,u=/image\/\w+/i.test(e.type)?"image":"file",m="loading_"+(+new Date).toString(36);if(i=c.getOpt(u+"FieldName"),n=c.getOpt(u+"UrlPrefix"),o=c.getOpt(u+"MaxSize"),r=c.getOpt(u+"AllowFiles"),a=c.getActionUrl(c.getOpt(u+"ActionName")),l=function(e){var t=c.document.getElementById(m);t&&domUtils.remove(t),c.fireEvent("showmessage",{id:m,content:e,type:"error",timeout:4e3})},"image"==u?(s='<img class="loadingclass" id="'+m+'" src="'+c.options.themePath+c.options.theme+'/images/spacer.gif" title="'+(c.getLang("autoupload.loading")||"")+'" >',d=function(e){var t=n+e.url,i=c.document.getElementById(m);i&&(i.setAttribute("src",t),i.setAttribute("_src",t),i.setAttribute("title",e.title||""),i.setAttribute("alt",e.original||""),i.removeAttribute("id"),domUtils.removeClasses(i,"loadingclass"))}):(s='<p><img class="loadingclass" id="'+m+'" src="'+c.options.themePath+c.options.theme+'/images/spacer.gif" title="'+(c.getLang("autoupload.loading")||"")+'" ></p>',d=function(e){var t=n+e.url,i=c.document.getElementById(m),o=c.selection.getRange(),r=o.createBookmark();o.selectNode(i).select(),c.execCommand("insertfile",{url:t}),o.moveToBookmark(r).select()}),c.execCommand("inserthtml",s),!c.getOpt(u+"ActionName"))return void l(c.getLang("autoupload.errorLoadConfig"));if(e.size>o)return void l(c.getLang("autoupload.exceedSizeError"));var f=e.name?e.name.substr(e.name.lastIndexOf(".")):"";if(f&&"image"!=u||r&&-1==(r.join("")+".").indexOf(f.toLowerCase()+"."))return void l(c.getLang("autoupload.exceedTypeError"));var h=new XMLHttpRequest,p=new FormData,g=utils.serializeParam(c.queryCommandValue("serverparam"))||"",v=utils.formatUrl(a+(-1==a.indexOf("?")?"?":"&")+g);p.append(i,e,e.name||"blob."+e.type.substr("image/".length)),p.append("type","ajax"),h.open("post",v,!0),h.setRequestHeader("X-Requested-With","XMLHttpRequest"),h.addEventListener("load",function(e){try{var t=new Function("return "+utils.trim(e.target.response))();"SUCCESS"==t.state&&t.url?d(t):l(t.state)}catch(i){l(c.getLang("autoupload.loadError"))}}),h.send(p)}function t(e){return e.clipboardData&&e.clipboardData.items&&1==e.clipboardData.items.length&&/^image\//.test(e.clipboardData.items[0].type)?e.clipboardData.items:null}function i(e){return e.dataTransfer&&e.dataTransfer.files?e.dataTransfer.files:null}return{outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(e.getAttr("class"))&&e.parentNode.removeChild(e)}),utils.each(e.getNodesByTagName("p"),function(e){/\bloadpara\b/.test(e.getAttr("class"))&&e.parentNode.removeChild(e)})},bindEvents:{ready:function(){var n=this;window.FormData&&window.FileReader&&(domUtils.on(n.body,"paste drop",function(o){var r,a=!1;if(r="paste"==o.type?t(o):i(o)){for(var s,l=r.length;l--;)s=r[l],s.getAsFile&&(s=s.getAsFile()),s&&s.size>0&&(e(s,n),a=!0);a&&o.preventDefault()}}),domUtils.on(n.body,"dragover",function(e){"Files"==e.dataTransfer.types[0]&&e.preventDefault()}),utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-left:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document))}}}}),UE.plugin.register("charts",function(){function e(e){var t=null,i=0;if(e.rows.length<2)return!1;if(e.rows[0].cells.length<2)return!1;t=e.rows[0].cells,i=t.length;for(var n,o=0;n=t[o];o++)if("th"!==n.tagName.toLowerCase())return!1;for(var r,o=1;r=e.rows[o];o++){if(r.cells.length!=i)return!1;if("th"!==r.cells[0].tagName.toLowerCase())return!1;for(var n,a=1;n=r.cells[a];a++){var s=utils.trim(n.innerText||n.textContent||"");if(s=s.replace(new RegExp(UE.dom.domUtils.fillChar,"g"),"").replace(/^\s+|\s+$/g,""),!/^\d*\.?\d+$/.test(s))return!1}}return!0}var t=this;return{bindEvents:{chartserror:function(){}},commands:{charts:{execCommand:function(i,n){var o=domUtils.findParentByTagName(this.selection.getRange().startContainer,"table",!0),r=[],a={};if(!o)return!1;if(!e(o))return t.fireEvent("chartserror"),!1;a.title=n.title||"",a.subTitle=n.subTitle||"",a.xTitle=n.xTitle||"",a.yTitle=n.yTitle||"",a.suffix=n.suffix||"",a.tip=n.tip||"",a.dataFormat=n.tableDataFormat||"",a.chartType=n.chartType||0;for(var s in a)a.hasOwnProperty(s)&&r.push(s+":"+a[s]);o.setAttribute("data-chart",r.join(";")),domUtils.addClass(o,"edui-charts-table")},queryCommandState:function(){var t=domUtils.findParentByTagName(this.selection.getRange().startContainer,"table",!0);return t&&e(t)?0:-1}}},inputRule:function(e){utils.each(e.getNodesByTagName("table"),function(e){void 0!==e.getAttr("data-chart")&&e.setAttr("style")})},outputRule:function(e){utils.each(e.getNodesByTagName("table"),function(e){void 0!==e.getAttr("data-chart")&&e.setAttr("style","display: none;")})}}}),UE.plugin.register("section",function(){function e(){this.tag="",this.level=-1,this.dom=null,this.nextSection=null,this.previousSection=null,this.parentSection=null,this.startAddress=[],this.endAddress=[],this.children=[]}function t(t){var i=new e;return utils.extend(i,t)}function i(e,t){for(var i=t,n=0;n<e.length;n++){if(!i.childNodes)return null;i=i.childNodes[e[n]]}return i}var n=this;return{bindMultiEvents:{type:"aftersetcontent afterscencerestore",handler:function(){n.fireEvent("updateSections")}},bindEvents:{ready:function(){n.fireEvent("updateSections"),domUtils.on(n.body,"drop paste",function(){n.fireEvent("updateSections")})},afterexeccommand:function(e,t){"paragraph"==t&&n.fireEvent("updateSections")},keyup:function(e,t){var i=this,n=i.selection.getRange();if(1!=n.collapsed)i.fireEvent("updateSections");else{var o=t.keyCode||t.which;(13==o||8==o||46==o)&&i.fireEvent("updateSections")}}},commands:{getsections:{execCommand:function(e,i){function n(e){for(var t=0;t<r.length;t++)if(r[t](e))return t;return-1}function o(e,i){for(var r,a,l,c=null,u=e.childNodes,m=0,f=u.length;f>m;m++)if(l=u[m],r=n(l),r>=0){var h=s.selection.getRange().selectNode(l).createAddress(!0).startAddress,p=t({tag:l.tagName,title:l.innerText||l.textContent||"",level:r,dom:l,startAddress:utils.clone(h,[]),endAddress:utils.clone(h,[]),children:[]});for(d.nextSection=p,p.previousSection=d,a=d;r<=a.level;)a=a.parentSection;p.parentSection=a,a.children.push(p),c=d=p}else 1===l.nodeType&&o(l,i),c&&c.endAddress[c.endAddress.length-1]++}for(var r=i||["h1","h2","h3","h4","h5","h6"],a=0;a<r.length;a++)"string"==typeof r[a]?r[a]=function(e){return function(t){return t.tagName==e.toUpperCase()}}(r[a]):"function"!=typeof r[a]&&(r[a]=function(){return null});var s=this,l=t({level:-1,title:"root"}),d=l;return o(s.body,l),l},notNeedUndo:!0},movesection:{execCommand:function(e,t,n,o){function r(e,t,i){for(var n=!1,o=!1,r=0;r<e.length&&!(r>=i.length);r++){if(i[r]>e[r]){n=!0;break}if(i[r]<e[r])break}for(var r=0;r<t.length&&!(r>=i.length);r++){if(i[r]<e[r]){o=!0;break}if(i[r]>e[r])break}return n&&o}var a,s,l=this;
if(t&&n&&-1!=n.level&&(a=o?n.endAddress:n.startAddress,s=i(a,l.body),a&&s&&!r(t.startAddress,t.endAddress,a))){var d,c,u=i(t.startAddress,l.body),m=i(t.endAddress,l.body);if(o)for(d=m;d&&!(domUtils.getPosition(u,d)&domUtils.POSITION_FOLLOWING)&&(c=d.previousSibling,domUtils.insertAfter(s,d),d!=u);)d=c;else for(d=u;d&&!(domUtils.getPosition(d,m)&domUtils.POSITION_FOLLOWING)&&(c=d.nextSibling,s.parentNode.insertBefore(d,s),d!=m);)d=c;l.fireEvent("updateSections")}}},deletesection:{execCommand:function(e,t,i){function n(e){for(var t=o.body,i=0;i<e.length;i++){if(!t.childNodes)return null;t=t.childNodes[e[i]]}return t}var o=this;if(t){var r,a=n(t.startAddress),s=n(t.endAddress),l=a;if(i)domUtils.remove(l);else for(;l&&domUtils.inDoc(s,o.document)&&!(domUtils.getPosition(l,s)&domUtils.POSITION_FOLLOWING);)r=l.nextSibling,domUtils.remove(l),l=r;o.fireEvent("updateSections")}}},selectsection:{execCommand:function(e,t){if(!t&&!t.dom)return!1;var i=this,n=i.selection.getRange(),o={startAddress:utils.clone(t.startAddress,[]),endAddress:utils.clone(t.endAddress,[])};return o.endAddress[o.endAddress.length-1]++,n.moveToAddress(o).select().scrollToView(),!0},notNeedUndo:!0},scrolltosection:{execCommand:function(e,t){if(!t&&!t.dom)return!1;var i=this,n=i.selection.getRange(),o={startAddress:t.startAddress,endAddress:t.endAddress};return o.endAddress[o.endAddress.length-1]++,n.moveToAddress(o).scrollToView(),!0},notNeedUndo:!0}}}}),UE.plugin.register("simpleupload",function(){function e(){var e=t.offsetWidth||20,o=t.offsetHeight||20,r=document.createElement("iframe"),a="display:block;width:"+e+"px;height:"+o+"px;overflow:hidden;border:0;margin:0;padding:0;position:absolute;top:0;left:0;filter:alpha(opacity=0);-moz-opacity:0;-khtml-opacity: 0;opacity: 0;cursor:pointer;";domUtils.on(r,"load",function(){var t,s,l,d=(+new Date).toString(36);s=r.contentDocument||r.contentWindow.document,l=s.body,t=s.createElement("div"),t.innerHTML='<form id="edui_form_'+d+'" target="edui_iframe_'+d+'" method="POST" enctype="multipart/form-data" action="'+i.getOpt("serverUrl")+'" style="'+a+'"><input id="edui_input_'+d+'" type="file" accept="image/*" name="'+i.options.imageFieldName+'" style="'+a+'"></form><iframe id="edui_iframe_'+d+'" name="edui_iframe_'+d+'" style="display:none;width:0;height:0;border:0;margin:0;padding:0;position:absolute;"></iframe>',t.className="edui-"+i.options.theme,t.id=i.ui.id+"_iframeupload",l.style.cssText=a,l.style.width=e+"px",l.style.height=o+"px",l.appendChild(t),l.parentNode&&(l.parentNode.style.width=e+"px",l.parentNode.style.height=e+"px");var c=s.getElementById("edui_form_"+d),u=s.getElementById("edui_input_"+d),m=s.getElementById("edui_iframe_"+d);domUtils.on(u,"change",function(){function e(){try{var o,r,a,s=(m.contentDocument||m.contentWindow.document).body,l=s.innerText||s.textContent||"";r=new Function("return "+l)(),o=i.options.imageUrlPrefix+r.url,"SUCCESS"==r.state&&r.url?(a=i.document.getElementById(n),a.setAttribute("src",o),a.setAttribute("_src",o),a.setAttribute("title",r.title||""),a.setAttribute("alt",r.original||""),a.removeAttribute("id"),domUtils.removeClasses(a,"loadingclass")):t&&t(r.state)}catch(d){t&&t(i.getLang("simpleupload.loadError"))}c.reset(),domUtils.un(m,"load",e)}function t(e){if(n){var t=i.document.getElementById(n);t&&domUtils.remove(t),i.fireEvent("showmessage",{id:n,content:e,type:"error",timeout:4e3})}}if(u.value){var n="loading_"+(+new Date).toString(36),o=utils.serializeParam(i.queryCommandValue("serverparam"))||"",r=i.getActionUrl(i.getOpt("imageActionName"));r=i.getOpt("imageActionUrl");var a=i.getOpt("imageAllowFiles");if(i.focus(),i.execCommand("inserthtml",'<img class="loadingclass" id="'+n+'" src="'+i.options.themePath+i.options.theme+'/images/spacer.gif" title="'+(i.getLang("simpleupload.loading")||"")+'" >'),!i.getOpt("imageActionName"))return void errorHandler(i.getLang("autoupload.errorLoadConfig"));var s=u.value,l=s?s.substr(s.lastIndexOf(".")):"";if(!l||a&&-1==(a.join("")+".").indexOf(l.toLowerCase()+"."))return void t(i.getLang("simpleupload.exceedTypeError"));domUtils.on(m,"load",e),c.action=utils.formatUrl(r+(-1==r.indexOf("?")?"?":"&")+o),c.submit()}});var f;i.addListener("selectionchange",function(){clearTimeout(f),f=setTimeout(function(){var e=i.queryCommandState("simpleupload");u.disabled=-1==e?"disabled":!1},400)}),n=!0}),r.style.cssText=a,t.appendChild(r)}var t,i=this,n=!1;return{bindEvents:{ready:function(){utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document)},simpleuploadbtnready:function(n,o){t=o,i.afterConfigReady(e)}},outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(e.getAttr("class"))&&e.parentNode.removeChild(e)})},commands:{simpleupload:{queryCommandState:function(){return n?0:-1}}}}}),UE.plugin.register("serverparam",function(){var e={};return{commands:{serverparam:{execCommand:function(t,i,n){void 0===i||null===i?e={}:utils.isString(i)?void 0===n||null===n?delete e[i]:e[i]=n:utils.isObject(i)?utils.extend(e,i,!0):utils.isFunction(i)&&utils.extend(e,i(),!0)},queryCommandValue:function(){return e||{}}}}}}),UE.plugin.register("insertfile",function(){function e(e){var t=e.substr(e.lastIndexOf(".")+1).toLowerCase(),i={rar:"icon_rar.gif",zip:"icon_rar.gif",tar:"icon_rar.gif",gz:"icon_rar.gif",bz2:"icon_rar.gif",doc:"icon_doc.gif",docx:"icon_doc.gif",pdf:"icon_pdf.gif",mp3:"icon_mp3.gif",xls:"icon_xls.gif",chm:"icon_chm.gif",ppt:"icon_ppt.gif",pptx:"icon_ppt.gif",avi:"icon_mv.gif",rmvb:"icon_mv.gif",wmv:"icon_mv.gif",flv:"icon_mv.gif",swf:"icon_mv.gif",rm:"icon_mv.gif",exe:"icon_exe.gif",psd:"icon_psd.gif",txt:"icon_txt.gif",jpg:"icon_jpg.gif",png:"icon_jpg.gif",jpeg:"icon_jpg.gif",gif:"icon_jpg.gif",ico:"icon_jpg.gif",bmp:"icon_jpg.gif"};return i[t]?i[t]:i.txt}var t=this;return{commands:{insertfile:{execCommand:function(i,n){n=utils.isArray(n)?n:[n];var o,r,a,s,l="",d=t.getOpt("UEDITOR_HOME_URL"),c=d+("/"==d.substr(d.length-1)?"":"/")+"dialogs/attachment/fileTypeImages/";for(o=0;o<n.length;o++)r=n[o],a=c+e(r.url),s=r.title||r.url.substr(r.url.lastIndexOf("/")+1),l+='<p style="line-height: 16px;"><img style="vertical-align: middle; margin-right: 2px;" src="'+a+'" _src="'+a+'" /><a style="font-size:12px; color:#0066cc;" href="'+r.url+'" title="'+s+'">'+s+"</a></p>";t.execCommand("insertHtml",l)}}}}});var baidu=baidu||{};baidu.editor=baidu.editor||{},UE.ui=baidu.editor.ui={},function(){function e(){var e=document.getElementById("edui_fixedlayer");l.setViewportOffset(e,{left:0,top:0})}function t(){n.on(window,"scroll",e),n.on(window,"resize",baidu.editor.utils.defer(e,0,!0))}var i=baidu.editor.browser,n=baidu.editor.dom.domUtils,o="$EDITORUI",r=window[o]={},a="ID"+o,s=0,l=baidu.editor.ui.uiUtils={uid:function(e){return e?e[a]||(e[a]=++s):++s},hook:function(e,t){var i;return e&&e._callbacks?i=e:(i=function(){var t;e&&(t=e.apply(this,arguments));for(var n=i._callbacks,o=n.length;o--;){var r=n[o].apply(this,arguments);void 0===t&&(t=r)}return t},i._callbacks=[]),i._callbacks.push(t),i},createElementByHtml:function(e){var t=document.createElement("div");return t.innerHTML=e,t=t.firstChild,t.parentNode.removeChild(t),t},getViewportElement:function(){return i.ie&&i.quirks?document.body:document.documentElement},getClientRect:function(e){var t;try{t=e.getBoundingClientRect()}catch(i){t={left:0,top:0,height:0,width:0}}for(var o,r={left:Math.round(t.left),top:Math.round(t.top),height:Math.round(t.bottom-t.top),width:Math.round(t.right-t.left)};(o=e.ownerDocument)!==document&&(e=n.getWindow(o).frameElement);)t=e.getBoundingClientRect(),r.left+=t.left,r.top+=t.top;return r.bottom=r.top+r.height,r.right=r.left+r.width,r},getViewportRect:function(){var e=l.getViewportElement(),t=0|(window.innerWidth||e.clientWidth),i=0|(window.innerHeight||e.clientHeight);return{left:0,top:0,height:i,width:t,bottom:i,right:t}},setViewportOffset:function(e,t){var i=l.getFixedLayer();e.parentNode===i?(e.style.left=t.left+"px",e.style.top=t.top+"px"):n.setViewportOffset(e,t)},getEventOffset:function(e){var t=e.target||e.srcElement,i=l.getClientRect(t),n=l.getViewportOffsetByEvent(e);return{left:n.left-i.left,top:n.top-i.top}},getViewportOffsetByEvent:function(e){var t=e.target||e.srcElement,i=n.getWindow(t).frameElement,o={left:e.clientX,top:e.clientY};if(i&&t.ownerDocument!==document){var r=l.getClientRect(i);o.left+=r.left,o.top+=r.top}return o},setGlobal:function(e,t){return r[e]=t,o+'["'+e+'"]'},unsetGlobal:function(e){delete r[e]},copyAttributes:function(e,t){for(var o=t.attributes,r=o.length;r--;){var a=o[r];"style"==a.nodeName||"class"==a.nodeName||i.ie&&!a.specified||e.setAttribute(a.nodeName,a.nodeValue)}t.className&&n.addClass(e,t.className),t.style.cssText&&(e.style.cssText+=";"+t.style.cssText)},removeStyle:function(e,t){if(e.style.removeProperty)e.style.removeProperty(t);else{if(!e.style.removeAttribute)throw"";e.style.removeAttribute(t)}},contains:function(e,t){return e&&t&&(e===t?!1:e.contains?e.contains(t):16&e.compareDocumentPosition(t))},startDrag:function(e,t,i){function n(e){var i=e.clientX-a,n=e.clientY-s;t.ondragmove(i,n,e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function o(){i.removeEventListener("mousemove",n,!0),i.removeEventListener("mouseup",o,!0),window.removeEventListener("mouseup",o,!0),t.ondragstop()}function r(){l.releaseCapture(),l.detachEvent("onmousemove",n),l.detachEvent("onmouseup",r),l.detachEvent("onlosecaptrue",r),t.ondragstop()}var i=i||document,a=e.clientX,s=e.clientY;if(i.addEventListener)i.addEventListener("mousemove",n,!0),i.addEventListener("mouseup",o,!0),window.addEventListener("mouseup",o,!0),e.preventDefault();else{var l=e.srcElement;l.setCapture(),l.attachEvent("onmousemove",n),l.attachEvent("onmouseup",r),l.attachEvent("onlosecaptrue",r),e.returnValue=!1}t.ondragstart()},getFixedLayer:function(){var n=document.getElementById("edui_fixedlayer");return null==n&&(n=document.createElement("div"),n.id="edui_fixedlayer",document.body.appendChild(n),i.ie&&i.version<=8?(n.style.position="absolute",t(),setTimeout(e)):n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.width="0",n.style.height="0"),n},makeUnselectable:function(e){if(i.opera||i.ie&&i.version<9){if(e.unselectable="on",e.hasChildNodes())for(var t=0;t<e.childNodes.length;t++)1==e.childNodes[t].nodeType&&l.makeUnselectable(e.childNodes[t])}else void 0!==e.style.MozUserSelect?e.style.MozUserSelect="none":void 0!==e.style.WebkitUserSelect?e.style.WebkitUserSelect="none":void 0!==e.style.KhtmlUserSelect&&(e.style.KhtmlUserSelect="none")}}}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,i=baidu.editor.EventBase,n=baidu.editor.ui.UIBase=function(){};n.prototype={className:"",uiName:"",initOptions:function(e){var i=this;for(var n in e)i[n]=e[n];this.id=this.id||"edui"+t.uid()},initUIBase:function(){this._globalKey=e.unhtml(t.setGlobal(this.id,this))},render:function(e){for(var i,n=this.renderHtml(),o=t.createElementByHtml(n),r=domUtils.getElementsByTagName(o,"*"),a="edui-"+(this.theme||this.editor.options.theme),s=document.getElementById("edui_fixedlayer"),l=0;i=r[l++];)domUtils.addClass(i,a);domUtils.addClass(o,a),s&&(s.className="",domUtils.addClass(s,a));var d=this.getDom();null!=d?(d.parentNode.replaceChild(o,d),t.copyAttributes(o,d)):("string"==typeof e&&(e=document.getElementById(e)),e=e||t.getFixedLayer(),domUtils.addClass(e,a),e.appendChild(o)),this.postRender()},getDom:function(e){return document.getElementById(e?this.id+"_"+e:this.id)},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(e){var t="edui-"+this.uiName;return e.replace(/##/g,this.id).replace(/%%-/g,this.uiName?t+"-":"").replace(/%%/g,(this.uiName?t:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var e=this.getDom();e&&baidu.editor.dom.domUtils.remove(e),t.unsetGlobal(this.id)}},e.inherits(n,i)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,i=baidu.editor.ui.Separator=function(e){this.initOptions(e),this.initSeparator()};i.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}},e.inherits(i,t)}(),function(){var e=baidu.editor.utils,t=baidu.editor.dom.domUtils,i=baidu.editor.ui.UIBase,n=baidu.editor.ui.uiUtils,o=baidu.editor.ui.Mask=function(e){this.initOptions(e),this.initUIBase()};o.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onclick="return $$._onClick(event, this);" onmousedown="return $$._onMouseDown(event, this);"></div>'},postRender:function(){var e=this;t.on(window,"resize",function(){setTimeout(function(){e.isHidden()||e._fill()})})},show:function(e){this._fill(),this.getDom().style.display="",this.getDom().style.zIndex=e},hide:function(){this.getDom().style.display="none",this.getDom().style.zIndex=""},isHidden:function(){return"none"==this.getDom().style.display},_onMouseDown:function(){return!1},_onClick:function(e,t){this.fireEvent("click",e,t)},_fill:function(){var e=this.getDom(),t=n.getViewportRect();e.style.width=t.width+"px",e.style.height=t.height+"px"}},e.inherits(o,i)}(),function(){function e(e,t){for(var i=0;i<a.length;i++){var n=a[i];if(!n.isHidden()&&n.queryAutoHide(t)!==!1){if(e&&/scroll/gi.test(e.type)&&"edui-wordpastepop"==n.className)return;n.hide()}}a.length&&n.editor.fireEvent("afterhidepop")}var t=baidu.editor.utils,i=baidu.editor.ui.uiUtils,n=baidu.editor.dom.domUtils,o=baidu.editor.ui.UIBase,r=baidu.editor.ui.Popup=function(e){this.initOptions(e),this.initPopup()},a=[];r.postHide=e;var s=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];r.prototype={SHADOW_RADIUS:5,content:null,_hidden:!1,autoRender:!0,canSideLeft:!0,canSideUp:!0,initPopup:function(){this.initUIBase(),a.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%" onmousedown="return false;"> <div id="##_body" class="edui-popup-body"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+"  </div> </div></div>"},getContentHtmlTpl:function(){return this.content?"string"==typeof this.content?this.content:this.content.renderHtml():""},_UIBase_postRender:o.prototype.postRender,postRender:function(){if(this.content instanceof o&&this.content.postRender(),this.captureWheel&&!this.captured){this.captured=!0;var e=(document.documentElement.clientHeight||document.body.clientHeight)-80,t=this.getDom().offsetHeight,r=i.getClientRect(this.combox.getDom()).top,a=this.getDom("content"),s=this.getDom("body").getElementsByTagName("iframe"),l=this;for(s.length&&(s=s[0]);r+t>e;)t-=30;a.style.height=t+"px",s&&(s.style.height=t+"px"),window.XMLHttpRequest?n.on(a,"onmousewheel"in document.body?"mousewheel":"DOMMouseScroll",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,a.scrollTop-=e.wheelDelta?e.wheelDelta/120*60:e.detail/-3*60}):n.on(this.getDom(),"mousewheel",function(e){e.returnValue=!1,l.getDom("content").scrollTop-=e.wheelDelta/120*60})}this.fireEvent("postRenderAfter"),this.hide(!0),this._UIBase_postRender()},_doAutoRender:function(){!this.getDom()&&this.autoRender&&this.render()},mesureSize:function(){var e=this.getDom("content");return i.getClientRect(e)},fitSize:function(){if(this.captureWheel&&this.sized)return this.__size;this.sized=!0;var e=this.getDom("body");e.style.width="",e.style.height="";var t=this.mesureSize();if(this.captureWheel){e.style.width=-(-20-t.width)+"px";var i=parseInt(this.getDom("content").style.height,10);!window.isNaN(i)&&(t.height=i)}else e.style.width=t.width+"px";return e.style.height=t.height+"px",this.__size=t,this.captureWheel&&(this.getDom("content").style.overflow="auto"),t},showAnchor:function(e,t){this.showAnchorRect(i.getClientRect(e),t)},showAnchorRect:function(e,t){this._doAutoRender();var o=i.getViewportRect();this.getDom().style.visibility="hidden",this._show();var r,a,l,d,c=this.fitSize();t?(r=this.canSideLeft&&e.right+c.width>o.right&&e.left>c.width,a=this.canSideUp&&e.top+c.height>o.bottom&&e.bottom>c.height,l=r?e.left-c.width:e.right,d=a?e.bottom-c.height:e.top):(r=this.canSideLeft&&e.right+c.width>o.right&&e.left>c.width,a=this.canSideUp&&e.top+c.height>o.bottom&&e.bottom>c.height,l=r?e.right-c.width:e.left,d=a?e.top-c.height:e.bottom);var u=this.getDom();i.setViewportOffset(u,{left:l,top:d}),n.removeClasses(u,s),u.className+=" "+s[2*(a?1:0)+(r?1:0)],this.editor&&(u.style.zIndex=1*this.editor.container.style.zIndex+10,baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=u.style.zIndex-1),this.getDom().style.visibility="visible"},showAt:function(e){var t=e.left,i=e.top,n={left:t,top:i,right:t,bottom:i,height:0,width:0};this.showAnchorRect(n,!1,!0)},_show:function(){if(this._hidden){var e=this.getDom();e.style.display="",this._hidden=!1,this.fireEvent("show")}},isHidden:function(){return this._hidden},show:function(){this._doAutoRender(),this._show()},hide:function(e){!this._hidden&&this.getDom()&&(this.getDom().style.display="none",this._hidden=!0,e||this.fireEvent("hide"))},queryAutoHide:function(e){return!e||!i.contains(this.getDom(),e)}},t.inherits(r,o),n.on(document,"mousedown",function(t){var i=t.target||t.srcElement;e(t,i)}),n.on(window,"scroll",function(t,i){e(t,i)})}(),function(){function e(e,t){for(var i='<div id="##" class="edui-colorpicker %%"><div class="edui-colorpicker-topbar edui-clearfix"><div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div><div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+e+'</div></div><table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0"><tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"><td colspan="10">'+t.getLang("themeColor")+'</td> </tr><tr class="edui-colorpicker-tablefirstrow" >',n=0;n<o.length;n++)n&&n%10===0&&(i+="</tr>"+(60==n?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"><td colspan="10">'+t.getLang("standardColor")+"</td></tr>":"")+"<tr"+(60==n?' class="edui-colorpicker-tablefirstrow"':"")+">"),i+=70>n?'<td style="padding: 0 2px;"><a hidefocus title="'+o[n]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell" data-color="#'+o[n]+'" style="background-color:#'+o[n]+";border:solid #ccc;"+(10>n||n>=60?"border-width:1px;":n>=10&&20>n?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"></a></td>':"";return i+="</tr></table></div>"}var t=baidu.editor.utils,i=baidu.editor.ui.UIBase,n=baidu.editor.ui.ColorPicker=function(e){this.initOptions(e),this.noColorText=this.noColorText||this.editor.getLang("clearColor"),this.initUIBase()};n.prototype={getHtmlTpl:function(){return e(this.noColorText,this.editor)},_onTableClick:function(e){var t=e.target||e.srcElement,i=t.getAttribute("data-color");i&&this.fireEvent("pickcolor",i)},_onTableOver:function(e){var t=e.target||e.srcElement,i=t.getAttribute("data-color");i&&(this.getDom("preview").style.backgroundColor=i)},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}},t.inherits(n,i);var o="ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,d8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,".split(",")}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,i=baidu.editor.ui.UIBase,n=baidu.editor.ui.TablePicker=function(e){this.initOptions(e),this.initTablePicker()};n.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-tablepicker %%"><div class="edui-tablepicker-body"><div class="edui-infoarea"><span id="##_label" class="edui-label"></span></div><div class="edui-pickarea" onmousemove="$$._onMouseMove(event, this);" onmouseover="$$._onMouseOver(event, this);" onmouseout="$$._onMouseOut(event, this);" onclick="$$._onClick(event, this);"><div id="##_overlay" class="edui-overlay"></div></div></div></div>'},_UIBase_render:i.prototype.render,render:function(e){this._UIBase_render(e),this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(e,t){var i=this.getDom("overlay").style,n=this.lengthOfCellSide;i.width=e*n+"px",i.height=t*n+"px";var o=this.getDom("label");o.innerHTML=e+this.editor.getLang("t_col")+" x "+t+this.editor.getLang("t_row"),this.numCols=e,this.numRows=t},_onMouseOver:function(e,i){var n=e.relatedTarget||e.fromElement;t.contains(i,n)||i===n||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="")},_onMouseOut:function(e,i){var n=e.relatedTarget||e.toElement;t.contains(i,n)||i===n||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="hidden")},_onMouseMove:function(e){var i=(this.getDom("overlay").style,t.getEventOffset(e)),n=this.lengthOfCellSide,o=Math.ceil(i.left/n),r=Math.ceil(i.top/n);this._track(o,r)},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)}},e.inherits(n,i)}(),function(){var e=baidu.editor.browser,t=baidu.editor.dom.domUtils,i=baidu.editor.ui.uiUtils,n='onmousedown="$$.Stateful_onMouseDown(event, this);" onmouseup="$$.Stateful_onMouseUp(event, this);"'+(e.ie?' onmouseenter="$$.Stateful_onMouseEnter(event, this);" onmouseleave="$$.Stateful_onMouseLeave(event, this);"':' onmouseover="$$.Stateful_onMouseOver(event, this);" onmouseout="$$.Stateful_onMouseOut(event, this);"');baidu.editor.ui.Stateful={alwalysHoverable:!1,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl,this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){var e=this._Stateful_dGetHtmlTpl();return e.replace(/stateful/g,function(){return n})},Stateful_onMouseEnter:function(e,t){this.target=t,(!this.isDisabled()||this.alwalysHoverable)&&(this.addState("hover"),this.fireEvent("over"))},Stateful_onMouseLeave:function(){(!this.isDisabled()||this.alwalysHoverable)&&(this.removeState("hover"),this.removeState("active"),this.fireEvent("out"))},Stateful_onMouseOver:function(e,t){var n=e.relatedTarget;i.contains(t,n)||t===n||this.Stateful_onMouseEnter(e,t)},Stateful_onMouseOut:function(e,t){var n=e.relatedTarget;i.contains(t,n)||t===n||this.Stateful_onMouseLeave(e,t)},Stateful_onMouseDown:function(){this.isDisabled()||this.addState("active")},Stateful_onMouseUp:function(){this.isDisabled()||this.removeState("active")},Stateful_postRender:function(){this.disabled&&!this.hasState("disabled")&&this.addState("disabled")},hasState:function(e){return t.hasClass(this.getStateDom(),"edui-state-"+e)},addState:function(e){this.hasState(e)||(this.getStateDom().className+=" edui-state-"+e)},removeState:function(e){this.hasState(e)&&t.removeClasses(this.getStateDom(),["edui-state-"+e])},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(e){!this.isDisabled()&&e?this.addState("checked"):this.removeState("checked")},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(e){e?(this.removeState("hover"),this.removeState("checked"),this.removeState("active"),this.addState("disabled")):this.removeState("disabled")}}}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,i=baidu.editor.ui.Stateful,n=baidu.editor.ui.Button=function(e){if(e.name){var t=e.name,i=e.cssRules;e.className||(e.className="edui-for-"+t),e.cssRules=".edui-default  .edui-for-"+t+" .edui-icon {"+i+"}"}this.initOptions(e),this.initButton()};n.prototype={uiName:"button",label:"",title:"",showIcon:!0,showText:!0,cssRules:"",initButton:function(){this.initUIBase(),this.Stateful_init(),this.cssRules&&e.cssRule("edui-customize-"+this.name+"-style",this.cssRules)},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div id="##_state" stateful><div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return $$._onMouseDown(event, this);" onclick="return $$._onClick(event, this);">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div></div></div></div>"},postRender:function(){this.Stateful_postRender(),this.setDisabled(this.disabled)},_onMouseDown:function(e){var t=e.target||e.srcElement,i=t&&t.tagName&&t.tagName.toLowerCase();return"input"==i||"object"==i||"object"==i?!1:void 0},_onClick:function(){this.isDisabled()||this.fireEvent("click")},setTitle:function(e){var t=this.getDom("label");t.innerHTML=e}},e.inherits(n,t),e.extend(n.prototype,i)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,i=(baidu.editor.dom.domUtils,baidu.editor.ui.UIBase),n=baidu.editor.ui.Stateful,o=baidu.editor.ui.SplitButton=function(e){this.initOptions(e),this.initSplitButton()};o.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){this.initUIBase(),this.Stateful_init();if(null!=this.popup){var e=this.popup;this.popup=null,this.setPopup(e)}},_UIBase_postRender:i.prototype.postRender,postRender:function(){this.Stateful_postRender(),this._UIBase_postRender()},setPopup:function(i){this.popup!==i&&(null!=this.popup&&this.popup.dispose(),i.addListener("show",e.bind(this._onPopupShow,this)),i.addListener("hide",e.bind(this._onPopupHide,this)),i.addListener("postrender",e.bind(function(){i.getDom("body").appendChild(t.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(t.getClientRect(this.getDom()).width+20)+'px"></div>')),i.getDom().className+=" "+this.className},this)),this.popup=i)},_onPopupShow:function(){this.addState("opened")},_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div '+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body"><div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);"><div class="edui-box edui-icon"></div></div><div class="edui-box edui-splitborder"></div><div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div></div></div></div>'},showPopup:function(){var e=t.getClientRect(this.getDom());e.top-=this.popup.SHADOW_RADIUS,e.height+=this.popup.SHADOW_RADIUS,this.popup.showAnchorRect(e)},_onArrowClick:function(){this.isDisabled()||this.showPopup()},_onButtonClick:function(){this.isDisabled()||this.fireEvent("buttonclick")}},e.inherits(o,i),e.extend(o.prototype,n,!0)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,i=baidu.editor.ui.ColorPicker,n=baidu.editor.ui.Popup,o=baidu.editor.ui.SplitButton,r=baidu.editor.ui.ColorButton=function(e){this.initOptions(e),this.initColorButton()};r.prototype={initColorButton:function(){var e=this;this.popup=new n({content:new i({noColorText:e.editor.getLang("clearColor"),editor:e.editor,onpickcolor:function(t,i){e._onPickColor(i)},onpicknocolor:function(t,i){e._onPickNoColor(i)}}),editor:e.editor}),this.initSplitButton()},_SplitButton_postRender:o.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.getDom("button_body").appendChild(t.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>')),this.getDom().className+=" edui-colorbutton"},setColor:function(e){this.getDom("colorlump").style.backgroundColor=e,this.color=e},_onPickColor:function(e){this.fireEvent("pickcolor",e)!==!1&&(this.setColor(e),this.popup.hide())},_onPickNoColor:function(){this.fireEvent("picknocolor")!==!1&&this.popup.hide()}},e.inherits(r,o)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.Popup,i=baidu.editor.ui.TablePicker,n=baidu.editor.ui.SplitButton,o=baidu.editor.ui.TableButton=function(e){this.initOptions(e),this.initTableButton()};o.prototype={initTableButton:function(){var e=this;this.popup=new t({content:new i({editor:e.editor,onpicktable:function(t,i,n){e._onPickTable(i,n)}}),editor:e.editor}),this.initSplitButton()},_onPickTable:function(e,t){this.fireEvent("picktable",e,t)!==!1&&this.popup.hide()}},e.inherits(o,n)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,i=baidu.editor.ui.AutoTypeSetPicker=function(e){this.initOptions(e),this.initAutoTypeSetPicker()};i.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var e=this.editor,t=e.options.autotypeset,i=e.getLang("autoTypeSet"),n="textAlignValue"+e.uid,o="imageBlockLineValue"+e.uid,r="symbolConverValue"+e.uid;return'<div id="##" class="edui-autotypesetpicker %%"><div class="edui-autotypesetpicker-body"><table ><tr><td nowrap><input type="checkbox" name="mergeEmptyline" '+(t.mergeEmptyline?"checked":"")+">"+i.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(t.removeEmptyline?"checked":"")+">"+i.delLine+'</td></tr><tr><td nowrap><input type="checkbox" name="removeClass" '+(t.removeClass?"checked":"")+">"+i.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(t.indent?"checked":"")+">"+i.indent+'</td></tr><tr><td nowrap><input type="checkbox" name="textAlign" '+(t.textAlign?"checked":"")+">"+i.alignment+'</td><td colspan="2" id="'+n+'"><input type="radio" name="'+n+'" value="left" '+(t.textAlign&&"left"==t.textAlign?"checked":"")+">"+e.getLang("justifyleft")+'<input type="radio" name="'+n+'" value="center" '+(t.textAlign&&"center"==t.textAlign?"checked":"")+">"+e.getLang("justifycenter")+'<input type="radio" name="'+n+'" value="right" '+(t.textAlign&&"right"==t.textAlign?"checked":"")+">"+e.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="imageBlockLine" '+(t.imageBlockLine?"checked":"")+">"+i.imageFloat+'</td><td nowrap id="'+o+'"><input type="radio" name="'+o+'" value="none" '+(t.imageBlockLine&&"none"==t.imageBlockLine?"checked":"")+">"+e.getLang("default")+'<input type="radio" name="'+o+'" value="left" '+(t.imageBlockLine&&"left"==t.imageBlockLine?"checked":"")+">"+e.getLang("justifyleft")+'<input type="radio" name="'+o+'" value="center" '+(t.imageBlockLine&&"center"==t.imageBlockLine?"checked":"")+">"+e.getLang("justifycenter")+'<input type="radio" name="'+o+'" value="right" '+(t.imageBlockLine&&"right"==t.imageBlockLine?"checked":"")+">"+e.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="clearFontSize" '+(t.clearFontSize?"checked":"")+">"+i.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(t.clearFontFamily?"checked":"")+">"+i.removeFontFamily+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="removeEmptyNode" '+(t.removeEmptyNode?"checked":"")+">"+i.removeHtml+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="pasteFilter" '+(t.pasteFilter?"checked":"")+">"+i.pasteFilter+'</td></tr><tr><td nowrap><input type="checkbox" name="symbolConver" '+(t.bdc2sb||t.tobdc?"checked":"")+">"+i.symbol+'</td><td id="'+r+'"><input type="radio" name="bdc" value="bdc2sb" '+(t.bdc2sb?"checked":"")+">"+i.bdc2sb+'<input type="radio" name="bdc" value="tobdc" '+(t.tobdc?"checked":"")+">"+i.tobdc+'</td><td nowrap align="right"><button >'+i.run+"</button></td></tr></table></div></div>"
},_UIBase_render:t.prototype.render},e.inherits(i,t)}(),function(){function e(e){for(var i,n={},o=e.getDom(),r=e.editor.uid,a=null,s=null,l=domUtils.getElementsByTagName(o,"input"),d=l.length-1;i=l[d--];)if(a=i.getAttribute("type"),"checkbox"==a)if(s=i.getAttribute("name"),n[s]&&delete n[s],i.checked){var c=document.getElementById(s+"Value"+r);if(c){if(/input/gi.test(c.tagName))n[s]=c.value;else for(var u,m=c.getElementsByTagName("input"),f=m.length-1;u=m[f--];)if(u.checked){n[s]=u.value;break}}else n[s]=!0}else n[s]=!1;else n[i.getAttribute("value")]=i.checked;for(var h,p=domUtils.getElementsByTagName(o,"select"),d=0;h=p[d++];){var g=h.getAttribute("name");n[g]=n[g]?h.value:""}t.extend(e.editor.options.autotypeset,n),e.editor.setPreferences("autotypeset",n)}var t=baidu.editor.utils,i=baidu.editor.ui.Popup,n=baidu.editor.ui.AutoTypeSetPicker,o=baidu.editor.ui.SplitButton,r=baidu.editor.ui.AutoTypeSetButton=function(e){this.initOptions(e),this.initAutoTypeSetButton()};r.prototype={initAutoTypeSetButton:function(){var t=this;this.popup=new i({content:new n({editor:t.editor}),editor:t.editor,hide:function(){!this._hidden&&this.getDom()&&(e(this),this.getDom().style.display="none",this._hidden=!0,this.fireEvent("hide"))}});var o=0;this.popup.addListener("postRenderAfter",function(){var i=this;if(!o){var n=this.getDom(),r=n.getElementsByTagName("button")[0];r.onclick=function(){e(i),t.editor.execCommand("autotypeset"),i.hide()},domUtils.on(n,"click",function(n){var o=n.target||n.srcElement,r=t.editor.uid;if(o&&"INPUT"==o.tagName){if("imageBlockLine"==o.name||"textAlign"==o.name||"symbolConver"==o.name)for(var a=o.checked,s=document.getElementById(o.name+"Value"+r),l=s.getElementsByTagName("input"),d={imageBlockLine:"none",textAlign:"left",symbolConver:"tobdc"},c=0;c<l.length;c++)a?l[c].value==d[o.name]&&(l[c].checked="checked"):l[c].checked=!1;if(o.name=="imageBlockLineValue"+r||o.name=="textAlignValue"+r||"bdc"==o.name){var u=o.parentNode.previousSibling.getElementsByTagName("input");u&&(u[0].checked=!0)}e(i)}}),o=1}}),this.initSplitButton()}},t.inherits(r,o)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.Popup,i=baidu.editor.ui.Stateful,n=baidu.editor.ui.UIBase,o=baidu.editor.ui.CellAlignPicker=function(e){this.initOptions(e),this.initSelected(),this.initCellAlignPicker()};o.prototype={initSelected:function(){var e={valign:{top:0,middle:1,bottom:2},align:{left:0,center:1,right:2},count:3};this.selected&&(this.selectedIndex=e.valign[this.selected.valign]*e.count+e.align[this.selected.align])},initCellAlignPicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){for(var e=["left","center","right"],t=9,i=null,n=-1,o=[],r=0;t>r;r++)i=this.selectedIndex===r?' class="edui-cellalign-selected" ':"",n=r%3,0===n&&o.push("<tr>"),o.push('<td index="'+r+'" '+i+' stateful><div class="edui-icon edui-'+e[n]+'"></div></td>'),2===n&&o.push("</tr>");return'<div id="##" class="edui-cellalignpicker %%"><div class="edui-cellalignpicker-body"><table onclick="$$._onClick(event);">'+o.join("")+"</table></div></div>"},getStateDom:function(){return this.target},_onClick:function(e){var i=e.target||e.srcElement;/icon/.test(i.className)&&(this.items[i.parentNode.getAttribute("index")].onclick(),t.postHide(e))},_UIBase_render:n.prototype.render},e.inherits(o,n),e.extend(o.prototype,i,!0)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.Stateful,i=baidu.editor.ui.uiUtils,n=baidu.editor.ui.UIBase,o=baidu.editor.ui.PastePicker=function(e){this.initOptions(e),this.initPastePicker()};o.prototype={initPastePicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){return'<div class="edui-pasteicon" onclick="$$._onClick(this)"></div><div class="edui-pastecontainer"><div class="edui-title">'+this.editor.getLang("pasteOpt")+'</div><div class="edui-button"><div title="'+this.editor.getLang("pasteSourceFormat")+'" onclick="$$.format(false)" stateful><div class="edui-richtxticon"></div></div><div title="'+this.editor.getLang("tagFormat")+'" onclick="$$.format(2)" stateful><div class="edui-tagicon"></div></div><div title="'+this.editor.getLang("pasteTextFormat")+'" onclick="$$.format(true)" stateful><div class="edui-plaintxticon"></div></div></div></div></div>'},getStateDom:function(){return this.target},format:function(e){this.editor.ui._isTransfer=!0,this.editor.fireEvent("pasteTransfer",e)},_onClick:function(e){var t=domUtils.getNextDomNode(e),n=i.getViewportRect().height,o=i.getClientRect(t);t.style.top=o.top+o.height>n?-o.height-e.offsetHeight+"px":"",/hidden/gi.test(domUtils.getComputedStyle(t,"visibility"))?(t.style.visibility="visible",domUtils.addClass(e,"edui-state-opened")):(t.style.visibility="hidden",domUtils.removeClasses(e,"edui-state-opened"))},_UIBase_render:n.prototype.render},e.inherits(o,n),e.extend(o.prototype,t,!0)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,i=baidu.editor.ui.UIBase,n=baidu.editor.ui.Toolbar=function(e){this.initOptions(e),this.initToolbar()};n.prototype={items:null,initToolbar:function(){this.items=this.items||[],this.initUIBase()},add:function(e,t){void 0===t?this.items.push(e):this.items.splice(t,0,e)},getHtmlTpl:function(){for(var e=[],t=0;t<this.items.length;t++)e[t]=this.items[t].renderHtml();return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+e.join("")+"</div>"},postRender:function(){for(var e=this.getDom(),i=0;i<this.items.length;i++)this.items[i].postRender();t.makeUnselectable(e)},_onMouseDown:function(e){var t=e.target||e.srcElement,i=t&&t.tagName&&t.tagName.toLowerCase();return"input"==i||"object"==i||"object"==i?!1:void 0}},e.inherits(n,i)}(),function(){var e=baidu.editor.utils,t=baidu.editor.dom.domUtils,i=baidu.editor.ui.uiUtils,n=baidu.editor.ui.UIBase,o=baidu.editor.ui.Popup,r=baidu.editor.ui.Stateful,a=baidu.editor.ui.CellAlignPicker,s=baidu.editor.ui.Menu=function(e){this.initOptions(e),this.initMenu()},l={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},postRender:function(){},queryAutoHide:function(){return!0}};s.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[],this.initPopup(),this.initItems()},initItems:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];"-"==t?this.items[e]=this.getSeparator():t instanceof d||(t.editor=this.editor,t.theme=this.editor.options.theme,this.items[e]=this.createItem(t))}},getSeparator:function(){return l},createItem:function(e){return e.menu=this,new d(e)},_Popup_getContentHtmlTpl:o.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){if(0==this.items.length)return this._Popup_getContentHtmlTpl();for(var e=[],t=0;t<this.items.length;t++){var i=this.items[t];e[t]=i.renderHtml()}return'<div class="%%-body">'+e.join("")+"</div>"},_Popup_postRender:o.prototype.postRender,postRender:function(){for(var e=this,n=0;n<this.items.length;n++){var o=this.items[n];o.ownerMenu=this,o.postRender()}t.on(this.getDom(),"mouseover",function(t){t=t||event;var n=t.relatedTarget||t.fromElement,o=e.getDom();i.contains(o,n)||o===n||e.fireEvent("over")}),this._Popup_postRender()},queryAutoHide:function(e){if(e){if(i.contains(this.getDom(),e))return!1;for(var t=0;t<this.items.length;t++){var n=this.items[t];if(n.queryAutoHide(e)===!1)return!1}}},clearItems:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];clearTimeout(t._showingTimer),clearTimeout(t._closingTimer),t.subMenu&&t.subMenu.destroy()}this.items=[]},destroy:function(){this.getDom()&&t.remove(this.getDom()),this.clearItems()},dispose:function(){this.destroy()}},e.inherits(s,o);var d=baidu.editor.ui.MenuItem=function(e){if(this.initOptions(e),this.initUIBase(),this.Stateful_init(),this.subMenu&&!(this.subMenu instanceof s))if(e.className&&-1!=e.className.indexOf("aligntd")){var i=this;this.subMenu.selected=this.editor.queryCommandValue("cellalignment"),this.subMenu=new o({content:new a(this.subMenu),parentMenu:i,editor:i.editor,destroy:function(){this.getDom()&&t.remove(this.getDom())}}),this.subMenu.addListener("postRenderAfter",function(){t.on(this.getDom(),"mouseover",function(){i.addState("opened")})})}else this.subMenu=new s(this.subMenu)};d.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:!0,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);"><div class="%%-body">'+this.renderLabelHtml()+"</div></div>"},postRender:function(){var e=this;this.addListener("over",function(){e.ownerMenu.fireEvent("submenuover",e),e.subMenu&&e.delayShowSubMenu()}),this.subMenu&&(this.getDom().className+=" edui-hassubmenu",this.subMenu.render(),this.addListener("out",function(){e.delayHideSubMenu()}),this.subMenu.addListener("over",function(){clearTimeout(e._closingTimer),e._closingTimer=null,e.addState("opened")}),this.ownerMenu.addListener("hide",function(){e.hideSubMenu()}),this.ownerMenu.addListener("submenuover",function(t,i){i!==e&&e.delayHideSubMenu()}),this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide,this.subMenu.queryAutoHide=function(t){return t&&i.contains(e.getDom(),t)?!1:this._bakQueryAutoHide(t)}),this.getDom().style.tabIndex="-1",i.makeUnselectable(this.getDom()),this.Stateful_postRender()},delayShowSubMenu:function(){var e=this;e.isDisabled()||(e.addState("opened"),clearTimeout(e._showingTimer),clearTimeout(e._closingTimer),e._closingTimer=null,e._showingTimer=setTimeout(function(){e.showSubMenu()},250))},delayHideSubMenu:function(){var e=this;e.isDisabled()||(e.removeState("opened"),clearTimeout(e._showingTimer),e._closingTimer||(e._closingTimer=setTimeout(function(){e.hasState("opened")||e.hideSubMenu(),e._closingTimer=null},400)))},renderLabelHtml:function(){return'<div class="edui-arrow"></div><div class="edui-box edui-icon"></div><div class="edui-box edui-label %%-label">'+(this.label||"")+"</div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(e){return this.subMenu&&this.hasState("opened")?this.subMenu.queryAutoHide(e):void 0},_onClick:function(e,t){this.hasState("disabled")||this.fireEvent("click",e,t)!==!1&&(this.subMenu?this.showSubMenu():o.postHide(e))},showSubMenu:function(){var e=i.getClientRect(this.getDom());e.right-=5,e.left+=2,e.width-=7,e.top-=4,e.bottom+=4,e.height+=8,this.subMenu.showAnchorRect(e,!0,!0)},hideSubMenu:function(){this.subMenu.hide()}},e.inherits(d,n),e.extend(d.prototype,r,!0)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,i=baidu.editor.ui.Menu,n=baidu.editor.ui.SplitButton,o=baidu.editor.ui.Combox=function(e){this.initOptions(e),this.initCombox()};o.prototype={uiName:"combox",onbuttonclick:function(){this.showPopup()},initCombox:function(){var e=this;this.items=this.items||[];for(var t=0;t<this.items.length;t++){var n=this.items[t];n.uiName="listitem",n.index=t,n.onclick=function(){e.selectByIndex(this.index)}}this.popup=new i({items:this.items,uiName:"list",editor:this.editor,captureWheel:!0,combox:this}),this.initSplitButton()},_SplitButton_postRender:n.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.setLabel(this.label||""),this.setValue(this.initValue||"")},showPopup:function(){var e=t.getClientRect(this.getDom());e.top+=1,e.bottom-=1,e.height-=2,this.popup.showAnchorRect(e)},getValue:function(){return this.value},setValue:function(e){var t=this.indexByValue(e);-1!=t?(this.selectedIndex=t,this.setLabel(this.items[t].label),this.value=this.items[t].value):(this.selectedIndex=-1,this.setLabel(this.getLabelForUnknowValue(e)),this.value=e)},setLabel:function(e){this.getDom("button_body").innerHTML=e,this.label=e},getLabelForUnknowValue:function(e){return e},indexByValue:function(e){for(var t=0;t<this.items.length;t++)if(e==this.items[t].value)return t;return-1},getItem:function(e){return this.items[e]},selectByIndex:function(e){e<this.items.length&&this.fireEvent("select",e)!==!1&&(this.selectedIndex=e,this.value=this.items[e].value,this.setLabel(this.items[e].label))}},e.inherits(o,n)}(),function(){var e,t,i,n=baidu.editor.utils,o=baidu.editor.dom.domUtils,r=baidu.editor.ui.uiUtils,a=baidu.editor.ui.Mask,s=baidu.editor.ui.UIBase,l=baidu.editor.ui.Button,d=baidu.editor.ui.Dialog=function(e){if(e.name){var t=e.name,i=e.cssRules;e.className||(e.className="edui-for-"+t),i&&(e.cssRules=".edui-default .edui-for-"+t+" .edui-dialog-content  {"+i+"}")}this.initOptions(n.extend({autoReset:!0,draggable:!0,onok:function(){},oncancel:function(){},onclose:function(e,t){return t?this.onok():this.oncancel()},holdScroll:!1},e)),this.initDialog()};d.prototype={draggable:!1,uiName:"dialog",initDialog:function(){var o=this,r=this.editor.options.theme;if(this.cssRules&&n.cssRule("edui-customize-"+this.name+"-style",this.cssRules),this.initUIBase(),this.modalMask=e||(e=new a({className:"edui-dialog-modalmask",theme:r,onclick:function(){i&&i.close(!1)}})),this.dragMask=t||(t=new a({className:"edui-dialog-dragmask",theme:r})),this.closeButton=new l({className:"edui-dialog-closebutton",title:o.closeDialog,theme:r,onclick:function(){o.close(!1)}}),this.fullscreen&&this.initResizeEvent(),this.buttons)for(var s=0;s<this.buttons.length;s++)this.buttons[s]instanceof l||(this.buttons[s]=new l(n.extend(this.buttons[s],{editor:this.editor},!0)))},initResizeEvent:function(){var e=this;o.on(window,"resize",function(){e._hidden||void 0===e._hidden||(e.__resizeTimer&&window.clearTimeout(e.__resizeTimer),e.__resizeTimer=window.setTimeout(function(){e.__resizeTimer=null;var t=e.getDom(),i=e.getDom("content"),n=UE.ui.uiUtils.getClientRect(t),o=UE.ui.uiUtils.getClientRect(i),a=r.getViewportRect();i.style.width=a.width-n.width+o.width+"px",i.style.height=a.height-n.height+o.height+"px",t.style.width=a.width+"px",t.style.height=a.height+"px",e.fireEvent("resize")},100))})},fitSize:function(){var e=this.getDom("body"),t=this.mesureSize();return e.style.width=t.width+"px",e.style.height=t.height+"px",t},safeSetOffset:function(e){var t=this,i=t.getDom(),n=r.getViewportRect(),o=r.getClientRect(i),a=e.left;a+o.width>n.right&&(a=n.right-o.width);var s=e.top;s+o.height>n.bottom&&(s=n.bottom-o.height),i.style.left=Math.max(a,0)+"px",i.style.top=Math.max(s,0)+"px"},showAtCenter:function(){var e=r.getViewportRect();if(this.fullscreen){var t=this.getDom(),i=this.getDom("content");t.style.display="block";var n=UE.ui.uiUtils.getClientRect(t),a=UE.ui.uiUtils.getClientRect(i);t.style.left="-100000px",i.style.width=e.width-n.width+a.width+"px",i.style.height=e.height-n.height+a.height+"px",t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.left=0,this._originalContext={html:{overflowX:document.documentElement.style.overflowX,overflowY:document.documentElement.style.overflowY},body:{overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY}},document.documentElement.style.overflowX="hidden",document.documentElement.style.overflowY="hidden",document.body.style.overflowX="hidden",document.body.style.overflowY="hidden"}else{this.getDom().style.display="";var s=this.fitSize(),l=0|this.getDom("titlebar").offsetHeight,d=e.width/2-s.width/2,c=e.height/2-(s.height-l)/2-l,u=this.getDom();this.safeSetOffset({left:Math.max(0|d,0),top:Math.max(0|c,0)}),o.hasClass(u,"edui-state-centered")||(u.className+=" edui-state-centered")}this._show()},getContentHtml:function(){var e="";return"string"==typeof this.content?e=this.content:this.iframeUrl&&(e='<span id="'+this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>'),e},getHtmlTpl:function(){var e="";if(this.buttons){for(var t=[],i=0;i<this.buttons.length;i++)t[i]=this.buttons[i].renderHtml();e='<div class="%%-foot"><div id="##_buttons" class="%%-buttons">'+t.join("")+"</div></div>"}return'<div id="##" class="%%"><div '+(this.fullscreen?'class="%%-wrap edui-dialog-fullscreen-flag"':'class="%%"')+'><div id="##_body" class="%%-body"><div class="%%-shadow"></div><div id="##_titlebar" class="%%-titlebar"><div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);"><span class="%%-caption">'+(this.title||"")+"</span></div>"+this.closeButton.renderHtml()+'</div><div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"</div>"+e+"</div></div></div>"},postRender:function(){this.modalMask.getDom()||(this.modalMask.render(),this.modalMask.hide()),this.dragMask.getDom()||(this.dragMask.render(),this.dragMask.hide());var e=this;if(this.addListener("show",function(){e.modalMask.show(this.getDom().style.zIndex-2)}),this.addListener("hide",function(){e.modalMask.hide()}),this.buttons)for(var t=0;t<this.buttons.length;t++)this.buttons[t].postRender();o.on(window,"resize",function(){setTimeout(function(){e.isHidden()||e.safeSetOffset(r.getClientRect(e.getDom()))})}),this._hide()},mesureSize:function(){var e=this.getDom("body"),t=r.getClientRect(this.getDom("content")).width,i=e.style;return i.width=t,r.getClientRect(e)},_onTitlebarMouseDown:function(e){if(this.draggable){var t,i=(r.getViewportRect(),this);r.startDrag(e,{ondragstart:function(){t=r.getClientRect(i.getDom()),i.getDom("contmask").style.visibility="visible",i.dragMask.show(i.getDom().style.zIndex-1)},ondragmove:function(e,n){var o=t.left+e,r=t.top+n;i.safeSetOffset({left:o,top:r})},ondragstop:function(){i.getDom("contmask").style.visibility="hidden",o.removeClasses(i.getDom(),["edui-state-centered"]),i.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml(),this.fireEvent("dialogafterreset")},_show:function(){this._hidden&&(this.getDom().style.display="",this.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*this.editor.container.style.zIndex+10),this._hidden=!1,this.fireEvent("show"),baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4)},isHidden:function(){return this._hidden},_hide:function(){if(!this._hidden){var e=this.getDom();e.style.display="none",e.style.zIndex="",e.style.width="",e.style.height="",this._hidden=!0,this.fireEvent("hide")}},open:function(){if(this.autoReset)try{this.reset()}catch(e){this.render(),this.open()}if(this.showAtCenter(),this.iframeUrl)try{this.getDom("iframe").focus()}catch(t){}i=this},_onCloseButtonClick:function(){this.close(!1)},close:function(e){if(this.fireEvent("close",e)!==!1){this.fullscreen&&(document.documentElement.style.overflowX=this._originalContext.html.overflowX,document.documentElement.style.overflowY=this._originalContext.html.overflowY,document.body.style.overflowX=this._originalContext.body.overflowX,document.body.style.overflowY=this._originalContext.body.overflowY,delete this._originalContext),this._hide();var t=this.getDom("content"),i=this.getDom("iframe");if(t&&i){var n=i.contentDocument||i.contentWindow.document;n&&(n.body.innerHTML=""),o.remove(t)}}}},n.inherits(d,s)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.Menu,i=baidu.editor.ui.SplitButton,n=baidu.editor.ui.MenuButton=function(e){this.initOptions(e),this.initMenuButton()};n.prototype={initMenuButton:function(){var e=this;this.uiName="menubutton",this.popup=new t({items:e.items,className:e.className,editor:e.editor}),this.popup.addListener("show",function(){for(var t=this,i=0;i<t.items.length;i++)t.items[i].removeState("checked"),t.items[i].value==e._value&&(t.items[i].addState("checked"),this.value=e._value)}),this.initSplitButton()},setValue:function(e){this._value=e}},e.inherits(n,i)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.Popup,i=baidu.editor.ui.SplitButton,n=baidu.editor.ui.MultiMenuPop=function(e){this.initOptions(e),this.initMultiMenu()};n.prototype={initMultiMenu:function(){var e=this;this.popup=new t({content:"",editor:e.editor,iframe_rendered:!1,onshow:function(){this.iframe_rendered||(this.iframe_rendered=!0,this.getDom("content").innerHTML='<iframe id="'+e.id+'_iframe" src="'+e.iframeUrl+'" frameborder="0"></iframe>',e.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*e.editor.container.style.zIndex+1))}}),this.onbuttonclick=function(){this.showPopup()},this.initSplitButton()}},e.inherits(n,i)}(),function(){function e(e){var t=e.target||e.srcElement,i=a.findParent(t,function(e){return a.hasClass(e,"edui-shortcutmenu")||a.hasClass(e,"edui-popup")},!0);if(!i)for(var n,o=0;n=s[o++];)n.hide()}var t,i=baidu.editor.ui,n=i.UIBase,o=i.uiUtils,r=baidu.editor.utils,a=baidu.editor.dom.domUtils,s=[],l=!1,d=i.ShortCutMenu=function(e){this.initOptions(e),this.initShortCutMenu()};d.postHide=e,d.prototype={isHidden:!0,SPACE:5,initShortCutMenu:function(){this.items=this.items||[],this.initUIBase(),this.initItems(),this.initEvent(),s.push(this)},initEvent:function(){var e=this,i=e.editor.document;a.on(i,"mousemove",function(i){if(e.isHidden===!1){if(e.getSubMenuMark()||"contextmenu"==e.eventType)return;var n=!0,o=e.getDom(),r=o.offsetWidth,a=o.offsetHeight,s=r/2+e.SPACE,l=a/2,d=Math.abs(i.screenX-e.left),c=Math.abs(i.screenY-e.top);clearTimeout(t),t=setTimeout(function(){c>0&&l>c?e.setOpacity(o,"1"):c>l&&l+70>c?(e.setOpacity(o,"0.5"),n=!1):c>l+70&&l+140>c&&e.hide(),n&&d>0&&s>d?e.setOpacity(o,"1"):d>s&&s+70>d?e.setOpacity(o,"0.5"):d>s+70&&s+140>d&&e.hide()})}}),browser.chrome&&a.on(i,"mouseout",function(t){var i=t.relatedTarget||t.toElement;(null==i||"HTML"==i.tagName)&&e.hide()}),e.editor.addListener("afterhidepop",function(){e.isHidden||(l=!0)})},initItems:function(){if(r.isArray(this.items))for(var e=0,t=this.items.length;t>e;e++){var n=this.items[e].toLowerCase();i[n]&&(this.items[e]=new i[n](this.editor),this.items[e].className+=" edui-shortcutsubmenu ")}},setOpacity:function(e,t){browser.ie&&browser.version<9?e.style.filter="alpha(opacity = "+100*parseFloat(t)+");":e.style.opacity=t},getSubMenuMark:function(){l=!1;for(var e,t=o.getFixedLayer(),i=a.getElementsByTagName(t,"div",function(e){return a.hasClass(e,"edui-shortcutsubmenu edui-popup")}),n=0;e=i[n++];)"none"!=e.style.display&&(l=!0);return l},show:function(e,t){function i(e){e.left<0&&(e.left=0),e.top<0&&(e.top=0),l.style.cssText="position:absolute;left:"+e.left+"px;top:"+e.top+"px;"}function n(e){e.tagName||(e=e.getDom()),s.left=parseInt(e.style.left),s.top=parseInt(e.style.top),s.top-=l.offsetHeight+15,i(s)}var r=this,s={},l=this.getDom(),d=o.getFixedLayer();if(r.eventType=e.type,l.style.cssText="display:block;left:-9999px","contextmenu"==e.type&&t){var c=a.getElementsByTagName(d,"div","edui-contextmenu")[0];c?n(c):r.editor.addListener("aftershowcontextmenu",function(e,t){n(t)})}else s=o.getViewportOffsetByEvent(e),s.top-=l.offsetHeight+r.SPACE,s.left+=r.SPACE+20,i(s),r.setOpacity(l,.2);r.isHidden=!1,r.left=e.screenX+l.offsetWidth/2-r.SPACE,r.top=e.screenY-l.offsetHeight/2-r.SPACE,r.editor&&(l.style.zIndex=1*r.editor.container.style.zIndex+10,d.style.zIndex=l.style.zIndex-1)},hide:function(){this.getDom()&&(this.getDom().style.display="none"),this.isHidden=!0},postRender:function(){if(r.isArray(this.items))for(var e,t=0;e=this.items[t++];)e.postRender()},getHtmlTpl:function(){var e;if(r.isArray(this.items)){e=[];for(var t=0;t<this.items.length;t++)e[t]=this.items[t].renderHtml();e=e.join("")}else e=this.items;return'<div id="##" class="%% edui-toolbar" data-src="shortcutmenu" onmousedown="return false;" onselectstart="return false;" >'+e+"</div>"}},r.inherits(d,n),a.on(document,"mousedown",function(t){e(t)}),a.on(window,"scroll",function(t){e(t)})}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,i=baidu.editor.ui.Breakline=function(e){this.initOptions(e),this.initSeparator()};i.prototype={uiName:"Breakline",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return"<br/>"}},e.inherits(i,t)}(),function(){var e=baidu.editor.utils,t=baidu.editor.dom.domUtils,i=baidu.editor.ui.UIBase,n=baidu.editor.ui.Message=function(e){this.initOptions(e),this.initMessage()};n.prototype={initMessage:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-message %%"> <div id="##_closer" class="edui-message-closer"></div> <div id="##_body" class="edui-message-body edui-message-type-info"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-message-content">  </div> </div></div>'},reset:function(e){var t=this;e.keepshow||(clearTimeout(this.timer),t.timer=setTimeout(function(){t.hide()},e.timeout||4e3)),void 0!==e.content&&t.setContent(e.content),void 0!==e.type&&t.setType(e.type),t.show()},postRender:function(){var e=this,i=this.getDom("closer");i&&t.on(i,"click",function(){e.hide()})},setContent:function(e){this.getDom("content").innerHTML=e},setType:function(e){e=e||"info";var t=this.getDom("body");t.className=t.className.replace(/edui-message-type-[\w-]+/,"edui-message-type-"+e)},getContent:function(){return this.getDom("content").innerHTML},getType:function(){var e=this.getDom("body").match(/edui-message-type-([\w-]+)/);return e?e[1]:""},show:function(){this.getDom().style.display="block"},hide:function(){var e=this.getDom();e&&(e.style.display="none",e.parentNode&&e.parentNode.removeChild(e))}},e.inherits(n,i)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui,i=t.Dialog;t.buttons={},t.Dialog=function(e){var t=new i(e);return t.addListener("hide",function(){if(t.editor){var e=t.editor;try{if(browser.gecko){var i=e.window.scrollY,n=e.window.scrollX;e.body.focus(),e.window.scrollTo(n,i)}else e.focus()}catch(o){}}}),t};for(var n,o={anchor:"~/dialogs/anchor/anchor.html",insertimage:"~/dialogs/image/image.jsp",link:"~/dialogs/link/link.html",spechars:"~/dialogs/spechars/spechars.html",searchreplace:"~/dialogs/searchreplace/searchreplace.html",map:"~/dialogs/map/map.html",gmap:"~/dialogs/gmap/gmap.html",insertvideo:"~/dialogs/video/video.html",help:"~/dialogs/help/help.html",preview:"~/dialogs/preview/preview.html",emotion:"~/dialogs/emotion/emotion.html",wordimage:"~/dialogs/wordimage/wordimage.html",attachment:"~/dialogs/attachment/attachment.html",insertframe:"~/dialogs/insertframe/insertframe.html",edittip:"~/dialogs/table/edittip.html",edittable:"~/dialogs/table/edittable.html",edittd:"~/dialogs/table/edittd.html",webapp:"~/dialogs/webapp/webapp.html",snapscreen:"~/dialogs/snapscreen/snapscreen.html",scrawl:"~/dialogs/scrawl/scrawl.html",music:"~/dialogs/music/music.html",template:"~/dialogs/template/template.html",background:"~/dialogs/background/background.html",charts:"~/dialogs/charts/charts.html"},r=["undo","redo","formatmatch","bold","italic","underline","fontborder","touppercase","tolowercase","strikethrough","subscript","superscript","source","indent","outdent","blockquote","pasteplain","pagebreak","selectall","print","horizontal","removeformat","time","date","unlink","insertparagraphbeforetable","insertrow","insertcol","mergeright","mergedown","deleterow","deletecol","splittorows","splittocols","splittocells","mergecells","deletetable","drafts"],a=0;n=r[a++];)n=n.toLowerCase(),t[n]=function(e){return function(i){var n=new t.Button({className:"edui-for-"+e,title:i.options.labelMap[e]||i.getLang("labelMap."+e)||"",onclick:function(){i.execCommand(e)},theme:i.options.theme,showText:!1});return t.buttons[e]=n,i.addListener("selectionchange",function(t,o,r){var a=i.queryCommandState(e);-1==a?(n.setDisabled(!0),n.setChecked(!1)):r||(n.setDisabled(!1),n.setChecked(a))}),n}}(n);t.cleardoc=function(e){var i=new t.Button({className:"edui-for-cleardoc",title:e.options.labelMap.cleardoc||e.getLang("labelMap.cleardoc")||"",theme:e.options.theme,onclick:function(){confirm(e.getLang("confirmClear"),function(){e.execCommand("cleardoc")})}});return t.buttons.cleardoc=i,e.addListener("selectionchange",function(){i.setDisabled(-1==e.queryCommandState("cleardoc"))}),i};var s={justify:["left","right","center","justify"],imagefloat:["none","left","center","right"],directionality:["ltr","rtl"]};for(var l in s)!function(e,i){for(var n,o=0;n=i[o++];)!function(i){t[e.replace("float","")+i]=function(n){var o=new t.Button({className:"edui-for-"+e.replace("float","")+i,title:n.options.labelMap[e.replace("float","")+i]||n.getLang("labelMap."+e.replace("float","")+i)||"",theme:n.options.theme,onclick:function(){n.execCommand(e,i)}});return t.buttons[e]=o,n.addListener("selectionchange",function(t,r,a){o.setDisabled(-1==n.queryCommandState(e)),o.setChecked(n.queryCommandValue(e)==i&&!a)}),o}}(n)}(l,s[l]);for(var n,a=0;n=["backcolor","forecolor"][a++];)t[n]=function(e){return function(i){var n=new t.ColorButton({className:"edui-for-"+e,color:"default",title:i.options.labelMap[e]||i.getLang("labelMap."+e)||"",editor:i,onpickcolor:function(t,n){i.execCommand(e,n)},onpicknocolor:function(){i.execCommand(e,"default"),this.setColor("transparent"),this.color="default"},onbuttonclick:function(){i.execCommand(e,this.color)}});return t.buttons[e]=n,i.addListener("selectionchange",function(){n.setDisabled(-1==i.queryCommandState(e))}),n}}(n);var d={noOk:["searchreplace","help","spechars","webapp","preview"],ok:["attachment","anchor","link","insertimage","map","gmap","insertframe","wordimage","insertvideo","insertframe","edittip","edittable","edittd","scrawl","template","music","background","charts"]};for(var l in d)!function(i,n){for(var r,a=0;r=n[a++];)browser.opera&&"searchreplace"===r||!function(n){t[n]=function(r,a,s){a=a||(r.options.iframeUrlMap||{})[n]||o[n],s=r.options.labelMap[n]||r.getLang("labelMap."+n)||"";var l;a&&(l=new t.Dialog(e.extend({iframeUrl:r.ui.mapUrl(a),editor:r,className:"edui-for-"+n,title:s,holdScroll:"insertimage"===n,fullscreen:/charts|preview/.test(n),closeDialog:r.getLang("closeDialog")},"ok"==i?{buttons:[{className:"edui-okbutton",label:r.getLang("ok"),editor:r,onclick:function(){l.close(!0)}},{className:"edui-cancelbutton",label:r.getLang("cancel"),editor:r,onclick:function(){l.close(!1)}}]}:{})),r.ui._dialogs[n+"Dialog"]=l);var d=new t.Button({className:"edui-for-"+n,title:s,onclick:function(){if(l)switch(n){case"wordimage":var e=r.execCommand("wordimage");e&&e.length&&(l.render(),l.open());break;case"scrawl":-1!=r.queryCommandState("scrawl")&&(l.render(),l.open());break;default:l.render(),l.open()}},theme:r.options.theme,disabled:"scrawl"==n&&-1==r.queryCommandState("scrawl")||"charts"==n});return t.buttons[n]=d,r.addListener("selectionchange",function(){var e={edittable:1};if(!(n in e)){var t=r.queryCommandState(n);d.getDom()&&(d.setDisabled(-1==t),d.setChecked(t))}}),d}}(r.toLowerCase())}(l,d[l]);t.snapscreen=function(e,i,n){n=e.options.labelMap.snapscreen||e.getLang("labelMap.snapscreen")||"";var r=new t.Button({className:"edui-for-snapscreen",title:n,onclick:function(){e.execCommand("snapscreen")},theme:e.options.theme});if(t.buttons.snapscreen=r,i=i||(e.options.iframeUrlMap||{}).snapscreen||o.snapscreen){var a=new t.Dialog({iframeUrl:e.ui.mapUrl(i),editor:e,className:"edui-for-snapscreen",title:n,buttons:[{className:"edui-okbutton",label:e.getLang("ok"),editor:e,onclick:function(){a.close(!0)}},{className:"edui-cancelbutton",label:e.getLang("cancel"),editor:e,onclick:function(){a.close(!1)}}]});a.render(),e.ui._dialogs.snapscreenDialog=a}return e.addListener("selectionchange",function(){r.setDisabled(-1==e.queryCommandState("snapscreen"))}),r},t.insertcode=function(i,n,o){n=i.options.insertcode||[],o=i.options.labelMap.insertcode||i.getLang("labelMap.insertcode")||"";var r=[];e.each(n,function(e,t){r.push({label:e,value:t,theme:i.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" >'+(this.label||"")+"</div>"}})});var a=new t.Combox({editor:i,items:r,onselect:function(e,t){i.execCommand("insertcode",this.items[t].value)},onbuttonclick:function(){this.showPopup()},title:o,initValue:o,className:"edui-for-insertcode",indexByValue:function(e){if(e)for(var t,i=0;t=this.items[i];i++)if(-1!=t.value.indexOf(e))return i;return-1}});return t.buttons.insertcode=a,i.addListener("selectionchange",function(e,t,n){if(!n){var r=i.queryCommandState("insertcode");
if(-1==r)a.setDisabled(!0);else{a.setDisabled(!1);var s=i.queryCommandValue("insertcode");if(!s)return void a.setValue(o);s&&(s=s.replace(/['"]/g,"").split(",")[0]),a.setValue(s)}}}),a},t.fontfamily=function(i,n,o){if(n=i.options.fontfamily||[],o=i.options.labelMap.fontfamily||i.getLang("labelMap.fontfamily")||"",n.length){for(var r,a=0,s=[];r=n[a];a++){var l=i.getLang("fontfamily")[r.name]||"";!function(t,n){s.push({label:t,value:n,theme:i.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+e.unhtml(this.value)+'">'+(this.label||"")+"</div>"}})}(r.label||l,r.val)}var d=new t.Combox({editor:i,items:s,onselect:function(e,t){i.execCommand("FontFamily",this.items[t].value)},onbuttonclick:function(){this.showPopup()},title:o,initValue:o,className:"edui-for-fontfamily",indexByValue:function(e){if(e)for(var t,i=0;t=this.items[i];i++)if(-1!=t.value.indexOf(e))return i;return-1}});return t.buttons.fontfamily=d,i.addListener("selectionchange",function(e,t,n){if(!n){var o=i.queryCommandState("FontFamily");if(-1==o)d.setDisabled(!0);else{d.setDisabled(!1);var r=i.queryCommandValue("FontFamily");r&&(r=r.replace(/['"]/g,"").split(",")[0]),d.setValue(r)}}}),d}},t.fontsize=function(e,i,n){if(n=e.options.labelMap.fontsize||e.getLang("labelMap.fontsize")||"",i=i||e.options.fontsize||[],i.length){for(var o=[],r=0;r<i.length;r++){var a=i[r]+"px";o.push({label:a,value:a,theme:e.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"</div>"}})}var s=new t.Combox({editor:e,items:o,title:n,initValue:n,onselect:function(t,i){e.execCommand("FontSize",this.items[i].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"});return t.buttons.fontsize=s,e.addListener("selectionchange",function(t,i,n){if(!n){var o=e.queryCommandState("FontSize");-1==o?s.setDisabled(!0):(s.setDisabled(!1),s.setValue(e.queryCommandValue("FontSize")))}}),s}},t.paragraph=function(i,n,o){if(o=i.options.labelMap.paragraph||i.getLang("labelMap.paragraph")||"",n=i.options.paragraph||[],!e.isEmptyObject(n)){var r=[];for(var a in n)r.push({value:a,label:n[a]||i.getLang("paragraph")[a],theme:i.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||"")+"</span></div>"}});var s=new t.Combox({editor:i,items:r,title:o,initValue:o,className:"edui-for-paragraph",onselect:function(e,t){i.execCommand("Paragraph",this.items[t].value)},onbuttonclick:function(){this.showPopup()}});return t.buttons.paragraph=s,i.addListener("selectionchange",function(e,t,n){if(!n){var o=i.queryCommandState("Paragraph");if(-1==o)s.setDisabled(!0);else{s.setDisabled(!1);var r=i.queryCommandValue("Paragraph"),a=s.indexByValue(r);s.setValue(-1!=a?r:s.initValue)}}}),s}},t.customstyle=function(e){var i=e.options.customstyle||[],n=e.options.labelMap.customstyle||e.getLang("labelMap.customstyle")||"";if(i.length){for(var o,r=e.getLang("customstyle"),a=0,s=[];o=i[a++];)!function(t){var i={};i.label=t.label?t.label:r[t.name],i.style=t.style,i.className=t.className,i.tag=t.tag,s.push({label:i.label,value:i,theme:e.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><'+i.tag+" "+(i.className?' class="'+i.className+'"':"")+(i.style?' style="'+i.style+'"':"")+">"+i.label+"</"+i.tag+"></div>"}})}(o);var l=new t.Combox({editor:e,items:s,title:n,initValue:n,className:"edui-for-customstyle",onselect:function(t,i){e.execCommand("customstyle",this.items[i].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(e){for(var t,i=0;t=this.items[i++];)if(t.label==e)return i-1;return-1}});return t.buttons.customstyle=l,e.addListener("selectionchange",function(t,i,n){if(!n){var o=e.queryCommandState("customstyle");if(-1==o)l.setDisabled(!0);else{l.setDisabled(!1);var r=e.queryCommandValue("customstyle"),a=l.indexByValue(r);l.setValue(-1!=a?r:l.initValue)}}}),l}},t.inserttable=function(e,i,n){n=e.options.labelMap.inserttable||e.getLang("labelMap.inserttable")||"";var o=new t.TableButton({editor:e,title:n,className:"edui-for-inserttable",onpicktable:function(t,i,n){e.execCommand("InsertTable",{numRows:n,numCols:i,border:1})},onbuttonclick:function(){this.showPopup()}});return t.buttons.inserttable=o,e.addListener("selectionchange",function(){o.setDisabled(-1==e.queryCommandState("inserttable"))}),o},t.lineheight=function(e){var i=e.options.lineheight||[];if(i.length){for(var n,o=0,r=[];n=i[o++];)r.push({label:n,value:n,theme:e.options.theme,onclick:function(){e.execCommand("lineheight",this.value)}});var a=new t.MenuButton({editor:e,className:"edui-for-lineheight",title:e.options.labelMap.lineheight||e.getLang("labelMap.lineheight")||"",items:r,onbuttonclick:function(){var t=e.queryCommandValue("LineHeight")||this.value;e.execCommand("LineHeight",t)}});return t.buttons.lineheight=a,e.addListener("selectionchange",function(){var t=e.queryCommandState("LineHeight");if(-1==t)a.setDisabled(!0);else{a.setDisabled(!1);var i=e.queryCommandValue("LineHeight");i&&a.setValue((i+"").replace(/cm/,"")),a.setChecked(t)}}),a}};for(var c,u=["top","bottom"],m=0;c=u[m++];)!function(e){t["rowspacing"+e]=function(i){var n=i.options["rowspacing"+e]||[];if(!n.length)return null;for(var o,r=0,a=[];o=n[r++];)a.push({label:o,value:o,theme:i.options.theme,onclick:function(){i.execCommand("rowspacing",this.value,e)}});var s=new t.MenuButton({editor:i,className:"edui-for-rowspacing"+e,title:i.options.labelMap["rowspacing"+e]||i.getLang("labelMap.rowspacing"+e)||"",items:a,onbuttonclick:function(){var t=i.queryCommandValue("rowspacing",e)||this.value;i.execCommand("rowspacing",t,e)}});return t.buttons[e]=s,i.addListener("selectionchange",function(){var t=i.queryCommandState("rowspacing",e);if(-1==t)s.setDisabled(!0);else{s.setDisabled(!1);var n=i.queryCommandValue("rowspacing",e);n&&s.setValue((n+"").replace(/%/,"")),s.setChecked(t)}}),s}}(c);for(var f,h=["insertorderedlist","insertunorderedlist"],p=0;f=h[p++];)!function(e){t[e]=function(i){var n=i.options[e],o=function(){i.execCommand(e,this.value)},r=[];for(var a in n)r.push({label:n[a]||i.getLang()[e][a]||"",value:a,theme:i.options.theme,onclick:o});var s=new t.MenuButton({editor:i,className:"edui-for-"+e,title:i.getLang("labelMap."+e)||"",items:r,onbuttonclick:function(){var t=i.queryCommandValue(e)||this.value;i.execCommand(e,t)}});return t.buttons[e]=s,i.addListener("selectionchange",function(){var t=i.queryCommandState(e);if(-1==t)s.setDisabled(!0);else{s.setDisabled(!1);var n=i.queryCommandValue(e);s.setValue(n),s.setChecked(t)}}),s}}(f);t.fullscreen=function(e,i){i=e.options.labelMap.fullscreen||e.getLang("labelMap.fullscreen")||"";var n=new t.Button({className:"edui-for-fullscreen",title:i,theme:e.options.theme,onclick:function(){e.ui&&e.ui.setFullScreen(!e.ui.isFullScreen()),this.setChecked(e.ui.isFullScreen())}});return t.buttons.fullscreen=n,e.addListener("selectionchange",function(){var t=e.queryCommandState("fullscreen");n.setDisabled(-1==t),n.setChecked(e.ui.isFullScreen())}),n},t.emotion=function(e,i){var n="emotion",r=new t.MultiMenuPop({title:e.options.labelMap[n]||e.getLang("labelMap."+n)||"",editor:e,className:"edui-for-"+n,iframeUrl:e.ui.mapUrl(i||(e.options.iframeUrlMap||{})[n]||o[n])});return t.buttons[n]=r,e.addListener("selectionchange",function(){r.setDisabled(-1==e.queryCommandState(n))}),r},t.autotypeset=function(e){var i=new t.AutoTypeSetButton({editor:e,title:e.options.labelMap.autotypeset||e.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){e.execCommand("autotypeset")}});return t.buttons.autotypeset=i,e.addListener("selectionchange",function(){i.setDisabled(-1==e.queryCommandState("autotypeset"))}),i},t.simpleupload=function(e){var i="simpleupload",n=new t.Button({className:"edui-for-"+i,title:e.options.labelMap[i]||e.getLang("labelMap."+i)||"",onclick:function(){},theme:e.options.theme,showText:!1});return t.buttons[i]=n,e.addListener("ready",function(){var t=n.getDom("body"),i=t.children[0];e.fireEvent("simpleuploadbtnready",i)}),e.addListener("selectionchange",function(t,o,r){var a=e.queryCommandState(i);-1==a?(n.setDisabled(!0),n.setChecked(!1)):r||(n.setDisabled(!1),n.setChecked(a))}),n}}(),function(){function e(e){this.initOptions(e),this.initEditorUI()}var t=baidu.editor.utils,i=baidu.editor.ui.uiUtils,n=baidu.editor.ui.UIBase,o=baidu.editor.dom.domUtils,r=[];e.prototype={uiName:"editor",initEditorUI:function(){function e(e,t){e.setOpt({wordCount:!0,maximumWords:1e4,wordCountMsg:e.options.wordCountMsg||e.getLang("wordCountMsg"),wordOverFlowMsg:e.options.wordOverFlowMsg||e.getLang("wordOverFlowMsg")});var i=e.options,n=i.maximumWords,o=i.wordCountMsg,r=i.wordOverFlowMsg,a=t.getDom("wordcount");if(i.wordCount){var s=e.getContentLength(!0);s>n?(a.innerHTML=r,e.fireEvent("wordcountoverflow")):a.innerHTML=o.replace("{#leave}",n-s).replace("{#count}",s)}}this.editor.ui=this,this._dialogs={},this.initUIBase(),this._initToolbars();var t=this.editor,i=this;t.addListener("ready",function(){function n(){e(t,i),o.un(t.document,"click",arguments.callee)}t.getDialog=function(e){return t.ui._dialogs[e+"Dialog"]},o.on(t.window,"scroll",function(e){baidu.editor.ui.Popup.postHide(e)}),t.ui._actualFrameWidth=t.options.initialFrameWidth,UE.browser.ie&&6===UE.browser.version&&t.container.ownerDocument.execCommand("BackgroundImageCache",!1,!0),t.options.elementPathEnabled&&(t.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+t.getLang("elementPathTip")+":</div>"),t.options.wordCount&&(o.on(t.document,"click",n),t.ui.getDom("wordcount").innerHTML=t.getLang("wordCountTip")),t.ui._scale(),t.options.scaleEnabled?(t.autoHeightEnabled&&t.disableAutoHeight(),i.enableScale()):i.disableScale(),t.options.elementPathEnabled||t.options.wordCount||t.options.scaleEnabled||(t.ui.getDom("elementpath").style.display="none",t.ui.getDom("wordcount").style.display="none",t.ui.getDom("scale").style.display="none"),t.selection.isFocus()&&t.fireEvent("selectionchange",!1,!0)}),t.addListener("mousedown",function(e,t){var i=t.target||t.srcElement;baidu.editor.ui.Popup.postHide(t,i),baidu.editor.ui.ShortCutMenu.postHide(t)}),t.addListener("delcells",function(){UE.ui.edittip&&new UE.ui.edittip(t),t.getDialog("edittip").open()});var n,r,a=!1;t.addListener("afterpaste",function(){t.queryCommandState("pasteplain")||(baidu.editor.ui.PastePicker&&(n=new baidu.editor.ui.Popup({content:new baidu.editor.ui.PastePicker({editor:t}),editor:t,className:"edui-wordpastepop"}),n.render()),a=!0)}),t.addListener("afterinserthtml",function(){clearTimeout(r),r=setTimeout(function(){if(n&&(a||t.ui._isTransfer)){if(n.isHidden()){var e=o.createElement(t.document,"span",{style:"line-height:0px;",innerHTML:""}),i=t.selection.getRange();i.insertNode(e);var r=getDomNode(e,"firstChild","previousSibling");r&&n.showAnchor(3==r.nodeType?r.parentNode:r),o.remove(e)}else n.show();delete t.ui._isTransfer,a=!1}},200)}),t.addListener("contextmenu",function(e,t){baidu.editor.ui.Popup.postHide(t)}),t.addListener("keydown",function(e,t){n&&n.dispose(t);var i=t.keyCode||t.which;t.altKey&&90==i&&UE.ui.buttons.fullscreen.onclick()}),t.addListener("wordcount",function(){e(this,i)}),t.addListener("selectionchange",function(){t.options.elementPathEnabled&&i[(-1==t.queryCommandState("elementpath")?"dis":"en")+"ableElementPath"](),t.options.scaleEnabled&&i[(-1==t.queryCommandState("scale")?"dis":"en")+"ableScale"]()});var s=new baidu.editor.ui.Popup({editor:t,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide(),t.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(e){this.hide(),t.ui._dialogs[e]&&t.ui._dialogs[e].open()},_onImgSetFloat:function(e){this.hide(),t.execCommand("imagefloat",e)},_setIframeAlign:function(e){var t=s.anchorEl,i=t.cloneNode(!0);switch(e){case-2:i.setAttribute("align","");break;case-1:i.setAttribute("align","left");break;case 1:i.setAttribute("align","right")}t.parentNode.insertBefore(i,t),o.remove(t),s.anchorEl=i,s.showAnchor(s.anchorEl)},_updateIframe:function(){var e=t._iframe=s.anchorEl;o.hasClass(e,"ueditor_baidumap")?(t.selection.getRange().selectNode(e).select(),t.ui._dialogs.mapDialog.open(),s.hide()):(t.ui._dialogs.insertframeDialog.open(),s.hide())},_onRemoveButtonClick:function(e){t.execCommand(e),this.hide()},queryAutoHide:function(e){return e&&e.ownerDocument==t.document&&("img"==e.tagName.toLowerCase()||o.findParentByTagName(e,"a",!0))?e!==s.anchorEl:baidu.editor.ui.Popup.prototype.queryAutoHide.call(this,e)}});s.render(),t.options.imagePopup&&(t.addListener("mouseover",function(e,i){i=i||window.event;var n=i.target||i.srcElement;if(t.ui._dialogs.insertframeDialog&&/iframe/gi.test(n.tagName)){var o=s.formatHtml("<nobr>"+t.getLang("property")+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+t.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+t.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+t.getLang("justifyright")+'</span>&nbsp;&nbsp; <span onclick="$$._updateIframe( this);" class="edui-clickable">'+t.getLang("modify")+"</span></nobr>");o?(s.getDom("content").innerHTML=o,s.anchorEl=n,s.showAnchor(s.anchorEl)):s.hide()}}),t.addListener("selectionchange",function(e,i){if(i){var n="",r="",a=t.selection.getRange().getClosedNode(),l=t.ui._dialogs;if(a&&"IMG"==a.tagName){var d="insertimageDialog";if((-1!=a.className.indexOf("edui-faked-video")||-1!=a.className.indexOf("edui-upload-video"))&&(d="insertvideoDialog"),-1!=a.className.indexOf("edui-faked-webapp")&&(d="webappDialog"),-1!=a.src.indexOf("http://api.map.baidu.com")&&(d="mapDialog"),-1!=a.className.indexOf("edui-faked-music")&&(d="musicDialog"),-1!=a.src.indexOf("http://maps.google.com/maps/api/staticmap")&&(d="gmapDialog"),a.getAttribute("anchorname")&&(d="anchorDialog",n=s.formatHtml("<nobr>"+t.getLang("property")+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+t.getLang("modify")+"</span>&nbsp;&nbsp;<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+t.getLang("delete")+"</span></nobr>")),a.getAttribute("word_img")&&(t.word_img=[a.getAttribute("word_img")],d="wordimageDialog"),(o.hasClass(a,"loadingclass")||o.hasClass(a,"loaderrorclass"))&&(d=""),!l[d])return;r="<nobr>"+t.getLang("property")+': <span onclick=$$._onImgSetFloat("none") class="edui-clickable">'+t.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("left") class="edui-clickable">'+t.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("right") class="edui-clickable">'+t.getLang("justifyright")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("center") class="edui-clickable">'+t.getLang("justifycenter")+"</span>&nbsp;&nbsp;<span onclick=\"$$._onImgEditButtonClick('"+d+'\');" class="edui-clickable">'+t.getLang("modify")+"</span></nobr>",!n&&(n=s.formatHtml(r))}if(t.ui._dialogs.linkDialog){var c,u=t.queryCommandValue("link");if(u&&(c=u.getAttribute("_href")||u.getAttribute("href",2))){var m=c;c.length>30&&(m=c.substring(0,20)+"..."),n&&(n+='<div style="height:5px;"></div>'),n+=s.formatHtml("<nobr>"+t.getLang("anthorMsg")+': <a target="_blank" href="'+c+'" title="'+c+'" >'+m+'</a> <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+t.getLang("modify")+'</span> <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+t.getLang("clear")+"</span></nobr>"),s.showAnchor(u)}}n?(s.getDom("content").innerHTML=n,s.anchorEl=a||u,s.showAnchor(s.anchorEl)):s.hide()}}))},_initToolbars:function(){for(var e=this.editor,i=this.toolbars||[],n=[],o=0;o<i.length;o++){for(var r=i[o],a=new baidu.editor.ui.Toolbar({theme:e.options.theme}),s=0;s<r.length;s++){var l=r[s],d=null;if("string"==typeof l){if(l=l.toLowerCase(),"|"==l&&(l="Separator"),"||"==l&&(l="Breakline"),baidu.editor.ui[l]&&(d=new baidu.editor.ui[l](e)),"fullscreen"==l){n&&n[0]?n[0].items.splice(0,0,d):d&&a.items.splice(0,0,d);continue}}else d=l;d&&d.id&&a.add(d)}n[o]=a}t.each(UE._customizeUI,function(t,i){var n,o;return t.id&&t.id!=e.key?!1:(n=t.execFn.call(e,e,i),void(n&&(o=t.index,void 0===o&&(o=a.items.length),a.add(n,o))))}),this.toolbars=n},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;"><div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang("clickToUpload")+'</div><div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div><div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div><div style="height:0;overflow:hidden;clear:both;"></div></div><div id="##_message_holder" class="%%-messageholder"></div></div><div id="##_iframeholder" class="%%-iframeholder"></div><div id="##_bottombar" class="%%-bottomContainer"><table><tr><td id="##_elementpath" class="%%-bottombar"></td><td id="##_wordcount" class="%%-wordcount"></td><td id="##_scale" class="%%-scale"><div class="%%-icon"></div></td></tr></table></div><div id="##_scalelayer"></div></div>'},showWordImageDialog:function(){this._dialogs.wordimageDialog.open()},renderToolbarBoxHtml:function(){for(var e=[],t=0;t<this.toolbars.length;t++)e.push(this.toolbars[t].renderHtml());return e.join("")},setFullScreen:function(e){var t=this.editor,i=t.container.parentNode.parentNode;if(this._fullscreen!=e){if(this._fullscreen=e,this.editor.fireEvent("beforefullscreenchange",e),baidu.editor.browser.gecko)var n=t.selection.getRange().createBookmark();if(e){for(;"BODY"!=i.tagName;){var o=baidu.editor.dom.domUtils.getComputedStyle(i,"position");r.push(o),i.style.position="static",i=i.parentNode}this._bakHtmlOverflow=document.documentElement.style.overflow,this._bakBodyOverflow=document.body.style.overflow,this._bakAutoHeight=this.editor.autoHeightEnabled,this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop),this._bakEditorContaninerWidth=t.iframe.parentNode.offsetWidth,this._bakAutoHeight&&(t.autoHeightEnabled=!1,this.editor.disableAutoHeight()),document.documentElement.style.overflow="hidden",window.scrollTo(0,window.scrollY),this._bakCssText=this.getDom().style.cssText,this._bakCssText1=this.getDom("iframeholder").style.cssText,t.iframe.parentNode.style.width="",this._updateFullScreen()}else{for(;"BODY"!=i.tagName;)i.style.position=r.shift(),i=i.parentNode;this.getDom().style.cssText=this._bakCssText,this.getDom("iframeholder").style.cssText=this._bakCssText1,this._bakAutoHeight&&(t.autoHeightEnabled=!0,this.editor.enableAutoHeight()),document.documentElement.style.overflow=this._bakHtmlOverflow,document.body.style.overflow=this._bakBodyOverflow,t.iframe.parentNode.style.width=this._bakEditorContaninerWidth+"px",window.scrollTo(0,this._bakScrollTop)}if(browser.gecko&&"true"===t.body.contentEditable){var a=document.createElement("input");document.body.appendChild(a),t.body.contentEditable=!1,setTimeout(function(){a.focus(),setTimeout(function(){t.body.contentEditable=!0,t.fireEvent("fullscreenchanged",e),t.selection.getRange().moveToBookmark(n).select(!0),baidu.editor.dom.domUtils.remove(a),e&&window.scroll(0,0)},0)},0)}"true"===t.body.contentEditable&&(this.editor.fireEvent("fullscreenchanged",e),this.triggerLayout())}},_updateFullScreen:function(){if(this._fullscreen){var e=i.getViewportRect();if(this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+e.width+"px;height:"+e.height+"px;z-index:"+(1*this.getDom().style.zIndex+100),i.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0}),this.editor.setHeight(e.height-this.getDom("toolbarbox").offsetHeight-this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0),!0),browser.gecko)try{window.onresize()}catch(t){}}},_updateElementPath:function(){var e,t=this.getDom("elementpath");if(this.elementPathEnabled&&(e=this.editor.queryCommandValue("elementpath"))){for(var i,n=[],o=0;i=e[o];o++)n[o]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+o+'&quot;);">'+i+"</span>");t.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+n.join(" &gt; ")+"</div>"}else t.style.display="none"},disableElementPath:function(){var e=this.getDom("elementpath");e.innerHTML="",e.style.display="none",this.elementPathEnabled=!1},enableElementPath:function(){var e=this.getDom("elementpath");e.style.display="",this.elementPathEnabled=!0,this._updateElementPath()},_scale:function(){function e(){h=o.getXY(s),p||(p=a.options.minFrameHeight+d.offsetHeight+c.offsetHeight),m.style.cssText="position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:"+s.offsetWidth+"px;height:"+s.offsetHeight+"px;z-index:"+(a.options.zIndex+1),o.on(r,"mousemove",t),o.on(l,"mouseup",i),o.on(r,"mouseup",i)}function t(e){n();var t=e||window.event;v=t.pageX||r.documentElement.scrollLeft+t.clientX,b=t.pageY||r.documentElement.scrollTop+t.clientY,y=v-h.x,C=b-h.y,y>=g&&(f=!0,m.style.width=y+"px"),C>=p&&(f=!0,m.style.height=C+"px")}function i(){f&&(f=!1,a.ui._actualFrameWidth=m.offsetWidth-2,s.style.width=a.ui._actualFrameWidth+"px",a.setHeight(m.offsetHeight-c.offsetHeight-d.offsetHeight-2,!0)),m&&(m.style.display="none"),n(),o.un(r,"mousemove",t),o.un(l,"mouseup",i),o.un(r,"mouseup",i)}function n(){browser.ie?r.selection.clear():window.getSelection().removeAllRanges()}var r=document,a=this.editor,s=a.container,l=a.document,d=this.getDom("toolbarbox"),c=this.getDom("bottombar"),u=this.getDom("scale"),m=this.getDom("scalelayer"),f=!1,h=null,p=0,g=a.options.minFrameWidth,v=0,b=0,y=0,C=0,N=this;this.editor.addListener("fullscreenchanged",function(e,t){if(t)N.disableScale();else if(N.editor.options.scaleEnabled){N.enableScale();var i=N.editor.document.createElement("span");N.editor.body.appendChild(i),N.editor.body.style.height=Math.max(o.getXY(i).y,N.editor.iframe.offsetHeight-20)+"px",o.remove(i)}}),this.enableScale=function(){1!=a.queryCommandState("source")&&(u.style.display="",this.scaleEnabled=!0,o.on(u,"mousedown",e))},this.disableScale=function(){u.style.display="none",this.scaleEnabled=!1,o.un(u,"mousedown",e)}},isFullScreen:function(){return this._fullscreen},postRender:function(){n.prototype.postRender.call(this);for(var e=0;e<this.toolbars.length;e++)this.toolbars[e].postRender();var t,i=this,o=baidu.editor.dom.domUtils,r=function(){clearTimeout(t),t=setTimeout(function(){i._updateFullScreen()})};o.on(window,"resize",r),i.addListener("destroy",function(){o.un(window,"resize",r),clearTimeout(t)})},showToolbarMsg:function(e,t){if(this.getDom("toolbarmsg_label").innerHTML=e,this.getDom("toolbarmsg").style.display="",!t){var i=this.getDom("upload_dialog");i.style.display="none"}},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(e){return e?e.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var e=this.getDom();e.style.zoom="1"==e.style.zoom?"100%":"1"}},t.inherits(e,baidu.editor.ui.UIBase);var a={};UE.ui.Editor=function(i){var n=new UE.Editor(i);n.options.editor=n,t.loadFile(document,{href:n.options.themePath+n.options.theme+"/css/ueditor.css",tag:"link",type:"text/css",rel:"stylesheet"});var r=n.render;return n.render=function(i){i.constructor===String&&(n.key=i,a[i]=n),t.domReady(function(){function t(){if(n.setOpt({labelMap:n.options.labelMap||n.getLang("labelMap")}),new e(n.options),i&&(i.constructor===String&&(i=document.getElementById(i)),i&&i.getAttribute("name")&&(n.options.textarea=i.getAttribute("name")),i&&/script|textarea/gi.test(i.tagName))){var t=document.createElement("div");i.parentNode.insertBefore(t,i);var a=i.value||i.innerHTML;n.options.initialContent=/^[\t\r\n ]*$/.test(a)?n.options.initialContent:a.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><"),i.className&&(t.className=i.className),i.style.cssText&&(t.style.cssText=i.style.cssText),/textarea/i.test(i.tagName)?(n.textarea=i,n.textarea.style.display="none"):i.parentNode.removeChild(i),i.id&&(t.id=i.id,o.removeAttributes(i,"id")),i=t,i.innerHTML=""}o.addClass(i,"edui-"+n.options.theme),n.ui.render(i);var s=n.options;n.container=n.ui.getDom();for(var l,d=o.findParents(i,!0),c=[],u=0;l=d[u];u++)c[u]=l.style.display,l.style.display="block";if(s.initialFrameWidth)s.minFrameWidth=s.initialFrameWidth;else{s.minFrameWidth=s.initialFrameWidth=i.offsetWidth;var m=i.style.width;/%$/.test(m)&&(s.initialFrameWidth=m)}s.initialFrameHeight?s.minFrameHeight=s.initialFrameHeight:s.initialFrameHeight=s.minFrameHeight=i.offsetHeight;for(var l,u=0;l=d[u];u++)l.style.display=c[u];i.style.height&&(i.style.height=""),n.container.style.width=s.initialFrameWidth+(/%$/.test(s.initialFrameWidth)?"":"px"),n.container.style.zIndex=s.zIndex,r.call(n,n.ui.getDom("iframeholder")),n.fireEvent("afteruiready")}n.langIsReady?t():n.addListener("langReady",t)})},n},UE.getEditor=function(e,t){var i=a[e];return i||(i=a[e]=new UE.ui.Editor(t),i.render(e)),i},UE.delEditor=function(e){var t;(t=a[e])&&(t.key&&t.destroy(),delete a[e])},UE.registerUI=function(e,i,n,o){t.each(e.split(/\s+/),function(e){UE._customizeUI[e]={id:o,execFn:i,index:n}})}}(),UE.registerUI("message",function(e){function t(){var e=a.ui.getDom("toolbarbox");e&&(i.style.top=e.offsetHeight+3+"px"),i.style.zIndex=Math.max(a.options.zIndex,a.iframe.style.zIndex)+1}var i,n=baidu.editor.ui,o=n.Message,r=[],a=e;a.addListener("ready",function(){i=document.getElementById(a.ui.id+"_message_holder"),t(),setTimeout(function(){t()},500)}),a.addListener("showmessage",function(e,n){n=utils.isString(n)?{content:n}:n;var s=new o({timeout:n.timeout,type:n.type,content:n.content,keepshow:n.keepshow,editor:a}),l=n.id||"msg_"+(+new Date).toString(36);return s.render(i),r[l]=s,s.reset(n),t(),l}),a.addListener("updatemessage",function(e,t,n){n=utils.isString(n)?{content:n}:n;var o=r[t];o.render(i),o&&o.reset(n)}),a.addListener("hidemessage",function(e,t){var i=r[t];i&&i.hide()})}),UE.registerUI("autosave",function(e){var t=null,i=null;e.on("afterautosave",function(){clearTimeout(t),t=setTimeout(function(){i&&e.trigger("hidemessage",i),i=e.trigger("showmessage",{content:e.getLang("autosave.success"),timeout:2e3})},2e3)})})}();
;///platform/component/ueditor/lang/zh-cn/zh-cn.js
UE.I18N["zh-cn"]={labelMap:{anchor:"",undo:"",redo:"",bold:"",indent:"",snapscreen:"",italic:"",underline:"",strikethrough:"",subscript:"",fontborder:"",superscript:"",formatmatch:"",source:"",blockquote:"",pasteplain:"",selectall:"",print:"",preview:"",horizontal:"",removeformat:"",time:"",date:"",unlink:"",insertrow:"",insertcol:"",mergeright:"",mergedown:"",deleterow:"",deletecol:"",splittorows:"",splittocols:"",splittocells:"",deletecaption:"",inserttitle:"",mergecells:"",deletetable:"",cleardoc:"",insertparagraphbeforetable:"",insertcode:"",fontfamily:"",fontsize:"",paragraph:"",simpleupload:"",insertimage:"",edittable:"",edittd:"",link:"",emotion:"",spechars:"",searchreplace:"",map:"Baidu",gmap:"Google",insertvideo:"",help:"",justifyleft:"",justifyright:"",justifycenter:"",justifyjustify:"",forecolor:"",backcolor:"",insertorderedlist:"",insertunorderedlist:"",fullscreen:"",directionalityltr:"",directionalityrtl:"",rowspacingtop:"",rowspacingbottom:"",pagebreak:"",insertframe:"Iframe",imagenone:"",imageleft:"",imageright:"",attachment:"",imagecenter:"",wordimage:"",lineheight:"",edittip:"",customstyle:"",autotypeset:"",webapp:"",touppercase:"",tolowercase:"",background:"",template:"",scrawl:"",music:"",inserttable:"",drafts:"",charts:""},insertorderedlist:{num:"1,2,3...",num1:"1),2),3)...",num2:"(1),(2),(3)...",cn:",,....",cn1:"),),)....",cn2:"(),(),()....",decimal:"1,2,3...","lower-alpha":"a,b,c...","lower-roman":"i,ii,iii...","upper-alpha":"A,B,C...","upper-roman":"I,II,III..."},insertunorderedlist:{circle:" ",disc:" ",square:"  ",dash:" ",dot:"  "},paragraph:{p:"",h1:" 1",h2:" 2",h3:" 3",h4:" 4",h5:" 5",h6:" 6"},fontfamily:{songti:"",kaiti:"",heiti:"",lishu:"",yahei:"",andaleMono:"andale mono",arial:"arial",arialBlack:"arial black",comicSansMs:"comic sans ms",impact:"impact",timesNewRoman:"times new roman"},customstyle:{tc:"",tl:"",im:"",hi:""},autoupload:{exceedSizeError:"",exceedTypeError:"",jsonEncodeError:"",loading:"...",loadError:"",errorLoadConfig:""},simpleupload:{exceedSizeError:"",exceedTypeError:"",jsonEncodeError:"",loading:"...",loadError:"",errorLoadConfig:""},elementPathTip:"",wordCountTip:"",wordCountMsg:"{#count}, {#leave} ",wordOverFlowMsg:'<span style="color:red;"></span>',ok:"",cancel:"",closeDialog:"",tableDrag:"uiUtils.js",autofloatMsg:"UIUI!",loadconfigError:"",loadconfigFormatError:"",loadconfigHttpError:"http",snapScreen_plugin:{browserMsg:"IE",callBackErrorMsg:"",uploadErrorMsg:"! "},insertcode:{as3:"ActionScript 3",bash:"Bash/Shell",cpp:"C/C++",css:"CSS",cf:"ColdFusion","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"HTML",java:"Java",jfx:"JavaFX",js:"JavaScript",pl:"Perl",php:"PHP",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"SQL",vb:"Visual Basic",xml:"XML"},confirmClear:"",contextMenu:{"delete":"",selectall:"",deletecode:"",cleardoc:"",confirmclear:"",unlink:"",paragraph:"",edittable:"",aligntd:"",aligntable:"",tableleft:"",tablecenter:"",tableright:"",edittd:"",setbordervisible:"",justifyleft:"",justifyright:"",justifycenter:"",justifyjustify:"",table:"",inserttable:"",deletetable:"",insertparagraphbefore:"",insertparagraphafter:"",deleterow:"",deletecol:"",insertrow:"",insertcol:"",insertrownext:"",insertcolnext:"",insertcaption:"",deletecaption:"",inserttitle:"",deletetitle:"",inserttitlecol:"",deletetitlecol:"",averageDiseRow:"",averageDisCol:"",mergeright:"",mergeleft:"",mergedown:"",mergecells:"",splittocells:"",splittocols:"",splittorows:"",tablesort:"",enablesort:"",disablesort:"",reversecurrent:"",orderbyasc:"ASCII",reversebyasc:"ASCII",orderbynum:"",reversebynum:"",borderbk:"",setcolor:"",unsetcolor:"",setbackground:"",unsetbackground:"",redandblue:"",threecolorgradient:"",copy:"(Ctrl + c)",copymsg:", 'Ctrl + c'",paste:"(Ctrl + v)",pastemsg:", 'Ctrl + v'"},copymsg:", 'Ctrl + c'",pastemsg:", 'Ctrl + v'",anthorMsg:"",clearColor:"",standardColor:"",themeColor:"",property:"","default":"",modify:"",justifyleft:"",justifyright:"",justifycenter:"",justify:"",clear:"",anchorMsg:"","delete":"",clickToUpload:"",unset:"",t_row:"",t_col:"",more:"",pasteOpt:"",pasteSourceFormat:"",tagFormat:"",pasteTextFormat:"",autoTypeSet:{mergeLine:"",delLine:"",removeFormat:"",indent:"",alignment:"",imageFloat:"",removeFontsize:"",removeFontFamily:"",removeHtml:"HTML",pasteFilter:"",run:"",symbol:"",bdc2sb:"",tobdc:""},background:{"static":{lang_background_normal:"",lang_background_local:"",lang_background_set:"",lang_background_none:"",lang_background_colored:"",lang_background_color:"",lang_background_netimg:"",lang_background_align:"",lang_background_position:"",repeatType:{options:["","","","",""]}},noUploadImage:"",toggleSelect:"\n: "},insertimage:{"static":{lang_tab_remote:"",lang_tab_upload:"",lang_tab_online:"",lang_tab_search:"",lang_input_url:" ",lang_input_size:" ",lang_input_width:"",lang_input_height:"",lang_input_border:" ",lang_input_vhspace:" ",lang_input_title:" ",lang_input_align:"",lang_imgLoading:"",lang_start_upload:"",lock:{title:""},searchType:{title:"",options:["","","",""]},searchTxt:{value:""},searchBtn:{value:""},searchReset:{value:""},noneAlign:{title:""},leftAlign:{title:""},rightAlign:{title:""},centerAlign:{title:""}},uploadSelectFile:"",uploadAddFile:"",uploadStart:"",uploadPause:"",uploadContinue:"",uploadRetry:"",uploadDelete:"",uploadTurnLeft:"",uploadTurnRight:"",uploadPreview:"",uploadNoPreview:"",updateStatusReady:"__KB",updateStatusConfirm:"__",updateStatusFinish:"__KB_",updateStatusError:"_",errorNotSupport:"WebUploader IE flash ",errorLoadConfig:"",errorExceedSize:"",errorFileType:"",errorInterrupt:"",errorUploadRetry:"",errorHttp:"http",errorServerUpload:"",remoteLockError:",",numError:"123400",imageUrlError:"",imageLoadError:"",searchRemind:"",searchLoading:"",searchRetry:" :( "},attachment:{"static":{lang_tab_upload:"",lang_tab_online:"",lang_start_upload:"",lang_drop_remind:"100"},uploadSelectFile:"",uploadAddFile:"",uploadStart:"",uploadPause:"",uploadContinue:"",uploadRetry:"",uploadDelete:"",uploadTurnLeft:"",uploadTurnRight:"",uploadPreview:"",updateStatusReady:"__KB",updateStatusConfirm:"__",updateStatusFinish:"__KB_",updateStatusError:"_",errorNotSupport:"WebUploader IE flash ",errorLoadConfig:"",errorExceedSize:"",errorFileType:"",errorInterrupt:"",errorUploadRetry:"",errorHttp:"http",errorServerUpload:""},insertvideo:{"static":{lang_tab_insertV:"",lang_tab_searchV:"",lang_tab_uploadV:"",lang_video_url:"",lang_video_size:"",lang_videoW:"",lang_videoH:"",lang_alignment:"",videoSearchTxt:{value:""},videoType:{options:["","","","","","",""]},videoSearchBtn:{value:""},videoSearchReset:{value:""},lang_input_fileStatus:" ",startUpload:{style:"background:url(upload.png) no-repeat;"},lang_upload_size:"",lang_upload_width:"",lang_upload_height:"",lang_upload_alignment:"",lang_format_advice:"mp4."},numError:"123,400",floatLeft:"",floatRight:"",'"default"':"",block:"",urlError:"",loading:" &nbsp;",clickToSelect:"",goToSource:"",noVideo:" &nbsp; &nbsp;",browseFiles:"",uploadSuccess:"!",delSuccessFile:"",delFailSaveFile:"",statusPrompt:"  ",flashVersionError:"FlashFlashPlayer",flashLoadingError:"Flash!",fileUploadReady:"",delUploadQueue:"",limitPrompt1:"",limitPrompt2:"",delFailFile:"",fileSizeLimit:"",emptyFile:"",fileTypeError:"",unknownError:"",fileUploading:"",cancelUpload:"",netError:"",failUpload:"!",serverIOError:"IO",noAuthority:"",fileNumLimit:"",failCheck:"",fileCanceling:"",stopUploading:"",uploadSelectFile:"",uploadAddFile:"",uploadStart:"",uploadPause:"",uploadContinue:"",uploadRetry:"",uploadDelete:"",uploadTurnLeft:"",uploadTurnRight:"",uploadPreview:"",updateStatusReady:"__KB",updateStatusConfirm:"__",updateStatusFinish:"_(_KB)_",updateStatusError:"_",errorNotSupport:"WebUploader IE flash ",errorLoadConfig:"",errorExceedSize:"",errorFileType:"",errorInterrupt:"",errorUploadRetry:"",errorHttp:"http",errorServerUpload:""},webapp:{tip1:"APPAPPKey!",tip2:"ueditor.config.jsappkey! ",applyFor:"",anthorApi:"API"},template:{"static":{lang_template_bkcolor:"",lang_template_clear:"",lang_template_select:""},blank:"",blog:"",resume:"",richText:"",sciPapers:""},scrawl:{"static":{lang_input_previousStep:"",lang_input_nextsStep:"",lang_input_clear:"",lang_input_addPic:"",lang_input_ScalePic:"",lang_input_removePic:"",J_imgTxt:{title:""}},noScarwl:"~",scrawlUpLoading:",~",continueBtn:"",imageError:"",backgroundUploading:",~"},music:{"static":{lang_input_tips:"//",J_searchBtn:{value:""}},emptyTxt:"",chapter:"",singer:"",special:"",listenTest:""},anchor:{"static":{lang_input_anchorName:""}},charts:{"static":{lang_data_source:"",lang_chart_format:"",lang_data_align:"",lang_chart_align_same:"XY",lang_chart_align_reverse:"XY",lang_chart_title:"",lang_chart_main_title:"",lang_chart_sub_title:"",lang_chart_x_title:"X",lang_chart_y_title:"Y",lang_chart_tip:"",lang_cahrt_tip_prefix:"",lang_cahrt_tip_description:" ",lang_chart_data_unit:"",lang_chart_data_unit_title:"",lang_chart_data_unit_description:"   ",lang_chart_type:"",lang_prev_btn:"",lang_next_btn:""}},emotion:{"static":{lang_input_choice:"",lang_input_Tuzki:"",lang_input_BOBO:"BOBO",lang_input_lvdouwa:"",lang_input_babyCat:"baby",lang_input_bubble:"",lang_input_youa:""}},gmap:{"static":{lang_input_address:"",lang_input_search:"",address:{value:""}},searchError:"!"},help:{"static":{lang_input_about:"UEditor",lang_input_shortcuts:"",lang_input_introduction:"UEditorwebwebBSD",lang_Txt_shortcuts:"",lang_Txt_func:"",lang_Txt_bold:"",lang_Txt_copy:"",lang_Txt_cut:"",lang_Txt_Paste:"",lang_Txt_undo:"",lang_Txt_redo:"",lang_Txt_italic:"",lang_Txt_underline:"",lang_Txt_selectAll:"",lang_Txt_visualEnter:"",lang_Txt_fullscreen:""}},insertframe:{"static":{lang_input_address:"",lang_input_width:"",lang_input_height:"",lang_input_isScroll:"",lang_input_frameborder:"",lang_input_alignMode:"",align:{title:"",options:["","","",""]}},enterAddress:"!"},link:{"static":{lang_input_text:"",lang_input_url:"",lang_input_title:"",lang_input_target:""},validLink:"",httpPrompt:"httphttp://"},map:{"static":{lang_city:"",lang_address:"",city:{value:""},lang_search:"",lang_dynamicmap:""},cityMsg:"",errorMsg:""},searchreplace:{"static":{lang_tab_search:"",lang_tab_replace:"",lang_search1:"",lang_search2:"",lang_replace:"",lang_searchReg:"//",lang_searchReg1:"//",lang_case_sensitive1:"",lang_case_sensitive2:"",nextFindBtn:{value:""},preFindBtn:{value:""},nextReplaceBtn:{value:""},preReplaceBtn:{value:""},repalceBtn:{value:""},repalceAllBtn:{value:""}},getEnd:"",getStart:"",countMsg:"{#count}"},snapscreen:{"static":{lang_showMsg:"UEditor ",lang_download:"",lang_step1:"UEditor",lang_step2:""}},spechars:{"static":{},tsfh:"",lmsz:"",szfh:"",rwfh:"",xlzm:"",ewzm:"",pyzm:"",yyyb:"",zyzf:""},edittable:{"static":{lang_tableStyle:"",lang_insertCaption:"",lang_insertTitle:"",lang_insertTitleCol:"",lang_orderbycontent:"",lang_tableSize:"",lang_autoSizeContent:"",lang_autoSizePage:"",lang_example:"",lang_borderStyle:"",lang_color:":"},captionName:"",titleName:"",cellsName:"",errorMsg:""},edittip:{"static":{lang_delRow:"",lang_delCol:""}},edittd:{"static":{lang_tdBkColor:":"}},formula:{"static":{}},wordimage:{"static":{lang_resave:"",uploadBtn:{src:"upload.png",alt:""},clipboard:{style:"background: url(copy.png) -153px -1px no-repeat;"},lang_step:"12Ctrl+V3"},fileType:"",flashError:"FLASHFLASH",netError:"",copySuccess:"",flashI18n:{}},autosave:{saving:"...",success:""}};
;///platform/component/ueditor/jquery.ueditor.js
!function(e){e.hz.ueditor={init:function(t,o){var n=["undo","redo","|","bold","italic","underline","fontborder","strikethrough","superscript","subscript","removeformat","formatmatch","autotypeset","blockquote","pasteplain","|","forecolor","backcolor","insertorderedlist","insertunorderedlist","selectall","cleardoc","|","rowspacingtop","rowspacingbottom","lineheight","|","customstyle","paragraph","fontfamily","fontsize","|","directionalityltr","directionalityrtl","indent","|","justifyleft","justifycenter","justifyright","justifyjustify","|","touppercase","tolowercase","|","link","unlink","anchor","|","imagenone","imageleft","imageright","imagecenter","|","simpleupload","insertimage","insertframe","pagebreak","template","background","|","horizontal","date","time","spechars","wordimage","|","inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols","|","searchreplace","help"],i=["undo","redo","bold","italic","underline","strikeThrough"],r={toolbar:[],name:"",content:"",zIndex:UEDITOR_CONFIG.zIndex,wordCount:!1,autoHeightEnabled:!1,simpleEnabled:!1},a=e.extend(r,o),d=a.toolbar.length>0?a.toolbar:a.simpleEnabled?i:n,l=e("#"+t),s=500,c=l.attr("style");if(c&&-1!=c.indexOf("height")){var u=c.substring(c.indexOf("height:")+7);s=u.substring(0,u.indexOf("px")).trim()}a.name=""==a.name?l.attr("name"):a.name;var m=new UE.ui.Editor({toolbars:[d],elementPathEnabled:!1,textarea:a.name,autoHeightEnabled:a.autoHeightEnabled,wordCount:a.wordCount,zIndex:a.zIndex,minFrameHeight:s,initialContent:a.content});m.render(t),e("#"+t).data("ueditor",m),e("#"+t).data("ueditor_option",a)},sync:function(t,o){var n=e("#"+t),i=n.data("ueditor");if(i.sync(),o){var r=n.data("ueditor_option");e("textarea[name="+r.name+"]").attr("name",o),r.name=o}},reset:function(t){e("#"+t).data("ueditor").reset()},getContent:function(t){return e("#"+t).data("ueditor").getContent()},setContent:function(t,o){e("#"+t).data("ueditor").setContent(o)},enable:function(t){e("#"+t).data("ueditor").enable()},disable:function(t){e("#"+t).data("ueditor").disable()},show:function(t){e("#"+t).data("ueditor").show()},hide:function(t){e("#"+t).data("ueditor").hide()},view:function(t,o,n,i){var r='<iframe src="javascript:void(0)" onload="$.hz.ueditor.setUEditorViewIFrameHeight(\'{domId}\',\'{id}fr\')" id="{id}fr" width="95%" height="1px" frameborder=0 class=\'{cssClass}\' style=\'{cssStyle}\'></iframe>',a=com.ue.common.uuid(),d=e.nano(r,{domId:t,id:a,cssClass:n,cssStyle:i});this.html(d);var l=e("#"+a+"fr")[0];l.contentDocument.write(o),l.contentDocument.close();var s=l.contentDocument||l.contentWindow.document,c=s.getElementsByTagName("head")[0],u=s.createElement("style");u.type="text/css";var m=".selectTdClass{background-color:#3399FF !important}";m+="table{clear:both;margin-bottom:10px;border-collapse:collapse;word-break:break-all;}",m+=".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}",m+=".view{padding:0;word-wrap:break-word;word-break:break-all;cursor:text;height:100%;}",m+="li{clear:both}p{margin:5px 0;}",m+="body{word-wrap:break-word;}",u.styleSheet?u.styleSheet.cssText=m:u.innerHTML=m,c.appendChild(u);var h=Math.max(l.contentWindow.window.document.documentElement.scrollHeight,l.contentWindow.window.document.body.scrollHeight);l.height=h+20,setTimeout(function(){h=Math.max(l.contentWindow.window.document.documentElement.scrollHeight,l.contentWindow.window.document.body.scrollHeight),l.height=h+20},2)},setUEditorViewIFrameHeight:function(t,o){var n=e("#"+o)[0];setTimeout(function(){var e=Math.max(n.contentWindow.window.document.documentElement.scrollHeight,n.contentWindow.window.document.body.scrollHeight);n.height=e},2)}}}(jQuery);
;///platform/component/validate/jquery.validate.js
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=t.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){i.settings.submitHandler&&(i.submitButton=e.target),t(e.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(e){function s(){var s,r;return i.settings.submitHandler?(i.submitButton&&(s=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)),r=i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&s.remove(),void 0!==r?r:!1):!0}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,s()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):s():(i.focusInvalid(),!1)})),i)},valid:function(){var e,i;return t(this[0]).is("form")?e=this.validate().form():(e=!0,i=t(this[0].form).validate(),this.each(function(){e=i.element(this)&&e})),e},removeAttrs:function(e){var i={},s=this;return t.each(e.split(/\s/),function(t,e){i[e]=s.attr(e),s.removeAttr(e)}),i},rules:function(e,i){var s,r,n,a,o,u,l=this[0];if(e)switch(s=t.data(l.form,"validator").settings,r=s.rules,n=t.validator.staticRules(l),e){case"add":t.extend(n,t.validator.normalizeRule(i)),delete n.messages,r[l.name]=n,i.messages&&(s.messages[l.name]=t.extend(s.messages[l.name],i.messages));break;case"remove":return i?(u={},t.each(i.split(/\s/),function(e,i){u[i]=n[i],delete n[i],"required"===i&&t(l).removeAttr("aria-required")}),u):(delete r[l.name],n)}return a=t.validator.normalizeRules(t.extend({},t.validator.classRules(l),t.validator.attributeRules(l),t.validator.dataRules(l),t.validator.staticRules(l)),l),a.required&&(o=a.required,delete a.required,a=t.extend({required:o},a),t(l).attr("aria-required","true")),a.remote&&(o=a.remote,delete a.remote,a=t.extend(a,{remote:o})),a}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return i})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,s){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(s):t(e).addClass(i).removeClass(s)},unhighlight:function(e,i,s){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(s):t(e).removeClass(i).addClass(s)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var i=t.data(this[0].form,"validator"),s="on"+e.type.replace(/^validate/,""),r=i.settings;r[s]&&!this.is(r.ignore)&&r[s].call(i,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,s=this.groups={};t.each(this.settings.groups,function(e,i){"string"==typeof i&&(i=i.split(/\s/)),t.each(i,function(t,i){s[i]=e})}),i=this.settings.rules,t.each(i,function(e,s){i[e]=t.validator.normalizeRule(s)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",e).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),t(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var i=this.clean(e),s=this.validationTargetFor(i),r=!0;return this.lastElement=s,void 0===s?delete this.invalid[i.name]:(this.prepareElement(s),this.currentElements=t(s),r=this.check(s)!==!1,r?delete this.invalid[s.name]:this.invalid[s.name]=!0),t(e).attr("aria-invalid",!r),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),r},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var i in e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,i=0;for(e in t)i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!e.objectLength(t(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i,s=t(e),r=e.type;return"radio"===r||"checkbox"===r?t("input[name='"+e.name+"']:checked").val():"number"===r&&"undefined"!=typeof e.validity?e.validity.badInput?!1:s.val():(i=s.val(),"string"==typeof i?i.replace(/\r/g,""):i)},check:function(e){e=this.validationTargetFor(this.clean(e));var i,s,r,n=t(e).rules(),a=t.map(n,function(t,e){return e}).length,o=!1,u=this.elementValue(e);for(s in n){r={method:s,parameters:n[s]};try{if(i=t.validator.methods[s].call(this,u,e,r.parameters),"dependency-mismatch"===i&&1===a){o=!0;continue}if(o=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!i)return this.formatAndAdd(e,r),!1}catch(l){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+r.method+"' method.",l),l}}if(!o)return this.objectLength(n)&&this.successList.push(e),!0},customDataMessage:function(e,i){return t(e).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t];return void 0},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customDataMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,i){var s=this.defaultMessage(e,i.method),r=/\$?\{(\d+)\}/g;"function"==typeof s?s=s.call(this,i.parameters,e):r.test(s)&&(s=t.validator.format(s.replace(r,"{$1}"),i.parameters)),this.errorList.push({message:s,element:e,method:i.method}),this.errorMap[e.name]=s,this.submitted[e.name]=s},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,i;for(t=0;this.errorList[t];t++)i=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showPrompt:function(t,e,i,s){this.settings.showPrompt&&this.settings.showPrompt(t,e,i,s)},showLabel:function(e,i){var s,r,n,a=this.errorsFor(e),o=this.idOrName(e),u=t(e).attr("aria-describedby");a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.html(i)):(a=t("<"+this.settings.errorElement+">").attr("id",o+"-error").addClass(this.settings.errorClass).html(i||""),s=a,this.settings.wrapper&&(s=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(s):this.settings.errorPlacement?this.settings.errorPlacement(s,t(e)):s.insertAfter(e),a.is("label")?a.attr("for",o):0===a.parents("label[for='"+o+"']").length&&(n=a.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),u?u.match(new RegExp("\\b"+n+"\\b"))||(u+=" "+n):u=n,t(e).attr("aria-describedby",u),r=this.groups[e.name],r&&t.each(this.groups,function(e,i){i===r&&t("[name='"+e+"']",this.currentForm).attr("aria-describedby",a.attr("id"))}))),!i&&this.settings.success&&(a.text(""),"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,e)),this.toShow=this.toShow.add(a)},errorsFor:function(e){var i=this.idOrName(e),s=t(e).attr("aria-describedby"),r="label[for='"+i+"'], label[for='"+i+"'] *";return s&&(r=r+", #"+s.replace(/\s+/g,", #")),this.errors().filter(r)},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t){return t},string:function(e,i){return!!t(e,i.form).length},"function":function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},s=t(e).attr("class");return s&&t.each(s.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},attributeRules:function(e){var i,s,r={},n=t(e),a=e.getAttribute("type");for(i in t.validator.methods)"required"===i?(s=e.getAttribute(i),""===s&&(s=!0),s=!!s):s=n.attr(i),/min|max/.test(i)&&(null===a||/number|range|text/.test(a))&&(s=Number(s)),s||0===s?r[i]=s:a===i&&"range"!==a&&(r[i]=!0);return r.maxlength&&/-1|2147483647|524288/.test(r.maxlength)&&delete r.maxlength,r},dataRules:function(e){var i,s,r={},n=t(e);for(i in t.validator.methods)s=n.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),void 0!==s&&(r[i]=s);return r},staticRules:function(e){var i={},s=t.data(e.form,"validator");return s.settings.rules&&(i=t.validator.normalizeRule(s.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(s,r){if(r===!1)return void delete e[s];if(r.param||r.depends){var n=!0;switch(typeof r.depends){case"string":n=!!t(r.depends,i.form).length;break;case"function":n=r.depends.call(i,i)}n?e[s]=void 0!==r.param?r.param:!0:delete e[s]}}),t.each(e,function(s,r){e[s]=t.isFunction(r)?r(i):r}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var i;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(i=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(i[0]),Number(i[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,s){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==s?s:t.validator.messages[e],i.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,s){if(!this.depend(s,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var r=t(i).val();return r&&r.length>0}return this.checkable(i)?this.getLength(e,i)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i,s,r=0,n=0,a=!1;if(t=t.replace(/\D/g,""),t.length<13||t.length>19)return!1;for(i=t.length-1;i>=0;i--)s=t.charAt(i),n=parseInt(s,10),a&&(n*=2)>9&&(n-=9),r+=n,a=!a;return r%10===0},minlength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||r>=s},maxlength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||s>=r},rangelength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||r>=s[0]&&r<=s[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},equalTo:function(e,i,s){var r=t(s);return this.settings.onfocusout&&r.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(i).valid()}),e===r.val()},remote:function(e,i,s){if(this.optional(i))return!0;var r,n,a=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),a.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=a.message,s="string"==typeof s&&{url:s}||s,a.old===e)return a.valid;a.old=e,r=this,this.startRequest(i),n={},n[i.name]=e;var o=s.url;if(o.indexOf("?")>-1){var u=o.indexOf("?");s.url=o.substring(0,u);var l=o.substring(u+1,o.length);paramArray=l.split("&"),t.each(paramArray,function(){var t=this.split("=");n[t[0]]=t[1]})}return t.ajax(t.extend(!0,{type:"POST",cache:!1,url:s,dataType:"json",data:n,beforeSend:function(){r.showPrompt(i,"","load",!0)},success:function(s){var n,o,u,l=s===!0||"true"===s;r.settings.messages[i.name].remote=a.originalMessage,l?(u=r.formSubmitted,r.prepareElement(i),r.formSubmitted=u,r.successList.push(i),delete r.invalid[i.name],r.showErrors(),r.showPrompt(i,"","pass",!0)):(n={},o=s||r.defaultMessage(i,"remote"),n[i.name]=a.message=t.isFunction(o)?o(e):o,r.invalid[i.name]=!0,r.showErrors(n)),a.valid=l,r.stopRequest(i,l)}},s)),"pending"}}}),t.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var e,i={};t.ajaxPrefilter?t.ajaxPrefilter(function(t,e,s){var r=t.port;"abort"===t.mode&&(i[r]&&i[r].abort(),i[r]=s)}):(e=t.ajax,t.ajax=function(s){var r=("mode"in s?s:t.ajaxSettings).mode,n=("port"in s?s:t.ajaxSettings).port;return"abort"===r?(i[n]&&i[n].abort(),i[n]=e.apply(this,arguments),i[n]):e.apply(this,arguments)}),t.extend(t.fn,{validateDelegate:function(e,i,s){return this.bind(i,function(i){var r=t(i.target);return r.is(e)?s.apply(r,arguments):void 0})}})});
;///platform/component/validate/jquery.validate.extend.js
!function(e){e.validator.setDefaults({onkeyup:!1,errorClass:"validator_error",validClass:"validator_valid",errorElement:"label"}),e.hz.validate={init:function(o,a){var r={displayType:"none",onkeyup:!1},i=e.extend(r,a);return t[i.displayType]&&(i=e.extend(i,t[i.displayType])),e("#"+o).validate(i)},valid:function(t){return e("#"+t).valid()},addRules:function(t,o){return e("#"+t).rules("add",o)},removeRules:function(t,o){return e("#"+t).rules("remove",o)},showPrompt:function(e,o){t.float.showPrompt(e,o)},closePrompt:function(e){t.float.closePrompt(e)}};var t={"float":{errorPlacement:function(t,a){var r=e(a),i={showArrow:!0,promptPosition:"centerRight",isOverflown:!1};t.is(":empty")?o._closePrompt(r):o._showPrompt(r,e(t).html(),"",!1,i)},showPrompt:function(t,a,r,i){var s=e(t),l={showArrow:!0,promptPosition:"centerRight",isOverflown:!1};o._showPrompt(s,a,r,i,l)},closePrompt:function(e){o._closePrompt(e)},success:function(){}},mark:{},none:{}},o={_showPrompt:function(e,t,a,r,i,s){var l=o._getPrompt(e);s&&(l=!1),l?o._updatePrompt(e,l,t,a,r,i):o._buildPrompt(e,t,a,r,i)},_buildPrompt:function(t,a,r,i,s){var l=e("<div>");switch(l.addClass(o._getClassName(t.attr("id"))+"formError"),t.is(":input")&&l.addClass("parentForm"+o._getClassName(t.parents("form").attr("id"))),l.addClass("formError"),r){case"pass":l.addClass("greenPopup");break;case"load":l.addClass("blackPopup")}if(i&&l.addClass("ajaxed"),e("<div>").addClass("formErrorContent").html(a).appendTo(l),e("<div>").addClass("tooltipfang").appendTo(l),s.showArrow){var n=e("<div>").addClass("formErrorArrow");switch(s.promptPosition){case"bottomLeft":case"bottomRight":l.find(".formErrorContent").before(n),n.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>');break;case"topLeft":case"topRight":n.html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>'),l.append(n)}}var d=t,p=t.attr("type"),c=t.attr("name"),m=e(o._getInputWithName(c));1==t.closest(".prompt-mark").length?d=t.closest(".prompt-mark"):("radio"==p||"checkbox"==p)&&c&&m.size()>1&&(d=m.last()),s.isOverflown?d.before(l):d.after(l);var v=o._calculatePosition(d,l,s);return l.css({top:v.callerTopPosition,left:v.callerleftPosition,marginTop:v.marginTopSize,opacity:0}),l.on("click",function(){e(this).fadeOut(150,function(){e(this).remove()})}),l.animate({opacity:.87})},_updatePrompt:function(t,a,r,i,s,l){if(a){"pass"==i?a.addClass("greenPopup"):a.removeClass("greenPopup"),"load"==i?a.addClass("blackPopup"):a.removeClass("blackPopup"),s?a.addClass("ajaxed"):a.removeClass("ajaxed"),a.find(".formErrorContent").html(r);var n=t,d=t.attr("type"),p=t.attr("name"),c=e(o._getInputWithName(p));1==t.closest(".prompt-mark").length?n=t.closest(".prompt-mark"):("radio"==d||"checkbox"==d)&&p&&c.size()>1&&(n=c.last());var m=o._calculatePosition(n,a,l);a.animate({top:m.callerTopPosition,left:m.callerleftPosition,marginTop:m.marginTopSize})}},_closePrompt:function(e){var t=o._getPrompt(e);e.removeClass("errorStyle"),t&&t.fadeTo("fast",0,function(){t.remove()})},closePrompt:function(e){return o._closePrompt(e)},_getPrompt:function(t){var a=t.attr("id").replace(":","_")+"formError",r=e("."+o._escapeExpression(a))[0];return r?e(r):void 0},_escapeExpression:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},_calculatePosition:function(t,a,r){var i,s,l,n=t.outerWidth(),d=a.outerHeight(),p=r.isOverflown,c=0,m=t.attr("type"),v=t.attr("name");if(("radio"==m||"checkbox"==m)&&e(o._getInputWithName(v)).size()>1,p)i=s=0,l=-d;else{var u=t.position();i=u.top,s=u.left+c,l=0}switch(r.promptPosition){default:case"topRight":p?s+=n-30:(s+=n-30,i+=-d-2);break;case"topLeft":i+=-d-10;break;case"centerRight":s+=n+13;break;case"bottomLeft":i=i+t.height()+15;break;case"bottomRight":s+=n-30,i+=t.height()+5}return{callerTopPosition:i+"px",callerleftPosition:s+"px",marginTopSize:l+"px"}},_getInputWithName:function(t){for(var o=[],a=document.getElementsByName(t),r=0;r<a.length;r++)e(a[r]).is("input")&&o.push(a[r]);return 1==o.length?o[0]:o},_getClassName:function(e){return e.replace(":","_").replace(".","_")}}}(jQuery);
;///platform/component/validate/jquery.validate.messages_zh.js
$.extend($.validator.messages,{required:"",remote:"",email:"",url:"",date:"",dateISO:" (YYYY-MM-DD)",number:"",digits:"",creditcard:"",equalTo:"",extension:"",maxlength:$.validator.format(" {0} "),minlength:$.validator.format(" {0} "),rangelength:$.validator.format(" {0}  {1} "),range:$.validator.format(" {0}  {1} "),max:$.validator.format(" {0} "),min:$.validator.format(" {0} ")});
;///platform/component/swfupload/js/swfupload.js
var SWFUpload;void 0==SWFUpload&&(SWFUpload=function(t){this.initSWFUpload(t)}),SWFUpload.prototype.initSWFUpload=function(t){try{this.customSettings={},this.settings=t,this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(e){throw delete SWFUpload.instances[this.movieName],e}},SWFUpload.instances={},SWFUpload.movieCount=0,SWFUpload.version="2.2.0 2009-03-25",SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130},SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290},SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5},SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120},SWFUpload.CURSOR={ARROW:-1,HAND:-2},SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"},SWFUpload.completeURL=function(t){if("string"!=typeof t||t.match(/^https?:\/\//i)||t.match(/^\//))return t;var e=(window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),window.location.pathname.lastIndexOf("/"));return path=0>=e?"/":window.location.pathname.substr(0,e)+"/",path+t},SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(t,e){this.settings[t]=void 0==this.settings[t]?e:this.settings[t]},this.ensureDefault("upload_url",""),this.ensureDefault("preserve_relative_urls",!1),this.ensureDefault("file_post_name","Filedata"),this.ensureDefault("post_params",{}),this.ensureDefault("use_query_string",!1),this.ensureDefault("requeue_on_error",!1),this.ensureDefault("http_success",[]),this.ensureDefault("assume_success_timeout",0),this.ensureDefault("file_types","*.*"),this.ensureDefault("file_types_description","All Files"),this.ensureDefault("file_size_limit",0),this.ensureDefault("file_upload_limit",0),this.ensureDefault("file_queue_limit",0),this.ensureDefault("flash_url","swfupload.swf"),this.ensureDefault("prevent_swf_caching",!0),this.ensureDefault("button_image_url",""),this.ensureDefault("button_width",1),this.ensureDefault("button_height",1),this.ensureDefault("button_text",""),this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;"),this.ensureDefault("button_text_top_padding",0),this.ensureDefault("button_text_left_padding",0),this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES),this.ensureDefault("button_disabled",!1),this.ensureDefault("button_placeholder_id",""),this.ensureDefault("button_placeholder",null),this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW),this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW),this.ensureDefault("debug",!1),this.settings.debug_enabled=this.settings.debug,this.settings.return_upload_start_handler=this.returnUploadStart,this.ensureDefault("swfupload_loaded_handler",null),this.ensureDefault("file_dialog_start_handler",null),this.ensureDefault("file_queued_handler",null),this.ensureDefault("file_queue_error_handler",null),this.ensureDefault("file_dialog_complete_handler",null),this.ensureDefault("upload_start_handler",null),this.ensureDefault("upload_progress_handler",null),this.ensureDefault("upload_error_handler",null),this.ensureDefault("upload_success_handler",null),this.ensureDefault("upload_complete_handler",null),this.ensureDefault("debug_handler",this.debugMessage),this.ensureDefault("custom_settings",{}),this.customSettings=this.settings.custom_settings,this.settings.prevent_swf_caching&&(this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime()),this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)),delete this.ensureDefault},SWFUpload.prototype.loadFlash=function(){var t,e;if(null!==document.getElementById(this.movieName))throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";if(t=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder,void 0==t)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;e=document.createElement("div"),e.innerHTML=this.getFlashHTML(),t.parentNode.replaceChild(e.firstChild,t),void 0==window[this.movieName]&&(window[this.movieName]=this.getMovieElement())},SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")},SWFUpload.prototype.getFlashVars=function(){var t=this.buildParamString(),e=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(e),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(t),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")},SWFUpload.prototype.getMovieElement=function(){if(void 0==this.movieElement&&(this.movieElement=document.getElementById(this.movieName)),null===this.movieElement)throw"Could not find Flash element";return this.movieElement},SWFUpload.prototype.buildParamString=function(){var t=this.settings.post_params,e=[];if("object"==typeof t)for(var s in t)t.hasOwnProperty(s)&&e.push(encodeURIComponent(s.toString())+"="+encodeURIComponent(t[s].toString()));return e.join("&amp;")},SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,!1);var t=null;if(t=this.getMovieElement(),t&&"unknown"==typeof t.CallFunction){for(var e in t)try{"function"==typeof t[e]&&(t[e]=null)}catch(s){}try{t.parentNode.removeChild(t)}catch(n){}}return window[this.movieName]=null,SWFUpload.instances[this.movieName]=null,delete SWFUpload.instances[this.movieName],this.movieElement=null,this.settings=null,this.customSettings=null,this.eventQueue=null,this.movieName=null,!0}catch(i){return!1}},SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","	","upload_url:               ",this.settings.upload_url,"\n","	","flash_url:                ",this.settings.flash_url,"\n","	","use_query_string:         ",this.settings.use_query_string.toString(),"\n","	","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","	","http_success:             ",this.settings.http_success.join(", "),"\n","	","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","	","file_post_name:           ",this.settings.file_post_name,"\n","	","post_params:              ",this.settings.post_params.toString(),"\n","	","file_types:               ",this.settings.file_types,"\n","	","file_types_description:   ",this.settings.file_types_description,"\n","	","file_size_limit:          ",this.settings.file_size_limit,"\n","	","file_upload_limit:        ",this.settings.file_upload_limit,"\n","	","file_queue_limit:         ",this.settings.file_queue_limit,"\n","	","debug:                    ",this.settings.debug.toString(),"\n","	","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","	","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","	","button_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n","	","button_image_url:         ",this.settings.button_image_url.toString(),"\n","	","button_width:             ",this.settings.button_width.toString(),"\n","	","button_height:            ",this.settings.button_height.toString(),"\n","	","button_text:              ",this.settings.button_text.toString(),"\n","	","button_text_style:        ",this.settings.button_text_style.toString(),"\n","	","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","	","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","	","button_action:            ",this.settings.button_action.toString(),"\n","	","button_disabled:          ",this.settings.button_disabled.toString(),"\n","	","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","	","swfupload_loaded_handler assigned:  ",("function"==typeof this.settings.swfupload_loaded_handler).toString(),"\n","	","file_dialog_start_handler assigned: ",("function"==typeof this.settings.file_dialog_start_handler).toString(),"\n","	","file_queued_handler assigned:       ",("function"==typeof this.settings.file_queued_handler).toString(),"\n","	","file_queue_error_handler assigned:  ",("function"==typeof this.settings.file_queue_error_handler).toString(),"\n","	","upload_start_handler assigned:      ",("function"==typeof this.settings.upload_start_handler).toString(),"\n","	","upload_progress_handler assigned:   ",("function"==typeof this.settings.upload_progress_handler).toString(),"\n","	","upload_error_handler assigned:      ",("function"==typeof this.settings.upload_error_handler).toString(),"\n","	","upload_success_handler assigned:    ",("function"==typeof this.settings.upload_success_handler).toString(),"\n","	","upload_complete_handler assigned:   ",("function"==typeof this.settings.upload_complete_handler).toString(),"\n","	","debug_handler assigned:             ",("function"==typeof this.settings.debug_handler).toString(),"\n"].join(""))},SWFUpload.prototype.addSetting=function(t,e,s){return this.settings[t]=void 0==e?s:e},SWFUpload.prototype.getSetting=function(t){return void 0!=this.settings[t]?this.settings[t]:""},SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement(),returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>"),returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}return void 0!=returnValue&&"object"==typeof returnValue.post&&(returnValue=this.unescapeFilePostParams(returnValue)),returnValue},SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")},SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")},SWFUpload.prototype.startUpload=function(t){this.callFlash("StartUpload",[t])},SWFUpload.prototype.cancelUpload=function(t,e){e!==!1&&(e=!0),this.callFlash("CancelUpload",[t,e])},SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")},SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")},SWFUpload.prototype.setStats=function(t){this.callFlash("SetStats",[t])},SWFUpload.prototype.getFile=function(t){return"number"==typeof t?this.callFlash("GetFileByIndex",[t]):this.callFlash("GetFile",[t])},SWFUpload.prototype.addFileParam=function(t,e,s){return this.callFlash("AddFileParam",[t,e,s])},SWFUpload.prototype.removeFileParam=function(t,e){this.callFlash("RemoveFileParam",[t,e])},SWFUpload.prototype.setUploadURL=function(t){this.settings.upload_url=t.toString(),this.callFlash("SetUploadURL",[t])},SWFUpload.prototype.setPostParams=function(t){this.settings.post_params=t,this.callFlash("SetPostParams",[t])},SWFUpload.prototype.addPostParam=function(t,e){this.settings.post_params[t]=e,this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.removePostParam=function(t){delete this.settings.post_params[t],this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.setFileTypes=function(t,e){this.settings.file_types=t,this.settings.file_types_description=e,this.callFlash("SetFileTypes",[t,e])},SWFUpload.prototype.setFileSizeLimit=function(t){this.settings.file_size_limit=t,this.callFlash("SetFileSizeLimit",[t])},SWFUpload.prototype.setFileUploadLimit=function(t){this.settings.file_upload_limit=t,this.callFlash("SetFileUploadLimit",[t])},SWFUpload.prototype.setFileQueueLimit=function(t){this.settings.file_queue_limit=t,this.callFlash("SetFileQueueLimit",[t])},SWFUpload.prototype.setFilePostName=function(t){this.settings.file_post_name=t,this.callFlash("SetFilePostName",[t])},SWFUpload.prototype.setUseQueryString=function(t){this.settings.use_query_string=t,this.callFlash("SetUseQueryString",[t])},SWFUpload.prototype.setRequeueOnError=function(t){this.settings.requeue_on_error=t,this.callFlash("SetRequeueOnError",[t])},SWFUpload.prototype.setHTTPSuccess=function(t){"string"==typeof t&&(t=t.replace(" ","").split(",")),this.settings.http_success=t,this.callFlash("SetHTTPSuccess",[t])},SWFUpload.prototype.setAssumeSuccessTimeout=function(t){this.settings.assume_success_timeout=t,this.callFlash("SetAssumeSuccessTimeout",[t])},SWFUpload.prototype.setDebugEnabled=function(t){this.settings.debug_enabled=t,this.callFlash("SetDebugEnabled",[t])},SWFUpload.prototype.setButtonImageURL=function(t){void 0==t&&(t=""),this.settings.button_image_url=t,this.callFlash("SetButtonImageURL",[t])},SWFUpload.prototype.setButtonDimensions=function(t,e){this.settings.button_width=t,this.settings.button_height=e;var s=this.getMovieElement();void 0!=s&&(s.style.width=t+"px",s.style.height=e+"px"),this.callFlash("SetButtonDimensions",[t,e])},SWFUpload.prototype.setButtonText=function(t){this.settings.button_text=t,this.callFlash("SetButtonText",[t])},SWFUpload.prototype.setButtonTextPadding=function(t,e){this.settings.button_text_top_padding=e,this.settings.button_text_left_padding=t,this.callFlash("SetButtonTextPadding",[t,e])},SWFUpload.prototype.setButtonTextStyle=function(t){this.settings.button_text_style=t,this.callFlash("SetButtonTextStyle",[t])},SWFUpload.prototype.setButtonDisabled=function(t){this.settings.button_disabled=t,this.callFlash("SetButtonDisabled",[t])},SWFUpload.prototype.setButtonAction=function(t){this.settings.button_action=t,this.callFlash("SetButtonAction",[t])},SWFUpload.prototype.setButtonCursor=function(t){this.settings.button_cursor=t,this.callFlash("SetButtonCursor",[t])},SWFUpload.prototype.queueEvent=function(t,e){void 0==e?e=[]:e instanceof Array||(e=[e]);var s=this;if("function"==typeof this.settings[t])this.eventQueue.push(function(){this.settings[t].apply(this,e)}),setTimeout(function(){s.executeNextEvent()},0);else if(null!==this.settings[t])throw"Event handler "+t+" is unknown or is not a function"},SWFUpload.prototype.executeNextEvent=function(){var t=this.eventQueue?this.eventQueue.shift():null;"function"==typeof t&&t.apply(this)},SWFUpload.prototype.unescapeFilePostParams=function(t){var e,s=/[$]([0-9a-f]{4})/i,n={};if(void 0!=t){for(var i in t.post)if(t.post.hasOwnProperty(i)){e=i;for(var o;null!==(o=s.exec(e));)e=e.replace(o[0],String.fromCharCode(parseInt("0x"+o[1],16)));n[e]=t.post[i]}t.post=n}return t},SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(t){return!1}},SWFUpload.prototype.flashReady=function(){var t=this.getMovieElement();return t?(this.cleanUp(t),void this.queueEvent("swfupload_loaded_handler")):void this.debug("Flash called back ready but the flash movie can't be found.")},SWFUpload.prototype.cleanUp=function(t){try{if(this.movieElement&&"unknown"==typeof t.CallFunction){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var e in t)try{"function"==typeof t[e]&&(t[e]=null)}catch(s){}}}catch(n){}window.__flash__removeCallback=function(t,e){try{t&&(t[e]=null)}catch(s){}}},SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")},SWFUpload.prototype.fileQueued=function(t){t=this.unescapeFilePostParams(t),this.queueEvent("file_queued_handler",t)},SWFUpload.prototype.fileQueueError=function(t,e,s){t=this.unescapeFilePostParams(t),this.queueEvent("file_queue_error_handler",[t,e,s])},SWFUpload.prototype.fileDialogComplete=function(t,e,s){this.queueEvent("file_dialog_complete_handler",[t,e,s])},SWFUpload.prototype.uploadStart=function(t){t=this.unescapeFilePostParams(t),this.queueEvent("return_upload_start_handler",t)},SWFUpload.prototype.returnUploadStart=function(t){var e;if("function"==typeof this.settings.upload_start_handler)t=this.unescapeFilePostParams(t),e=this.settings.upload_start_handler.call(this,t);else if(void 0!=this.settings.upload_start_handler)throw"upload_start_handler must be a function";void 0===e&&(e=!0),e=!!e,this.callFlash("ReturnUploadStart",[e])},SWFUpload.prototype.uploadProgress=function(t,e,s){t=this.unescapeFilePostParams(t),this.queueEvent("upload_progress_handler",[t,e,s])},SWFUpload.prototype.uploadError=function(t,e,s){t=this.unescapeFilePostParams(t),this.queueEvent("upload_error_handler",[t,e,s])},SWFUpload.prototype.uploadSuccess=function(t,e,s){t=this.unescapeFilePostParams(t),this.queueEvent("upload_success_handler",[t,e,s])},SWFUpload.prototype.uploadComplete=function(t){t=this.unescapeFilePostParams(t),this.queueEvent("upload_complete_handler",t)},SWFUpload.prototype.debug=function(t){this.queueEvent("debug_handler",t)},SWFUpload.prototype.debugMessage=function(t){if(this.settings.debug){var e,s=[];if("object"==typeof t&&"string"==typeof t.name&&"string"==typeof t.message){for(var n in t)t.hasOwnProperty(n)&&s.push(n+": "+t[n]);e=s.join("\n")||"",s=e.split("\n"),e="EXCEPTION: "+s.join("\nEXCEPTION: "),SWFUpload.Console.writeLine(e)}else SWFUpload.Console.writeLine(t)}},SWFUpload.Console={},SWFUpload.Console.writeLine=function(t){var e,s;try{e=document.getElementById("SWFUpload_Console"),e||(s=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(s),e=document.createElement("textarea"),e.id="SWFUpload_Console",e.style.fontFamily="monospace",e.setAttribute("wrap","off"),e.wrap="off",e.style.overflow="auto",e.style.width="700px",e.style.height="350px",e.style.margin="5px",s.appendChild(e)),e.value+=t+"\n",e.scrollTop=e.scrollHeight-e.clientHeight}catch(n){alert("Exception: "+n.name+" Message: "+n.message)}};
;///platform/component/swfupload/js/swfupload.queue.js
var SWFUpload;"function"==typeof SWFUpload&&(SWFUpload.queue={},SWFUpload.prototype.initSettings=function(e){return function(){"function"==typeof e&&e.call(this),this.queueSettings={},this.queueSettings.queue_cancelled_flag=!1,this.queueSettings.queue_upload_count=0,this.queueSettings.user_upload_complete_handler=this.settings.upload_complete_handler,this.queueSettings.user_upload_start_handler=this.settings.upload_start_handler,this.settings.upload_complete_handler=SWFUpload.queue.uploadCompleteHandler,this.settings.upload_start_handler=SWFUpload.queue.uploadStartHandler,this.settings.queue_complete_handler=this.settings.queue_complete_handler||null}}(SWFUpload.prototype.initSettings),SWFUpload.prototype.startUpload=function(e){this.queueSettings.queue_cancelled_flag=!1,this.callFlash("StartUpload",[e])},SWFUpload.prototype.cancelQueue=function(){this.queueSettings.queue_cancelled_flag=!0,this.stopUpload();for(var e=this.getStats();e.files_queued>0;)this.cancelUpload(),e=this.getStats()},SWFUpload.queue.uploadStartHandler=function(e){var t;return"function"==typeof this.queueSettings.user_upload_start_handler&&(t=this.queueSettings.user_upload_start_handler.call(this,e)),t=t===!1?!1:!0,this.queueSettings.queue_cancelled_flag=!t,t},SWFUpload.queue.uploadCompleteHandler=function(e){var t,u=this.queueSettings.user_upload_complete_handler;if(e.filestatus===SWFUpload.FILE_STATUS.COMPLETE&&this.queueSettings.queue_upload_count++,t="function"==typeof u?u.call(this,e)===!1?!1:!0:e.filestatus===SWFUpload.FILE_STATUS.QUEUED?!1:!0){var l=this.getStats();l.files_queued>0&&this.queueSettings.queue_cancelled_flag===!1?this.startUpload():this.queueSettings.queue_cancelled_flag===!1?(this.queueEvent("queue_complete_handler",[this.queueSettings.queue_upload_count]),this.queueSettings.queue_upload_count=0):(this.queueSettings.queue_cancelled_flag=!1,this.queueSettings.queue_upload_count=0)}});
;///platform/component/swfupload/js/jquery.swfupload.js
!function($){function loadUploadFlash(a){var e=$.nano(getUploadUITemp(),{divId:a.divId,configId:a.configId,classFieldName:a.classFieldName,indexNum:a.indexNum,uploadTip:a.tip});$(this).append(e);var t=$(this).attr("id");if(a.existAttachments&&a.existAttachments.length>0){$("#"+a.divId+"OldFileArea").show();var i="";$(a.existAttachments).each(function(){var a=this;i+="<li id='"+a.id+"'>",i+="	<img src='"+com.ue.global.path+"/platform/component/swfupload/images/0.gif' alt='' />&nbsp",i+="	<span>"+a.name+"</span>&nbsp",i+="	<span></span>&nbsp",i+="	<span onclick='$.hz.swfupload.deleteExists(\""+t+'","'+a.id+"\");' class='green hand'>"+$.i18n.prop("upload_delete")+"</span>",i+="</li>"}),$("#"+a.divId+"ExistUl").append(i)}var d=this,l={flash_url:com.ue.global.path+"/platform/component/swfupload/swf/swfupload.swf",upload_url:com.ue.global.path+"/sys/attachment/saveUploadFile.do;jsessionid="+com.ue.global.jsessionid,post_params:{},file_post_name:"filedata",file_size_limit:a.maxFileSize+"Mb",file_types:""==a.filterArr?"*.*":a.filterArr.split(":")[0],file_types_description:""==a.filterArr?"All Files":a.filterArr.split(":")[1],file_upload_limit:a.maxFileCount,file_queue_limit:0,debug:!1,button_window_mode:"opaque",button_image_url:com.ue.global.path+"/platform/component/swfupload/images/XPButtonUploadText_61x22.png",button_width:"74",button_height:"28",button_text:$.i18n.prop("upload_add"),button_text_style:".theFont { font-size: 20; }",button_text_left_padding:10,button_text_top_padding:5,file_dialog_start_handler:function(){},file_queued_handler:function(a){var e=checkFile.apply(d,[a]);e?addNewFile.apply(d,[a]):(this.stopUpload(),this.cancelUpload(a.id,!1),this.fileQueueError(a,SWFUpload.QUEUE_ERROR.INVALID_FILETYPE,""),this.startUpload())},swfupload_loaded_handler:function(){resetSwfStats.apply(d),resetUploadButtonStatus.apply(d)},file_queue_error_handler:function(a,e,t){return queueError.apply(d,[a,e,t])},file_dialog_complete_handler:function(){this.startUpload()},upload_start_handler:function(){return!0},upload_progress_handler:function(a,e){setFileUploadProgress.apply(d,[e,a.id])},upload_error_handler:function(a,e,t){uploadError.apply(d,[a,e,t])},upload_success_handler:function(a,e){setAttachmentId.apply(d,[a.id,e])},upload_complete_handler:function(){},queue_complete_handler:function(){}};l.button_placeholder_id=a.divId+"Flash";var o=new SWFUpload(l);a.swfObj=o,a.files=new Hashtable,$(this).data(SWFUPLOAD_PARAM,a)}function setAttachmentId(ufId,attachmentId){var param=$(this).data(SWFUPLOAD_PARAM),divId=param.divId;if(null!=param.files.get(ufId)){var uf=param.files.get(ufId);if(uf.attachmentId=attachmentId,uf.status=UPLOADFILE_STATUS_UPLOADED,$("#"+divId+"Pb"+ufId).html(""),$("#"+divId+"Img"+ufId)[0].src=com.ue.global.path+"/platform/component/swfupload/images/2.gif",$("#"+divId+"SumPb").progressBar(getMathRound(getUploadedSize.apply(this,[0])/getSumSize.apply(this)*100,2),{animated:!1}),param.finishCallback){var obj={};obj.picUrl=com.ue.global.path+"/sys/attachment/showTempPic.do?attachmentId="+attachmentId,obj.videoUrl=com.ue.global.path+"/sys/attachment/showTempVideo.do?attachmentId="+attachmentId,obj.attachmentId=attachmentId,obj.divId=divId,obj.fileId=ufId,eval(param.finishCallback+"(obj)")}}}function addNewFile(a){var e=$(this).data(SWFUPLOAD_PARAM),t=e.divId,i=$(this).attr("id");i||(i=$.uuid(),$(this).attr("id",i));var d={id:a.id,name:a.name,status:UPLOADFILE_STATUS_WAIT,size:a.size};$("#"+t+"Sum").show(),$("#"+t).parent(".uploadStyle").find(".newFileArea").show(),e.files.put(d.id,d);var l="";l+="<li id='"+t+"Li"+d.id+"'>",l+="	<img id='"+t+"Img"+d.id+"' src='"+com.ue.global.path+"/platform/component/swfupload/images/0.gif' alt='' />&nbsp",l+="	<span>"+d.name+"</span>&nbsp",l+="	<span id='"+t+"Pb"+d.id+"'></span>&nbsp",l+="	<span onclick='$.hz.swfupload.removeUpFile(\""+i+'","'+d.id+"\");' class='green hand'>"+$.i18n.prop("upload_delete")+"</span>",l+="</li>",$("#"+t+"Ul").html($("#"+t+"Ul").html()+l),$("#"+t+"SumSize").html(getSumSizeShow.apply(this)),resetUploadButtonStatus.apply(this),checkRequired.apply(this)}function removeUploadFile(ufId){var param=$(this).data(SWFUPLOAD_PARAM),divId=param.divId,uf=param.files.get(ufId),swfObj=param.swfObj;if(uf.status==UPLOADFILE_STATUS_WAIT&&swfObj.cancelUpload(ufId,!1),uf.status==UPLOADFILE_STATUS_UPLOADING,uf.status==UPLOADFILE_STATUS_UPLOADED&&$.post(com.ue.global.path+"/sys/attachment/ajaxDeleteUploadFile.do",{attachmentId:uf.attachmentId},function(){},"text"),$("#"+divId+"Li"+uf.id).remove(),param.files.remove(ufId),$("#"+divId+"SumSize").html(getSumSizeShow.apply(this)),$("#"+divId+"UploadedSize").html(getUploadedSizeShow.apply(this,[0])),$("#"+divId+"SumPb").progressBar(getMathRound(getUploadedSize.apply(this,[0])/getSumSize.apply(this)*100,2)),0==param.files.size()&&($("#"+divId+"SumSize").html(""),$("#"+divId+"UploadedSize").html(""),$("#"+divId+"Sum").hide(),$("#"+divId+"NewFileArea").hide()),resetUploadButtonStatus.apply(this),resetSwfStats.apply(this),param.deleteCallback){var obj={};obj.fileId=ufId,obj.divId=divId,obj.isSavedFile=!1,obj.status=uf.status,eval(param.deleteCallback+"(obj)")}checkRequired.apply(this)}function getSumSize(){for(var a=$(this).data(SWFUPLOAD_PARAM),e=a.files.values(),t=0,i=0;i<e.length;i++)t+=e[i].size;return t}function getSumSizeShow(){var a=getSumSize.apply(this);return 1024>a?a+"B":1048576>a?getMathRound(a/1024,2)+"K":1073741824>a?getMathRound(a/1048576,2)+"M":getMathRound(a/1073741824,2)+"G"}function checkRequired(){var a=$(this).data(SWFUPLOAD_PARAM),e=!0,t=a.required;if(t){var i=a.divId,d=$("#"+i+"Btn").find(".swfupload");0==getExistFileCount.apply(this)?(e=!1,$.hz.validate.showPrompt(d,$.i18n.prop("upload_js_required"))):$.hz.validate.closePrompt(d)}return e}function checkFile(a){var e=$(this).data(SWFUPLOAD_PARAM),t=e.limitFileExtention;if(""==t||""==a.type)return!0;";"!=t.substring(t.length-1,t.length)&&(t=";"+t+";");var i=a.type.substring(1,a.type.length);return-1!=t.indexOf(";"+i+";")?!1:!0}function setFileUploadProgress(a,e){var t=$(this).data(SWFUPLOAD_PARAM),i=t.divId,d=t.files.get(e);d.status=UPLOADFILE_STATUS_UPLOADING;var l=getMathRound(a/d.size*100,2);$("#"+i+"Pb"+e).html(l+"%"),d.proc=l,-1==$("#"+i+"Img"+e)[0].src.toString().indexOf("1.gif")&&($("#"+i+"Img"+e)[0].src=com.ue.global.path+"/platform/component/swfupload/images/1.gif"),$("#"+i+"UploadedSize").html(getUploadedSizeShow.apply(this,[a]));var o=getMathRound(getUploadedSize.apply(this,[a])/getSumSize.apply(this)*100,2);$("#"+i+"SumPb").progressBar(o,{animated:!1})}function getUploadedSizeShow(a){var e=getUploadedSize.apply(this,[a]);return 1024>e?e+"B":1048576>e?getMathRound(e/1024,2)+"K":1073741824>e?getMathRound(e/1048576,2)+"M":1099511627776>e?getMathRound(e/1073741824,2)+"G":void 0}function getUploadedSize(a){for(var e=$(this).data(SWFUPLOAD_PARAM),t=e.files.values(),i=0,d=0;d<t.length;d++)t[d].status==UPLOADFILE_STATUS_UPLOADED&&(i+=t[d].size);return i+=a}function getMathRound(a,e){return a.toFixed(e)}function getExistFileCount(){var a=$(this).data(SWFUPLOAD_PARAM),e=a.divId;return a.files.size()+$("#"+e+"ExistUl").find("li").size()}function uploadError(){}function queueError(a,e){var t=$(this).data(SWFUPLOAD_PARAM);return e===SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED?void alert($.i18n.prop("upload_js_fileCountAllow",t.maxFileCount)):e===SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT?void alert($.i18n.prop("upload_js_fileSizeNotAllow",t.maxFileSize)):e===SWFUpload.QUEUE_ERROR.INVALID_FILETYPE?void alert($.i18n.prop("upload_js_notAllowFileType",t.limitFileExtention)):void 0}function resetUploadButtonStatus(){var a=$(this).data(SWFUPLOAD_PARAM),e=a.maxFileCount;if(-1!=e){var t=getExistFileCount.apply(this);a.swfObj.setButtonDisabled(t>=e?!0:!1)}}function resetSwfStats(){var a=$(this).data(SWFUPLOAD_PARAM).swfObj,e=a.getStats();e.successful_uploads=getExistFileCount.apply(this),a.setStats(e)}function getUploadUITemp(){var a="";return a+="<input type='hidden' name='attachmentList[{indexNum}]' value='{classFieldName}'/>",a+="<input type='hidden' name='{classFieldName}' value='' id='{divId}HiddenValIpt'/>",a+="<input type='hidden' name='{classFieldName}DelIds' value='' id='{divId}DelIds'/>",a+="<input type='hidden' name='{classFieldName}ConfigId' value='{configId}' id='{divId}ConfigId'/>",a+="<div class='uploadStyle'>",a+="	<div class='uploadBtn' id='{divId}Btn'>",a+="		<div id='{divId}Flash'></div>",a+="		<span style='font-size:12px;' id='{divId}tip'>{uploadTip}</span>",a+="	</div>",a+="	<div class='newFileArea' style='display: none;' id='{divId}NewFileArea'><ul id='{divId}Ul'></ul></div>",a+="	<div id='{divId}' class='progressArea'>",a+="		<div id='{divId}Sum' style='display: none;'>",a+="			<span>"+$.i18n.prop("upload_uploadSumProgress")+"</span>",a+="			<span id='{divId}SumPb'></span>",a+="			<span>"+$.i18n.prop("upload_hasUpload")+"<em id='{divId}UploadedSize'></em>&nbsp"+$.i18n.prop("upload_sumSize")+"<em id='{divId}SumSize'></em></span>",a+="		</div>",a+="	</div>",a+="	<div class='oldFileArea' id='{divId}OldFileArea' style='display: none;'>",a+="		<span class='ml10 pt5 clearfix'>"+$.i18n.prop("upload_hasAttachment")+"</span>",a+="		<ul id='{divId}ExistUl'></ul>",a+="	</div>",a+="</div>"}var CLASS_SWFUPLOAD_CONTAINERS="swfupload_containers",SWFUPLOAD_PARAM="swfupload_param";$.hz.swfupload={init:function(a,e){var t=$("#"+a);if(0!=t.size()){e||(e={}),t.addClass(CLASS_SWFUPLOAD_CONTAINERS);var i=e.configCode||"default",d={};d.finishCallback=e.finishCallback,d.deleteCallback=e.deleteCallback,d.divId=$.uuid(),d.required=e.required,d.classFieldName=e.classFieldName,d.indexNum=e.indexNum||0,$.ajax({url:com.ue.global.path+"/sys/attachmentConfig/ajaxGetConfig.do",type:"post",dataType:"json",async:!1,data:{configCode:i},success:function(a){d.tip=a.allowTypeStr+a.limitFileExtentionStr+a.maxCountStr+a.maxFileSize,d.filterArr=a.filterArr,d.maxFileSize=a.maxFileSize,d.maxFileCount=a.maxFileCount,d.limitFileExtention=a.limitFileExtention,d.configId=a.configId}}),e.idOwner&&""!=e.idOwner&&$.ajax({url:com.ue.global.path+"/sys/attachment/ajaxGetAttachment.do",type:"post",dataType:"json",async:!1,data:{idOwner:e.idOwner},success:function(a){d.existAttachments=a}}),loadUploadFlash.apply(t,[d])}},removeUpFile:function(a,e){var t=$("#"+a);removeUploadFile.apply(t,[e])},validateAttachment:function(a){var e=$("#"+a),t=!0;return e.each(function(){var a=checkRequired.apply($(this));a||(t=!1);var e=$(this).data(SWFUPLOAD_PARAM),i=e.divId,d=e.files,l="";$("#"+i+"HiddenValIpt").val("");for(var o=0;o<d.values().length;o++){var n=d.values()[o];if(n.status!=UPLOADFILE_STATUS_UPLOADED){alert(100==n.proc?$.i18n.prop("upload_js_processing"):$.i18n.prop("upload_js_uploading")),canCommit=!1;break}l+=n.attachmentId+","}$("#"+i+"HiddenValIpt").val(l)}),t},deleteExists:function(objId,attachmentId){var $obj=$("#"+objId),param=$obj.data(SWFUPLOAD_PARAM),divId=param.divId,oldIds=$("#"+divId+"DelIds").val();$("#"+divId+"DelIds").val(oldIds+","+attachmentId),$("#"+attachmentId).remove();var exist=$("#"+divId+"ExistUl").find("li").size();if(0==exist&&$("#"+divId+"OldFileArea").hide(),resetSwfStats.apply($obj),resetUploadButtonStatus.apply($obj),param.deleteCallback){var obj={};obj.attachmentId=attachmentId,obj.divId=divId,obj.isSavedFile=!0,eval(param.deleteCallback+"(obj)")}checkRequired.apply($obj)},setAttachmentsNames:function(a,e,t){var i=$("#"+t);t||(i=$("body"));var d=$("."+CLASS_SWFUPLOAD_CONTAINERS,i);$.each(d,function(t){$(this).find("input[id*='HiddenValIpt']").prop("name",a.replace("{0}",t)),$(this).find("input[id*='DelIds']").prop("name",e.replace("{0}",t))})}};var UPLOADFILE_STATUS_WAIT=0,UPLOADFILE_STATUS_UPLOADING=1,UPLOADFILE_STATUS_UPLOADED=2;$.i18n&&$.i18n.properties({name:["upload"],path:com.ue.global.path+"/sys/i18n/ajaxGetI18nValues.do?bundleName=",mode:"map",callback:function(){}})}(jQuery);
;///platform/component/progressbar/jquery.progressbar.js
!function(e){e.extend({progressBar:new function(){this.defaults={steps:20,stepDuration:20,max:100,showText:!0,textFormat:"percentage",width:121,height:12,callback:null,boxImage:com.ue.global.path+"/platform/component/progressbar/images/progressbar.gif",barImage:{0:com.ue.global.path+"/platform/component/progressbar/images/progressbg_green.gif"},running_value:0,value:0,animated:!0,image:null},this.construct=function(n,a){var t=null,r=null;return null!=n&&(isNaN(n)?r=n:(t=n,null!=a&&(r=a))),this.each(function(){function n(e){return 100*e.running_value/e.max}function a(e){var n=e.barImage;if("object"==typeof e.barImage)for(var a in e.barImage){if(!(e.running_value>=parseInt(a)))break;n=e.barImage[a]}return n}function i(e){if(e.showText){if("percentage"==e.textFormat)return" "+Math.round(100*e.running_value)/100+"%";if("fraction"==e.textFormat)return" "+e.running_value+"/"+e.max}}var l=this,u=this.config;if(null!=t&&null!=this.bar&&null!=this.config)this.config.value=parseFloat(t),null!=r&&(l.config=e.extend(this.config,r)),u=l.config;else{var c=e(this),u=e.extend({},e.progressBar.defaults,r);u.id=c.attr("id")?c.attr("id"):Math.ceil(1e5*Math.random()),null==t&&(t=c.html().replace("%","")),u.value=parseFloat(t),u.running_value=0,u.image=a(u);for(var g=["steps","stepDuration","max","width","height","running_value","value"],s=0;s<g.length;s++)u[g[s]]=parseFloat(u[g[s]]);c.html("");var o=document.createElement("img"),m=document.createElement("span"),p=e(o),d=e(m);l.bar=p,p.attr("id",u.id+"_pbImage"),d.attr("id",u.id+"_pbText"),d.html(i(u)),p.attr("title",i(u)),p.attr("alt",i(u)),p.attr("src",u.boxImage),p.attr("width",u.width),p.css("width",u.width+"px"),p.css("height",u.height+"px"),p.css("background-image","url("+u.image+")"),p.css("background-position",-1*u.width+"px 50%"),p.css("padding","0"),p.css("margin","0"),c.append(p),c.append(d)}if(u.increment=Math.round((u.value-u.running_value)/u.steps),u.increment<0&&(u.increment*=-1),u.increment<1&&(u.increment=1),u.animated)var v=setInterval(function(){var t=u.width/100;u.running_value>u.value?u.running_value-u.increment<u.value?u.running_value=u.value:u.running_value-=u.increment:u.running_value<u.value&&(u.running_value+u.increment>u.value?u.running_value=u.value:u.running_value+=u.increment),u.running_value==u.value&&clearInterval(v);var r=e("#"+u.id+"_pbImage"),c=e("#"+u.id+"_pbText"),g=a(u);g!=u.image&&(r.css("background-image","url("+g+")"),u.image=g),r.css("background-position",-1*u.width+n(u)*t+"px 50%"),r.attr("title",i(u)),c.html(i(u)),null!=u.callback&&"function"==typeof u.callback&&u.callback(u),l.config=u},u.stepDuration);else{var h=u.width/100;u.running_value=u.value;var p=e("#"+u.id+"_pbImage"),d=e("#"+u.id+"_pbText"),f=a(u);f!=u.image&&(p.css("background-image","url("+f+")"),u.image=f),p.css("background-position",-1*u.width+n(u)*h+"px 50%"),p.attr("title",i(u)),d.html(i(u)),null!=u.callback&&"function"==typeof u.callback&&u.callback(u)}})}}}),e.fn.extend({progressBar:e.progressBar.construct})}(jQuery);
;///platform/component/page/jquery.page.js
!function(a){function e(e,t){a("#"+e).data("settings",t)}function t(e){return a("#"+e).data("settings")}function p(e){var t=[],p="";return a.each(e,function(){var a=parseInt(this);!isNaN(a)&&p.indexOf(""+a)<0&&(p+=a,t.push(a))}),t}a.hz.page={init:function(t,p){var s=a("#"+p.formId).attr("action");if(!s||""==s.trim())return!1;var r=-1==s.indexOf("?")?"?":"&",o={type:"normal",showSwitchSize:!1,dataUrl:s,urlSplit:r};return a.extend(o,p),e(t,o),a("#"+t).addClass("pageBar"),n[o.type]&&n[o.type].init(t,o),!0},goUrl:function(a){a&&(window.location=a)},gotoFirst:function(a){this.gotoPage(a,1)},gotoLast:function(a){var e=t(a);this.gotoPage(a,e.pageInfo.totalPages)},gotoPrevious:function(a){var e=t(a);this.gotoPage(a,e.pageInfo.currentPage-1)},gotoNext:function(a){var e=t(a);this.gotoPage(a,e.pageInfo.currentPage+1)},gotoPage:function(e,p){var n=t(e),s=n.containerId,r=n.formId,o=n.dataUrl+n.urlSplit+"page.pageSize="+n.pageInfo.pageSize+"&page.pageNo="+p,i={};paramsStr=a("#"+r).serializeArray(),""!=paramsStr&&a.each(paramsStr,function(a,e){i[e.name]=e.value}),null!=s&&""!=s?a("#"+s).load(o,i):this.goUrl(o)},jumpPage:function(e){var p=t(e),n=a("#pn_"+e).val();return/^[0-9]*[1-9][0-9]*$/.test(n)?1>n?void this.gotoFirst(e):n>p.pageInfo.totalPages?void this.gotoLast(e):void this.gotoPage(e,n):void 0},changePageSize:function(a,p){var n=t(a);n.pageInfo.pageSize=p,e(a,n),this.gotoFirst(a)},getPageSize:function(a){var e=t(a);return e?e.pageInfo.pageSize:0},getCurrentPage:function(a){var e=t(a);return e?e.pageInfo.currentPage:0},refresh:function(a){this.gotoPage(a,1)}};var n={normal:{init:function(e,t){var n=e,s=t.pageInfo,r=s.pageSize,o=t.changePageSize,i=[];if(i.push('<table width="100%" cellspacing="0" cellpadding="0" border="0">'),i.push('	<tbody><tr><td class="w20">&nbsp;</td>'),i.push('	<td align="left" nowrap="nowrap">'+a.i18n.prop("pagebar.totalRecords",s.totalRecords)+"</td>"),o){var g;if(t.changePageSizeNumber&&"string"==typeof t.changePageSizeNumber){var u=p(t.changePageSizeNumber.split(","));g=u.length>1?u:p([10,20,50])}else g=p([10,20,50]);g=g.sort(function(a,e){return a>e?1:-1}),i.push('	<td class="w70" nowrap="nowrap">'+a.i18n.prop("pagebar.pageShow")+"</td>"),i.push('	<td class="w100" nowrap="nowrap"><ul class="pageNum">'),a.each(g,function(a,e){var t=0==a?"top":a+1==g.length?"bottom":"center";i.push('	<li class="'+t+'"><p '+(r==e?'class="select"':"")+'><a href="javascript:void(0);" onclick="$.hz.page.changePageSize(\''+n+"',"+e+');">'+e+"</a></p></li>")}),i.push("	</ul></td>")}i.push('	<td class="w20">&nbsp;</td>'),i.push('	<td class="w70 tc" nowrap="nowrap">'),i.push(s.isFirstPage?'<span class="gray">'+a.i18n.prop("pagebar.home")+"</span>":'<a href="javascript:void(0);" onclick="$.hz.page.gotoFirst(\''+n+"');return false;\">"+a.i18n.prop("pagebar.home")+"</a></td>"),i.push("	</td>"),i.push('	<td class="w70 tc" nowrap="nowrap">'),i.push(s.isHavePrePage?'<a href="javascript:void(0);" onclick="$.hz.page.gotoPrevious(\''+n+"');return false;\">"+a.i18n.prop("pagebar.previous")+"</a></td>":'<span class="gray">'+a.i18n.prop("pagebar.previous")+"</span>"),i.push("	</td>"),i.push('	<td class="w70 tc" nowrap="nowrap">'),i.push(s.isHaveNextPage?'<a href="javascript:void(0);" onclick="$.hz.page.gotoNext(\''+n+"');return false;\">"+a.i18n.prop("pagebar.next")+"</a></td>":'<span class="gray">'+a.i18n.prop("pagebar.next")+"</span>"),i.push("	</td>"),i.push('	<td class="w70 tc" nowrap="nowrap">'),i.push(s.isLastPage?'<span class="gray">'+a.i18n.prop("pagebar.last")+"</span>":'<a href="javascript:void(0);" onclick="$.hz.page.gotoLast(\''+n+"');return false;\">"+a.i18n.prop("pagebar.last")+"</a></td>"),i.push("	</td>"),i.push('	<td class="w20">&nbsp;</td>'),i.push('	<td class="w170" nowrap="nowrap"><span style="padding-left: 6px;">'+a.i18n.prop("pagebar.current")+'</span><input type="text" id="pn_'+n+'" size="2" value="'+s.currentPage+'" class="page-num" onkeydown="if(event.keyCode==13){$.hz.page.jumpPage(\''+n+'\');return false;}" value="'+s.currentPage+'">'),i.push('	<span style="padding-right: 6px;">/'+a.i18n.prop("pagebar.totalPage",s.totalPages)+"</span></td>"),i.push('	<td class="w20">&nbsp;</td>'),i.push("	</tr></tbody></table>"),a("#"+n).append(i.join(""))}},simple:{init:function(e,t){var n=e,s=t.pageInfo,r=s.pageSize,o=t.changePageSize,i=[];if(i.push('<table width="100%" cellspacing="0" cellpadding="0" border="0">'),i.push("	<tbody><tr>"),o){var g;if(t.changePageSizeNumber&&"string"==typeof t.changePageSizeNumber){var u=p(t.changePageSizeNumber.split(","));g=u.length>1?u:p([10,20,50])}else g=p([10,20,50]);g=g.sort(function(a,e){return a>e?1:-1}),i.push('	<td class="w70" nowrap="nowrap">'+a.i18n.prop("pagebar.pageShow")+"</td>"),i.push('	<td class="w100" nowrap="nowrap"><ul class="pageNum">'),a.each(g,function(a,e){var t=0==a?"top":a+1==g.length?"bottom":"center";i.push('	<li class="'+t+'"><p '+(r==e?'class="select"':"")+'><a href="javascript:void(0);" onclick="$.hz.page.changePageSize(\''+n+"',"+e+');">'+e+"</a></p></li>")}),i.push("	</ul></td>")}i.push('	<td class="w20">&nbsp;</td>'),i.push('	<td class="w70 tc" nowrap="nowrap">'),i.push(s.isHavePrePage?'<a href="javascript:void(0);" onclick="$.hz.page.gotoPrevious(\''+n+"');return false;\">"+a.i18n.prop("pagebar.previous")+"</a></td>":'<span class="gray">'+a.i18n.prop("pagebar.previous")+"</span>"),i.push("	</td>"),i.push('	<td class="w170" nowrap="nowrap"><input type="text" id="pn_'+n+'" size="2" value="'+s.currentPage+'" class="page-num" onkeydown="if(event.keyCode==13){$.hz.page.jumpPage(\''+n+'\');return false;}" value="'+s.currentPage+'">'),i.push('	<span style="padding-right: 6px;">/'+s.totalPages+"</span></td>"),i.push('	<td class="w70 tc" nowrap="nowrap">'),i.push(s.isHaveNextPage?'<a href="javascript:void(0);" onclick="$.hz.page.gotoNext(\''+n+"');return false;\">"+a.i18n.prop("pagebar.next")+"</a></td>":'<span class="gray">'+a.i18n.prop("pagebar.next")+"</span>"),i.push("	</td>"),i.push('	<td class="w20">&nbsp;</td>'),i.push("	</tr></tbody></table>"),a("#"+n).append(i.join(""))}}}}(jQuery),$.i18n.properties({name:["pagebar"],path:com.ue.global.path+"/sys/i18n/ajaxGetI18nValues.do?bundleName=",mode:"map",callback:function(){}});
;///platform/component/mask/jquery.mask.js
!function(s){s.fn.mask=function(a,e){return s(this).each(function(){if(void 0!==e&&e>0){var t=s(this);t.data("_mask_timeout",setTimeout(function(){s.maskElement(t,a)},e))}else s.maskElement(s(this),a)}),this},s.fn.unmask=function(){return s(this).each(function(){s.unmaskElement(s(this))}),this},s.fn.isMasked=function(){return this.hasClass("masked")},s.maskElement=function(a,e){void 0!==a.data("_mask_timeout")&&(clearTimeout(a.data("_mask_timeout")),a.removeData("_mask_timeout")),a.isMasked()&&s.unmaskElement(a),"static"==a.css("position")&&a.addClass("masked-relative"),a.addClass("masked");var t=s('<div class="loadmask"></div>');if(navigator.userAgent.toLowerCase().indexOf("msie")>-1&&(t.height(a.height()+parseInt(a.css("padding-top"))+parseInt(a.css("padding-bottom"))),t.width(a.width()+parseInt(a.css("padding-left"))+parseInt(a.css("padding-right")))),navigator.userAgent.toLowerCase().indexOf("msie 6")>-1&&a.find("select").addClass("masked-hidden"),a.append(t),void 0!==e){var i=s('<div class="loadmask-msg" style="display:none;"></div>');i.append("<div>"+e+"</div>"),a.append(i),i.css("top",Math.round(a.height()/2-(i.height()-parseInt(i.css("padding-top"))-parseInt(i.css("padding-bottom")))/2)+"px"),i.css("left",Math.round(a.width()/2-(i.width()-parseInt(i.css("padding-left"))-parseInt(i.css("padding-right")))/2)+"px"),i.show()}},s.unmaskElement=function(s){void 0!==s.data("_mask_timeout")&&(clearTimeout(s.data("_mask_timeout")),s.removeData("_mask_timeout")),s.find(".loadmask-msg,.loadmask").remove(),s.removeClass("masked"),s.removeClass("masked-relative"),s.find("select").removeClass("masked-hidden")}}(jQuery);
;///platform/component/box/jquery.box.js
!function(t){var s={init:function(){t(this).each(function(){if(t(this).find(".box1-header").size()<=0){var s=[];return s.push('<div class="box1-header">'),s.push("	<h2></h2>"),s.push('	<div class="box1-header-ctrls">'),s.push('		<span class="spin" alt=""></span>'),s.push('		<a class="close" title="" href="javascript:void(null);"></a>'),s.push("	</div>"),s.push("</div>"),t(this).wrapInner('<div class="box1-content"></div>'),null!=t(this).attr("angle")&&"corner"==t(this).attr("angle")&&t(this).addClass("corners shadow"),t(this).prepend(t(s.join(""))),null!=t(this).attr("boxTitle")&&t(this).find(".box1-header h2").html(t(this).attr("boxTitle")),null!=t(this).attr("boxHeight")&&t(this).find(".box1-content").height(t(this).attr("boxHeight")),null!=t(this).attr("boxState")&&"close"==t(this).attr("boxState")&&(t(this).find(".box1-content").slideToggle(200),t(this).find(".box1-header-ctrls a").removeClass("close").addClass("open")),null!=t(this).attr("boxState")&&"false"==t(this).attr("boxState")&&t(this).find(".box1-header-ctrls").addClass("none"),t(this).box1("control"),t(this).box1("resetWidth"),t(this)}})},resetWidth:function(){return t(this).each(function(){if(null!=t(this).attr("boxWidth")){var s=t(this).attr("boxWidth"),i=s.substr(s.length-1,1);if("%"==i)t(this).width(s);else{var e=Number(t(this).attr("boxWidth"));t(this).width(e)}}else{t(this).width("100%");var h=Number(t(this).width()-(t(this).outerWidth()-t(this).width()));t(this).width(h)}}),t(this)},control:function(){return t(this).each(function(){t(this).find(".box1-header-ctrls a").unbind("click").bind("click",function(){t(this).parents(".box1-header").next(".box1-content").slideToggle(200);var s=t(this).attr("class");"open"==s?t(this).removeClass("open").addClass("close"):t(this).removeClass("close").addClass("open"),t(this).parent(".box1-header-ctrls").find("span.spin").fadeIn(400).show(500,function(){t(this).fadeOut(350)})})}),t(this)}};t.fn.extend({box1:function(i){return i?i&&"string"==typeof i&&s[i]?s[i].apply(this,Array.prototype.slice.call(arguments,1)):void 0:t(this).box1("init")}})}(jQuery);
;///platform/component/my97-date/WdatePicker.js
var dateLang="zh-cn",$dp,WdatePicker;!function(){function e(){y.$dp=y.$dp||{},obj={$:function(e){return"string"==typeof e?D[C].getElementById(e):e},$D:function(e,t){return this.$DV(this.$(e).value,t)},$DV:function(e,t){if(""!=e){if(this.dt=$dp.cal.splitDate(e,$dp.cal.dateFmt),t)for(var n in t)if(void 0===this.dt[n])this.errMsg="invalid property:"+n;else if(this.dt[n]+=t[n],"M"==n){var d=t.M>0?1:0,l=new Date(this.dt.y,this.dt.M,0).getDate();this.dt.d=Math.min(l+d,this.dt.d)}if(this.dt.refresh())return this.dt}return""},show:function(){for(var e=y[C].getElementsByTagName("div"),t=1e5,n=0;n<e.length;n++){var d=parseInt(e[n].style.zIndex);d>t&&(t=d)}this.dd.style.zIndex=t+2,$(this.dd,"block")},hide:function(){$(this.dd,"none")},attachEvent:t};for(var e in obj)y.$dp[e]=obj[e];$dp=y.$dp,$dp.dd=y[C].getElementById("_my97DP")}function t(e,t,n){if(b)e.attachEvent(t,n);else if(n){var d=t.replace(/on/,"");n._ieEmuEventHandler=function(e){return n(e)},e.addEventListener(d,n._ieEmuEventHandler,!1)}}function n(){for(var e,t,n=D[C][x]("script"),d=0;d<n.length&&(e=n[d].src.substring(0,n[d].src.toLowerCase().indexOf("wdatepicker.js")),t=e.lastIndexOf("/"),t>0&&(e=e.substring(0,t+1)),!e);d++);return e}function d(e){var t,n;if("/"!=e.substring(0,1)&&-1==e.indexOf("://")){t=y.location.href,n=location.href,t.indexOf("?")>-1&&(t=t.substring(0,t.indexOf("?"))),n.indexOf("?")>-1&&(n=n.substring(0,n.indexOf("?")));var d,l,a,o,i="",r="",s="";for(a=0;a<Math.max(t.length,n.length);a++){if(d=t.charAt(a).toLowerCase(),l=n.charAt(a).toLowerCase(),d!=l){i=t.substring(o+1,t.length),i=i.substring(0,i.lastIndexOf("/")),r=n.substring(o+1,n.length),r=r.substring(0,r.lastIndexOf("/"));break}"/"==d&&(o=a)}if(""!=i)for(a=0;a<i.split("/").length;a++)s+="../";""!=r&&(s+=r+"/"),e=t.substring(0,t.lastIndexOf("/")+1)+s+e}m.$dpPath=e}function l(e,t,n){var d=D[C][x]("HEAD").item(0),l=D[C].createElement("link");d&&(l.href=e,l.rel="stylesheet",l.type="text/css",t&&(l.title=t),n&&(l.charset=n),d.appendChild(l))}function a(e,n){t(e,"onload",n)}function o(e){e=e||y;for(var t=0,n=0;e!=y;){for(var d=e.parent[C][x]("iframe"),l=0;l<d.length;l++)try{if(d[l].contentWindow==e){var a=i(d[l]);t+=a.left,n+=a.top;break}}catch(o){}e=e.parent}return{leftM:t,topM:n}}function i(e){if(e.getBoundingClientRect)return e.getBoundingClientRect();var t={ROOT_TAG:/^body|html$/i,OP_SCROLL:/^(?:inline|table-row)$/i},n=!1,d=null,l=e.offsetTop,a=e.offsetLeft,o=e.offsetWidth,i=e.offsetHeight,r=e.offsetParent;if(r!=e)for(;r;)a+=r.offsetLeft,l+=r.offsetTop,"fixed"==h(r,"position").toLowerCase()?n=!0:"body"==r.tagName.toLowerCase()&&(d=r.ownerDocument.defaultView),r=r.offsetParent;for(r=e.parentNode;r.tagName&&!t.ROOT_TAG.test(r.tagName);)(r.scrollTop||r.scrollLeft)&&(t.OP_SCROLL.test($(r))||w&&"visible"===r.style.overflow||(a-=r.scrollLeft,l-=r.scrollTop)),r=r.parentNode;if(!n){var p=s(d);a-=p.left,l-=p.top}return o+=a,i+=l,{left:a,top:l,right:o,bottom:i}}function r(e){e=e||y;var t=e[C],n=e.innerWidth?e.innerWidth:t[L]&&t[L].clientWidth?t[L].clientWidth:t.body.offsetWidth,d=e.innerHeight?e.innerHeight:t[L]&&t[L].clientHeight?t[L].clientHeight:t.body.offsetHeight;return{width:n,height:d}}function s(e){e=e||y;var t=e[C],n=t[L],d=t.body;return t=n&&null!=n.scrollTop&&(n.scrollTop>d.scrollTop||n.scrollLeft>d.scrollLeft)?n:d,{top:t.scrollTop,left:t.scrollLeft}}function p(e){var t=e?e.srcElement||e.target:null;try{$dp.cal&&!$dp.eCont&&$dp.dd&&t!=$dp.el&&"block"==$dp.dd.style.display&&$dp.cal.close()}catch(e){}}function f(){$dp.status=2,c()}function c(){if($dp.flatCfgs.length>0){var e=$dp.flatCfgs.shift();e.el={innerHTML:""},e.autoPickDate=!0,e.qsEnabled=!1,g(e)}}function u(n,d){function l(){return b&&y!=D&&"complete"!=y[C].readyState?!1:!0}function a(){if(M){for(func=a.caller;null!=func;){var e=func.arguments[0];if(e&&(e+"").indexOf("Event")>=0)return e;func=func.caller}return null}return event}if($dp.win=D,e(),n=n||{},d){if(!l())return void(E=E||setInterval(function(){"complete"==y[C].readyState&&clearInterval(E),u(null,!0)},50));if(0!=$dp.status)return;$dp.status=1,g({el:{innerHTML:""}},!0)}else if(n.eCont)n.eCont=$dp.$(n.eCont),$dp.flatCfgs.push(n),2==$dp.status&&c();else{if(0==$dp.status)return void u(null,!0);if(2!=$dp.status)return;var o=a();if(o&&($dp.srcEl=o.srcElement||o.target,o.cancelBubble=!0),$dp.el=n.el=$dp.$(n.el||$dp.srcEl),!$dp.el||$dp.el.My97Mark===!0||$dp.el.disabled||$dp.el==$dp.el&&"none"!=$($dp.dd)&&"-1970px"!=$dp.dd.style.left)return void($dp.el.My97Mark=!1);if(g(n),o&&1==$dp.el.nodeType&&void 0===$dp.el.My97Mark){$dp.el.My97Mark=!1;var i,r;"focus"==o.type?(i="onclick",r="onfocus"):(i="onfocus",r="onclick"),t($dp.el,i,$dp.el[r])}}}function h(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,!1)[t]}function $(e,t){if(e){if(null==t)return h(e,"display");e.style.display=t}}function g(e,t){function n(){var e=$dp.position.left,t=$dp.position.top,n=$dp.el;n==$dp.srcEl||"none"!=$(n)&&"hidden"!=n.type||(n=$dp.srcEl);var d=i(n),l=o(D),a=r(y),p=s(y),f=$dp.dd.offsetHeight,c=$dp.dd.offsetWidth;isNaN(t)?t="above"==t||"under"!=t&&l.topM+d.bottom+f>a.height&&l.topM+d.top-f>0?p.top+l.topM+d.top-f-2:p.top+l.topM+Math.min(d.bottom,a.height-f)+2:t+=p.top+l.topM,isNaN(e)?e=p.left+Math.min(l.leftM+d.left,a.width-c-5)-(b?2:0):e+=p.left+l.leftM,$dp.dd.style.top=t+"px",$dp.dd.style.left=e+"px"}for(var l in m)"$"!=l.substring(0,1)&&($dp[l]=m[l]);for(l in e)void 0!==$dp[l]&&($dp[l]=e[l]);var p=$dp.el?$dp.el.nodeName:"INPUT";if(t||$dp.eCont||new RegExp(/input|textarea|div|span|p|a/gi).test(p))if($dp.elProp="INPUT"==p?"value":"innerHTML","auto"==$dp.lang&&($dp.lang=b?navigator.browserLanguage.toLowerCase():navigator.language.toLowerCase()),!$dp.dd||$dp.eCont||$dp.lang&&$dp.realLang&&$dp.realLang.name!=$dp.lang&&$dp.getLangIndex&&$dp.getLangIndex($dp.lang)>=0){$dp.dd&&!$dp.eCont&&y[C].body.removeChild($dp.dd),""==m.$dpPath&&d(v);var c='<iframe style="width:1px;height:1px" src="'+com.ue.global.path+'/platform/component/my97-date/My97DatePicker.htm" frameborder="0" border="0" scrolling="no"></iframe>';$dp.eCont?($dp.eCont.innerHTML=c,a($dp.eCont.childNodes[0],f)):($dp.dd=y[C].createElement("DIV"),$dp.dd.id="_my97DP",$dp.dd.style.cssText="position:absolute",$dp.dd.innerHTML=c,y[C].body.appendChild($dp.dd),a($dp.dd.childNodes[0],f),t?$dp.dd.style.left=$dp.dd.style.top="-1970px":($dp.show(),n()))}else $dp.cal&&($dp.show(),$dp.cal.init(),$dp.eCont||n())}var m={$wdate:!0,$dpPath:"",$crossFrame:!0,doubleCalendar:!1,enableKeyboard:!0,enableInputMask:!0,autoUpdateOnChanged:null,whichDayIsfirstWeek:4,position:{},lang:dateLang,skin:com.ue.global.theme,dateFmt:"yyyy-MM-dd",realDateFmt:"yyyy-MM-dd",realTimeFmt:"HH:mm:ss",realFullFmt:"%Date %Time",minDate:"1900-01-01 00:00:00",maxDate:"2099-12-31 23:59:59",startDate:"",alwaysUseStartDate:!1,yearOffset:1911,firstDayOfWeek:0,isShowWeek:!1,highLineWeekDay:!0,isShowClear:!0,isShowToday:!0,isShowOK:!0,isShowOthers:!0,readOnly:!1,errDealMode:0,autoPickDate:null,qsEnabled:!0,autoShowQS:!1,specialDates:null,specialDays:null,disabledDates:null,disabledDays:null,opposite:!1,onpicking:null,onpicked:null,onclearing:null,oncleared:null,ychanging:null,ychanged:null,Mchanging:null,Mchanged:null,dchanging:null,dchanged:null,Hchanging:null,Hchanged:null,mchanging:null,mchanged:null,schanging:null,schanged:null,eCont:null,vel:null,errMsg:"",quickSel:[],has:{}};WdatePicker=u;var y,v,b,M,w,D=window,C="document",L="documentElement",x="getElementsByTagName";switch(navigator.appName){case"Microsoft Internet Explorer":b=!0;break;case"Opera":w=!0;break;default:M=!0}if(v=n(),m.$wdate&&l(com.ue.global.path+"/platform/component/my97-date/skin/WdatePicker.css"),y=D,m.$crossFrame)try{for(;y.parent&&y.parent[C]!=y[C]&&0==y.parent[C][x]("frameset").length;)y=y.parent}catch(k){}y.$dp||(y.$dp={ff:M,ie:b,opera:w,el:null,win:D,status:0,defMinDate:m.minDate,defMaxDate:m.maxDate,flatCfgs:[]}),e(),0==$dp.status&&a(D,function(){u(null,!0)}),D[C].docMD||(t(D[C],"onmousedown",p),D[C].docMD=!0),y[C].docMD||(t(y[C],"onmousedown",p),y[C].docMD=!0),t(D,"onunload",function(){$dp.dd&&$($dp.dd,"none")});var E}();
;///platform/component/accordion/jquery-ui-accordion.js
!function(e){e.widget("ui.accordion",{version:"1.11.0",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),void("disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t))))},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,a=this.headers.length,s=this.headers.index(t.target),n=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:n=this.headers[(s+1)%a];break;case i.LEFT:case i.UP:n=this.headers[(s-1+a)%a];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:n=this.headers[0];break;case i.END:n=this.headers[a-1]}n&&(e(t.target).attr("tabIndex",-1),e(n).attr("tabIndex",0),n.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,i=this.options,a=i.heightStyle,s=this.element.parent();this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),i=t.uniqueId().attr("id"),a=t.next(),s=a.uniqueId().attr("id");t.attr("aria-controls",s),a.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===a?(t=s.height(),this.element.siblings(":visible").each(function(){var i=e(this),a=i.css("position");"absolute"!==a&&"fixed"!==a&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===a&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,a=this.active,s=e(t.currentTarget),n=s[0]===a[0],r=n&&i.collapsible,o=r?e():s.next(),h=a.next(),d={oldHeader:a,oldPanel:h,newHeader:r?e():s,newPanel:o};t.preventDefault(),n&&!i.collapsible||this._trigger("beforeActivate",t,d)===!1||(i.active=r?!1:this.headers.index(s),this.active=n?e():s,this._toggle(d),a.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&a.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),n||(s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),s.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,a=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=a,this.options.animate?this._animate(i,a,t):(a.hide(),i.show(),this._toggleComplete(t)),a.attr({"aria-hidden":"true"}),a.prev().attr("aria-selected","false"),i.length&&a.length?a.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,t,i){var a,s,n,r=this,o=0,h=e.length&&(!t.length||e.index()<t.index()),d=this.options.animate||{},c=h&&d.down||d,l=function(){r._toggleComplete(i)};return"number"==typeof c&&(n=c),"string"==typeof c&&(s=c),s=s||c.easing||d.easing,n=n||c.duration||d.duration,t.length?e.length?(a=e.show().outerHeight(),t.animate(this.hideProps,{duration:n,easing:s,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(this.showProps,{duration:n,easing:s,complete:l,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?o+=i.now:"content"!==r.options.heightStyle&&(i.now=Math.round(a-t.outerHeight()-o),o=0)}})):t.animate(this.hideProps,n,s,l):e.animate(this.showProps,n,s,l)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery);
;///platform/component/tabs/jquery.tabs.js
!function(t){function a(a,s){var e=0,i=!0;return t(">div.tabs-header ul.tabs li",a).each(function(){this==s&&(i=!1),1==i&&(e+=t(this).outerWidth(!0))}),e}function s(a){var s=t(">div.tabs-header",a),e=0;t("ul.tabs li",s).each(function(){e+=t(this).outerWidth(!0)});var i=t(".tabs-wrap",s).width(),l=parseInt(t(".tabs",s).css("padding-left"));return e-i+l}function e(a){var s=t(">div.tabs-header",a),e=0;if(t("ul.tabs li",s).each(function(){e+=t(this).outerWidth(!0)}),e>s.width()){t(".tabs-scroller-left",s).css("display","block"),t(".tabs-scroller-right",s).css("display","block"),t(".tabs-wrap",s).addClass("tabs-scrolling"),1==t.boxModel?t(".tabs-wrap",s).css("left",2):t(".tabs-wrap",s).css("left",2);var i=s.width()-t(".tabs-scroller-left",s).outerWidth()-t(".tabs-scroller-right",s).outerWidth();t(".tabs-wrap",s).width(i+3)}else t(".tabs-scroller-left",s).css("display","none"),t(".tabs-scroller-right",s).css("display","none"),t(".tabs-wrap",s).removeClass("tabs-scrolling").scrollLeft(0),t(".tabs-wrap",s).width(s.width()),t(".tabs-wrap",s).css("left",0)}function i(a){e(a);var s=t(">div.tabs-header ul.tabs",a).outerHeight(!0),i=t(">div.tabs-panels",a),l=parseInt(t(a).css("height"));if(!isNaN(l))if(1==t.boxModel){var n=i.outerHeight(!0)-i.height();i.css("height",l-s-n||"auto")}else i.css("height",l-s-5);t("div.tabs-container",a).tabs("resize")}function l(a){t(a).wrapInner('<div class="tabs-panels"/>'),t('<div class="tabs-header"><div class="tabs-scroller-left"></div><div class="tabs-scroller-right"></div><div class="tabs-wrap"><ul class="tabs"></ul></div></div>').prependTo(a);var s=t(">div.tabs-header",a);t(">div.tabs-panels>div",a).each(function(){t(this).attr("id")||t(this).attr("id","gen-tabs-panel"+t.fn.tabs.defaults.idSeed++);var s={id:t(this).attr("id"),uid:t(this).attr("uid"),title:t(this).attr("title"),content:null,href:t(this).attr("href"),closable:"true"==t(this).attr("closable"),icon:t(this).attr("icon"),selected:void 0!=t(this).attr("selected"),cache:"false"==t(this).attr("cache")?!1:!0};n(a,s)}),t(".tabs-scroller-left, .tabs-scroller-right",s).hover(function(){t(this).addClass("tabs-scroller-over")},function(){t(this).removeClass("tabs-scroller-over")})}function n(a,s){var e=t(">div.tabs-header",a),i=t("ul.tabs",e),l=t('<li container="'+(t(a).attr("id")||"")+'" uid="'+(s&&s.uid?s.uid:"")+'"></li>'),n=s.title;n=String(n).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;");var r=t("<span></span>").html(n),c=t('<a class="tabs-inner"></a>').attr("href","javascript:void(0)").append(r);l.append(c).appendTo(i),s.closable&&(r.addClass("tabs-closable"),c.after('<a href="javascript:void(0)" class="tabs-close"></a>')),s.icon&&(r.addClass("tabs-with-icon"),r.after(t("<span/>").addClass("tabs-icon").addClass(s.icon))),s.selected&&l.addClass("tabs-selected"),s.content&&t("#"+s.id).html(s.content),t.data(l[0],"tabs.tab",{id:s.id,uid:s.uid,title:s.title,href:s.href,loaded:!1,cache:s.cache})}function r(a,s){s=t.extend({id:null,uid:null,title:"",content:"",href:null,cache:!0,icon:null,closable:!1,selected:!0},s||{}),s.selected&&t(".tabs-header .tabs-wrap .tabs li",a).removeClass("tabs-selected"),s.id="gen-tabs-panel"+t.fn.tabs.defaults.idSeed++,t("<div></div>").attr("id",s.id).attr("uid",s.uid).attr("title",s.title).appendTo(t(">div.tabs-panels",a)),n(a,s)}function c(a,s){if(s.uid){var e=t(">div.tabs-header li[uid="+s.uid+"]",a)[0];if(e){if(s.title){t("span:eq(0)",e).text(s.title);var i=t(">div.tabs-panels div[uid="+s.uid+"]",a);t(i).attr("title",s.title)}if(s.icon&&t(".tabs-icon",e).attr("class","").addClass("tabs-icon "+s.icon),s.content){var l=t.data(e,"tabs.tab"),i=t("#"+l.id);i.html(s.content)}}}}function d(a,e,l){var n=t.data(a,"tabs").options,r=t(">div.tabs-header li[uid="+e+"]",a)[0];if(r){var c=t.data(r,"tabs.tab"),d=t("#"+c.id);if(!l||0!=n.onClose.call(d,e)){var h=t(r).hasClass("tabs-selected");if(t.removeData(r,"tabs.tab"),t(r).remove(),d.remove(),i(a),h)o(a);else{var b=t(">div.tabs-header .tabs-wrap",a),u=Math.min(b.scrollLeft(),s(a));b.animate({scrollLeft:u},n.scrollDuration)}}}}function o(a,s){if(s){var e=t('>div.tabs-header li:has(a span:contains("'+s+'"))',a)[0];e&&t(e).trigger("click")}else u(a)}function h(a,s){if(s){var e=t('>div.tabs-header li:has(a span:contains("'+s+'"))',a)[0];e&&t(e).trigger("click")}else u(a)}function b(a,s){if(s){var e=t('>div.tabs-header li[uid="'+s+'"]',a)[0];e&&t(e).trigger("click")}else u(a)}function u(a){var s=t(">div.tabs-header ul.tabs",a);0==t(".tabs-selected",s).length?t("li:first",s).trigger("click"):t(".tabs-selected",s).trigger("click")}function f(e){e=e||{};var n=this.each(function(){function n(a){var s=t(this).parent()[0],e=t.data(s,"tabs.tab");d(f,e.uid,!0),a.stopPropagation()}function r(){t(".tabs-selected",p).removeClass("tabs-selected"),t(this).addClass("tabs-selected"),t(">div.tabs-panels>div",f).css("display","none");var e=t(".tabs-wrap",v),i=a(f,this),l=i-e.scrollLeft(),n=l+t(this).outerWidth();if(0>l||n>e.innerWidth()){var r=Math.min(i-(e.width()-t(this).width())/2,s(f));e.animate({scrollLeft:r},b.scrollDuration)}var c=t.data(this,"tabs.tab"),d=t("#"+c.id);d.css("display","block").focus(),t("div.tabs-container",d).tabs("resize"),!c.href||c.loaded&&c.cache||d.load(c.href,null,function(){b.onLoad.apply(this,arguments),c.loaded=!0}),b.onSelect.call(d,c.title,c.uid)}function c(){var a=t(".tabs-wrap",v),s=a.scrollLeft()-b.scrollIncrement;a.animate({scrollLeft:s},b.scrollDuration)}function h(){var a=t(".tabs-wrap",v),e=Math.min(a.scrollLeft()+b.scrollIncrement,s(f));a.animate({scrollLeft:e},b.scrollDuration)}var b,u=t.data(this,"tabs");u?(b=t.extend(u.options,e),u.options=b):(l(this),b=t.extend({},t.fn.tabs.defaults,e),t.data(this,"tabs",{options:b}));var f=this,v=t(">div.tabs-header",f),p=t("ul.tabs",v);1==b.plain?v.addClass("tabs-header-plain"):v.removeClass("tabs-header-plain"),u&&(t("li",p).unbind(".tabs"),t("a.tabs-close",p).unbind(".tabs"),t(".tabs-scroller-left",v).unbind(".tabs"),t(".tabs-scroller-right",v).unbind(".tabs")),t("li",p).bind("click.tabs",r),t("a.tabs-close",p).bind("click.tabs",n),t(".tabs-scroller-left",v).bind("click.tabs",c),t(".tabs-scroller-right",v).bind("click.tabs",h),i(f),o(f)});return n}t.hz.tabs={init:function(a,s){return f.apply(t("#"+a),[s])},resize:function(a){t("#"+a).each(function(){i(this)})},add:function(a,s){t("#"+a).each(function(){r(this,s),t(this).tabs()})},update:function(a,s){t("#"+a).each(function(){c(this,s)})},close:function(a,s){t("#"+a).each(function(){d(this,s,!1)})},selectWithTitle:function(a,s){t("#"+a).each(function(){h(this,s)})},selectWithUid:function(a,s){t("#"+a).each(function(){b(this,s)})}},t.fn.tabs=function(a,s){if("string"==typeof a)switch(a){case"resize":return this.each(function(){i(this)});case"add":return this.each(function(){r(this,s),t(this).tabs()});case"close":return this.each(function(){d(this,s,!1)});case"select":return this.each(function(){o(this,s)});case"update":return this.each(function(){c(this,s)})}return f.apply(this,[a])},t.fn.tabs.defaults={idSeed:0,plain:!1,scrollIncrement:100,scrollDuration:400,onLoad:function(){},onSelect:function(){},onClose:function(){}}}(jQuery);
;///platform/component/popupLayer/jquery.artDialog.4.1.7.js
!function(t,e,i){t.noop=t.noop||function(){};var n,o=0,s=t(e),a=t(document),l=t("html"),c=document.documentElement,r=e.VBArray&&!e.XMLHttpRequest,u="createTouch"in document&&!("onmousemove"in c)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),d="artDialog"+ +new Date,f=function(e,s,a){e=e||{},("string"==typeof e||1===e.nodeType)&&(e={content:e,fixed:!u});var l,c=f.defaults,r=e.follow=1===this.nodeType&&this||e.follow;for(var h in c)e[h]===i&&(e[h]=c[h]);return t.each({ok:"yesFn",cancel:"noFn",close:"closeFn",init:"initFn",okVal:"yesText",cancelVal:"noText"},function(t,n){e[t]=e[t]!==i?e[t]:e[n]}),"string"==typeof r&&(r=t(r)[0]),e.id=r&&r[d+"follow"]||e.id||d+o,l=f.list[e.id],r&&l?l.follow(r).zIndex().focus():l?l.zIndex().focus():(u&&(e.fixed=!1),t.isArray(e.button)||(e.button=e.button?[e.button]:[]),s!==i&&(e.ok=s),a!==i&&(e.cancel=a),e.ok&&e.button.push({name:e.okVal,callback:e.ok,focus:!0}),e.cancel&&e.button.push({name:e.cancelVal,callback:e.cancel}),f.defaults.zIndex=e.zIndex,o++,f.list[e.id]=n?n._init(e):new f.fn._init(e))};f.fn=f.prototype={version:"4.1.7",closed:!0,_init:function(t){var i,o=this,s=t.icon,a=s&&{backgroundImage:"url('"+t.path+"/icons/"+s+".png')"};return o.closed=!1,o.config=t,o.DOM=i=o.DOM||o._getDOM(),i.wrap.addClass(t.skin),i.close[t.cancel===!1?"hide":"show"](),i.icon[0].style.display=s?"":"none",i.iconBg.css(a||{background:"none"}),i.se.css("cursor",t.resize?"se-resize":"auto"),i.title.css("cursor",t.drag?"move":"auto"),i.content.css("padding",t.padding),o[t.show?"show":"hide"](!0),o.button(t.button).title(t.title).content(t.content,!0).size(t.width,t.height).time(t.time),t.follow?o.follow(t.follow):o.position(t.left,t.top),o.zIndex().focus(),t.lock&&o.lock(),o._addEvent(),o._ie6PngFix(),n=null,t.init&&t.init.call(o,e),o},content:function(t){var e,n,o,s,a=this,l=a.DOM,c=l.wrap[0],r=c.offsetWidth,u=c.offsetHeight,d=parseInt(c.style.left),f=parseInt(c.style.top),h=c.style.width,p=l.content,m=p[0];return a._elemBack&&a._elemBack(),c.style.width="auto",t===i?m:("string"==typeof t?p.html(t):t&&1===t.nodeType&&(s=t.style.display,e=t.previousSibling,n=t.nextSibling,o=t.parentNode,a._elemBack=function(){e&&e.parentNode?e.parentNode.insertBefore(t,e.nextSibling):n&&n.parentNode?n.parentNode.insertBefore(t,n):o&&o.appendChild(t),t.style.display=s,a._elemBack=null},p.html(""),m.appendChild(t),t.style.display="block"),arguments[1]||(a.config.follow?a.follow(a.config.follow):(r=c.offsetWidth-r,u=c.offsetHeight-u,d-=r/2,f-=u/2,c.style.left=Math.max(d,0)+"px",c.style.top=Math.max(f,0)+"px"),h&&"auto"!==h&&(c.style.width=c.offsetWidth+"px"),a._autoPositionType()),a._ie6SelectFix(),a._runScript(m),a)},title:function(t){var e=this.DOM,n=e.wrap,o=e.title,s="aui_state_noTitle";return t===i?o[0]:(t===!1?(o.hide().html(""),n.addClass(s)):(o.show().html(t||""),n.removeClass(s)),this)},position:function(t,e){var n=this,o=n.config,l=n.DOM.wrap[0],c=r?!1:o.fixed,u=r&&n.config.fixed,d=a.scrollLeft(),f=a.scrollTop(),h=c?0:d,p=c?0:f,m=s.width(),g=s.height(),_=l.offsetWidth,v=l.offsetHeight,y=l.style;return(t||0===t)&&(n._left=-1!==t.toString().indexOf("%")?t:null,t=n._toNumber(t,m-_),"number"==typeof t?(t=u?t+=d:t+h,y.left=Math.max(t,h)+"px"):"string"==typeof t&&(y.left=t)),(e||0===e)&&(n._top=-1!==e.toString().indexOf("%")?e:null,e=n._toNumber(e,g-v),"number"==typeof e?(e=u?e+=f:e+p,y.top=Math.max(e,p)+"px"):"string"==typeof e&&(y.top=e)),t!==i&&e!==i&&(n._follow=null,n._autoPositionType()),n},size:function(t,e){var i,n,o,a,l=this,c=(l.config,l.DOM),r=c.wrap,u=c.main,d=r[0].style,f=u[0].style;return contentStyle=c.content[0].style,t&&(l._width=-1!==t.toString().indexOf("%")?t:null,i=s.width()-r[0].offsetWidth+u[0].offsetWidth,o=l._toNumber(t,i),t=o,"number"==typeof t?(d.width="auto",f.width=Math.max(l.config.minWidth,t)+"px",d.width=r[0].offsetWidth+"px"):"string"==typeof t&&(f.width=t,"auto"===t&&r.css("width","auto"))),e&&(l._height=-1!==e.toString().indexOf("%")?e:null,n=s.height()-r[0].offsetHeight+u[0].offsetHeight,a=l._toNumber(e,n),e=a,"number"==typeof e?f.height=Math.max(l.config.minHeight,e)+"px":"string"==typeof e&&(f.height=e)),contentStyle.width=f.width,contentStyle.height=f.height,l._ie6SelectFix(),l},follow:function(e){var i,n=this,o=n.config;if(("string"==typeof e||e&&1===e.nodeType)&&(i=t(e),e=i[0]),!e||!e.offsetWidth&&!e.offsetHeight)return n.position(n._left,n._top);var l=d+"follow",c=s.width(),u=s.height(),f=a.scrollLeft(),h=a.scrollTop(),p=i.offset(),m=e.offsetWidth,g=e.offsetHeight,_=r?!1:o.fixed,v=_?p.left-f:p.left,y=_?p.top-h:p.top,b=n.DOM.wrap[0],x=b.style,w=b.offsetWidth,k=b.offsetHeight,M=v-(w-m)/2,T=y+g,D=_?0:f,O=_?0:h;return M=D>M?v:M+w>c&&v-w>D?v-w+m:M,T=T+k>u+O&&y-k>O?y-k:T,x.left=M+"px",x.top=T+"px",n._follow&&n._follow.removeAttribute(l),n._follow=e,e[l]=o.id,n._autoPositionType(),n},button:function(){var e=this,n=arguments,o=e.DOM,s=o.buttons,a=s[0],l="aui_state_highlight",c=e._listeners=e._listeners||{},r=t.isArray(n[0])?n[0]:[].slice.call(n);return n[0]===i?a:(t.each(r,function(i,n){var o=n.name,s=!c[o],r=s?document.createElement("button"):c[o].elem;c[o]||(c[o]={}),n.callback&&(c[o].callback=n.callback),n.className&&(r.className=n.className),n.focus&&(e._focus&&e._focus.removeClass(l),e._focus=t(r).addClass(l),e.focus()),r.setAttribute("type","button"),r[d+"callback"]=o,r.disabled=!!n.disabled,s&&(r.innerHTML=o,c[o].elem=r,a.appendChild(r))}),s[0].style.display=r.length?"":"none",e._ie6SelectFix(),e)},show:function(){return this.DOM.wrap.show(),!arguments[0]&&this._lockMaskWrap&&this._lockMaskWrap.show(),this},hide:function(){return this.DOM.wrap.hide(),!arguments[0]&&this._lockMaskWrap&&this._lockMaskWrap.hide(),this},close:function(){if(this.closed)return this;var t=this,i=t.DOM,o=i.wrap,s=f.list,a=t.config.close,l=t.config.follow;if(t.time(),"function"==typeof a&&a.call(t,e)===!1)return t;t.unlock(),t._elemBack&&t._elemBack(),o[0].className=o[0].style.cssText="",i.title.html(""),i.content.html(""),i.buttons.html(""),f.focus===t&&(f.focus=null),l&&l.removeAttribute(d+"follow"),delete s[t.config.id],t._removeEvent(),t.hide(!0)._setAbsolute();for(var c in t)t.hasOwnProperty(c)&&"DOM"!==c&&delete t[c];return n?o.remove():n=t,t},time:function(t){var e=this,i=e.config.cancelVal,n=e._timer;return n&&clearTimeout(n),t&&(e._timer=setTimeout(function(){e._click(i)},1e3*t)),e},focus:function(){try{if(this.config.focus){var t=this._focus&&this._focus[0]||this.DOM.close[0];t&&t.focus()}}catch(e){}return this},zIndex:function(){var t=this,e=t.DOM,i=e.wrap,n=f.focus,o=f.defaults.zIndex++;return i.css("zIndex",o),t._lockMask&&t._lockMask.css("zIndex",o-1),n&&n.DOM.wrap.removeClass("aui_state_focus"),f.focus=t,i.addClass("aui_state_focus"),t},lock:function(){if(this._lock)return this;var e=this,i=f.defaults.zIndex-1,n=e.DOM.wrap,o=e.config,s=a.width(),l=a.height(),c=e._lockMaskWrap||t(document.body.appendChild(document.createElement("div"))),d=e._lockMask||t(c[0].appendChild(document.createElement("div"))),h="(document).documentElement",p=u?"width:"+s+"px;height:"+l+"px":"width:100%;height:100%",m=r?"position:absolute;left:expression("+h+".scrollLeft);top:expression("+h+".scrollTop);width:expression("+h+".clientWidth);height:expression("+h+".clientHeight)":"";return e.zIndex(),n.addClass("aui_state_lock"),c[0].style.cssText=p+";position:fixed;z-index:"+i+";top:0;left:0;overflow:hidden;"+m,d[0].style.cssText="height:100%;background:"+o.background+";filter:alpha(opacity=0);opacity:0",r&&d.html('<iframe src="about:blank" style="width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;filter:alpha(opacity=0)"></iframe>'),d.stop(),d.bind("click",function(){e._reset()}).bind("dblclick",function(){e._click(e.config.cancelVal)}),0===o.duration?d.css({opacity:o.opacity}):d.animate({opacity:o.opacity},o.duration),e._lockMaskWrap=c,e._lockMask=d,e._lock=!0,e},unlock:function(){var t=this,e=t._lockMaskWrap,i=t._lockMask;if(!t._lock)return t;var o=e[0].style,s=function(){r&&(o.removeExpression("width"),o.removeExpression("height"),o.removeExpression("left"),o.removeExpression("top")),o.cssText="display:none",n&&e.remove()};return i.stop().unbind(),t.DOM.wrap.removeClass("aui_state_lock"),t.config.duration?i.animate({opacity:0},t.config.duration,s):s(),t._lock=!1,t},_getDOM:function(){var e=document.createElement("div"),i=document.body;e.style.cssText="position:absolute;left:0;top:0",e.innerHTML=f._templates,i.insertBefore(e,i.firstChild);for(var n,o=0,s={wrap:t(e)},a=e.getElementsByTagName("*"),l=a.length;l>o;o++)n=a[o].className.split("aui_")[1],n&&(s[n]=t(a[o]));return s},_toNumber:function(t,e){if(!t&&0!==t||"number"==typeof t)return t;var i=t.length-1;return t.lastIndexOf("px")===i?t=parseInt(t):t.lastIndexOf("%")===i&&(t=parseInt(e*t.split("%")[0]/100)),t},_ie6PngFix:r?function(){for(var t,e,i,n,o=0,s=f.defaults.path+"/skins/",a=this.DOM.wrap[0].getElementsByTagName("*");o<a.length;o++)t=a[o],e=t.currentStyle.png,e&&(i=s+e,n=t.runtimeStyle,n.backgroundImage="none",n.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+i+"',sizingMethod='crop')")}:t.noop,_ie6SelectFix:r?function(){var t=this.DOM.wrap,e=t[0],i=d+"iframeMask",n=t[i],o=e.offsetWidth,s=e.offsetHeight;o+="px",s+="px",n?(n.style.width=o,n.style.height=s):(n=e.appendChild(document.createElement("iframe")),t[i]=n,n.src="about:blank",n.style.cssText="position:absolute;z-index:-1;left:0;top:0;filter:alpha(opacity=0);width:"+o+";height:"+s)}:t.noop,_runScript:function(t){for(var e,i=0,n=0,o=t.getElementsByTagName("script"),s=o.length,a=[];s>i;i++)"text/dialog"===o[i].type&&(a[n]=o[i].innerHTML,n++);a.length&&(a=a.join(""),e=new Function(a),e.call(this))},_autoPositionType:function(){this[this.config.fixed?"_setFixed":"_setAbsolute"]()},_setFixed:function(){return r&&t(function(){var e="backgroundAttachment";"fixed"!==l.css(e)&&"fixed"!==t("body").css(e)&&l.css({zoom:1,backgroundImage:"url(about:blank)",backgroundAttachment:"fixed"})}),function(){var t=this.DOM.wrap,e=t[0].style;if(r){var i=parseInt(t.css("left")),n=parseInt(t.css("top")),o=a.scrollLeft(),s=a.scrollTop(),l="(document.documentElement)";this._setAbsolute(),e.setExpression("left","eval("+l+".scrollLeft + "+(i-o)+') + "px"'),e.setExpression("top","eval("+l+".scrollTop + "+(n-s)+') + "px"')}else e.position="fixed"}}(),_setAbsolute:function(){var t=this.DOM.wrap[0].style;r&&(t.removeExpression("left"),t.removeExpression("top")),t.position="absolute"},_click:function(t){var i=this,n=i._listeners[t]&&i._listeners[t].callback;return"function"!=typeof n||n.call(i,e)!==!1?i.close():i},_reset:function(t){var e,i=this,n=i._winSize||s.width()*s.height(),o=i._follow,a=i._width,l=i._height,c=i._left,r=i._top;t&&(e=i._winSize=s.width()*s.height(),n===e)||((a||l)&&i.size(a,l),o?i.follow(o):(c||r)&&i.position(c,r))},_addEvent:function(){var t,i=this,n=i.config,o="CollectGarbage"in e,a=i.DOM;i._winResize=function(){t&&clearTimeout(t),t=setTimeout(function(){i._reset(o)},40)},s.bind("resize",i._winResize),a.wrap.bind("click",function(t){var e,o=t.target;return o.disabled?!1:o===a.close[0]?(i._click(n.cancelVal),!1):(e=o[d+"callback"],e&&i._click(e),void i._ie6SelectFix())}).bind("mousedown",function(){i.zIndex()})},_removeEvent:function(){var t=this,e=t.DOM;e.wrap.unbind(),s.unbind("resize",t._winResize)}},f.fn._init.prototype=f.fn,t.fn.dialog=t.fn.artDialog=function(){var t=arguments;return this[this.live?"live":"bind"]("click",function(){return f.apply(this,t),!1}),this},f.focus=null,f.get=function(t){return t===i?f.list:f.list[t]},f.list={},a.bind("keydown",function(t){var e=t.target,i=e.nodeName,n=/^INPUT|TEXTAREA$/,o=f.focus,s=t.keyCode;o&&o.config.esc&&!n.test(i)&&27===s&&o._click(o.config.cancelVal)}),s.bind("load",function(){setTimeout(function(){o||f({left:"-9999em",time:9,fixed:!1,lock:!1,focus:!1})},150)});try{document.execCommand("BackgroundImageCache",!1,!0)}catch(h){}f._templates='<div class="aui_outer"><table class="aui_border"><tbody><tr><td class="aui_nw"></td><td class="aui_n"></td><td class="aui_ne"></td></tr><tr><td class="aui_w"></td><td class="aui_c"><div class="aui_inner"><table class="aui_dialog"><tbody><tr><td colspan="2" class="aui_header"><div class="aui_titleBar"><div class="aui_title"></div><div class="op_menu"><a class="aui_close" href="javascript:/*artDialog*/;"></a></div></div></td></tr><tr><td class="aui_icon"><div class="aui_iconBg"></div></td><td class="aui_main"><div class="aui_content"></div></td></tr><tr><td colspan="2" class="aui_footer"><div class="aui_buttons"></div></td></tr></tbody></table></div></td><td class="aui_e"></td></tr><tr><td class="aui_sw"></td><td class="aui_s"></td><td class="aui_se"></td></tr></tbody></table></div>',f.defaults={content:'<div class="aui_loading"><span>loading..</span></div>',title:"",button:null,ok:null,cancel:null,init:null,close:null,okVal:"",cancelVal:"",width:"auto",height:"auto",minWidth:96,minHeight:32,padding:"0px 0px",skin:"",icon:null,time:null,esc:!0,focus:!0,show:!0,follow:null,path:com.ue.global.path+"/platform/theme/"+com.ue.global.theme+"/component/popupLayer",lock:!1,background:"#000",opacity:.7,duration:300,fixed:!1,left:"50%",top:"38.2%",zIndex:1,resize:!0,drag:!0},e.artDialog=t.dialog=t.artDialog=f}(this.art||this.jQuery&&(this.art=jQuery),this),function(t){var e,i,n=t(window),o=t(document),s=document.documentElement,a=!("minWidth"in s.style),l="onlosecapture"in s,c="setCapture"in s;artDialog.dragEvent=function(){var t=this,e=function(e){var i=t[e];t[e]=function(){return i.apply(t,arguments)}};e("start"),e("move"),e("end")},artDialog.dragEvent.prototype={onstart:t.noop,start:function(t){return o.bind("mousemove",this.move).bind("mouseup",this.end),this._sClientX=t.clientX,this._sClientY=t.clientY,this.onstart(t.clientX,t.clientY),!1},onmove:t.noop,move:function(t){return this._mClientX=t.clientX,this._mClientY=t.clientY,this.onmove(t.clientX-this._sClientX,t.clientY-this._sClientY),!1},onend:t.noop,end:function(t){return o.unbind("mousemove",this.move).unbind("mouseup",this.end),this.onend(t.clientX,t.clientY),!1}},i=function(t){var i,s,r,u,d,f,h=artDialog.focus,p=h.DOM,m=p.wrap,g=p.title,_=p.main,v="getSelection"in window?function(){window.getSelection().removeAllRanges()}:function(){try{document.selection.empty()}catch(t){}};e.onstart=function(){f?(s=_[0].offsetWidth,r=_[0].offsetHeight):(u=m[0].offsetLeft,d=m[0].offsetTop),o.bind("dblclick",e.end),!a&&l?g.bind("losecapture",e.end):n.bind("blur",e.end),c&&g[0].setCapture(),m.addClass("aui_state_drag"),h.focus()},e.onmove=function(t,e){if(f){var n=m[0].style,o=_[0].style,a=t+s,l=e+r;n.width="auto",o.width=Math.max(0,a)+"px",n.width=m[0].offsetWidth+"px",o.height=Math.max(0,l)+"px"}else{var o=m[0].style,c=Math.max(i.minX,Math.min(i.maxX,t+u)),p=Math.max(i.minY,Math.min(i.maxY,e+d));o.left=c+"px",o.top=p+"px"}v(),h._ie6SelectFix()},e.onend=function(){o.unbind("dblclick",e.end),!a&&l?g.unbind("losecapture",e.end):n.unbind("blur",e.end),c&&g[0].releaseCapture(),a&&!h.closed&&h._autoPositionType(),m.removeClass("aui_state_drag")},f=t.target===p.se[0]?!0:!1,i=function(){var t,e,i=h.DOM.wrap[0],s="fixed"===i.style.position,a=i.offsetWidth,l=i.offsetHeight,c=n.width(),r=n.height(),u=s?0:o.scrollLeft(),d=s?0:o.scrollTop(),t=c-a+u;return e=r-l+d,{minX:u,minY:d,maxX:t,maxY:e}}(),e.start(t)},o.bind("mousedown",function(t){var n=artDialog.focus;if(n){var o=t.target,s=n.config,a=n.DOM;return s.drag!==!1&&o===a.title[0]||s.resize!==!1&&o===a.se[0]?(e=e||new artDialog.dragEvent,i(t),!1):void 0}})}(this.art||this.jQuery&&(this.art=jQuery));
;///platform/component/popupLayer/jquery.artDialog.iframeTools.4.1.7.js
!function(t,n,e,o){var i,a,r,c="@ARTDIALOG.DATA",l="@ARTDIALOG.OPEN",d="@ARTDIALOG.OPENER",u=n.name=n.name||"@ARTDIALOG.WINNAME"+ +new Date,s=n.VBArray&&!n.XMLHttpRequest;t(function(){!n.jQuery&&"BackCompat"===document.compatMode&&alert('artDialog Error: document.compatMode === "BackCompat"')});var f=e.top=function(){var t=n,e=function(t){try{var e=n[t].document;e.getElementsByTagName}catch(o){return!1}return n[t].artDialog&&0===e.getElementsByTagName("frameset").length};return e("top")?t=n.top:e("parent")&&(t=n.parent),t}();e.parent=f,i=f.artDialog,r=function(){return i.defaults.zIndex},e.data=function(t,n){var i=e.top,a=i[c]||{};return i[c]=a,n===o?a[t]:(a[t]=n,a)},e.removeData=function(t){var n=e.top[c];n&&n[t]&&delete n[t]},e.through=a=function(){var t=i.apply(this,arguments);return f!==n&&(e.list[t.config.id]=t),t},f!==n&&t(n).bind("unload",function(){var t,n=e.list;for(var o in n)n[o]&&(t=n[o].config,t&&(t.duration=0),n[o].close())}),e.open=function(i,c,u){c=c||{};var f,p,m,h,v,g,y,x,w,b=e.top,D="position:absolute;left:-9999em;top:-9999em;border:none 0;background:transparent",k="width:100%;height:100%;border:none 0";if(u===!1){var I=+new Date,T=i.replace(/([?&])_=[^&]*/,"$1_="+I);i=T+(T===i?(/\?/.test(i)?"&":"?")+"_="+I:"")}var A=function(){var n,e,o=p.content.find(".aui_loading"),i=f.config;m.addClass("aui_state_full"),o&&o.hide();try{x=v.contentWindow,y=t(x.document),w=x.document.body}catch(a){return v.style.cssText=k,i.follow?f.follow(i.follow):f.position(i.left,i.top),c.init&&c.init.call(f,x,b),void(c.init=null)}n="auto"===i.width?y.width()+(s?0:parseInt(t(w).css("marginLeft"))):i.width,e="auto"===i.height?y.height():i.height,setTimeout(function(){v.style.cssText=k},0),f.size(n,e),i.follow?f.follow(i.follow):f.position(i.left,i.top),c.init&&c.init.call(f,x,b),c.init=null},z={zIndex:r(),init:function(){f=this,p=f.DOM,h=p.main,m=p.content,v=f.iframe=b.document.createElement("iframe"),v.src=i,v.name="Open"+f.config.id,v.style.cssText=D,v.setAttribute("frameborder",0,0),v.setAttribute("allowTransparency",!0),g=t(v),f.content().appendChild(v),x=v.contentWindow;try{x.name=v.name,e.data(v.name+l,f),e.data(v.name+d,n)}catch(o){}g.bind("load",A)},close:function(){if(g.css("display","none").unbind("load",A),c.close&&c.close.call(this,v.contentWindow,b)===!1)return!1;m.removeClass("aui_state_full"),g[0].src="about:blank",g.remove();try{e.removeData(v.name+l),e.removeData(v.name+d)}catch(t){}}};"function"==typeof c.ok&&(z.ok=function(){return c.ok.call(f,v.contentWindow,b)}),"function"==typeof c.cancel&&(z.cancel=function(){return c.cancel.call(f,v.contentWindow,b)}),delete c.content;for(var _ in c)z[_]===o&&(z[_]=c[_]);return a(z)},e.open.api=e.data(u+l),e.opener=e.data(u+d)||n,e.open.origin=e.opener,e.close=function(){var t=e.data(u+l);return t&&t.close(),!1},f!=n&&t(document).bind("mousedown",function(){var t=e.open.api;t&&t.zIndex()}),e.load=function(n,e,i){i=i||!1;var c=e||{},l={zIndex:r(),init:function(e){{var o=this;o.config}t.ajax({url:n,success:function(t){o.content(t),c.init&&c.init.call(o,e)},cache:i})}};delete e.content;for(var d in c)l[d]===o&&(l[d]=c[d]);return a(l)},e.alert=function(t,n){return a({id:"Alert",zIndex:r(),icon:"warning",fixed:!0,lock:!0,content:t,ok:!0,close:n})},e.confirm=function(t,n,e){return a({id:"Confirm",zIndex:r(),icon:"question",fixed:!0,lock:!0,opacity:.1,content:t,ok:function(t){return n.call(this,t)},cancel:function(t){return e&&e.call(this,t)}})},e.prompt=function(t,n,e){e=e||"";var o;return a({id:"Prompt",zIndex:r(),icon:"question",fixed:!0,lock:!0,opacity:.1,content:['<div style="margin-bottom:5px;font-size:12px">',t,"</div>","<div>",'<input value="',e,'" style="width:18em;padding:6px 4px" />',"</div>"].join(""),init:function(){o=this.DOM.content.find("input")[0],o.select(),o.focus()},ok:function(t){return n&&n.call(this,o.value,t)},cancel:!0})},e.tips=function(t,n){return a({id:"Tips",zIndex:r(),title:!1,cancel:!1,fixed:!0,lock:!1}).content('<div style="padding: 0 1em;">'+t+"</div>").time(n||1.5)},t(function(){var o=e.dragEvent;if(o){var i=t(n),a=t(document),r=s?"absolute":"fixed",c=o.prototype,l=document.createElement("div"),d=l.style;d.cssText="display:none;position:"+r+";left:0;top:0;width:100%;height:100%;cursor:move;filter:alpha(opacity=0);opacity:0;background:#FFF",document.body.appendChild(l),c._start=c.start,c._end=c.end,c.start=function(){var t=e.focus.DOM,n=t.main[0],o=t.content[0].getElementsByTagName("iframe")[0];c._start.apply(this,arguments),d.display="block",d.zIndex=e.defaults.zIndex+3,"absolute"===r&&(d.width=i.width()+"px",d.height=i.height()+"px",d.left=a.scrollLeft()+"px",d.top=a.scrollTop()+"px"),o&&n.offsetWidth*n.offsetHeight>307200&&(n.style.visibility="hidden")},c.end=function(){var t=e.focus;c._end.apply(this,arguments),d.display="none",t&&(t.DOM.main[0].style.visibility="visible")}}})}(this.art||this.jQuery,this,this.artDialog);
;///platform/component/popupLayer/jquery.artDialog.js
$.extend({successTips:function(){$.dialog({id:"success",title:!1,cancel:!1,drag:!1,resize:!1,width:231,height:59,fixed:!0,lock:!1}).content('<div class="operation_success"></div>').time(1.5)}});var origAlert=window.alert;window.alert=function(n){$.dialog({content:""+n,fixed:!0,padding:"10px",lock:!0,width:248,height:100,drag:!1,resize:!1,icon:"warning",ok:function(){}}).show().focus()},window.confirm=function(){var n={msg:"",title:"",ok:function(){},okVal:"",cancel:function(){},cancelVal:""};if(1==arguments.length){var i=arguments[0];for(var e in n)void 0!==i[e]&&(n[e]=i[e])}2==arguments.length&&(n.msg=arguments[0],n.ok=arguments[1]),$.dialog({title:n.title,content:""+n.msg,ok:n.ok,cancel:n.cancel,okVal:n.okVal,cancelVal:n.cancelVal,padding:"20px 20px",width:200,height:50,drag:!1,resize:!1,lock:!0,icon:"question"}).show()};
;///platform/component/jqGrid/jquery.jqGrid.js
function tableToGrid(e,t){jQuery(e).each(function(){if(!this.grid){jQuery(this).width("99%");var e=jQuery(this).width(),i=jQuery("tr td:first-child input[type=checkbox]:first",jQuery(this)),r=jQuery("tr td:first-child input[type=radio]:first",jQuery(this)),a=i.length>0,o=!a&&r.length>0,s=a||o,n=[],d=[];jQuery("th",jQuery(this)).each(function(){0===n.length&&s?(n.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),d.push("__selection__")):(n.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150}),d.push(jQuery(this).html()))});var l=[],p=[],c=[];jQuery("tbody > tr",jQuery(this)).each(function(){var e={},t=0;jQuery("td",jQuery(this)).each(function(){if(0===t&&s){var i=jQuery("input",jQuery(this)),r=i.attr("value");p.push(r||l.length),i.is(":checked")&&c.push(r),e[n[t].name]=i.attr("value")}else e[n[t].name]=jQuery(this).html();t++}),t>0&&l.push(e)}),jQuery(this).empty(),jQuery(this).addClass("scroll"),jQuery(this).jqGrid(jQuery.extend({datatype:"local",width:e,colNames:d,colModel:n,multiselect:a},t||{}));var u;for(u=0;u<l.length;u++){var h=null;p.length>0&&(h=p[u],h&&h.replace&&(h=encodeURIComponent(h).replace(/[.\-%]/g,"_"))),null===h&&(h=u+1),jQuery(this).jqGrid("addRowData",h,l[u])}for(u=0;u<c.length;u++)jQuery(this).jqGrid("setSelection",c[u])}})}!function($){"use strict";$.jgrid=$.jgrid||{},$.extend($.jgrid,{version:"4.6.0",htmlDecode:function(e){return e&&("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))?"":e?String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):e},htmlEncode:function(e){return e?String(e).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},format:function(e){var t=$.makeArray(arguments).slice(1);return null==e&&(e=""),e.replace(/\{(\d+)\}/g,function(e,i){return t[i]})},msie:"Microsoft Internet Explorer"===navigator.appName,msiever:function(){var e=-1,t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");return null!=i.exec(t)&&(e=parseFloat(RegExp.$1)),e},getCellIndex:function(e){var t=$(e);return t.is("tr")?-1:(t=(t.is("td")||t.is("th")?t:t.closest("td,th"))[0],$.jgrid.msie?$.inArray(t,t.parentNode.cells):t.cellIndex)},stripHtml:function(e){e=String(e);var t=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return e?(e=e.replace(t,""),e&&"&nbsp;"!==e&&"&#160;"!==e?e.replace(/\"/g,"'"):""):e},stripPref:function(e,t){var i=$.type(e);return("string"===i||"number"===i)&&(e=String(e),t=""!==e?String(t).replace(String(e),""):t),t},parse:function(jsonString){var js=jsonString;return"while(1);"===js.substr(0,9)&&(js=js.substr(9)),"/*"===js.substr(0,2)&&(js=js.substr(2,js.length-4)),js||(js="{}"),$.jgrid.useJSON===!0&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(js):eval("("+js+")")},parseDate:function(e,t,i,r){var a,o,s,n=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,d=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,l=/[^-+\dA-Z]/g,p=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),c="string"==typeof t?t.match(p):null,u=function(e,t){for(e=String(e),t=parseInt(t,10)||2;e.length<t;)e="0"+e;return e},h={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},g=0,f=function(e,t){return 0===e?12===t&&(t=0):12!==t&&(t+=12),t};if(void 0===r&&(r=$.jgrid.formatter.date),void 0===r.parseRe&&(r.parseRe=/[#%\\\/:_;.,\t\s-]/),r.masks.hasOwnProperty(e)&&(e=r.masks[e]),t&&null!=t)if(isNaN(t-0)||"u"!==String(e).toLowerCase())if(t.constructor===Date)g=t;else if(null!==c){if(g=new Date(parseInt(c[1],10)),c[3]){var m=60*Number(c[5])+Number(c[6]);m*="-"===c[4]?1:-1,m-=g.getTimezoneOffset(),g.setTime(Number(Number(g)+60*m*1e3))}}else{var m=0;for("ISO8601Long"===r.srcformat&&"Z"===t.charAt(t.length-1)&&(m-=(new Date).getTimezoneOffset()),t=String(t).replace(/\T/g,"#").replace(/\t/,"%").split(r.parseRe),e=e.replace(/\T/g,"#").replace(/\t/,"%").split(r.parseRe),o=0,s=e.length;s>o;o++)"M"===e[o]&&(a=$.inArray(t[o],r.monthNames),-1!==a&&12>a&&(t[o]=a+1,h.m=t[o])),"F"===e[o]&&(a=$.inArray(t[o],r.monthNames,12),-1!==a&&a>11&&(t[o]=a+1-12,h.m=t[o])),"a"===e[o]&&(a=$.inArray(t[o],r.AmPm),-1!==a&&2>a&&t[o]===r.AmPm[a]&&(t[o]=a,h.h=f(t[o],h.h))),"A"===e[o]&&(a=$.inArray(t[o],r.AmPm),-1!==a&&a>1&&t[o]===r.AmPm[a]&&(t[o]=a-2,h.h=f(t[o],h.h))),"g"===e[o]&&(h.h=parseInt(t[o],10)),void 0!==t[o]&&(h[e[o].toLowerCase()]=parseInt(t[o],10));if(h.f&&(h.m=h.f),0===h.m&&0===h.y&&0===h.d)return"&#160;";h.m=parseInt(h.m,10)-1;var v=h.y;v>=70&&99>=v?h.y=1900+h.y:v>=0&&69>=v&&(h.y=2e3+h.y),g=new Date(h.y,h.m,h.d,h.h,h.i,h.s,h.u),m>0&&g.setTime(Number(Number(g)+60*m*1e3))}else g=new Date(1e3*parseFloat(t));else g=new Date(h.y,h.m,h.d,h.h,h.i,h.s,h.u);if(void 0===i)return g;r.masks.hasOwnProperty(i)?i=r.masks[i]:i||(i="Y-m-d");var j=g.getHours(),b=g.getMinutes(),w=g.getDate(),y=g.getMonth()+1,x=g.getTimezoneOffset(),q=g.getSeconds(),D=g.getMilliseconds(),_=g.getDay(),C=g.getFullYear(),G=(_+6)%7+1,I=(new Date(C,y-1,w)-new Date(C,0,1))/864e5,F={d:u(w),D:r.dayNames[_],j:w,l:r.dayNames[_+7],N:G,S:r.S(w),w:_,z:I,W:5>G?Math.floor((I+G-1)/7)+1:Math.floor((I+G-1)/7)||((new Date(C-1,0,1).getDay()+6)%7<4?53:52),F:r.monthNames[y-1+12],m:u(y),M:r.monthNames[y-1],n:y,t:"?",L:"?",o:"?",Y:C,y:String(C).substring(2),a:12>j?r.AmPm[0]:r.AmPm[1],A:12>j?r.AmPm[2]:r.AmPm[3],B:"?",g:j%12||12,G:j,h:u(j%12||12),H:u(j),i:u(b),s:u(q),u:D,e:"?",I:"?",O:(x>0?"-":"+")+u(100*Math.floor(Math.abs(x)/60)+Math.abs(x)%60,4),P:"?",T:(String(g).match(d)||[""]).pop().replace(l,""),Z:"?",c:"?",r:"?",U:Math.floor(g/1e3)};return i.replace(n,function(e){return F.hasOwnProperty(e)?F[e]:e.substring(1)})},jqID:function(e){return String(e).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(e){return(e||$.jgrid.uidPref)+$.jgrid.guid++},getAccessor:function(e,t){var i,r,a,o=[];if("function"==typeof t)return t(e);if(i=e[t],void 0===i)try{if("string"==typeof t&&(o=t.split(".")),a=o.length)for(i=e;i&&a--;)r=o.shift(),i=i[r]}catch(s){}return i},getXmlData:function(e,t,i){var r,a="string"==typeof t?t.match(/^(.*)\[(\w+)\]$/):null;return"function"==typeof t?t(e):a&&a[2]?a[1]?$(a[1],e).attr(a[2]):$(e).attr(a[2]):(r=$(t,e),i?r:r.length>0?$(r).text():void 0)},cellWidth:function(){var e=$("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div>"),t=e.appendTo("body").find("td").width();return e.remove(),Math.abs(t-5)>.1},cell_width:!0,ajaxOptions:{},from:function(source){var QueryObject=function(d,q){"string"==typeof d&&(d=$.data(d));var self=this,_data=d,_usecase=!0,_trim=!1,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=!1,_queuedOperator="",_sorting=[],_useProperties=!0;if("object"!=typeof d||!d.push)throw"data provides is not an array";return d.length>0&&(_useProperties="object"!=typeof d[0]?!1:!0),this._hasData=function(){return null===_data?!1:0===_data.length?!1:!0},this._getStr=function(e){var t=[];return _trim&&t.push("jQuery.trim("),t.push("String("+e+")"),_trim&&t.push(")"),_usecase||t.push(".toLowerCase()"),t.join("")},this._strComp=function(e){return"string"==typeof e?".toString()":""},this._group=function(e,t){return{field:e.toString(),unique:t,items:[]}},this._toStr=function(e){return _trim&&(e=$.trim(e)),e=e.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),_usecase?e:e.toLowerCase()},this._funcLoop=function(e){var t=[];return $.each(_data,function(i,r){t.push(e(r))}),t},this._append=function(e){var t;for(null===_query?_query="":_query+=""===_queuedOperator?" && ":_queuedOperator,t=0;_orDepth>t;t++)_query+="(";_negate&&(_query+="!"),_query+="("+e+")",_negate=!1,_queuedOperator="",_orDepth=0},this._setCommand=function(e,t){_lastCommand=e,_lastField=t},this._resetNegate=function(){_negate=!1},this._repeatCommand=function(e,t){return null===_lastCommand?self:null!==e&&null!==t?_lastCommand(e,t):null===_lastField?_lastCommand(e):_useProperties?_lastCommand(_lastField,e):_lastCommand(e)},this._equals=function(e,t){return 0===self._compare(e,t,1)},this._compare=function(e,t,i){var r=Object.prototype.toString;return void 0===i&&(i=1),void 0===e&&(e=null),void 0===t&&(t=null),null===e&&null===t?0:null===e&&null!==t?1:null!==e&&null===t?-1:"[object Date]"===r.call(e)&&"[object Date]"===r.call(t)?t>e?-i:e>t?i:0:(_usecase||"number"==typeof e||"number"==typeof t||(e=String(e),t=String(t)),t>e?-i:e>t?i:0)},this._performSort=function(){0!==_sorting.length&&(_data=self._doSort(_data,0))},this._doSort=function(e,t){var i=_sorting[t].by,r=_sorting[t].dir,a=_sorting[t].type,o=_sorting[t].datefmt,s=_sorting[t].sfunc;if(t===_sorting.length-1)return self._getOrder(e,i,r,a,o,s);t++;var n,d,l,p=self._getGroup(e,i,r,a,o),c=[];for(n=0;n<p.length;n++)for(l=self._doSort(p[n].items,t),d=0;d<l.length;d++)c.push(l[d]);return c},this._getOrder=function(e,t,i,r,a,o){var s,n,d,l,p=[],c=[],u="a"===i?1:-1;void 0===r&&(r="text"),l="float"===r||"number"===r||"currency"===r||"numeric"===r?function(e){var t=parseFloat(String(e).replace(_stripNum,""));return isNaN(t)?0:t}:"int"===r||"integer"===r?function(e){return e?parseFloat(String(e).replace(_stripNum,"")):0}:"date"===r||"datetime"===r?function(e){return $.jgrid.parseDate(a,e).getTime()}:$.isFunction(r)?r:function(e){return e=e?$.trim(String(e)):"",_usecase?e:e.toLowerCase()},$.each(e,function(e,i){n=""!==t?$.jgrid.getAccessor(i,t):i,void 0===n&&(n=""),n=l(n,i),c.push({vSort:n,index:e})}),c.sort($.isFunction(o)?function(e,t){return e=e.vSort,t=t.vSort,o.call(this,e,t,u)}:function(e,t){return e=e.vSort,t=t.vSort,self._compare(e,t,u)}),d=0;for(var h=e.length;h>d;)s=c[d].index,p.push(e[s]),d++;return p},this._getGroup=function(e,t,i,r,a){var o,s=[],n=null,d=null;return $.each(self._getOrder(e,t,i,r,a),function(e,i){o=$.jgrid.getAccessor(i,t),null==o&&(o=""),self._equals(d,o)||(d=o,null!==n&&s.push(n),n=self._group(t,o)),n.items.push(i)}),null!==n&&s.push(n),s},this.ignoreCase=function(){return _usecase=!1,self},this.useCase=function(){return _usecase=!0,self},this.trim=function(){return _trim=!0,self},this.noTrim=function(){return _trim=!1,self},this.execute=function(){var match=_query,results=[];return null===match?self:($.each(_data,function(){eval(match)&&results.push(this)}),_data=results,self)},this.data=function(){return _data},this.select=function(e){if(self._performSort(),!self._hasData())return[];if(self.execute(),$.isFunction(e)){var t=[];return $.each(_data,function(i,r){t.push(e(r))}),t}return _data},this.hasMatch=function(){return self._hasData()?(self.execute(),_data.length>0):!1},this.andNot=function(e,t,i){return _negate=!_negate,self.and(e,t,i)},this.orNot=function(e,t,i){return _negate=!_negate,self.or(e,t,i)},this.not=function(e,t,i){return self.andNot(e,t,i)},this.and=function(e,t,i){return _queuedOperator=" && ",void 0===e?self:self._repeatCommand(e,t,i)},this.or=function(e,t,i){return _queuedOperator=" || ",void 0===e?self:self._repeatCommand(e,t,i)},this.orBegin=function(){return _orDepth++,self},this.orEnd=function(){return null!==_query&&(_query+=")"),self},this.isNot=function(e){return _negate=!_negate,self.is(e)},this.is=function(e){return self._append("this."+e),self._resetNegate(),self},this._compareValues=function(e,t,i,r,a){var o;o=_useProperties?"jQuery.jgrid.getAccessor(this,'"+t+"')":"this",void 0===i&&(i=null);var s=i,n=void 0===a.stype?"text":a.stype;if(null!==i)switch(n){case"int":case"integer":s=isNaN(Number(s))||""===s?"0":s,o="parseInt("+o+",10)",s="parseInt("+s+",10)";break;case"float":case"number":case"numeric":s=String(s).replace(_stripNum,""),s=isNaN(Number(s))||""===s?"0":s,o="parseFloat("+o+")",s="parseFloat("+s+")";break;case"date":case"datetime":s=String($.jgrid.parseDate(a.newfmt||"Y-m-d",s).getTime()),o='jQuery.jgrid.parseDate("'+a.srcfmt+'",'+o+").getTime()";break;default:o=self._getStr(o),s=self._getStr('"'+self._toStr(s)+'"')}return self._append(o+" "+r+" "+s),self._setCommand(e,t),self._resetNegate(),self},this.equals=function(e,t,i){return self._compareValues(self.equals,e,t,"==",i)},this.notEquals=function(e,t,i){return self._compareValues(self.equals,e,t,"!==",i)},this.isNull=function(e,t,i){return self._compareValues(self.equals,e,null,"===",i)},this.greater=function(e,t,i){return self._compareValues(self.greater,e,t,">",i)},this.less=function(e,t,i){return self._compareValues(self.less,e,t,"<",i)},this.greaterOrEquals=function(e,t,i){return self._compareValues(self.greaterOrEquals,e,t,">=",i)},this.lessOrEquals=function(e,t,i){return self._compareValues(self.lessOrEquals,e,t,"<=",i)},this.startsWith=function(e,t){var i=null==t?e:t,r=_trim?$.trim(i.toString()).length:i.toString().length;return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".substr(0,"+r+") == "+self._getStr('"'+self._toStr(t)+'"')):(null!=t&&(r=_trim?$.trim(t.toString()).length:t.toString().length),self._append(self._getStr("this")+".substr(0,"+r+") == "+self._getStr('"'+self._toStr(e)+'"'))),self._setCommand(self.startsWith,e),self._resetNegate(),self},this.endsWith=function(e,t){var i=null==t?e:t,r=_trim?$.trim(i.toString()).length:i.toString().length;return self._append(_useProperties?self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".substr("+self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".length-"+r+","+r+') == "'+self._toStr(t)+'"':self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(e)+'".length,"'+self._toStr(e)+'".length) == "'+self._toStr(e)+'"'),self._setCommand(self.endsWith,e),self._resetNegate(),self},this.contains=function(e,t){return self._append(_useProperties?self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+'.indexOf("'+self._toStr(t)+'",0) > -1':self._getStr("this")+'.indexOf("'+self._toStr(e)+'",0) > -1'),self._setCommand(self.contains,e),self._resetNegate(),self},this.groupBy=function(e,t,i,r){return self._hasData()?self._getGroup(_data,e,t,i,r):null},this.orderBy=function(e,t,i,r,a){return t=null==t?"a":$.trim(t.toString().toLowerCase()),null==i&&(i="text"),null==r&&(r="Y-m-d"),null==a&&(a=!1),("desc"===t||"descending"===t)&&(t="d"),("asc"===t||"ascending"===t)&&(t="a"),_sorting.push({by:e,dir:t,type:i,datefmt:r,sfunc:a}),self},self};return new QueryObject(source,null)},getMethod:function(e){return this.getAccessor($.fn.jqGrid,e)},extend:function(e){$.extend($.fn.jqGrid,e),this.no_legacy_api||$.fn.extend(e)}}),$.fn.jqGrid=function(e){if("string"==typeof e){var t=$.jgrid.getMethod(e);if(!t)throw"jqGrid - No such method: "+e;var i=$.makeArray(arguments).slice(1);return t.apply(this,i)}return this.each(function(){if(!this.grid){var t=$.extend(!0,{url:"",height:150,page:1,rowNum:10,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1},ignoreCase:!1,cmTemplate:{},idPrefix:"",multiSort:!1},$.jgrid.defaults,e||{}),i=this,r={headers:[],cols:[],footers:[],dragStart:function(e,r,a){var o=$(this.bDiv).offset().left;this.resizing={idx:e,startX:r.clientX,sOL:r.clientX-o},this.hDiv.style.cursor="col-resize",this.curGbox=$("#rs_m"+$.jgrid.jqID(t.id),"#gbox_"+$.jgrid.jqID(t.id)),this.curGbox.css({display:"block",left:r.clientX-o,top:a[1],height:a[2]}),$(i).triggerHandler("jqGridResizeStart",[r,e]),$.isFunction(t.resizeStart)&&t.resizeStart.call(i,r,e),document.onselectstart=function(){return!1}},dragMove:function(e){if(this.resizing){var i,r,a=e.clientX-this.resizing.startX,o=this.headers[this.resizing.idx],s="ltr"===t.direction?o.width+a:o.width-a;s>33&&(this.curGbox.css({left:this.resizing.sOL+a}),t.forceFit===!0?(i=this.headers[this.resizing.idx+t.nv],r="ltr"===t.direction?i.width-a:i.width+a,r>33&&(o.newWidth=s,i.newWidth=r)):(this.newWidth="ltr"===t.direction?t.tblwidth+a:t.tblwidth-a,o.newWidth=s))}},dragEnd:function(){if(this.hDiv.style.cursor="default",this.resizing){var e=this.resizing.idx,r=this.headers[e].newWidth||this.headers[e].width;r=parseInt(r,10),this.resizing=!1,$("#rs_m"+$.jgrid.jqID(t.id)).css("display","none"),t.colModel[e].width=r,this.headers[e].width=r,this.headers[e].el.style.width=r+"px",this.cols[e].style.width=r+"px",this.footers.length>0&&(this.footers[e].style.width=r+"px"),t.forceFit===!0?(r=this.headers[e+t.nv].newWidth||this.headers[e+t.nv].width,this.headers[e+t.nv].width=r,this.headers[e+t.nv].el.style.width=r+"px",this.cols[e+t.nv].style.width=r+"px",this.footers.length>0&&(this.footers[e+t.nv].style.width=r+"px"),t.colModel[e+t.nv].width=r):(t.tblwidth=this.newWidth||t.tblwidth,$("table:first",this.bDiv).css("width",t.tblwidth+"px"),$("table:first",this.hDiv).css("width",t.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,t.footerrow&&($("table:first",this.sDiv).css("width",t.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft)),$(i).triggerHandler("jqGridResizeStop",[r,e]),$.isFunction(t.resizeStop)&&t.resizeStop.call(i,r,e)}this.curGbox=null,document.onselectstart=function(){return!0}},populateVisible:function(){r.timer&&clearTimeout(r.timer),r.timer=null;var e=$(r.bDiv).height();if(e){var i,a,o=$("table:first",r.bDiv);if(o[0].rows.length)try{i=o[0].rows[1],a=i?$(i).outerHeight()||r.prevRowHeight:r.prevRowHeight}catch(s){a=r.prevRowHeight}if(a){r.prevRowHeight=a;var n,d,l,p=t.rowNum,c=r.scrollTop=r.bDiv.scrollTop,u=Math.round(o.position().top)-c,h=u+o.height(),g=a*p;if(e>h&&0>=u&&(void 0===t.lastpage||parseInt((h+c+g-1)/g,10)<=t.lastpage)&&(d=parseInt((e-h+g-1)/g,10),h>=0||2>d||t.scroll===!0?(n=Math.round((h+c)/g)+1,u=-1):u=1),u>0&&(n=parseInt(c/g,10)+1,d=parseInt((c+e)/g,10)+2-n,l=!0),d){if(t.lastpage&&(n>t.lastpage||1===t.lastpage||n===t.page&&n===t.lastpage))return;r.hDiv.loading?r.timer=setTimeout(r.populateVisible,t.scrollTimeout):(t.page=n,l&&(r.selectionPreserver(o[0]),r.emptyRows.call(o[0],!1,!1)),r.populate(d))}}}},scrollGrid:function(e){if(t.scroll){var i=r.bDiv.scrollTop;void 0===r.scrollTop&&(r.scrollTop=0),i!==r.scrollTop&&(r.scrollTop=i,r.timer&&clearTimeout(r.timer),r.timer=setTimeout(r.populateVisible,t.scrollTimeout))}r.hDiv.scrollLeft=r.bDiv.scrollLeft,t.footerrow&&(r.sDiv.scrollLeft=r.bDiv.scrollLeft),e&&e.stopPropagation()},selectionPreserver:function(e){var t=e.p,i=t.selrow,r=t.selarrrow?$.makeArray(t.selarrrow):null,a=e.grid.bDiv.scrollLeft,o=function(){var s;if(t.selrow=null,t.selarrrow=[],t.multiselect&&r&&r.length>0)for(s=0;s<r.length;s++)r[s]!==i&&$(e).jqGrid("setSelection",r[s],!1,null);i&&$(e).jqGrid("setSelection",i,!1,null),e.grid.bDiv.scrollLeft=a,$(e).unbind(".selectionPreserver",o)};$(e).bind("jqGridGridComplete.selectionPreserver",o)}};if("TABLE"!==this.tagName.toUpperCase())return void alert("Element is not a table");if(void 0!==document.documentMode&&document.documentMode<=5)return void alert("Grid can not be used in this ('quirks') mode!");$(this).empty().attr("tabindex","0"),this.p=t,this.p.useProp=!!$.fn.prop;var a,o;if(0===this.p.colNames.length)for(a=0;a<this.p.colModel.length;a++)this.p.colNames[a]=this.p.colModel[a].label||this.p.colModel[a].name;if(this.p.colNames.length!==this.p.colModel.length)return void alert($.jgrid.errors.model);var s=$("<div class='ui-jqgrid-view'></div>"),n=$.jgrid.msie;i.p.direction=$.trim(i.p.direction.toLowerCase()),-1===$.inArray(i.p.direction,["ltr","rtl"])&&(i.p.direction="ltr"),o=i.p.direction,$(s).insertBefore(this),$(this).removeClass("scroll").appendTo(s);var d=$("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");$(d).attr({id:"gbox_"+this.id,dir:o}).insertBefore(s),$(s).attr("id","gview_"+this.id).appendTo(d),$("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").insertBefore(s),$("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(s),$(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var l=["shiftKey","altKey","ctrlKey"],p=function(e,t){return e=parseInt(e,10),isNaN(e)?t||0:e},c=function(e,t,a,o,s,n){var d,l=i.p.colModel[e],p=l.align,c='style="',u=l.classes,h=l.name,g=[];return p&&(c+="text-align:"+p+";"),l.hidden===!0&&(c+="display:none;"),0===t?c+="width: "+r.headers[e].width+"px;":l.cellattr&&$.isFunction(l.cellattr)&&(d=l.cellattr.call(i,s,a,o,l,n),d&&"string"==typeof d&&(d=d.replace(/style/i,"style").replace(/title/i,"title"),d.indexOf("title")>-1&&(l.title=!1),d.indexOf("class")>-1&&(u=void 0),g=d.replace("-style","-sti").split(/style/),2===g.length?(g[1]=$.trim(g[1].replace("-sti","-style").replace("=","")),(0===g[1].indexOf("'")||0===g[1].indexOf('"'))&&(g[1]=g[1].substring(1)),c+=g[1].replace(/'/gi,'"')):c+='"')),g.length||(g[0]="",c+='"'),c+=(void 0!==u?' class="'+u+'"':"")+(l.title&&a?' title="'+$.jgrid.stripHtml(a)+'"':""),c+=' aria-describedby="'+i.p.id+"_"+h+'"',c+g[0]},u=function(e){return null==e||""===e?"&#160;":i.p.autoencode?$.jgrid.htmlEncode(e):String(e)},h=function(e,t,r,a,o){var s,n=i.p.colModel[r];if(void 0!==n.formatter){e=""!==String(i.p.idPrefix)?$.jgrid.stripPref(i.p.idPrefix,e):e;var d={rowId:e,colModel:n,gid:i.p.id,pos:r};s=$.isFunction(n.formatter)?n.formatter.call(i,t,d,a,o):$.fmatter?$.fn.fmatter.call(i,n.formatter,t,d,a,o):u(t)}else s=u(t);return s},g=function(e,t,i,r,a,o){var s,n;return s=h(e,t,i,a,"add"),n=c(i,r,s,a,e,o),'<td role="gridcell" '+n+">"+s+"</td>"},f=function(e,t,r,a){var o='<input role="checkbox" type="checkbox" id="jqg_'+i.p.id+"_"+e+'" class="cbox" name="jqg_'+i.p.id+"_"+e+'"'+(a?'checked="checked"':"")+"/>",s=c(t,r,"",null,e,!0);return'<td role="gridcell" '+s+">"+o+"</td>"},m=function(e,t,i,r){var a=(parseInt(i,10)-1)*parseInt(r,10)+1+t,o=c(e,t,a,null,t,!0);return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+o+">"+a+"</td>"},v=function(e){var t,r,a=[],o=0;for(r=0;r<i.p.colModel.length;r++)t=i.p.colModel[r],"cb"!==t.name&&"subgrid"!==t.name&&"rn"!==t.name&&(a[o]="local"===e?t.name:"xml"===e||"xmlstring"===e?t.xmlmap||t.name:t.jsonmap||t.name,i.p.keyIndex!==!1&&t.key===!0&&(i.p.keyName=a[o]),o++);return a},j=function(e){var t=i.p.remapColumns;return t&&t.length||(t=$.map(i.p.colModel,function(e,t){return t})),e&&(t=$.map(t,function(t){return e>t?null:t-e})),t},b=function(e,t){var i;this.p.deepempty?$(this.rows).slice(1).remove():(i=this.rows.length>0?this.rows[0]:null,$(this.firstChild).empty().append(i)),e&&this.p.scroll&&($(this.grid.bDiv.firstChild).css({height:"auto"}),$(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"}),0!==this.grid.bDiv.scrollTop&&(this.grid.bDiv.scrollTop=0)),t===!0&&this.p.treeGrid&&(this.p.data=[],this.p._index={})},w=function(){var e,t,r,a=i.p.data.length,o=i.p.rownumbers===!0?1:0,s=i.p.multiselect===!0?1:0,n=i.p.subGrid===!0?1:0;for(e=i.p.keyIndex===!1||i.p.loadonce===!0?i.p.localReader.id:i.p.colModel[i.p.keyIndex+s+n+o].name,t=0;a>t;t++)r=$.jgrid.getAccessor(i.p.data[t],e),void 0===r&&(r=String(t+1)),i.p._index[r]=t},y=function(e,t,r,a,o,s){var n,d="-1",l="",p=t?"display:none;":"",c="ui-widget-content jqgrow ui-row-"+i.p.direction+(r?" "+r:"")+(s?" ui-state-highlight":""),u=$(i).triggerHandler("jqGridRowAttr",[a,o,e]);if("object"!=typeof u&&(u=$.isFunction(i.p.rowattr)?i.p.rowattr.call(i,a,o,e):{}),!$.isEmptyObject(u)){u.hasOwnProperty("id")&&(e=u.id,delete u.id),u.hasOwnProperty("tabindex")&&(d=u.tabindex,delete u.tabindex),u.hasOwnProperty("style")&&(p+=u.style,delete u.style),u.hasOwnProperty("class")&&(c+=" "+u["class"],delete u["class"]);try{delete u.role}catch(h){}for(n in u)u.hasOwnProperty(n)&&(l+=" "+n+"="+u[n])}return'<tr role="row" id="'+e+'" tabindex="'+d+'" class="'+c+'"'+(""===p?"":' style="'+p+'"')+l+">"},x=function(e,t,r,a,o){var s=new Date,n="local"!==i.p.datatype&&i.p.loadonce||"xmlstring"===i.p.datatype,d="_id_",l=i.p.xmlReader,c="local"===i.p.datatype?"local":"xml";if(n&&(i.p.data=[],i.p._index={},i.p.localReader.id=d),i.p.reccount=0,$.isXMLDoc(e)){-1!==i.p.treeANode||i.p.scroll?r=r>1?r:1:(b.call(i,!1,!0),r=1);var u,h,w,x,q,D,_,C,G,I,F=$(i),k=0,S=i.p.multiselect===!0?1:0,R=0,M=i.p.rownumbers===!0?1:0,N=[],O={},P=[],A=i.p.altRows===!0?i.p.altclass:"";i.p.subGrid===!0&&(R=1,x=$.jgrid.getMethod("addSubGridCell")),l.repeatitems||(N=v(c)),q=i.p.keyIndex===!1?$.isFunction(l.id)?l.id.call(i,e):l.id:i.p.keyIndex,N.length>0&&!isNaN(q)&&(q=i.p.keyName),D=-1===String(q).indexOf("[")?N.length?function(e,t){return $(q,e).text()||t}:function(e,t){return $(l.cell,e).eq(q).text()||t}:function(e,t){return e.getAttribute(q.replace(/[\[\]]/g,""))||t},i.p.userData={},i.p.page=p($.jgrid.getXmlData(e,l.page),i.p.page),i.p.lastpage=p($.jgrid.getXmlData(e,l.total),1),i.p.records=p($.jgrid.getXmlData(e,l.records)),$.isFunction(l.userdata)?i.p.userData=l.userdata.call(i,e)||{}:$.jgrid.getXmlData(e,l.userdata,!0).each(function(){i.p.userData[this.getAttribute("name")]=$(this).text()});var E=$.jgrid.getXmlData(e,l.root,!0);E=$.jgrid.getXmlData(E,l.row,!0),E||(E=[]);var T,z=E.length,H=0,B=[],L=parseInt(i.p.rowNum,10),V=i.p.scroll?$.jgrid.randId():1;if(z>0&&i.p.page<=0&&(i.p.page=1),E&&z){o&&(L*=o+1);var Q,W=$.isFunction(i.p.afterInsertRow),U=!1;for(i.p.grouping&&(U=i.p.groupingView.groupCollapse===!0,Q=$.jgrid.getMethod("groupingPrepare"));z>H;){C=E[H],G=D(C,V+H),G=i.p.idPrefix+G,T=0===r?0:r+1,I=(T+H)%2===1?A:"";var X=P.length;if(P.push(""),M&&P.push(m(0,H,i.p.page,i.p.rowNum)),S&&P.push(f(G,M,H,!1)),R&&P.push(x.call(F,S+M,H+r)),l.repeatitems){_||(_=j(S+R+M));var Y=$.jgrid.getXmlData(C,l.cell,!0);$.each(_,function(e){var t=Y[this];return t?(w=t.textContent||t.text,O[i.p.colModel[e+S+R+M].name]=w,void P.push(g(G,w,e+S+R+M,H+r,C,O))):!1})}else for(u=0;u<N.length;u++)w=$.jgrid.getXmlData(C,N[u]),O[i.p.colModel[u+S+R+M].name]=w,P.push(g(G,w,u+S+R+M,H+r,C,O));if(P[X]=y(G,U,I,O,C,!1),P.push("</tr>"),i.p.grouping&&(B.push(P),i.p.groupingView._locgr||Q.call(F,O,H),P=[]),(n||i.p.treeGrid===!0)&&(O[d]=$.jgrid.stripPref(i.p.idPrefix,G),i.p.data.push(O),i.p._index[O[d]]=i.p.data.length-1),i.p.gridview===!1&&($("tbody:first",t).append(P.join("")),F.triggerHandler("jqGridAfterInsertRow",[G,O,C]),W&&i.p.afterInsertRow.call(i,G,O,C),P=[]),O={},k++,H++,k===L)break}}if(i.p.gridview===!0&&(h=i.p.treeANode>-1?i.p.treeANode:0,i.p.grouping?(n||F.jqGrid("groupingRender",B,i.p.colModel.length,i.p.page,L),B=null):i.p.treeGrid===!0&&h>0?$(i.rows[h]).after(P.join("")):$("tbody:first",t).append(P.join(""))),i.p.subGrid===!0)try{F.jqGrid("addSubGrid",S+M)}catch(J){}if(i.p.totaltime=new Date-s,k>0&&0===i.p.records&&(i.p.records=z),P=null,i.p.treeGrid===!0)try{F.jqGrid("setTreeNode",h+1,k+h+1)}catch(K){}if(i.p.treeGrid||i.p.scroll||(i.grid.bDiv.scrollTop=0),i.p.reccount=k,i.p.treeANode=-1,i.p.userDataOnFooter&&F.jqGrid("footerData","set",i.p.userData,!0),n&&(i.p.records=z,i.p.lastpage=Math.ceil(z/L)),a||i.updatepager(!1,!0),n){for(;z>k;){if(C=E[k],G=D(C,k+V),G=i.p.idPrefix+G,l.repeatitems){_||(_=j(S+R+M));var Z=$.jgrid.getXmlData(C,l.cell,!0);$.each(_,function(e){var t=Z[this];return t?(w=t.textContent||t.text,void(O[i.p.colModel[e+S+R+M].name]=w)):!1})}else for(u=0;u<N.length;u++)w=$.jgrid.getXmlData(C,N[u]),O[i.p.colModel[u+S+R+M].name]=w;O[d]=$.jgrid.stripPref(i.p.idPrefix,G),i.p.grouping&&Q.call(F,O,k),i.p.data.push(O),i.p._index[O[d]]=i.p.data.length-1,O={},k++}i.p.grouping&&(i.p.groupingView._locgr=!0,F.jqGrid("groupingRender",B,i.p.colModel.length,i.p.page,L),B=null)}}},q=function(e,t,r,a,o){var s=new Date;if(e){-1!==i.p.treeANode||i.p.scroll?r=r>1?r:1:(b.call(i,!1,!0),r=1);var n,d,l="_id_",c="local"!==i.p.datatype&&i.p.loadonce||"jsonstring"===i.p.datatype;c&&(i.p.data=[],i.p._index={},i.p.localReader.id=l),i.p.reccount=0,"local"===i.p.datatype?(n=i.p.localReader,d="local"):(n=i.p.jsonReader,d="json");var u,h,w,x,q,D,_,C,G,I,F,k,S=$(i),R=0,M=[],N=i.p.multiselect?1:0,O=i.p.subGrid===!0?1:0,P=i.p.rownumbers===!0?1:0,A=j(N+O+P),E=v(d),T={},z=[],H=i.p.altRows===!0?i.p.altclass:"";i.p.page=p($.jgrid.getAccessor(e,n.page),i.p.page),i.p.lastpage=p($.jgrid.getAccessor(e,n.total),1),i.p.records=p($.jgrid.getAccessor(e,n.records)),i.p.userData=$.jgrid.getAccessor(e,n.userdata)||{},O&&(q=$.jgrid.getMethod("addSubGridCell")),G=i.p.keyIndex===!1?$.isFunction(n.id)?n.id.call(i,e):n.id:i.p.keyIndex,n.repeatitems||(M=E,M.length>0&&!isNaN(G)&&(G=i.p.keyName)),C=$.jgrid.getAccessor(e,n.root),null==C&&$.isArray(e)&&(C=e),C||(C=[]),_=C.length,h=0,_>0&&i.p.page<=0&&(i.p.page=1);var B,L,V=parseInt(i.p.rowNum,10),Q=i.p.scroll?$.jgrid.randId():1,W=!1;o&&(V*=o+1),"local"!==i.p.datatype||i.p.deselectAfterSort||(W=!0);var U,X=$.isFunction(i.p.afterInsertRow),Y=[],J=!1;for(i.p.grouping&&(J=i.p.groupingView.groupCollapse===!0,U=$.jgrid.getMethod("groupingPrepare"));_>h;){if(x=C[h],F=$.jgrid.getAccessor(x,G),void 0===F&&("number"==typeof G&&null!=i.p.colModel[G+N+O+P]&&(F=$.jgrid.getAccessor(x,i.p.colModel[G+N+O+P].name)),void 0===F&&(F=Q+h,0===M.length&&n.cell))){var K=$.jgrid.getAccessor(x,n.cell)||x;F=null!=K&&void 0!==K[G]?K[G]:F,K=null}F=i.p.idPrefix+F,B=1===r?0:r,k=(B+h)%2===1?H:"",W&&(L=i.p.multiselect?-1!==$.inArray(F,i.p.selarrrow):F===i.p.selrow);var Z=z.length;for(z.push(""),P&&z.push(m(0,h,i.p.page,i.p.rowNum)),N&&z.push(f(F,P,h,L)),O&&z.push(q.call(S,N+P,h+r)),D=E,n.repeatitems&&(n.cell&&(x=$.jgrid.getAccessor(x,n.cell)||x),$.isArray(x)&&(D=A)),w=0;w<D.length;w++)u=$.jgrid.getAccessor(x,D[w]),T[i.p.colModel[w+N+O+P].name]=u,z.push(g(F,u,w+N+O+P,h+r,x,T));if(z[Z]=y(F,J,k,T,x,L),z.push("</tr>"),i.p.grouping&&(Y.push(z),i.p.groupingView._locgr||U.call(S,T,h),z=[]),(c||i.p.treeGrid===!0)&&(T[l]=$.jgrid.stripPref(i.p.idPrefix,F),i.p.data.push(T),i.p._index[T[l]]=i.p.data.length-1),i.p.gridview===!1&&($("#"+$.jgrid.jqID(i.p.id)+" tbody:first").append(z.join("")),S.triggerHandler("jqGridAfterInsertRow",[F,T,x]),X&&i.p.afterInsertRow.call(i,F,T,x),z=[]),T={},R++,h++,R===V)break}if(i.p.gridview===!0&&(I=i.p.treeANode>-1?i.p.treeANode:0,i.p.grouping?c||(S.jqGrid("groupingRender",Y,i.p.colModel.length,i.p.page,V),Y=null):i.p.treeGrid===!0&&I>0?$(i.rows[I]).after(z.join("")):$("#"+$.jgrid.jqID(i.p.id)+" tbody:first").append(z.join(""))),i.p.subGrid===!0)try{S.jqGrid("addSubGrid",N+P)
}catch(et){}if(i.p.totaltime=new Date-s,R>0&&0===i.p.records&&(i.p.records=_),z=null,i.p.treeGrid===!0)try{S.jqGrid("setTreeNode",I+1,R+I+1)}catch(tt){}if(i.p.treeGrid||i.p.scroll||(i.grid.bDiv.scrollTop=0),i.p.reccount=R,i.p.treeANode=-1,i.p.userDataOnFooter&&S.jqGrid("footerData","set",i.p.userData,!0),c&&(i.p.records=_,i.p.lastpage=Math.ceil(_/V)),a||i.updatepager(!1,!0),c){for(;_>R&&C[R];){if(x=C[R],F=$.jgrid.getAccessor(x,G),void 0===F&&("number"==typeof G&&null!=i.p.colModel[G+N+O+P]&&(F=$.jgrid.getAccessor(x,i.p.colModel[G+N+O+P].name)),void 0===F&&(F=Q+R,0===M.length&&n.cell))){var it=$.jgrid.getAccessor(x,n.cell)||x;F=null!=it&&void 0!==it[G]?it[G]:F,it=null}if(x){for(F=i.p.idPrefix+F,D=E,n.repeatitems&&(n.cell&&(x=$.jgrid.getAccessor(x,n.cell)||x),$.isArray(x)&&(D=A)),w=0;w<D.length;w++)T[i.p.colModel[w+N+O+P].name]=$.jgrid.getAccessor(x,D[w]);T[l]=$.jgrid.stripPref(i.p.idPrefix,F),i.p.grouping&&U.call(S,T,R),i.p.data.push(T),i.p._index[T[l]]=i.p.data.length-1,T={}}R++}i.p.grouping&&(i.p.groupingView._locgr=!0,S.jqGrid("groupingRender",Y,i.p.colModel.length,i.p.page,V),Y=null)}}},D=function(){function e(t){var i,r,a,o,s,n=0;if(null!=t.groups){for(r=t.groups.length&&"OR"===t.groupOp.toString().toUpperCase(),r&&f.orBegin(),i=0;i<t.groups.length;i++){n>0&&r&&f.or();try{e(t.groups[i])}catch(l){alert(l)}n++}r&&f.orEnd()}if(null!=t.rules)try{for(a=t.rules.length&&"OR"===t.groupOp.toString().toUpperCase(),a&&f.orBegin(),i=0;i<t.rules.length;i++)s=t.rules[i],o=t.groupOp.toString().toUpperCase(),g[s.op]&&s.field&&(n>0&&o&&"OR"===o&&(f=f.or()),f=g[s.op](f,o)(s.field,s.data,d[s.field])),n++;a&&f.orEnd()}catch(p){alert(p)}}var t,r,a,o=i.p.multiSort?[]:"",s=[],n=!1,d={},l=[],p=[];if($.isArray(i.p.data)){var c,u,h=i.p.grouping?i.p.groupingView:!1;if($.each(i.p.colModel,function(){if(r=this.sorttype||"text","date"===r||"datetime"===r?(this.formatter&&"string"==typeof this.formatter&&"date"===this.formatter?(t=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:$.jgrid.formatter.date.srcformat,a=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:$.jgrid.formatter.date.newformat):t=a=this.datefmt||"Y-m-d",d[this.name]={stype:r,srcfmt:t,newfmt:a,sfunc:this.sortfunc||null}):d[this.name]={stype:r,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null},i.p.grouping)for(u=0,c=h.groupField.length;c>u;u++)if(this.name===h.groupField[u]){var e=this.name;this.index&&(e=this.index),l[u]=d[e],p[u]=e}if(i.p.multiSort){if(this.lso){o.push(this.name);var g=this.lso.split("-");s.push(g[g.length-1])}}else n||this.index!==i.p.sortname&&this.name!==i.p.sortname||(o=this.name,n=!0)}),i.p.treeGrid)return void $(i).jqGrid("SortTree",o,i.p.sortorder,d[o].stype||"text",d[o].srcfmt||"");var g={eq:function(e){return e.equals},ne:function(e){return e.notEquals},lt:function(e){return e.less},le:function(e){return e.lessOrEquals},gt:function(e){return e.greater},ge:function(e){return e.greaterOrEquals},cn:function(e){return e.contains},nc:function(e,t){return"OR"===t?e.orNot().contains:e.andNot().contains},bw:function(e){return e.startsWith},bn:function(e,t){return"OR"===t?e.orNot().startsWith:e.andNot().startsWith},en:function(e,t){return"OR"===t?e.orNot().endsWith:e.andNot().endsWith},ew:function(e){return e.endsWith},ni:function(e,t){return"OR"===t?e.orNot().equals:e.andNot().equals},"in":function(e){return e.equals},nu:function(e){return e.isNull},nn:function(e,t){return"OR"===t?e.orNot().isNull:e.andNot().isNull}},f=$.jgrid.from(i.p.data);if(i.p.ignoreCase&&(f=f.ignoreCase()),i.p.search===!0){var m=i.p.postData.filters;if(m)"string"==typeof m&&(m=$.jgrid.parse(m)),e(m);else try{f=g[i.p.postData.searchOper](f)(i.p.postData.searchField,i.p.postData.searchString,d[i.p.postData.searchField])}catch(v){}}if(i.p.grouping)for(u=0;c>u;u++)f.orderBy(p[u],h.groupOrder[u],l[u].stype,l[u].srcfmt);i.p.multiSort?$.each(o,function(e){f.orderBy(this,s[e],d[this].stype,d[this].srcfmt,d[this].sfunc)}):o&&i.p.sortorder&&n&&("DESC"===i.p.sortorder.toUpperCase()?f.orderBy(i.p.sortname,"d",d[o].stype,d[o].srcfmt,d[o].sfunc):f.orderBy(i.p.sortname,"a",d[o].stype,d[o].srcfmt,d[o].sfunc));var j=f.select(),b=parseInt(i.p.rowNum,10),w=j.length,y=parseInt(i.p.page,10),x=Math.ceil(w/b),q={};if((i.p.search||i.p.resetsearch)&&i.p.grouping&&i.p.groupingView._locgr){i.p.groupingView.groups=[];var D,_,C,G=$.jgrid.getMethod("groupingPrepare");if(i.p.footerrow&&i.p.userDataOnFooter){for(_ in i.p.userData)i.p.userData.hasOwnProperty(_)&&(i.p.userData[_]=0);C=!0}for(D=0;w>D;D++){if(C)for(_ in i.p.userData)i.p.userData[_]+=parseFloat(j[D][_]||0);G.call($(i),j[D],D,b)}}return j=j.slice((y-1)*b,y*b),f=null,d=null,q[i.p.localReader.total]=x,q[i.p.localReader.page]=y,q[i.p.localReader.records]=w,q[i.p.localReader.root]=j,q[i.p.localReader.userdata]=i.p.userData,j=null,q}},_=function(e,t){var r,a,o,s,n,d,l,c,u="",h=i.p.pager?"_"+$.jgrid.jqID(i.p.pager.substr(1)):"",g=i.p.toppager?"_"+i.p.toppager.substr(1):"";if(o=parseInt(i.p.page,10)-1,0>o&&(o=0),o*=parseInt(i.p.rowNum,10),n=o+i.p.reccount,i.p.scroll){var f=$("tbody:first > tr:gt(0)",i.grid.bDiv);o=n-f.length,i.p.reccount=f.length;var m=f.outerHeight()||i.grid.prevRowHeight;if(m){var v=o*m,j=parseInt(i.p.records,10)*m;$(">div:first",i.grid.bDiv).css({height:j}).children("div:first").css({height:v,display:v?"":"none"}),0==i.grid.bDiv.scrollTop&&i.p.page>1&&(i.grid.bDiv.scrollTop=i.p.rowNum*(i.p.page-1)*m)}i.grid.bDiv.scrollLeft=i.grid.hDiv.scrollLeft}u=i.p.pager||"",u+=i.p.toppager?u?","+i.p.toppager:i.p.toppager:"",u&&(l=$.jgrid.formatter.integer||{},r=p(i.p.page),a=p(i.p.lastpage),$(".selbox",u)[this.p.useProp?"prop":"attr"]("disabled",!1),i.p.pginput===!0&&($(".ui-pg-input",u).val(i.p.page),c=i.p.toppager?"#sp_1"+h+",#sp_1"+g:"#sp_1"+h,$(c).html($.fmatter?$.fmatter.util.NumberFormat(i.p.lastpage,l):i.p.lastpage)),i.p.viewrecords&&(0===i.p.reccount?$(".ui-paging-info",u).html(i.p.emptyrecords):(s=o+1,d=i.p.records,$.fmatter&&(s=$.fmatter.util.NumberFormat(s,l),n=$.fmatter.util.NumberFormat(n,l),d=$.fmatter.util.NumberFormat(d,l)),$(".ui-paging-info",u).html($.jgrid.format(i.p.recordtext,s,n,d)))),i.p.pgbuttons===!0&&(0>=r&&(r=a=0),1===r||0===r?($("#first"+h+", #prev"+h).addClass("ui-state-disabled").removeClass("ui-state-hover"),i.p.toppager&&$("#first_t"+g+", #prev_t"+g).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#first"+h+", #prev"+h).removeClass("ui-state-disabled"),i.p.toppager&&$("#first_t"+g+", #prev_t"+g).removeClass("ui-state-disabled")),r===a||0===r?($("#next"+h+", #last"+h).addClass("ui-state-disabled").removeClass("ui-state-hover"),i.p.toppager&&$("#next_t"+g+", #last_t"+g).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#next"+h+", #last"+h).removeClass("ui-state-disabled"),i.p.toppager&&$("#next_t"+g+", #last_t"+g).removeClass("ui-state-disabled")))),e===!0&&i.p.rownumbers===!0&&$(">td.jqgrid-rownum",i.rows).each(function(e){$(this).html(o+1+e)}),t&&i.p.jqgdnd&&$(i).jqGrid("gridDnD","updateDnD"),$(i).triggerHandler("jqGridGridComplete"),$.isFunction(i.p.gridComplete)&&i.p.gridComplete.call(i),$(i).triggerHandler("jqGridAfterGridComplete")},C=function(){if(i.grid.hDiv.loading=!0,!i.p.hiddengrid)switch(i.p.loadui){case"disable":break;case"enable":$("#load_"+$.jgrid.jqID(i.p.id)).show();break;case"block":$("#lui_"+$.jgrid.jqID(i.p.id)).show(),$("#load_"+$.jgrid.jqID(i.p.id)).show()}},G=function(){switch(i.grid.hDiv.loading=!1,i.p.loadui){case"disable":break;case"enable":$("#load_"+$.jgrid.jqID(i.p.id)).hide();break;case"block":$("#lui_"+$.jgrid.jqID(i.p.id)).hide(),$("#load_"+$.jgrid.jqID(i.p.id)).hide()}},I=function(e){if(!i.grid.hDiv.loading){var t,r,a=i.p.scroll&&e===!1,o={},s=i.p.prmNames;i.p.page<=0&&(i.p.page=Math.min(1,i.p.lastpage)),null!==s.search&&(o[s.search]=i.p.search),null!==s.nd&&(o[s.nd]=(new Date).getTime()),null!==s.rows&&(o[s.rows]=i.p.rowNum),null!==s.page&&(o[s.page]=i.p.page),null!==s.sort&&(o[s.sort]=i.p.sortname),null!==s.order&&(o[s.order]=i.p.sortorder),null!==i.p.rowTotal&&null!==s.totalrows&&(o[s.totalrows]=i.p.rowTotal);var n=$.isFunction(i.p.loadComplete),d=n?i.p.loadComplete:null,l=0;if(e=e||1,e>1?null!==s.npage?(o[s.npage]=e,l=e-1,e=1):d=function(t){i.p.page++,i.grid.hDiv.loading=!1,n&&i.p.loadComplete.call(i,t),I(e-1)}:null!==s.npage&&delete i.p.postData[s.npage],i.p.grouping){$(i).jqGrid("groupingSetup");var p,c=i.p.groupingView,u="";for(p=0;p<c.groupField.length;p++){var h=c.groupField[p];$.each(i.p.colModel,function(e,t){t.name===h&&t.index&&(h=t.index)}),u+=h+" "+c.groupOrder[p]+", "}o[s.sort]=u+o[s.sort]}$.extend(i.p.postData,o);var g=i.p.scroll?i.rows.length-1:1,f=$(i).triggerHandler("jqGridBeforeRequest");if(f===!1||"stop"===f)return;if($.isFunction(i.p.datatype))return void i.p.datatype.call(i,i.p.postData,"load_"+i.p.id,g,e,l);if($.isFunction(i.p.beforeRequest)&&(f=i.p.beforeRequest.call(i),void 0===f&&(f=!0),f===!1))return;switch(t=i.p.datatype.toLowerCase()){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:i.p.url,type:i.p.mtype,dataType:t,data:$.isFunction(i.p.serializeGridData)?i.p.serializeGridData.call(i,i.p.postData):i.p.postData,success:function(r,o,s){return $.isFunction(i.p.beforeProcessing)&&i.p.beforeProcessing.call(i,r,o,s)===!1?void G():("xml"===t?x(r,i.grid.bDiv,g,e>1,l):q(r,i.grid.bDiv,g,e>1,l),$(i).triggerHandler("jqGridLoadComplete",[r]),d&&d.call(i,r),$(i).triggerHandler("jqGridAfterLoadComplete",[r]),a&&i.grid.populateVisible(),(i.p.loadonce||i.p.treeGrid)&&(i.p.datatype="local"),r=null,void(1===e&&G()))},error:function(t,r,a){$.isFunction(i.p.loadError)&&i.p.loadError.call(i,t,r,a),1===e&&G(),t=null},beforeSend:function(e,t){var r=!0;return $.isFunction(i.p.loadBeforeSend)&&(r=i.p.loadBeforeSend.call(i,e,t)),void 0===r&&(r=!0),r===!1?!1:void C()}},$.jgrid.ajaxOptions,i.p.ajaxGridOptions));break;case"xmlstring":C(),r="string"!=typeof i.p.datastr?i.p.datastr:$.parseXML(i.p.datastr),x(r,i.grid.bDiv),$(i).triggerHandler("jqGridLoadComplete",[r]),n&&i.p.loadComplete.call(i,r),$(i).triggerHandler("jqGridAfterLoadComplete",[r]),i.p.datatype="local",i.p.datastr=null,G();break;case"jsonstring":C(),r="string"==typeof i.p.datastr?$.jgrid.parse(i.p.datastr):i.p.datastr,q(r,i.grid.bDiv),$(i).triggerHandler("jqGridLoadComplete",[r]),n&&i.p.loadComplete.call(i,r),$(i).triggerHandler("jqGridAfterLoadComplete",[r]),i.p.datatype="local",i.p.datastr=null,G();break;case"local":case"clientside":C(),i.p.datatype="local";var m=D();q(m,i.grid.bDiv,g,e>1,l),$(i).triggerHandler("jqGridLoadComplete",[m]),d&&d.call(i,m),$(i).triggerHandler("jqGridAfterLoadComplete",[m]),a&&i.grid.populateVisible(),G()}}},F=function(e){$("#cb_"+$.jgrid.jqID(i.p.id),i.grid.hDiv)[i.p.useProp?"prop":"attr"]("checked",e);var t=i.p.frozenColumns?i.p.id+"_frozen":"";t&&$("#cb_"+$.jgrid.jqID(i.p.id),i.grid.fhDiv)[i.p.useProp?"prop":"attr"]("checked",e)},k=function(e,t){var r,a,s,n,d,l,c,u="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",h="",g="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",f="",m=function(e){var t;return $.isFunction(i.p.onPaging)&&(t=i.p.onPaging.call(i,e)),"stop"===t?!1:(i.p.selrow=null,i.p.multiselect&&(i.p.selarrrow=[],F(!1)),i.p.savedRow=[],!0)};if(e=e.substr(1),t+="_"+e,r="pg_"+e,a=e+"_left",s=e+"_center",n=e+"_right",$("#"+$.jgrid.jqID(e)).append("<div id='"+r+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+a+"' align='left'></td><td id='"+s+"' align='center' style='white-space:pre;'></td><td id='"+n+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr"),i.p.rowList.length>0){for(f="<td dir='"+o+"'>",f+="<select class='ui-pg-selbox' role='listbox'>",c=0;c<i.p.rowList.length;c++)f+='<option role="option" value="'+i.p.rowList[c]+'"'+(i.p.rowNum===i.p.rowList[c]?' selected="selected"':"")+">"+i.p.rowList[c]+"</option>";f+="</select></td>"}if("rtl"===o&&(g+=f),i.p.pginput===!0&&(h="<td dir='"+o+"'>"+$.jgrid.format(i.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(e)+"'></span>")+"</td>"),i.p.pgbuttons===!0){var v=["first"+t,"prev"+t,"next"+t,"last"+t];"rtl"===o&&v.reverse(),g+="<td id='"+v[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>",g+="<td id='"+v[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>",g+=""!==h?u+h+u:"",g+="<td id='"+v[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>",g+="<td id='"+v[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>"}else""!==h&&(g+=h);"ltr"===o&&(g+=f),g+="</tr></tbody></table>",i.p.viewrecords===!0&&$("td#"+e+"_"+i.p.recordpos,"#"+r).append("<div dir='"+o+"' style='text-align:"+i.p.recordpos+"' class='ui-paging-info'></div>"),$("td#"+e+"_"+i.p.pagerpos,"#"+r).append(g),l=$(".ui-jqgrid").css("font-size")||"11px",$(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+l+";visibility:hidden;' ></div>"),d=$(g).clone().appendTo("#testpg").width(),$("#testpg").remove(),d>0&&(""!==h&&(d+=50),$("td#"+e+"_"+i.p.pagerpos,"#"+r).width(d)),i.p._nvtd=[],i.p._nvtd[0]=Math.floor(d?(i.p.width-d)/2:i.p.width/3),i.p._nvtd[1]=0,g=null,$(".ui-pg-selbox","#"+r).bind("change",function(){return m("records")?(i.p.page=Math.round(i.p.rowNum*(i.p.page-1)/this.value-.5)+1,i.p.rowNum=this.value,i.p.pager&&$(".ui-pg-selbox",i.p.pager).val(this.value),i.p.toppager&&$(".ui-pg-selbox",i.p.toppager).val(this.value),I(),!1):!1}),i.p.pgbuttons===!0&&($(".ui-pg-button","#"+r).hover(function(){$(this).hasClass("ui-state-disabled")?this.style.cursor="default":($(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){$(this).hasClass("ui-state-disabled")||($(this).removeClass("ui-state-hover"),this.style.cursor="default")}),$("#first"+$.jgrid.jqID(t)+", #prev"+$.jgrid.jqID(t)+", #next"+$.jgrid.jqID(t)+", #last"+$.jgrid.jqID(t)).click(function(){if($(this).hasClass("ui-state-disabled"))return!1;var e=p(i.p.page,1),r=p(i.p.lastpage,1),a=!1,o=!0,s=!0,n=!0,d=!0;return 0===r||1===r?(o=!1,s=!1,n=!1,d=!1):r>1&&e>=1?1===e?(o=!1,s=!1):e===r&&(n=!1,d=!1):r>1&&0===e&&(n=!1,d=!1,e=r-1),m(this.id)?(this.id==="first"+t&&o&&(i.p.page=1,a=!0),this.id==="prev"+t&&s&&(i.p.page=e-1,a=!0),this.id==="next"+t&&n&&(i.p.page=e+1,a=!0),this.id==="last"+t&&d&&(i.p.page=r,a=!0),a&&I(),!1):!1})),i.p.pginput===!0&&$("input.ui-pg-input","#"+r).keypress(function(e){var t=e.charCode||e.keyCode||0;return 13===t?m("user")?($(this).val(p($(this).val(),1)),i.p.page=$(this).val()>0?$(this).val():i.p.page,I(),!1):!1:this})},S=function(e,t){var r,a,o="",s=i.p.colModel,n=!1,d=i.p.frozenColumns?t:i.grid.headers[e].el,l="";$("span.ui-grid-ico-sort",d).addClass("ui-state-disabled"),$(d).attr("aria-selected","false"),s[e].lso?"asc"===s[e].lso?(s[e].lso+="-desc",l="desc"):"desc"===s[e].lso?(s[e].lso+="-asc",l="asc"):("asc-desc"===s[e].lso||"desc-asc"===s[e].lso)&&(s[e].lso=""):s[e].lso=l=s[e].firstsortorder||"asc",l?($("span.s-ico",d).show(),$("span.ui-icon-"+l,d).removeClass("ui-state-disabled"),$(d).attr("aria-selected","true")):i.p.viewsortcols[0]||$("span.s-ico",d).hide(),i.p.sortorder="",$.each(s,function(e){this.lso&&(e>0&&n&&(o+=", "),r=this.lso.split("-"),o+=s[e].index||s[e].name,o+=" "+r[r.length-1],n=!0,i.p.sortorder=r[r.length-1])}),a=o.lastIndexOf(i.p.sortorder),o=o.substring(0,a),i.p.sortname=o},R=function(e,t,r,a,o){if(i.p.colModel[t].sortable&&!(i.p.savedRow.length>0)){if(r||(i.p.lastsort===t?"asc"===i.p.sortorder?i.p.sortorder="desc":"desc"===i.p.sortorder&&(i.p.sortorder="asc"):i.p.sortorder=i.p.colModel[t].firstsortorder||"asc",i.p.page=1),i.p.multiSort)S(t,o);else{if(a){if(i.p.lastsort===t&&i.p.sortorder===a&&!r)return;i.p.sortorder=a}var s=i.grid.headers[i.p.lastsort].el,n=i.p.frozenColumns?o:i.grid.headers[t].el;$("span.ui-grid-ico-sort",s).addClass("ui-state-disabled"),$(s).attr("aria-selected","false"),i.p.frozenColumns&&(i.grid.fhDiv.find("span.ui-grid-ico-sort").addClass("ui-state-disabled"),i.grid.fhDiv.find("th").attr("aria-selected","false")),$("span.ui-icon-"+i.p.sortorder,n).removeClass("ui-state-disabled"),$(n).attr("aria-selected","true"),i.p.viewsortcols[0]||i.p.lastsort!==t&&(i.p.frozenColumns&&i.grid.fhDiv.find("span.s-ico").hide(),$("span.s-ico",s).hide(),$("span.s-ico",n).show()),e=e.substring(5+i.p.id.length+1),i.p.sortname=i.p.colModel[t].index||e}if("stop"===$(i).triggerHandler("jqGridSortCol",[i.p.sortname,t,i.p.sortorder]))return void(i.p.lastsort=t);if($.isFunction(i.p.onSortCol)&&"stop"===i.p.onSortCol.call(i,i.p.sortname,t,i.p.sortorder))return void(i.p.lastsort=t);if("local"===i.p.datatype?i.p.deselectAfterSort&&$(i).jqGrid("resetSelection"):(i.p.selrow=null,i.p.multiselect&&F(!1),i.p.selarrrow=[],i.p.savedRow=[]),i.p.scroll){var d=i.grid.bDiv.scrollLeft;b.call(i,!0,!1),i.grid.hDiv.scrollLeft=d}i.p.subGrid&&"local"===i.p.datatype&&$("td.sgexpanded","#"+$.jgrid.jqID(i.p.id)).each(function(){$(this).trigger("click")}),I(),i.p.lastsort=t,i.p.sortname!==e&&t&&(i.p.lastsort=t)}},M=function(){var e,t,a,o,s=0,n=$.jgrid.cell_width?0:p(i.p.cellLayout,0),d=0,l=p(i.p.scrollOffset,0),c=!1,u=0;$.each(i.p.colModel,function(){if(void 0===this.hidden&&(this.hidden=!1),i.p.grouping&&i.p.autowidth){var e=$.inArray(this.name,i.p.groupingView.groupField);e>=0&&i.p.groupingView.groupColumnShow.length>e&&(this.hidden=!i.p.groupingView.groupColumnShow[e])}this.widthOrg=t=p(this.width,0),this.hidden===!1&&(s+=t+n,this.fixed?u+=t+n:d++)}),isNaN(i.p.width)&&(i.p.width=s+(i.p.shrinkToFit!==!1||isNaN(i.p.height)?0:l)),r.width=i.p.width,i.p.tblwidth=s,i.p.shrinkToFit===!1&&i.p.forceFit===!0&&(i.p.forceFit=!1),i.p.shrinkToFit===!0&&d>0&&(a=r.width-n*d-u,isNaN(i.p.height)||(a-=l,c=!0),s=0,$.each(i.p.colModel,function(r){this.hidden!==!1||this.fixed||(t=Math.round(a*this.width/(i.p.tblwidth-n*d-u)),this.width=t,s+=t,e=r)}),o=0,c?r.width-u-(s+n*d)!==l&&(o=r.width-u-(s+n*d)-l):c||1===Math.abs(r.width-u-(s+n*d))||(o=r.width-u-(s+n*d)),i.p.colModel[e].width+=o,i.p.tblwidth=s+o+n*d+u,i.p.tblwidth>i.p.width&&(i.p.colModel[e].width-=i.p.tblwidth-parseInt(i.p.width,10),i.p.tblwidth=i.p.width))},N=function(e){var t,r=e,a=e;for(t=e+1;t<i.p.colModel.length;t++)if(i.p.colModel[t].hidden!==!0){a=t;break}return a-r},O=function(e){var t=$(i.grid.headers[e].el),r=[t.position().left+t.outerWidth()];return"rtl"===i.p.direction&&(r[0]=i.p.width-r[0]),r[0]-=i.grid.bDiv.scrollLeft,r.push($(i.grid.hDiv).position().top),r.push($(i.grid.bDiv).offset().top-$(i.grid.hDiv).offset().top+$(i.grid.bDiv).height()),r},P=function(e){var t,r=i.grid.headers,a=$.jgrid.getCellIndex(e);for(t=0;t<r.length;t++)if(e===r[t].el){a=t;break}return a};for(this.p.id=this.id,-1===$.inArray(i.p.multikey,l)&&(i.p.multikey=!1),i.p.keyIndex=!1,i.p.keyName=!1,a=0;a<i.p.colModel.length;a++)i.p.colModel[a]=$.extend(!0,{},i.p.cmTemplate,i.p.colModel[a].template||{},i.p.colModel[a]),i.p.keyIndex===!1&&i.p.colModel[a].key===!0&&(i.p.keyIndex=a);if(i.p.sortorder=i.p.sortorder.toLowerCase(),$.jgrid.cell_width=$.jgrid.cellWidth(),i.p.grouping===!0&&(i.p.scroll=!1,i.p.rownumbers=!1,i.p.treeGrid=!1,i.p.gridview=!0),this.p.treeGrid===!0){try{$(this).jqGrid("setTreeGrid")}catch(A){}"local"!==i.p.datatype&&(i.p.localReader={id:"_id_"})}if(this.p.subGrid)try{$(i).jqGrid("setSubGrid")}catch(E){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:$.jgrid.cell_width?i.p.multiselectWidth+i.p.cellLayout:i.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:i.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),i.p.xmlReader=$.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},i.p.xmlReader),i.p.jsonReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},i.p.jsonReader),i.p.localReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},i.p.localReader),i.p.scroll&&(i.p.pgbuttons=!1,i.p.pginput=!1,i.p.rowList=[]),i.p.data.length&&w();var T,z,H,B,L,V,Q,W,U,X="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",Y="",J="",K=[],Z=[],et=[];if(i.p.shrinkToFit===!0&&i.p.forceFit===!0)for(a=i.p.colModel.length-1;a>=0;a--)if(!i.p.colModel[a].hidden){i.p.colModel[a].resizable=!1;break}if("horizontal"===i.p.viewsortcols[1]&&(Y=" ui-i-asc",J=" ui-i-desc"),T=n?"class='ui-th-div-ie'":"",U="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+Y+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+o+"'></span>",U+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+J+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+o+"'></span></span>",i.p.multiSort)for(K=i.p.sortname.split(","),a=0;a<K.length;a++)et=$.trim(K[a]).split(" "),K[a]=$.trim(et[0]),Z[a]=et[1]?$.trim(et[1]):i.p.sortorder||"asc";for(a=0;a<this.p.colNames.length;a++){var tt=i.p.headertitles?' title="'+$.jgrid.stripHtml(i.p.colNames[a])+'"':"";X+="<th id='"+i.p.id+"_"+i.p.colModel[a].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+o+"'"+tt+">",z=i.p.colModel[a].index||i.p.colModel[a].name,X+="<div id='jqgh_"+i.p.id+"_"+i.p.colModel[a].name+"' "+T+">"+i.p.colNames[a],i.p.colModel[a].width=i.p.colModel[a].width?parseInt(i.p.colModel[a].width,10):150,"boolean"!=typeof i.p.colModel[a].title&&(i.p.colModel[a].title=!0),i.p.colModel[a].lso="",z===i.p.sortname&&(i.p.lastsort=a),i.p.multiSort&&(et=$.inArray(z,K),-1!==et&&(i.p.colModel[a].lso=Z[et])),X+=U+"</div></th>"}if(X+="</tr></thead>",U=null,$(this).append(X),$("thead tr:first th",this).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),this.p.multiselect){var it,rt=[];$("#cb_"+$.jgrid.jqID(i.p.id),this).bind("click",function(){i.p.selarrrow=[];var e=i.p.frozenColumns===!0?i.p.id+"_frozen":"";this.checked?($(i.rows).each(function(t){t>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass("ui-state-disabled")||($("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(this.id))[i.p.useProp?"prop":"attr"]("checked",!0),$(this).addClass("ui-state-highlight").attr("aria-selected","true"),i.p.selarrrow.push(this.id),i.p.selrow=this.id,e&&($("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(this.id),i.grid.fbDiv)[i.p.useProp?"prop":"attr"]("checked",!0),$("#"+$.jgrid.jqID(this.id),i.grid.fbDiv).addClass("ui-state-highlight"))))}),it=!0,rt=[]):($(i.rows).each(function(t){t>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("ui-state-disabled")||($("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(this.id))[i.p.useProp?"prop":"attr"]("checked",!1),$(this).removeClass("ui-state-highlight").attr("aria-selected","false"),rt.push(this.id),e&&($("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(this.id),i.grid.fbDiv)[i.p.useProp?"prop":"attr"]("checked",!1),$("#"+$.jgrid.jqID(this.id),i.grid.fbDiv).removeClass("ui-state-highlight"))))}),i.p.selrow=null,it=!1),$(i).triggerHandler("jqGridSelectAll",[it?i.p.selarrrow:rt,it]),$.isFunction(i.p.onSelectAll)&&i.p.onSelectAll.call(i,it?i.p.selarrrow:rt,it)})}if(i.p.autowidth===!0){var at=$(d).innerWidth();i.p.width=at>0?at:"nw"}M(),$(d).css("width",r.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+i.p.id+"'>&#160;</div>"),$(s).css("width",r.width+"px"),X=$("thead:first",i).get(0);var ot="";i.p.footerrow&&(ot+="<table role='grid' style='width:"+i.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+o+"'>");var st=$("tr:first",X),nt="<tr class='jqgfirstrow' role='row' style='height:auto'>";if(i.p.disableClick=!1,$("th",st).each(function(e){H=i.p.colModel[e].width,void 0===i.p.colModel[e].resizable&&(i.p.colModel[e].resizable=!0),i.p.colModel[e].resizable?(B=document.createElement("span"),$(B).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+o).css("cursor","col-resize"),$(this).addClass(i.p.resizeclass)):B="",$(this).css("width",H+"px").prepend(B),B=null;var t="";i.p.colModel[e].hidden&&($(this).css("display","none"),t="display:none;"),nt+="<td role='gridcell' style='height:0px;width:"+H+"px;"+t+"'></td>",r.headers[e]={width:H,el:this},L=i.p.colModel[e].sortable,"boolean"!=typeof L&&(i.p.colModel[e].sortable=!0,L=!0);var a=i.p.colModel[e].name;"cb"!==a&&"subgrid"!==a&&"rn"!==a&&i.p.viewsortcols[2]&&$(">div",this).addClass("ui-jqgrid-sortable"),L&&(i.p.multiSort?i.p.viewsortcols[0]?($("div span.s-ico",this).show(),i.p.colModel[e].lso&&$("div span.ui-icon-"+i.p.colModel[e].lso,this).removeClass("ui-state-disabled")):i.p.colModel[e].lso&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+i.p.colModel[e].lso,this).removeClass("ui-state-disabled")):i.p.viewsortcols[0]?($("div span.s-ico",this).show(),e===i.p.lastsort&&$("div span.ui-icon-"+i.p.sortorder,this).removeClass("ui-state-disabled")):e===i.p.lastsort&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+i.p.sortorder,this).removeClass("ui-state-disabled"))),i.p.footerrow&&(ot+="<td role='gridcell' "+c(e,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(e){if(1===$(e.target).closest("th>span.ui-jqgrid-resize").length){var t=P(this);return i.p.forceFit===!0&&(i.p.nv=N(t)),r.dragStart(t,e,O(t)),!1}}).click(function(e){if(i.p.disableClick)return i.p.disableClick=!1,!1;var t,r,a="th>div.ui-jqgrid-sortable";i.p.viewsortcols[2]||(a="th>div>span>span.ui-grid-ico-sort");var o=$(e.target).closest(a);if(1===o.length){var s;if(i.p.frozenColumns){var n=$(this)[0].id.substring(i.p.id.length+1);$(i.p.colModel).each(function(e){return this.name===n?(s=e,!1):void 0})}else s=P(this);return i.p.viewsortcols[2]||(t=!0,r=o.attr("sort")),null!=s&&R($("div",this)[0].id,s,t,r,this),!1}}),i.p.sortable&&$.fn.sortable)try{$(i).jqGrid("sortableColumns",st)}catch(dt){}i.p.footerrow&&(ot+="</tr></tbody></table>"),nt+="</tr>",W=document.createElement("tbody"),this.appendChild(W),$(this).addClass("ui-jqgrid-btable").append(nt),nt=null;var lt=$("<table class='ui-jqgrid-htable' style='width:"+i.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(X),pt=i.p.caption&&i.p.hiddengrid===!0?!0:!1,ct=$("<div class='ui-jqgrid-hbox"+("rtl"===o?"-rtl":"")+"'></div>");X=null,r.hDiv=document.createElement("div"),$(r.hDiv).css({width:r.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(ct),$(ct).append(lt),lt=null,pt&&$(r.hDiv).hide(),i.p.pager&&("string"==typeof i.p.pager?"#"!==i.p.pager.substr(0,1)&&(i.p.pager="#"+i.p.pager):i.p.pager="#"+$(i.p.pager).attr("id"),$(i.p.pager).css({width:r.width+"px"}).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom").appendTo(d),pt&&$(i.p.pager).hide(),k(i.p.pager,"")),i.p.cellEdit===!1&&i.p.hoverrows===!0&&$(i).bind("mouseover",function(e){Q=$(e.target).closest("tr.jqgrow"),"ui-subgrid"!==$(Q).attr("class")&&$(Q).addClass("ui-state-hover")}).bind("mouseout",function(e){Q=$(e.target).closest("tr.jqgrow"),$(Q).removeClass("ui-state-hover")});var ut,ht,gt;$(i).before(r.hDiv).click(function(e){if(V=e.target,Q=$(V,i.rows).closest("tr.jqgrow"),0===$(Q).length||Q[0].className.indexOf("ui-state-disabled")>-1||($(V,i).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==i.id)return this;var t=$(V).hasClass("cbox"),r=$(i).triggerHandler("jqGridBeforeSelectRow",[Q[0].id,e]);if(r=r===!1||"stop"===r?!1:!0,r&&$.isFunction(i.p.beforeSelectRow)&&(r=i.p.beforeSelectRow.call(i,Q[0].id,e)),"A"!==V.tagName&&("INPUT"!==V.tagName&&"TEXTAREA"!==V.tagName&&"OPTION"!==V.tagName&&"SELECT"!==V.tagName||t)&&r===!0)if(ut=Q[0].id,ht=$.jgrid.getCellIndex(V),gt=$(V).closest("td,th").html(),$(i).triggerHandler("jqGridCellSelect",[ut,ht,gt,e]),$.isFunction(i.p.onCellSelect)&&i.p.onCellSelect.call(i,ut,ht,gt,e),i.p.cellEdit===!0)if(i.p.multiselect&&t)$(i).jqGrid("setSelection",ut,!0,e);else{ut=Q[0].rowIndex;try{$(i).jqGrid("editCell",ut,ht,!0)}catch(a){}}else if(i.p.multikey)e[i.p.multikey]?$(i).jqGrid("setSelection",ut,!0,e):i.p.multiselect&&t&&(t=$("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+ut).is(":checked"),$("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+ut)[i.p.useProp?"prop":"attr"]("checked",t));else if(i.p.multiselect&&i.p.multiboxonly)if(t)$(i).jqGrid("setSelection",ut,!0,e);else{var o=i.p.frozenColumns?i.p.id+"_frozen":"";$(i.p.selarrrow).each(function(e,t){var r=$(i).jqGrid("getGridRowById",t);$(r).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(t))[i.p.useProp?"prop":"attr"]("checked",!1),o&&($("#"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(o)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(o))[i.p.useProp?"prop":"attr"]("checked",!1))}),i.p.selarrrow=[],$(i).jqGrid("setSelection",ut,!0,e)}else $(i).jqGrid("setSelection",ut,!0,e)}).bind("reloadGrid",function(e,t){if(i.p.treeGrid===!0&&(i.p.datatype=i.p.treedatatype),t&&t.current&&i.grid.selectionPreserver(i),"local"===i.p.datatype?($(i).jqGrid("resetSelection"),i.p.data.length&&w()):i.p.treeGrid||(i.p.selrow=null,i.p.multiselect&&(i.p.selarrrow=[],F(!1)),i.p.savedRow=[]),i.p.scroll&&b.call(i,!0,!1),t&&t.page){var r=t.page;r>i.p.lastpage&&(r=i.p.lastpage),1>r&&(r=1),i.p.page=r,i.grid.bDiv.scrollTop=i.grid.prevRowHeight?(r-1)*i.grid.prevRowHeight*i.p.rowNum:0}return i.grid.prevRowHeight&&i.p.scroll?(delete i.p.lastpage,i.grid.populateVisible()):i.grid.populate(),i.p._inlinenav===!0&&$(i).jqGrid("showAddEditButtons"),!1}).dblclick(function(e){V=e.target,Q=$(V,i.rows).closest("tr.jqgrow"),0!==$(Q).length&&(ut=Q[0].rowIndex,ht=$.jgrid.getCellIndex(V),$(i).triggerHandler("jqGridDblClickRow",[$(Q).attr("id"),ut,ht,e]),$.isFunction(i.p.ondblClickRow)&&i.p.ondblClickRow.call(i,$(Q).attr("id"),ut,ht,e))}).bind("contextmenu",function(e){V=e.target,Q=$(V,i.rows).closest("tr.jqgrow"),0!==$(Q).length&&(i.p.multiselect||$(i).jqGrid("setSelection",Q[0].id,!0,e),ut=Q[0].rowIndex,ht=$.jgrid.getCellIndex(V),$(i).triggerHandler("jqGridRightClickRow",[$(Q).attr("id"),ut,ht,e]),$.isFunction(i.p.onRightClickRow)&&i.p.onRightClickRow.call(i,$(Q).attr("id"),ut,ht,e))}),r.bDiv=document.createElement("div"),n&&"auto"===String(i.p.height).toLowerCase()&&(i.p.height="100%"),$(r.bDiv).append($('<div style="position:relative;'+(n&&$.jgrid.msiever()<8?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:i.p.height+(isNaN(i.p.height)?"":"px"),width:r.width+"px"}).scroll(r.scrollGrid),$("table:first",r.bDiv).css({width:i.p.tblwidth+"px"}),$.support.tbody||2===$("tbody",this).length&&$("tbody:gt(0)",this).remove(),i.p.multikey&&($.jgrid.msie?$(r.bDiv).bind("selectstart",function(){return!1}):$(r.bDiv).bind("mousedown",function(){return!1})),pt&&$(r.bDiv).hide(),r.cDiv=document.createElement("div");var ft=i.p.hidegrid===!0?$("<a role='link' class='ui-jqgrid-titlebar-close ui-corner-all HeaderButton' />").hover(function(){ft.addClass("ui-state-hover")},function(){ft.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css("rtl"===o?"left":"right","0px"):"";if($(r.cDiv).append(ft).append("<span class='ui-jqgrid-title'>"+i.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===o?"-rtl":"")+" ui-widget-header ui-corner-top ui-helper-clearfix"),$(r.cDiv).insertBefore(r.hDiv),i.p.toolbar[0]&&(r.uDiv=document.createElement("div"),"top"===i.p.toolbar[1]?$(r.uDiv).insertBefore(r.hDiv):"bottom"===i.p.toolbar[1]&&$(r.uDiv).insertAfter(r.hDiv),"both"===i.p.toolbar[1]?(r.ubDiv=document.createElement("div"),$(r.uDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id).insertBefore(r.hDiv),$(r.ubDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id).insertAfter(r.hDiv),pt&&$(r.ubDiv).hide()):$(r.uDiv).width(r.width).addClass("t_toolbar ui-userdata ui-state-default").attr("id","t_"+this.id),pt&&$(r.uDiv).hide()),i.p.toppager&&(i.p.toppager=$.jgrid.jqID(i.p.id)+"_toppager",r.topDiv=$("<div id='"+i.p.toppager+"'></div>")[0],i.p.toppager="#"+i.p.toppager,$(r.topDiv).addClass("ui-state-default ui-jqgrid-toppager").width(r.width).insertBefore(r.hDiv),k(i.p.toppager,"_t")),i.p.footerrow&&(r.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0],ct=$("<div class='ui-jqgrid-hbox"+("rtl"===o?"-rtl":"")+"'></div>"),$(r.sDiv).append(ct).width(r.width).insertAfter(r.hDiv),$(ct).append(ot),r.footers=$(".ui-jqgrid-ftable",r.sDiv)[0].rows[0].cells,i.p.rownumbers&&(r.footers[0].className="ui-state-default jqgrid-rownum"),pt&&$(r.sDiv).hide()),ct=null,i.p.caption){var mt=i.p.datatype;
i.p.hidegrid===!0&&($(".ui-jqgrid-titlebar-close",r.cDiv).click(function(e){var t,a=$.isFunction(i.p.onHeaderClick),o=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",s=this;return i.p.toolbar[0]===!0&&("both"===i.p.toolbar[1]&&(o+=", #"+$(r.ubDiv).attr("id")),o+=", #"+$(r.uDiv).attr("id")),t=$(o,"#gview_"+$.jgrid.jqID(i.p.id)).length,"visible"===i.p.gridstate?$(o,"#gbox_"+$.jgrid.jqID(i.p.id)).slideUp("fast",function(){t--,0===t&&($("span",s).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),i.p.gridstate="hidden",$("#gbox_"+$.jgrid.jqID(i.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(i.p.id)).hide(),$(i).triggerHandler("jqGridHeaderClick",[i.p.gridstate,e]),a&&(pt||i.p.onHeaderClick.call(i,i.p.gridstate,e)))}):"hidden"===i.p.gridstate&&$(o,"#gbox_"+$.jgrid.jqID(i.p.id)).slideDown("fast",function(){t--,0===t&&($("span",s).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),pt&&(i.p.datatype=mt,I(),pt=!1),i.p.gridstate="visible",$("#gbox_"+$.jgrid.jqID(i.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(i.p.id)).show(),$(i).triggerHandler("jqGridHeaderClick",[i.p.gridstate,e]),a&&(pt||i.p.onHeaderClick.call(i,i.p.gridstate,e)))}),!1}),pt&&(i.p.datatype="local",$(".ui-jqgrid-titlebar-close",r.cDiv).trigger("click")))}else $(r.cDiv).hide();$(r.hDiv).after(r.bDiv).mousemove(function(e){return r.resizing?(r.dragMove(e),!1):void 0}),$(".ui-jqgrid-labels",r.hDiv).bind("selectstart",function(){return!1}),$(document).bind("mouseup.jqGrid"+i.p.id,function(){return r.resizing?(r.dragEnd(),!1):!0}),i.formatCol=c,i.sortData=R,i.updatepager=_,i.refreshIndex=w,i.setHeadCheckBox=F,i.constructTr=y,i.formatter=function(e,t,i,r,a){return h(e,t,i,r,a)},$.extend(r,{populate:I,emptyRows:b,beginReq:C,endReq:G}),this.grid=r,i.addXmlData=function(e){x(e,i.grid.bDiv)},i.addJSONData=function(e){q(e,i.grid.bDiv)},this.grid.cols=this.rows[0].cells,$(i).triggerHandler("jqGridInitGrid"),$.isFunction(i.p.onInitGrid)&&i.p.onInitGrid.call(i),I(),i.p.hiddengrid=!1}})},$.jgrid.extend({getGridParam:function(e){var t=this[0];if(t&&t.grid)return e?void 0!==t.p[e]?t.p[e]:null:t.p},setGridParam:function(e){return this.each(function(){this.grid&&"object"==typeof e&&$.extend(!0,this.p,e)})},getGridRowById:function(e){var t;return this.each(function(){try{for(var i=this.rows.length;i--;)if(e.toString()===this.rows[i].id){t=this.rows[i];break}}catch(r){t=$(this.grid.bDiv).find("#"+$.jgrid.jqID(e))}}),t},getDataIDs:function(){var e,t=[],i=0,r=0;return this.each(function(){if(e=this.rows.length,e&&e>0)for(;e>i;)$(this.rows[i]).hasClass("jqgrow")&&(t[r]=this.rows[i].id,r++),i++}),t},setSelection:function(e,t,i){return this.each(function(){function r(e){var t=$(p.grid.bDiv)[0].clientHeight,i=$(p.grid.bDiv)[0].scrollTop,r=$(p.rows[e]).position().top,a=p.rows[e].clientHeight;r+a>=t+i?$(p.grid.bDiv)[0].scrollTop=r-(t+i)+a+i:t+i>r&&i>r&&($(p.grid.bDiv)[0].scrollTop=r)}var a,o,s,n,d,l,p=this;void 0!==e&&(t=t===!1?!1:!0,o=$(p).jqGrid("getGridRowById",e),!o||!o.className||o.className.indexOf("ui-state-disabled")>-1||(p.p.scrollrows===!0&&(s=$(p).jqGrid("getGridRowById",e).rowIndex,s>=0&&r(s)),p.p.frozenColumns===!0&&(l=p.p.id+"_frozen"),p.p.multiselect?(p.setHeadCheckBox(!1),p.p.selrow=o.id,n=$.inArray(p.p.selrow,p.p.selarrrow),-1===n?("ui-subgrid"!==o.className&&$(o).addClass("ui-state-highlight").attr("aria-selected","true"),a=!0,p.p.selarrrow.push(p.p.selrow)):("ui-subgrid"!==o.className&&$(o).removeClass("ui-state-highlight").attr("aria-selected","false"),a=!1,p.p.selarrrow.splice(n,1),d=p.p.selarrrow[0],p.p.selrow=void 0===d?null:d),$("#jqg_"+$.jgrid.jqID(p.p.id)+"_"+$.jgrid.jqID(o.id))[p.p.useProp?"prop":"attr"]("checked",a),l&&(-1===n?$("#"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(l)).addClass("ui-state-highlight"):$("#"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(l)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(p.p.id)+"_"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(l))[p.p.useProp?"prop":"attr"]("checked",a)),t&&($(p).triggerHandler("jqGridSelectRow",[o.id,a,i]),p.p.onSelectRow&&p.p.onSelectRow.call(p,o.id,a,i))):"ui-subgrid"!==o.className&&(p.p.selrow!==o.id?($($(p).jqGrid("getGridRowById",p.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),$(o).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),l&&($("#"+$.jgrid.jqID(p.p.selrow),"#"+$.jgrid.jqID(l)).removeClass("ui-state-highlight"),$("#"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(l)).addClass("ui-state-highlight")),a=!0):a=!1,p.p.selrow=o.id,t&&($(p).triggerHandler("jqGridSelectRow",[o.id,a,i]),p.p.onSelectRow&&p.p.onSelectRow.call(p,o.id,a,i)))))})},resetSelection:function(e){return this.each(function(){var t,i,r=this;r.p.frozenColumns===!0&&(i=r.p.id+"_frozen"),void 0!==e?(t=e===r.p.selrow?r.p.selrow:e,$("#"+$.jgrid.jqID(r.p.id)+" tbody:first tr#"+$.jgrid.jqID(t)).removeClass("ui-state-highlight").attr("aria-selected","false"),i&&$("#"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(i)).removeClass("ui-state-highlight"),r.p.multiselect&&($("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(r.p.id))[r.p.useProp?"prop":"attr"]("checked",!1),i&&$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(i))[r.p.useProp?"prop":"attr"]("checked",!1),r.setHeadCheckBox(!1)),t=null):r.p.multiselect?($(r.p.selarrrow).each(function(e,t){$($(r).jqGrid("getGridRowById",t)).removeClass("ui-state-highlight").attr("aria-selected","false"),$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(t))[r.p.useProp?"prop":"attr"]("checked",!1),i&&($("#"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(i)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(i))[r.p.useProp?"prop":"attr"]("checked",!1))}),r.setHeadCheckBox(!1),r.p.selarrrow=[],r.p.selrow=null):r.p.selrow&&($("#"+$.jgrid.jqID(r.p.id)+" tbody:first tr#"+$.jgrid.jqID(r.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),i&&$("#"+$.jgrid.jqID(r.p.selrow),"#"+$.jgrid.jqID(i)).removeClass("ui-state-highlight"),r.p.selrow=null),r.p.cellEdit===!0&&parseInt(r.p.iCol,10)>=0&&parseInt(r.p.iRow,10)>=0&&($("td:eq("+r.p.iCol+")",r.rows[r.p.iRow]).removeClass("edit-cell ui-state-highlight"),$(r.rows[r.p.iRow]).removeClass("selected-row ui-state-hover")),r.p.savedRow=[]})},getRowData:function(e){var t,i,r={},a=!1,o=0;return this.each(function(){var s,n,d=this;if(void 0===e)a=!0,t=[],i=d.rows.length;else{if(n=$(d).jqGrid("getGridRowById",e),!n)return r;i=2}for(;i>o;)a&&(n=d.rows[o]),$(n).hasClass("jqgrow")&&($('td[role="gridcell"]',n).each(function(e){if(s=d.p.colModel[e].name,"cb"!==s&&"subgrid"!==s&&"rn"!==s)if(d.p.treeGrid===!0&&s===d.p.ExpandColumn)r[s]=$.jgrid.htmlDecode($("span:first",this).html());else try{r[s]=$.unformat.call(d,this,{rowId:n.id,colModel:d.p.colModel[e]},e)}catch(t){r[s]=$.jgrid.htmlDecode($(this).html())}}),a&&(t.push(r),r={})),o++}),t||r},delRowData:function(e){var t,i,r=!1;return this.each(function(){var a=this;if(t=$(a).jqGrid("getGridRowById",e),!t)return!1;if($(t).remove(),a.p.records--,a.p.reccount--,a.updatepager(!0,!1),r=!0,a.p.multiselect&&(i=$.inArray(e,a.p.selarrrow),-1!==i&&a.p.selarrrow.splice(i,1)),a.p.selrow=a.p.multiselect&&a.p.selarrrow.length>0?a.p.selarrrow[a.p.selarrrow.length-1]:null,"local"===a.p.datatype){var o=$.jgrid.stripPref(a.p.idPrefix,e),s=a.p._index[o];void 0!==s&&(a.p.data.splice(s,1),a.refreshIndex())}if(a.p.altRows===!0&&r){var n=a.p.altclass;$(a.rows).each(function(e){e%2===1?$(this).addClass(n):$(this).removeClass(n)})}}),r},setRowData:function(e,t,i){var r,a,o=!0;return this.each(function(){if(!this.grid)return!1;var s,n,d=this,l=typeof i,p={};if(n=$(this).jqGrid("getGridRowById",e),!n)return!1;if(t)try{if($(this.p.colModel).each(function(i){r=this.name;var o=$.jgrid.getAccessor(t,r);void 0!==o&&(p[r]=this.formatter&&"string"==typeof this.formatter&&"date"===this.formatter?$.unformat.date.call(d,o,this):o,s=d.formatter(e,o,i,t,"edit"),a=this.title?{title:$.jgrid.stripHtml(s)}:{},d.p.treeGrid===!0&&r===d.p.ExpandColumn?$("td[role='gridcell']:eq("+i+") > span:first",n).html(s).attr(a):$("td[role='gridcell']:eq("+i+")",n).html(s).attr(a))}),"local"===d.p.datatype){var c,u=$.jgrid.stripPref(d.p.idPrefix,e),h=d.p._index[u];if(d.p.treeGrid)for(c in d.p.treeReader)d.p.treeReader.hasOwnProperty(c)&&delete p[d.p.treeReader[c]];void 0!==h&&(d.p.data[h]=$.extend(!0,d.p.data[h],p)),p=null}}catch(g){o=!1}o&&("string"===l?$(n).addClass(i):null!==i&&"object"===l&&$(n).css(i),$(d).triggerHandler("jqGridAfterGridComplete"))}),o},addRowData:function(e,t,i,r){i||(i="last");var a,o,s,n,d,l,p,c,u,h,g,f,m,v,j=!1,b="";return t&&($.isArray(t)?(u=!0,i="last",h=e):(t=[t],u=!1),this.each(function(){var w=this,y=t.length;d=w.p.rownumbers===!0?1:0,s=w.p.multiselect===!0?1:0,n=w.p.subGrid===!0?1:0,u||(void 0!==e?e=String(e):(e=$.jgrid.randId(),w.p.keyIndex!==!1&&(h=w.p.colModel[w.p.keyIndex+s+n+d].name,void 0!==t[0][h]&&(e=t[0][h])))),g=w.p.altclass;for(var x=0,q="",D={},_=$.isFunction(w.p.afterInsertRow)?!0:!1;y>x;){if(f=t[x],o=[],u){try{e=f[h],void 0===e&&(e=$.jgrid.randId())}catch(C){e=$.jgrid.randId()}q=w.p.altRows===!0?(w.rows.length-1)%2===0?g:"":""}for(v=e,e=w.p.idPrefix+e,d&&(b=w.formatCol(0,1,"",null,e,!0),o[o.length]='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+b+">0</td>"),s&&(c='<input role="checkbox" type="checkbox" id="jqg_'+w.p.id+"_"+e+'" class="cbox"/>',b=w.formatCol(d,1,"",null,e,!0),o[o.length]='<td role="gridcell" '+b+">"+c+"</td>"),n&&(o[o.length]=$(w).jqGrid("addSubGridCell",s+d,1)),p=s+n+d;p<w.p.colModel.length;p++)m=w.p.colModel[p],a=m.name,D[a]=f[a],c=w.formatter(e,$.jgrid.getAccessor(f,a),p,f),b=w.formatCol(p,1,c,f,e,D),o[o.length]='<td role="gridcell" '+b+">"+c+"</td>";if(o.unshift(w.constructTr(e,!1,q,D,f,!1)),o[o.length]="</tr>",0===w.rows.length)$("table:first",w.grid.bDiv).append(o.join(""));else switch(i){case"last":$(w.rows[w.rows.length-1]).after(o.join("")),l=w.rows.length-1;break;case"first":$(w.rows[0]).after(o.join("")),l=1;break;case"after":l=$(w).jqGrid("getGridRowById",r),l&&($(w.rows[l.rowIndex+1]).hasClass("ui-subgrid")?$(w.rows[l.rowIndex+1]).after(o):$(l).after(o.join("")),l=l.rowIndex+1);break;case"before":l=$(w).jqGrid("getGridRowById",r),l&&($(l).before(o.join("")),l=l.rowIndex-1)}w.p.subGrid===!0&&$(w).jqGrid("addSubGrid",s+d,l),w.p.records++,w.p.reccount++,$(w).triggerHandler("jqGridAfterInsertRow",[e,f,f]),_&&w.p.afterInsertRow.call(w,e,f,f),x++,"local"===w.p.datatype&&(D[w.p.localReader.id]=v,w.p._index[v]=w.p.data.length,w.p.data.push(D),D={})}w.p.altRows!==!0||u||("last"===i?(w.rows.length-1)%2===1&&$(w.rows[w.rows.length-1]).addClass(g):$(w.rows).each(function(e){e%2===1?$(this).addClass(g):$(this).removeClass(g)})),w.updatepager(!0,!0),j=!0})),j},footerData:function(e,t,i){function r(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}var a,o,s=!1,n={};return void 0==e&&(e="get"),"boolean"!=typeof i&&(i=!0),e=e.toLowerCase(),this.each(function(){var d,l=this;return l.grid&&l.p.footerrow?"set"===e&&r(t)?!1:(s=!0,void $(this.p.colModel).each(function(r){a=this.name,"set"===e?void 0!==t[a]&&(d=i?l.formatter("",t[a],r,t,"edit"):t[a],o=this.title?{title:$.jgrid.stripHtml(d)}:{},$("tr.footrow td:eq("+r+")",l.grid.sDiv).html(d).attr(o),s=!0):"get"===e&&(n[a]=$("tr.footrow td:eq("+r+")",l.grid.sDiv).html())})):!1}),"get"===e?n:s},showHideCol:function(e,t){return this.each(function(){var i,r=this,a=!1,o=$.jgrid.cell_width?0:r.p.cellLayout;if(r.grid){"string"==typeof e&&(e=[e]),t="none"!==t?"":"none";var s=""===t?!0:!1,n=r.p.groupHeader&&("object"==typeof r.p.groupHeader||$.isFunction(r.p.groupHeader));n&&$(r).jqGrid("destroyGroupHeader",!1),$(this.p.colModel).each(function(n){if(-1!==$.inArray(this.name,e)&&this.hidden===s){if(r.p.frozenColumns===!0&&this.frozen===!0)return!0;$("tr[role=rowheader]",r.grid.hDiv).each(function(){$(this.cells[n]).css("display",t)}),$(r.rows).each(function(){$(this).hasClass("jqgroup")||$(this.cells[n]).css("display",t)}),r.p.footerrow&&$("tr.footrow td:eq("+n+")",r.grid.sDiv).css("display",t),i=parseInt(this.width,10),"none"===t?r.p.tblwidth-=i+o:r.p.tblwidth+=i+o,this.hidden=!s,a=!0,$(r).triggerHandler("jqGridShowHideCol",[s,this.name,n])}}),a===!0&&(r.p.shrinkToFit!==!0||isNaN(r.p.height)||(r.p.tblwidth+=parseInt(r.p.scrollOffset,10)),$(r).jqGrid("setGridWidth",r.p.shrinkToFit===!0?r.p.tblwidth:r.p.width)),n&&$(r).jqGrid("setGroupHeaders",r.p.groupHeader)}})},hideCol:function(e){return this.each(function(){$(this).jqGrid("showHideCol",e,"none")})},showCol:function(e){return this.each(function(){$(this).jqGrid("showHideCol",e,"")})},remapColumns:function(e,t,i){function r(t){var i;i=t.length?$.makeArray(t):$.extend({},t),$.each(e,function(e){t[e]=i[this]})}function a(t,i){$(">tr"+(i||""),t).each(function(){var t=this,i=$.makeArray(t.cells);$.each(e,function(){var e=i[this];e&&t.appendChild(e)})})}var o=this.get(0);r(o.p.colModel),r(o.p.colNames),r(o.grid.headers),a($("thead:first",o.grid.hDiv),i&&":not(.ui-jqgrid-labels)"),t&&a($("#"+$.jgrid.jqID(o.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot"),o.p.footerrow&&a($("tbody:first",o.grid.sDiv)),o.p.remapColumns&&(o.p.remapColumns.length?r(o.p.remapColumns):o.p.remapColumns=$.makeArray(e)),o.p.lastsort=$.inArray(o.p.lastsort,e),o.p.treeGrid&&(o.p.expColInd=$.inArray(o.p.expColInd,e)),$(o).triggerHandler("jqGridRemapColumns",[e,t,i])},setGridWidth:function(e,t){return this.each(function(){if(this.grid){var i,r,a,o,s=this,n=0,d=$.jgrid.cell_width?0:s.p.cellLayout,l=0,p=!1,c=s.p.scrollOffset,u=0;if("boolean"!=typeof t&&(t=s.p.shrinkToFit),!isNaN(e)){if(e=parseInt(e,10),s.grid.width=s.p.width=e,$("#gbox_"+$.jgrid.jqID(s.p.id)).css("width",e+"px"),$("#gview_"+$.jgrid.jqID(s.p.id)).css("width",e+"px"),$(s.grid.bDiv).css("width",e+"px"),$(s.grid.hDiv).css("width",e+"px"),s.p.pager&&$(s.p.pager).css("width",e+"px"),s.p.toppager&&$(s.p.toppager).css("width",e+"px"),s.p.toolbar[0]===!0&&($(s.grid.uDiv).css("width",e+"px"),"both"===s.p.toolbar[1]&&$(s.grid.ubDiv).css("width",e+"px")),s.p.footerrow&&$(s.grid.sDiv).css("width",e+"px"),t===!1&&s.p.forceFit===!0&&(s.p.forceFit=!1),t===!0){if($.each(s.p.colModel,function(){this.hidden===!1&&(i=this.widthOrg,n+=i+d,this.fixed?u+=i+d:l++)}),0===l)return;s.p.tblwidth=n,a=e-d*l-u,isNaN(s.p.height)||($(s.grid.bDiv)[0].clientHeight<$(s.grid.bDiv)[0].scrollHeight||1===s.rows.length)&&(p=!0,a-=c),n=0;var h=s.grid.cols.length>0;if($.each(s.p.colModel,function(e){if(this.hidden===!1&&!this.fixed){if(i=this.widthOrg,i=Math.round(a*i/(s.p.tblwidth-d*l-u)),0>i)return;this.width=i,n+=i,s.grid.headers[e].width=i,s.grid.headers[e].el.style.width=i+"px",s.p.footerrow&&(s.grid.footers[e].style.width=i+"px"),h&&(s.grid.cols[e].style.width=i+"px"),r=e}}),!r)return;if(o=0,p?e-u-(n+d*l)!==c&&(o=e-u-(n+d*l)-c):1!==Math.abs(e-u-(n+d*l))&&(o=e-u-(n+d*l)),s.p.colModel[r].width+=o,s.p.tblwidth=n+o+d*l+u,s.p.tblwidth>e){var g=s.p.tblwidth-parseInt(e,10);s.p.tblwidth=e,i=s.p.colModel[r].width=s.p.colModel[r].width-g}else i=s.p.colModel[r].width;s.grid.headers[r].width=i,s.grid.headers[r].el.style.width=i+"px",h&&(s.grid.cols[r].style.width=i+"px"),s.p.footerrow&&(s.grid.footers[r].style.width=i+"px")}s.p.tblwidth&&($("table:first",s.grid.bDiv).css("width",s.p.tblwidth+"px"),$("table:first",s.grid.hDiv).css("width",s.p.tblwidth+"px"),s.grid.hDiv.scrollLeft=s.grid.bDiv.scrollLeft,s.p.footerrow&&$("table:first",s.grid.sDiv).css("width",s.p.tblwidth+"px"))}}})},setGridHeight:function(e){return this.each(function(){var t=this;if(t.grid){var i=$(t.grid.bDiv);i.css({height:e+(isNaN(e)?"":"px")}),t.p.frozenColumns===!0&&$("#"+$.jgrid.jqID(t.p.id)+"_frozen").parent().height(i.height()-16),t.p.height=e,t.p.scroll&&t.grid.populateVisible()}})},setCaption:function(e){return this.each(function(){this.p.caption=e,$("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(e),$(this.grid.cDiv).show()})},setLabel:function(e,t,i,r){return this.each(function(){var a=this,o=-1;if(a.grid&&void 0!==e&&($(a.p.colModel).each(function(t){return this.name===e?(o=t,!1):void 0}),o>=0)){var s=$("tr.ui-jqgrid-labels th:eq("+o+")",a.grid.hDiv);if(t){var n=$(".s-ico",s);$("[id^=jqgh_]",s).empty().html(t).append(n),a.p.colNames[o]=t}i&&("string"==typeof i?$(s).addClass(i):$(s).css(i)),"object"==typeof r&&$(s).attr(r)}})},setCell:function(e,t,i,r,a,o){return this.each(function(){var s,n,d=this,l=-1;if(d.grid&&(isNaN(t)?$(d.p.colModel).each(function(e){return this.name===t?(l=e,!1):void 0}):l=parseInt(t,10),l>=0)){var p=$(d).jqGrid("getGridRowById",e);if(p){var c=$("td:eq("+l+")",p);if((""!==i||o===!0)&&(s=d.formatter(e,i,l,p,"edit"),n=d.p.colModel[l].title?{title:$.jgrid.stripHtml(s)}:{},d.p.treeGrid&&$(".tree-wrap",$(c)).length>0?$("span",$(c)).html(s).attr(n):$(c).html(s).attr(n),"local"===d.p.datatype)){var u,h=d.p.colModel[l];i=h.formatter&&"string"==typeof h.formatter&&"date"===h.formatter?$.unformat.date.call(d,i,h):i,u=d.p._index[$.jgrid.stripPref(d.p.idPrefix,e)],void 0!==u&&(d.p.data[u][h.name]=i)}"string"==typeof r?$(c).addClass(r):r&&$(c).css(r),"object"==typeof a&&$(c).attr(a)}}})},getCell:function(e,t){var i=!1;return this.each(function(){var r=this,a=-1;if(r.grid&&(isNaN(t)?$(r.p.colModel).each(function(e){return this.name===t?(a=e,!1):void 0}):a=parseInt(t,10),a>=0)){var o=$(r).jqGrid("getGridRowById",e);if(o)try{i=$.unformat.call(r,$("td:eq("+a+")",o),{rowId:o.id,colModel:r.p.colModel[a]},a)}catch(s){i=$.jgrid.htmlDecode($("td:eq("+a+")",o).html())}}}),i},getCol:function(e,t,i){var r,a,o,s,n=[],d=0;return t="boolean"!=typeof t?!1:t,void 0===i&&(i=!1),this.each(function(){var l=this,p=-1;if(l.grid&&(isNaN(e)?$(l.p.colModel).each(function(t){return this.name===e?(p=t,!1):void 0}):p=parseInt(e,10),p>=0)){var c=l.rows.length,u=0,h=0;if(c&&c>0){for(;c>u;){if($(l.rows[u]).hasClass("jqgrow")){try{r=$.unformat.call(l,$(l.rows[u].cells[p]),{rowId:l.rows[u].id,colModel:l.p.colModel[p]},p)}catch(g){r=$.jgrid.htmlDecode(l.rows[u].cells[p].innerHTML)}i?(s=parseFloat(r),isNaN(s)||(d+=s,void 0===o&&(o=a=s),a=Math.min(a,s),o=Math.max(o,s),h++)):n.push(t?{id:l.rows[u].id,value:r}:r)}u++}if(i)switch(i.toLowerCase()){case"sum":n=d;break;case"avg":n=d/h;break;case"count":n=c-1;break;case"min":n=a;break;case"max":n=o}}}}),n},clearGridData:function(e){return this.each(function(){var t=this;if(t.grid){if("boolean"!=typeof e&&(e=!1),t.p.deepempty)$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr:gt(0)").remove();else{var i=$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr:first")[0];$("#"+$.jgrid.jqID(t.p.id)+" tbody:first").empty().append(i)}t.p.footerrow&&e&&$(".ui-jqgrid-ftable td",t.grid.sDiv).html("&#160;"),t.p.selrow=null,t.p.selarrrow=[],t.p.savedRow=[],t.p.records=0,t.p.page=1,t.p.lastpage=0,t.p.reccount=0,t.p.data=[],t.p._index={},t.updatepager(!0,!1)}})},getInd:function(e,t){var i,r=!1;return this.each(function(){i=$(this).jqGrid("getGridRowById",e),i&&(r=t===!0?i:i.rowIndex)}),r},bindKeys:function(e){var t=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},e||{});return this.each(function(){var e=this;$("body").is("[role]")||$("body").attr("role","application"),e.p.scrollrows=t.scrollingRows,$(e).keydown(function(i){var r,a,o,s=$(e).find("tr[tabindex=0]")[0],n=e.p.treeReader.expanded_field;if(s)if(o=e.p._index[$.jgrid.stripPref(e.p.idPrefix,s.id)],37===i.keyCode||38===i.keyCode||39===i.keyCode||40===i.keyCode){if(38===i.keyCode){if(a=s.previousSibling,r="",a)if($(a).is(":hidden")){for(;a;)if(a=a.previousSibling,!$(a).is(":hidden")&&$(a).hasClass("jqgrow")){r=a.id;break}}else r=a.id;$(e).jqGrid("setSelection",r,!0,i),i.preventDefault()}if(40===i.keyCode){if(a=s.nextSibling,r="",a)if($(a).is(":hidden")){for(;a;)if(a=a.nextSibling,!$(a).is(":hidden")&&$(a).hasClass("jqgrow")){r=a.id;break}}else r=a.id;$(e).jqGrid("setSelection",r,!0,i),i.preventDefault()}37===i.keyCode&&(e.p.treeGrid&&e.p.data[o][n]&&$(s).find("div.treeclick").trigger("click"),$(e).triggerHandler("jqGridKeyLeft",[e.p.selrow]),$.isFunction(t.onLeftKey)&&t.onLeftKey.call(e,e.p.selrow)),39===i.keyCode&&(e.p.treeGrid&&!e.p.data[o][n]&&$(s).find("div.treeclick").trigger("click"),$(e).triggerHandler("jqGridKeyRight",[e.p.selrow]),$.isFunction(t.onRightKey)&&t.onRightKey.call(e,e.p.selrow))}else 13===i.keyCode?($(e).triggerHandler("jqGridKeyEnter",[e.p.selrow]),$.isFunction(t.onEnter)&&t.onEnter.call(e,e.p.selrow)):32===i.keyCode&&($(e).triggerHandler("jqGridKeySpace",[e.p.selrow]),$.isFunction(t.onSpace)&&t.onSpace.call(e,e.p.selrow))})})},unbindKeys:function(){return this.each(function(){$(this).unbind("keydown")})},getLocalRow:function(e){var t,i=!1;return this.each(function(){void 0!==e&&(t=this.p._index[$.jgrid.stripPref(this.p.idPrefix,e)],t>=0&&(i=this.p.data[t]))}),i}})}(jQuery),function(e){"use strict";e.jgrid.extend({getColProp:function(e){var t={},i=this[0];if(!i.grid)return!1;var r,a=i.p.colModel;for(r=0;r<a.length;r++)if(a[r].name===e){t=a[r];break}return t},setColProp:function(t,i){return this.each(function(){if(this.grid&&i){var r,a=this.p.colModel;for(r=0;r<a.length;r++)if(a[r].name===t){e.extend(!0,this.p.colModel[r],i);break}}})},sortGrid:function(e,t,i){return this.each(function(){var r,a=this,o=-1,s=!1;if(a.grid){for(e||(e=a.p.sortname),r=0;r<a.p.colModel.length;r++)if(a.p.colModel[r].index===e||a.p.colModel[r].name===e){o=r,a.p.frozenColumns===!0&&a.p.colModel[r].frozen===!0&&(s=a.grid.fhDiv.find("#"+a.p.id+"_"+e));break}if(-1!==o){var n=a.p.colModel[o].sortable;s||(s=a.grid.headers[o].el),"boolean"!=typeof n&&(n=!0),"boolean"!=typeof t&&(t=!1),n&&a.sortData("jqgh_"+a.p.id+"_"+e,o,t,i,s)}}})},clearBeforeUnload:function(){return this.each(function(){var t=this.grid;e.isFunction(t.emptyRows)&&t.emptyRows.call(this,!0,!0),e(document).unbind("mouseup.jqGrid"+this.p.id),e(t.hDiv).unbind("mousemove"),e(this).unbind(),t.dragEnd=null,t.dragMove=null,t.dragStart=null,t.emptyRows=null,t.populate=null,t.populateVisible=null,t.scrollGrid=null,t.selectionPreserver=null,t.bDiv=null,t.cDiv=null,t.hDiv=null,t.cols=null;var i,r=t.headers.length;for(i=0;r>i;i++)t.headers[i].el=null;this.formatCol=null,this.sortData=null,this.updatepager=null,this.refreshIndex=null,this.setHeadCheckBox=null,this.constructTr=null,this.formatter=null,this.addXmlData=null,this.addJSONData=null,this.grid=null})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&e(this.p.pager).remove();try{e(this).jqGrid("clearBeforeUnload"),e("#gbox_"+e.jgrid.jqID(this.id)).remove()}catch(t){}}})},GridUnload:function(){return this.each(function(){if(this.grid){var t={id:e(this).attr("id"),cl:e(this).attr("class")};this.p.pager&&e(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom");var i=document.createElement("table");e(i).attr({id:t.id}),i.className=t.cl;var r=e.jgrid.jqID(this.id);e(i).removeClass("ui-jqgrid-btable"),1===e(this.p.pager).parents("#gbox_"+r).length?(e(i).insertBefore("#gbox_"+r).show(),e(this.p.pager).insertBefore("#gbox_"+r)):e(i).insertBefore("#gbox_"+r).show(),e(this).jqGrid("clearBeforeUnload"),e("#gbox_"+r).remove()}})},setGridState:function(t){return this.each(function(){if(this.grid){var i=this;"hidden"===t?(e(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+e.jgrid.jqID(i.p.id)).slideUp("fast"),i.p.pager&&e(i.p.pager).slideUp("fast"),i.p.toppager&&e(i.p.toppager).slideUp("fast"),i.p.toolbar[0]===!0&&("both"===i.p.toolbar[1]&&e(i.grid.ubDiv).slideUp("fast"),e(i.grid.uDiv).slideUp("fast")),i.p.footerrow&&e(".ui-jqgrid-sdiv","#gbox_"+e.jgrid.jqID(i.p.id)).slideUp("fast"),e(".ui-jqgrid-titlebar-close span",i.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),i.p.gridstate="hidden"):"visible"===t&&(e(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+e.jgrid.jqID(i.p.id)).slideDown("fast"),i.p.pager&&e(i.p.pager).slideDown("fast"),i.p.toppager&&e(i.p.toppager).slideDown("fast"),i.p.toolbar[0]===!0&&("both"===i.p.toolbar[1]&&e(i.grid.ubDiv).slideDown("fast"),e(i.grid.uDiv).slideDown("fast")),i.p.footerrow&&e(".ui-jqgrid-sdiv","#gbox_"+e.jgrid.jqID(i.p.id)).slideDown("fast"),e(".ui-jqgrid-titlebar-close span",i.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),i.p.gridstate="visible")}})},filterToolbar:function(t){return t=e.extend({autosearch:!0,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,resetIcon:"x",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},e.jgrid.search,t||{}),this.each(function(){var i=this;if(!this.ftoolbar){var r,a=function(){var r,a,o,s={},n=0,d={};e.each(i.p.colModel,function(){var l=e("#gs_"+e.jgrid.jqID(this.name),this.frozen===!0&&i.p.frozenColumns===!0?i.grid.fhDiv:i.grid.hDiv);if(a=this.index||this.name,o=t.searchOperators?l.parent().prev().children("a").attr("soper")||t.defaultSearch:this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"select"===this.stype?"eq":t.defaultSearch,r="custom"===this.stype&&e.isFunction(this.searchoptions.custom_value)&&l.length>0&&"SPAN"===l[0].nodeName.toUpperCase()?this.searchoptions.custom_value.call(i,l.children(".customelement:first"),"get"):l.val(),r||"nu"===o||"nn"===o)s[a]=r,d[a]=o,n++;else try{delete i.p.postData[a]}catch(p){}});var l=n>0?!0:!1;if(t.stringResult===!0||"local"===i.p.datatype){var p='{"groupOp":"'+t.groupOp+'","rules":[',c=0;e.each(s,function(e,t){c>0&&(p+=","),p+='{"field":"'+e+'",',p+='"op":"'+d[e]+'",',t+="",p+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',c++}),p+="]}",e.extend(i.p.postData,{filters:p}),e.each(["searchField","searchString","searchOper"],function(e,t){i.p.postData.hasOwnProperty(t)&&delete i.p.postData[t]})}else e.extend(i.p.postData,s);var u;i.p.searchurl&&(u=i.p.url,e(i).jqGrid("setGridParam",{url:i.p.searchurl}));var h="stop"===e(i).triggerHandler("jqGridToolbarBeforeSearch")?!0:!1;!h&&e.isFunction(t.beforeSearch)&&(h=t.beforeSearch.call(i)),h||e(i).jqGrid("setGridParam",{search:l}).trigger("reloadGrid",[{page:1}]),u&&e(i).jqGrid("setGridParam",{url:u}),e(i).triggerHandler("jqGridToolbarAfterSearch"),e.isFunction(t.afterSearch)&&t.afterSearch.call(i)},o=function(r){var a,o={},s=0;r="boolean"!=typeof r?!0:r,e.each(i.p.colModel,function(){var t,r=e("#gs_"+e.jgrid.jqID(this.name),this.frozen===!0&&i.p.frozenColumns===!0?i.grid.fhDiv:i.grid.hDiv);switch(this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(t=this.searchoptions.defaultValue),a=this.index||this.name,this.stype){case"select":if(r.find("option").each(function(i){return 0===i&&(this.selected=!0),e(this).val()===t?(this.selected=!0,!1):void 0}),void 0!==t)o[a]=t,s++;else try{delete i.p.postData[a]}catch(n){}break;case"text":if(r.val(t||""),void 0!==t)o[a]=t,s++;else try{delete i.p.postData[a]}catch(d){}break;case"custom":e.isFunction(this.searchoptions.custom_value)&&r.length>0&&"SPAN"===r[0].nodeName.toUpperCase()&&this.searchoptions.custom_value.call(i,r.children(".customelement:first"),"set",t||"")}});var n=s>0?!0:!1;if(i.p.resetsearch=!0,t.stringResult===!0||"local"===i.p.datatype){var d='{"groupOp":"'+t.groupOp+'","rules":[',l=0;e.each(o,function(e,t){l>0&&(d+=","),d+='{"field":"'+e+'",',d+='"op":"eq",',t+="",d+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',l++}),d+="]}",e.extend(i.p.postData,{filters:d}),e.each(["searchField","searchString","searchOper"],function(e,t){i.p.postData.hasOwnProperty(t)&&delete i.p.postData[t]})}else e.extend(i.p.postData,o);var p;i.p.searchurl&&(p=i.p.url,e(i).jqGrid("setGridParam",{url:i.p.searchurl}));var c="stop"===e(i).triggerHandler("jqGridToolbarBeforeClear")?!0:!1;!c&&e.isFunction(t.beforeClear)&&(c=t.beforeClear.call(i)),c||r&&e(i).jqGrid("setGridParam",{search:n}).trigger("reloadGrid",[{page:1}]),p&&e(i).jqGrid("setGridParam",{url:p}),e(i).triggerHandler("jqGridToolbarAfterClear"),e.isFunction(t.afterClear)&&t.afterClear()},s=function(){var t=e("tr.ui-search-toolbar",i.grid.hDiv),r=i.p.frozenColumns===!0?e("tr.ui-search-toolbar",i.grid.fhDiv):!1;"none"===t.css("display")?(t.show(),r&&r.show()):(t.hide(),r&&r.hide())},n=function(r,o,s){e("#sopt_menu").remove(),o=parseInt(o,10),s=parseInt(s,10)+18;for(var n,d,l=e(".ui-jqgrid-view").css("font-size")||"11px",p='<ul id="sopt_menu" class="ui-search-menu" role="menu" tabindex="0" style="font-size:'+l+";left:"+o+"px;top:"+s+'px;">',c=e(r).attr("soper"),u=[],h=0,g=e(r).attr("colname"),f=i.p.colModel.length;f>h&&i.p.colModel[h].name!==g;)h++;var m=i.p.colModel[h],v=e.extend({},m.searchoptions);for(v.sopt||(v.sopt=[],v.sopt[0]="select"===m.stype?"eq":t.defaultSearch),e.each(t.odata,function(){u.push(this.oper)}),h=0;h<v.sopt.length;h++)d=e.inArray(v.sopt[h],u),-1!==d&&(n=c===t.odata[d].oper?"ui-state-highlight":"",p+='<li class="ui-menu-item '+n+'" role="presentation"><a class="ui-corner-all g-menu-item" tabindex="0" role="menuitem" value="'+t.odata[d].oper+'" oper="'+t.operands[t.odata[d].oper]+'"><table cellspacing="0" cellpadding="0" border="0"><tr><td width="25px">'+t.operands[t.odata[d].oper]+"</td><td>"+t.odata[d].text+"</td></tr></table></a></li>");p+="</ul>",e("body").append(p),e("#sopt_menu").addClass("ui-menu ui-widget ui-widget-content ui-corner-all"),e("#sopt_menu > li > a").hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).click(function(){var o=e(this).attr("value"),s=e(this).attr("oper");if(e(i).triggerHandler("jqGridToolbarSelectOper",[o,s,r]),e("#sopt_menu").hide(),e(r).text(s).attr("soper",o),t.autosearch===!0){var n=e(r).parent().next().children()[0];(e(n).val()||"nu"===o||"nn"===o)&&a()}})},d=e("<tr class='ui-search-toolbar' role='rowheader'></tr>");e.each(i.p.colModel,function(o){var s,n,l,p,c,u=this,h="",g="=",f=e("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+i.p.direction+"'></th>"),m=e("<div style='position:relative;height:100%;padding-right:0.3em;padding-left:0.3em;'></div>"),v=e("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td><td class='ui-search-clear'></td></tr></table>");if(this.hidden===!0&&e(f).css("display","none"),this.search=this.search===!1?!1:!0,void 0===this.stype&&(this.stype="text"),s=e.extend({},this.searchoptions||{}),this.search){if(t.searchOperators){for(p=s.sopt?s.sopt[0]:"select"===u.stype?"eq":t.defaultSearch,c=0;c<t.odata.length;c++)if(t.odata[c].oper===p){g=t.operands[p]||"";break}var j=null!=s.searchtitle?s.searchtitle:t.operandTitle;h="<a title='"+j+"' style='padding-right: 0.5em;' soper='"+p+"' class='soptclass' colname='"+this.name+"'>"+g+"</a>"}if(e("td:eq(0)",v).attr("colindex",o).append(h),void 0===s.clearSearch&&(s.clearSearch=!0),s.clearSearch){var b=t.resetTitle||"Clear Search Value";e("td:eq(2)",v).append("<a title='"+b+"' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>"+t.resetIcon+"</a>")}else e("td:eq(2)",v).hide();switch(this.stype){case"select":if(n=this.surl||s.dataUrl)l=m,e(l).append(v),e.ajax(e.extend({url:n,dataType:"html",success:function(r){if(void 0!==s.buildSelect){var o=s.buildSelect(r);o&&e("td:eq(1)",v).append(o)}else e("td:eq(1)",v).append(r);void 0!==s.defaultValue&&e("select",l).val(s.defaultValue),e("select",l).attr({name:u.index||u.name,id:"gs_"+u.name}),s.attr&&e("select",l).attr(s.attr),e("select",l).css({width:"100%"}),e.jgrid.bindEv.call(i,e("select",l)[0],s),t.autosearch===!0&&e("select",l).change(function(){return a(),!1}),r=null}},e.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{}));else{var w,y,x;if(u.searchoptions?(w=void 0===u.searchoptions.value?"":u.searchoptions.value,y=void 0===u.searchoptions.separator?":":u.searchoptions.separator,x=void 0===u.searchoptions.delimiter?";":u.searchoptions.delimiter):u.editoptions&&(w=void 0===u.editoptions.value?"":u.editoptions.value,y=void 0===u.editoptions.separator?":":u.editoptions.separator,x=void 0===u.editoptions.delimiter?";":u.editoptions.delimiter),w){var q=document.createElement("select");
q.style.width="100%",e(q).attr({name:u.index||u.name,id:"gs_"+u.name});var D,_,$,C;if("string"==typeof w)for(p=w.split(x),C=0;C<p.length;C++)D=p[C].split(y),_=document.createElement("option"),_.value=D[0],_.innerHTML=D[1],q.appendChild(_);else if("object"==typeof w)for($ in w)w.hasOwnProperty($)&&(_=document.createElement("option"),_.value=$,_.innerHTML=w[$],q.appendChild(_));void 0!==s.defaultValue&&e(q).val(s.defaultValue),s.attr&&e(q).attr(s.attr),e(m).append(v),e.jgrid.bindEv.call(i,q,s),e("td:eq(1)",v).append(q),t.autosearch===!0&&e(q).change(function(){return a(),!1})}}break;case"text":var G=void 0!==s.defaultValue?s.defaultValue:"";e("td:eq(1)",v).append("<input type='text' style='width:100%;padding:0px;' name='"+(u.index||u.name)+"' id='gs_"+u.name+"' value='"+G+"'/>"),e(m).append(v),s.attr&&e("input",m).attr(s.attr),e.jgrid.bindEv.call(i,e("input",m)[0],s),t.autosearch===!0&&(t.searchOnEnter?e("input",m).keypress(function(e){var t=e.charCode||e.keyCode||0;return 13===t?(a(),!1):this}):e("input",m).keydown(function(e){var t=e.which;switch(t){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:r&&clearTimeout(r),r=setTimeout(function(){a()},500)}}));break;case"custom":e("td:eq(1)",v).append("<span style='width:95%;padding:0px;' name='"+(u.index||u.name)+"' id='gs_"+u.name+"'/>"),e(m).append(v);try{if(!e.isFunction(s.custom_element))throw"e1";var I=s.custom_element.call(i,void 0!==s.defaultValue?s.defaultValue:"",s);if(!I)throw"e2";I=e(I).addClass("customelement"),e(m).find(">span").append(I)}catch(F){"e1"===F&&e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_element' "+e.jgrid.edit.msg.nodefined,e.jgrid.edit.bClose),"e2"===F?e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_element' "+e.jgrid.edit.msg.novalue,e.jgrid.edit.bClose):e.jgrid.info_dialog(e.jgrid.errors.errcap,"string"==typeof F?F:F.message,e.jgrid.edit.bClose)}}}e(f).append(m),e(d).append(f),t.searchOperators||e("td:eq(0)",v).hide()}),e("table thead",i.grid.hDiv).append(d),t.searchOperators&&(e(".soptclass",d).click(function(t){var i=e(this).offset(),r=i.left,a=i.top;n(this,r,a),t.stopPropagation()}),e("body").on("click",function(t){"soptclass"!==t.target.className&&e("#sopt_menu").hide()})),e(".clearsearchclass",d).click(function(){var r=e(this).parents("tr:first"),o=parseInt(e("td.ui-search-oper",r).attr("colindex"),10),s=e.extend({},i.p.colModel[o].searchoptions||{}),n=s.defaultValue?s.defaultValue:"";"select"===i.p.colModel[o].stype?n?e("td.ui-search-input select",r).val(n):e("td.ui-search-input select",r)[0].selectedIndex=0:e("td.ui-search-input input",r).val(n),t.autosearch===!0&&a()}),this.ftoolbar=!0,this.triggerToolbar=a,this.clearToolbar=o,this.toggleToolbar=s}})},destroyFilterToolbar:function(){return this.each(function(){this.ftoolbar&&(this.triggerToolbar=null,this.clearToolbar=null,this.toggleToolbar=null,this.ftoolbar=!1,e(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},destroyGroupHeader:function(t){return void 0===t&&(t=!0),this.each(function(){var i,r,a,o,s,n,d,l=this,p=l.grid,c=e("table.ui-jqgrid-htable thead",p.hDiv),u=l.p.colModel;if(p){for(e(this).unbind(".setGroupHeaders"),i=e("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels"),o=p.headers,r=0,a=o.length;a>r;r++){d=u[r].hidden?"none":"",s=e(o[r].el).width(o[r].width).css("display",d);try{s.removeAttr("rowSpan")}catch(h){s.attr("rowSpan",1)}i.append(s),n=s.children("span.ui-jqgrid-resize"),n.length>0&&(n[0].style.height=""),s.children("div")[0].style.top=""}e(c).children("tr.ui-jqgrid-labels").remove(),e(c).prepend(i),t===!0&&e(l).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(t){return t=e.extend({useColSpanStyle:!1,groupHeaders:[]},t||{}),this.each(function(){this.p.groupHeader=t;var i,r,a,o,s,n,d,l,p,c,u,h,g,f=this,m=0,v=f.p.colModel,j=v.length,b=f.grid.headers,w=e("table.ui-jqgrid-htable",f.grid.hDiv),y=w.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),x=w.children("thead"),q=w.find(".jqg-first-row-header");void 0===q[0]?q=e("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):q.empty();var D,_=function(e,t){var i,r=t.length;for(i=0;r>i;i++)if(t[i].startColumnName===e)return i;return-1};for(e(f).prepend(x),a=e("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels jqg-third-row-header"),i=0;j>i;i++)if(s=b[i].el,n=e(s),r=v[i],d={height:"0px",width:b[i].width+"px",display:r.hidden?"none":""},e("<th>",{role:"gridcell"}).css(d).addClass("ui-first-th-"+f.p.direction).appendTo(q),s.style.width="",l=_(r.name,t.groupHeaders),l>=0){for(p=t.groupHeaders[l],c=p.numberOfColumns,u=p.titleText,h=0,l=0;c>l&&j>i+l;l++)v[i+l].hidden||h++;o=e("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+f.p.direction).css({height:"22px","border-top":"0 none"}).html(u),h>0&&o.attr("colspan",String(h)),f.p.headertitles&&o.attr("title",o.text()),0===h&&o.hide(),n.before(o),a.append(s),m=c-1}else 0===m?t.useColSpanStyle?n.attr("rowspan","2"):(e("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+f.p.direction).css({display:r.hidden?"none":"","border-top":"0 none"}).insertBefore(n),a.append(s)):(a.append(s),m--);g=e(f).children("thead"),g.prepend(q),a.insertAfter(y),w.append(g),t.useColSpanStyle&&(w.find("span.ui-jqgrid-resize").each(function(){var t=e(this).parent();t.is(":visible")&&(this.style.cssText="height: "+t.height()+"px !important; cursor: col-resize;")}),w.find("div.ui-jqgrid-sortable").each(function(){var t=e(this),i=t.parent();i.is(":visible")&&i.is(":has(span.ui-jqgrid-resize)")&&t.css("top",(i.height()-t.outerHeight())/2+"px")})),D=g.find("tr.jqg-first-row-header"),e(f).bind("jqGridResizeStop.setGroupHeaders",function(e,t,i){D.find("th").eq(i).width(t)})})},setFrozenColumns:function(){return this.each(function(){if(this.grid){var t=this,i=t.p.colModel,r=0,a=i.length,o=-1,s=!1;if(t.p.subGrid!==!0&&t.p.treeGrid!==!0&&t.p.cellEdit!==!0&&!t.p.sortable&&!t.p.scroll){for(t.p.rownumbers&&r++,t.p.multiselect&&r++;a>r&&i[r].frozen===!0;)s=!0,o=r,r++;if(o>=0&&s){var n=t.p.caption?e(t.grid.cDiv).outerHeight():0,d=e(".ui-jqgrid-htable","#gview_"+e.jgrid.jqID(t.p.id)).height();t.p.toppager&&(n+=e(t.grid.topDiv).outerHeight()),t.p.toolbar[0]===!0&&"bottom"!==t.p.toolbar[1]&&(n+=e(t.grid.uDiv).outerHeight()),t.grid.fhDiv=e('<div style="position:absolute;left:0px;top:'+n+"px;height:"+d+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>'),t.grid.fbDiv=e('<div style="position:absolute;left:0px;top:'+(parseInt(n,10)+parseInt(d,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>'),e("#gview_"+e.jgrid.jqID(t.p.id)).append(t.grid.fhDiv);var l=e(".ui-jqgrid-htable","#gview_"+e.jgrid.jqID(t.p.id)).clone(!0);if(t.p.groupHeader){e("tr.jqg-first-row-header, tr.jqg-third-row-header",l).each(function(){e("th:gt("+o+")",this).remove()});var p,c,u=-1,h=-1;e("tr.jqg-second-row-header th",l).each(function(){return p=parseInt(e(this).attr("colspan"),10),c=parseInt(e(this).attr("rowspan"),10),c&&(u++,h++),p&&(u+=p,h++),u===o?!1:void 0}),u!==o&&(h=o),e("tr.jqg-second-row-header",l).each(function(){e("th:gt("+h+")",this).remove()})}else e("tr",l).each(function(){e("th:gt("+o+")",this).remove()});e(l).width(1),e(t.grid.fhDiv).append(l).mousemove(function(e){return t.grid.resizing?(t.grid.dragMove(e),!1):void 0}),e(t).bind("jqGridResizeStop.setFrozenColumns",function(i,r,a){var o=e(".ui-jqgrid-htable",t.grid.fhDiv);e("th:eq("+a+")",o).width(r);var s=e(".ui-jqgrid-btable",t.grid.fbDiv);e("tr:first td:eq("+a+")",s).width(r)}),e(t).bind("jqGridSortCol.setFrozenColumns",function(i,r,a){var o=e("tr.ui-jqgrid-labels:last th:eq("+t.p.lastsort+")",t.grid.fhDiv),s=e("tr.ui-jqgrid-labels:last th:eq("+a+")",t.grid.fhDiv);e("span.ui-grid-ico-sort",o).addClass("ui-state-disabled"),e(o).attr("aria-selected","false"),e("span.ui-icon-"+t.p.sortorder,s).removeClass("ui-state-disabled"),e(s).attr("aria-selected","true"),t.p.viewsortcols[0]||t.p.lastsort!==a&&(e("span.s-ico",o).hide(),e("span.s-ico",s).show())}),e("#gview_"+e.jgrid.jqID(t.p.id)).append(t.grid.fbDiv),e(t.grid.bDiv).scroll(function(){e(t.grid.fbDiv).scrollTop(e(this).scrollTop())}),t.p.hoverrows===!0&&e("#"+e.jgrid.jqID(t.p.id)).unbind("mouseover").unbind("mouseout"),e(t).bind("jqGridAfterGridComplete.setFrozenColumns",function(){e("#"+e.jgrid.jqID(t.p.id)+"_frozen").remove(),e(t.grid.fbDiv).height(e(t.grid.bDiv).height()-16);var i=e("#"+e.jgrid.jqID(t.p.id)).clone(!0);e("tr[role=row]",i).each(function(){e("td[role=gridcell]:gt("+o+")",this).remove()}),e(i).width(1).attr("id",t.p.id+"_frozen"),e(t.grid.fbDiv).append(i),t.p.hoverrows===!0&&(e("tr.jqgrow",i).hover(function(){e(this).addClass("ui-state-hover"),e("#"+e.jgrid.jqID(this.id),"#"+e.jgrid.jqID(t.p.id)).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover"),e("#"+e.jgrid.jqID(this.id),"#"+e.jgrid.jqID(t.p.id)).removeClass("ui-state-hover")}),e("tr.jqgrow","#"+e.jgrid.jqID(t.p.id)).hover(function(){e(this).addClass("ui-state-hover"),e("#"+e.jgrid.jqID(this.id),"#"+e.jgrid.jqID(t.p.id)+"_frozen").addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover"),e("#"+e.jgrid.jqID(this.id),"#"+e.jgrid.jqID(t.p.id)+"_frozen").removeClass("ui-state-hover")})),i=null}),t.grid.hDiv.loading||e(t).triggerHandler("jqGridAfterGridComplete"),t.p.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){if(this.grid&&this.p.frozenColumns===!0){var t=this;if(e(t.grid.fhDiv).remove(),e(t.grid.fbDiv).remove(),t.grid.fhDiv=null,t.grid.fbDiv=null,e(this).unbind(".setFrozenColumns"),t.p.hoverrows===!0){var i;e("#"+e.jgrid.jqID(t.p.id)).bind("mouseover",function(t){i=e(t.target).closest("tr.jqgrow"),"ui-subgrid"!==e(i).attr("class")&&e(i).addClass("ui-state-hover")}).bind("mouseout",function(t){i=e(t.target).closest("tr.jqgrow"),e(i).removeClass("ui-state-hover")})}this.p.frozenColumns=!1}})}})}(jQuery),function(e){e.fn.jqm=function(r){var o={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:a,ajaxText:"",target:a,modal:a,toTop:a,onShow:a,onHide:a,onLoad:a};return this.each(function(){return this._jqm?i[this._jqm].c=e.extend({},i[this._jqm].c,r):(t++,this._jqm=t,i[t]={c:e.extend(o,e.jqm.params,r),a:a,w:e(this).addClass("jqmID"+t),s:t},void(o.trigger&&e(this).jqmAddTrigger(o.trigger)))})},e.fn.jqmAddClose=function(e){return l(this,e,"jqmHide")},e.fn.jqmAddTrigger=function(e){return l(this,e,"jqmShow")},e.fn.jqmShow=function(t){return this.each(function(){e.jqm.open(this._jqm,t)})},e.fn.jqmHide=function(t){return this.each(function(){e.jqm.close(this._jqm,t)})},e.jqm={hash:{},open:function(t,s){var d=i[t],l=d.c,p="."+l.closeClass,c=parseInt(d.w.css("z-index"));c=c>0?c:3e3;var u=e("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":c-1,opacity:l.overlay/100});if(d.a)return a;if(d.t=s,d.a=!0,d.w.css("z-index",c),l.modal?(r[0]||setTimeout(function(){n("bind")},1),r.push(t)):l.overlay>0?l.closeoverlay&&d.w.jqmAddClose(u):u=a,d.o=u?u.addClass(l.overlayClass).prependTo("body"):a,l.ajax){var h=l.target||d.w,g=l.ajax;h="string"==typeof h?e(h,d.w):e(h),g="@"==g.substr(0,1)?e(s).attr(g.substring(1)):g,h.html(l.ajaxText).load(g,function(){l.onLoad&&l.onLoad.call(this,d),p&&d.w.jqmAddClose(e(p,d.w)),o(d)})}else p&&d.w.jqmAddClose(e(p,d.w));return l.toTop&&d.o&&d.w.before('<span id="jqmP'+d.w[0]._jqm+'"></span>').insertAfter(d.o),l.onShow?l.onShow(d):d.w.show(),o(d),a},close:function(t){var o=i[t];return o.a?(o.a=a,r[0]&&(r.pop(),r[0]||n("unbind")),o.c.toTop&&o.o&&e("#jqmP"+o.w[0]._jqm).after(o.w).remove(),o.c.onHide?o.c.onHide(o):(o.w.hide(),o.o&&o.o.remove()),a):a},params:{}};var t=0,i=e.jqm.hash,r=[],a=!1,o=function(e){s(e)},s=function(t){try{e(":input:visible",t.w)[0].focus()}catch(i){}},n=function(t){e(document)[t]("keypress",d)[t]("keydown",d)[t]("mousedown",d)},d=function(t){var a=i[r[r.length-1]],o=!e(t.target).parents(".jqmID"+a.s)[0];return o&&(e(".jqmID"+a.s).each(function(){var i=e(this),r=i.offset();return r.top<=t.pageY&&t.pageY<=r.top+i.height()&&r.left<=t.pageX&&t.pageX<=r.left+i.width()?(o=!1,!1):void 0}),s(a)),!o},l=function(t,r,o){return t.each(function(){var t=this._jqm;e(r).each(function(){this[o]||(this[o]=[],e(this).click(function(){for(var e in{jqmShow:1,jqmHide:1})for(var t in this[e])i[this[e][t]]&&i[this[e][t]].w[e](this);return a})),this[o].push(t)})})}}(jQuery),function(e){e.fn.jqDrag=function(e){return s(this,e,"d")},e.fn.jqResize=function(e,t){return s(this,e,"r",t)},e.jqDnR={dnr:{},e:0,drag:function(e){return"d"==a.k?o.css({left:a.X+e.pageX-a.pX,top:a.Y+e.pageY-a.pY}):(o.css({width:Math.max(e.pageX-a.pX+a.W,0),height:Math.max(e.pageY-a.pY+a.H,0)}),i&&t.css({width:Math.max(e.pageX-i.pX+i.W,0),height:Math.max(e.pageY-i.pY+i.H,0)})),!1},stop:function(){e(document).unbind("mousemove",r.drag).unbind("mouseup",r.stop)}};var t,i,r=e.jqDnR,a=r.dnr,o=r.e,s=function(r,s,l,p){return r.each(function(){s=s?e(s,r):r,s.bind("mousedown",{e:r,k:l},function(r){var s=r.data,l={};if(o=s.e,t=p?e(p):!1,"relative"!=o.css("position"))try{o.position(l)}catch(c){}if(a={X:l.left||n("left")||0,Y:l.top||n("top")||0,W:n("width")||o[0].scrollWidth||0,H:n("height")||o[0].scrollHeight||0,pX:r.pageX,pY:r.pageY,k:s.k},i=t&&"d"!=s.k?{X:l.left||d("left")||0,Y:l.top||d("top")||0,W:t[0].offsetWidth||d("width")||0,H:t[0].offsetHeight||d("height")||0,pX:r.pageX,pY:r.pageY,k:s.k}:!1,e("input.hasDatepicker",o[0])[0])try{e("input.hasDatepicker",o[0]).datepicker("hide")}catch(u){}return e(document).mousemove(e.jqDnR.drag).mouseup(e.jqDnR.stop),!1})})},n=function(e){return parseInt(o.css(e),10)||!1},d=function(e){return parseInt(t.css(e),10)||!1}}(jQuery);var xmlJsonClass={xml2json:function(e,t){9===e.nodeType&&(e=e.documentElement);var i=this.removeWhite(e),r=this.toObj(i),a=this.toJson(r,e.nodeName,"	");return"{\n"+t+(t?a.replace(/\t/g,t):a.replace(/\t|\n/g,""))+"\n}"},json2xml:function(e,t){var i,r=function(e,t,i){var a,o,s="";if(e instanceof Array)if(0===e.length)s+=i+"<"+t+">__EMPTY_ARRAY_</"+t+">\n";else for(a=0,o=e.length;o>a;a+=1){var n=i+r(e[a],t,i+"	")+"\n";s+=n}else if("object"==typeof e){var d=!1;s+=i+"<"+t;var l;for(l in e)e.hasOwnProperty(l)&&("@"===l.charAt(0)?s+=" "+l.substr(1)+'="'+e[l].toString()+'"':d=!0);if(s+=d?">":"/>",d){for(l in e)e.hasOwnProperty(l)&&("#text"===l?s+=e[l]:"#cdata"===l?s+="<![CDATA["+e[l]+"]]>":"@"!==l.charAt(0)&&(s+=r(e[l],l,i+"	")));s+=("\n"===s.charAt(s.length-1)?i:"")+"</"+t+">"}}else"function"==typeof e?s+=i+"<"+t+"><![CDATA["+e+"]]></"+t+">":(void 0===e&&(e=""),s+='""'===e.toString()||0===e.toString().length?i+"<"+t+">__EMPTY_STRING_</"+t+">":i+"<"+t+">"+e.toString()+"</"+t+">");return s},a="";for(i in e)e.hasOwnProperty(i)&&(a+=r(e[i],i,""));return t?a.replace(/\t/g,t):a.replace(/\t|\n/g,"")},toObj:function(e){var t={},i=/function/i;if(1===e.nodeType){if(e.attributes.length){var r;for(r=0;r<e.attributes.length;r+=1)t["@"+e.attributes[r].nodeName]=(e.attributes[r].nodeValue||"").toString()}if(e.firstChild){var a,o=0,s=0,n=!1;for(a=e.firstChild;a;a=a.nextSibling)1===a.nodeType?n=!0:3===a.nodeType&&a.nodeValue.match(/[^ \f\n\r\t\v]/)?o+=1:4===a.nodeType&&(s+=1);if(n)if(2>o&&2>s)for(this.removeWhite(e),a=e.firstChild;a;a=a.nextSibling)3===a.nodeType?t["#text"]=this.escape(a.nodeValue):4===a.nodeType?i.test(a.nodeValue)?t[a.nodeName]=[t[a.nodeName],a.nodeValue]:t["#cdata"]=this.escape(a.nodeValue):t[a.nodeName]?t[a.nodeName]instanceof Array?t[a.nodeName][t[a.nodeName].length]=this.toObj(a):t[a.nodeName]=[t[a.nodeName],this.toObj(a)]:t[a.nodeName]=this.toObj(a);else e.attributes.length?t["#text"]=this.escape(this.innerXml(e)):t=this.escape(this.innerXml(e));else if(o)e.attributes.length?t["#text"]=this.escape(this.innerXml(e)):(t=this.escape(this.innerXml(e)),"__EMPTY_ARRAY_"===t?t="[]":"__EMPTY_STRING_"===t&&(t=""));else if(s)if(s>1)t=this.escape(this.innerXml(e));else for(a=e.firstChild;a;a=a.nextSibling){if(i.test(e.firstChild.nodeValue)){t=e.firstChild.nodeValue;break}t["#cdata"]=this.escape(a.nodeValue)}}e.attributes.length||e.firstChild||(t=null)}else 9===e.nodeType?t=this.toObj(e.documentElement):alert("unhandled node type: "+e.nodeType);return t},toJson:function(e,t,i,r){void 0===r&&(r=!0);var a=t?'"'+t+'"':"",o="	",s="\n";if(r||(o="",s=""),"[]"===e)a+=t?":[]":"[]";else if(e instanceof Array){var n,d,l=[];for(d=0,n=e.length;n>d;d+=1)l[d]=this.toJson(e[d],"",i+o,r);a+=(t?":[":"[")+(l.length>1?s+i+o+l.join(","+s+i+o)+s+i:l.join(""))+"]"}else if(null===e)a+=(t&&":")+"null";else if("object"==typeof e){var p,c=[];for(p in e)e.hasOwnProperty(p)&&(c[c.length]=this.toJson(e[p],p,i+o,r));a+=(t?":{":"{")+(c.length>1?s+i+o+c.join(","+s+i+o)+s+i:c.join(""))+"}"}else a+="string"==typeof e?(t&&":")+'"'+e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(t&&":")+e.toString();return a},innerXml:function(e){var t="";if("innerHTML"in e)t=e.innerHTML;else for(var i=function(e){var t,r="";if(1===e.nodeType){for(r+="<"+e.nodeName,t=0;t<e.attributes.length;t+=1)r+=" "+e.attributes[t].nodeName+'="'+(e.attributes[t].nodeValue||"").toString()+'"';if(e.firstChild){r+=">";for(var a=e.firstChild;a;a=a.nextSibling)r+=i(a);r+="</"+e.nodeName+">"}else r+="/>"}else 3===e.nodeType?r+=e.nodeValue:4===e.nodeType&&(r+="<![CDATA["+e.nodeValue+"]]>");return r},r=e.firstChild;r;r=r.nextSibling)t+=i(r);return t},escape:function(e){return e.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){e.normalize();var t;for(t=e.firstChild;t;)if(3===t.nodeType)if(t.nodeValue.match(/[^ \f\n\r\t\v]/))t=t.nextSibling;else{var i=t.nextSibling;e.removeChild(t),t=i}else 1===t.nodeType?(this.removeWhite(t),t=t.nextSibling):t=t.nextSibling;return e}};!function(e){"use strict";e.fmatter={},e.extend(e.fmatter,{isBoolean:function(e){return"boolean"==typeof e},isObject:function(t){return t&&("object"==typeof t||e.isFunction(t))||!1},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isValue:function(e){return this.isObject(e)||this.isString(e)||this.isNumber(e)||this.isBoolean(e)},isEmpty:function(t){return!this.isString(t)&&this.isValue(t)?!1:this.isValue(t)?(t=e.trim(t).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,""),""===t):!0}}),e.fn.fmatter=function(t,i,r,a,o){var s=i;r=e.extend({},e.jgrid.formatter,r);try{s=e.fn.fmatter[t].call(this,i,r,a,o)}catch(n){}return s},e.fmatter.util={NumberFormat:function(t,i){if(e.fmatter.isNumber(t)||(t*=1),e.fmatter.isNumber(t)){var r,a=0>t,o=String(t),s=i.decimalSeparator||".";if(e.fmatter.isNumber(i.decimalPlaces)){var n=i.decimalPlaces,d=Math.pow(10,n);if(o=String(Math.round(t*d)/d),r=o.lastIndexOf("."),n>0)for(0>r?(o+=s,r=o.length-1):"."!==s&&(o=o.replace(".",s));o.length-1-r<n;)o+="0"}if(i.thousandsSeparator){var l=i.thousandsSeparator;r=o.lastIndexOf(s),r=r>-1?r:o.length;var p,c=o.substring(r),u=-1;for(p=r;p>0;p--)u++,u%3===0&&p!==r&&(!a||p>1)&&(c=l+c),c=o.charAt(p-1)+c;o=c}return o=i.prefix?i.prefix+o:o,o=i.suffix?o+i.suffix:o}return t}},e.fn.fmatter.defaultFormat=function(t,i){return e.fmatter.isValue(t)&&""!==t?t:i.defaultValue||"&#160;"},e.fn.fmatter.email=function(t,i){return e.fmatter.isEmpty(t)?e.fn.fmatter.defaultFormat(t,i):'<a href="mailto:'+t+'">'+t+"</a>"},e.fn.fmatter.checkbox=function(t,i){var r,a=e.extend({},i.checkbox);void 0!==i.colModel&&void 0!==i.colModel.formatoptions&&(a=e.extend({},a,i.colModel.formatoptions)),r=a.disabled===!0?'disabled="disabled"':"",(e.fmatter.isEmpty(t)||void 0===t)&&(t=e.fn.fmatter.defaultFormat(t,a)),t=String(t),t=(t+"").toLowerCase();var o=t.search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"";return'<input type="checkbox" '+o+' value="'+t+'" offval="no" '+r+"/>"},e.fn.fmatter.link=function(t,i){var r={target:i.target},a="";return void 0!==i.colModel&&void 0!==i.colModel.formatoptions&&(r=e.extend({},r,i.colModel.formatoptions)),r.target&&(a="target="+r.target),e.fmatter.isEmpty(t)?e.fn.fmatter.defaultFormat(t,i):"<a "+a+' href="'+t+'">'+t+"</a>"},e.fn.fmatter.showlink=function(t,i){var r,a={baseLinkUrl:i.baseLinkUrl,showAction:i.showAction,addParam:i.addParam||"",target:i.target,idName:i.idName},o="";return void 0!==i.colModel&&void 0!==i.colModel.formatoptions&&(a=e.extend({},a,i.colModel.formatoptions)),a.target&&(o="target="+a.target),r=a.baseLinkUrl+a.showAction+"?"+a.idName+"="+i.rowId+a.addParam,e.fmatter.isString(t)||e.fmatter.isNumber(t)?"<a "+o+' href="'+r+'">'+t+"</a>":e.fn.fmatter.defaultFormat(t,i)},e.fn.fmatter.integer=function(t,i){var r=e.extend({},i.integer);return void 0!==i.colModel&&void 0!==i.colModel.formatoptions&&(r=e.extend({},r,i.colModel.formatoptions)),e.fmatter.isEmpty(t)?r.defaultValue:e.fmatter.util.NumberFormat(t,r)},e.fn.fmatter.number=function(t,i){var r=e.extend({},i.number);return void 0!==i.colModel&&void 0!==i.colModel.formatoptions&&(r=e.extend({},r,i.colModel.formatoptions)),e.fmatter.isEmpty(t)?r.defaultValue:e.fmatter.util.NumberFormat(t,r)},e.fn.fmatter.currency=function(t,i){var r=e.extend({},i.currency);return void 0!==i.colModel&&void 0!==i.colModel.formatoptions&&(r=e.extend({},r,i.colModel.formatoptions)),e.fmatter.isEmpty(t)?r.defaultValue:e.fmatter.util.NumberFormat(t,r)},e.fn.fmatter.date=function(t,i,r,a){var o=e.extend({},i.date);return void 0!==i.colModel&&void 0!==i.colModel.formatoptions&&(o=e.extend({},o,i.colModel.formatoptions)),o.reformatAfterEdit||"edit"!==a?e.fmatter.isEmpty(t)?e.fn.fmatter.defaultFormat(t,i):e.jgrid.parseDate(o.srcformat,t,o.newformat,o):e.fn.fmatter.defaultFormat(t,i)},e.fn.fmatter.select=function(t,i){t=String(t);var r,a,o=!1,s=[];if(void 0!==i.colModel.formatoptions?(o=i.colModel.formatoptions.value,r=void 0===i.colModel.formatoptions.separator?":":i.colModel.formatoptions.separator,a=void 0===i.colModel.formatoptions.delimiter?";":i.colModel.formatoptions.delimiter):void 0!==i.colModel.editoptions&&(o=i.colModel.editoptions.value,r=void 0===i.colModel.editoptions.separator?":":i.colModel.editoptions.separator,a=void 0===i.colModel.editoptions.delimiter?";":i.colModel.editoptions.delimiter),o){var n,d=i.colModel.editoptions.multiple===!0?!0:!1,l=[];if(d&&(l=t.split(","),l=e.map(l,function(t){return e.trim(t)})),e.fmatter.isString(o)){var p,c=o.split(a),u=0;for(p=0;p<c.length;p++)if(n=c[p].split(r),n.length>2&&(n[1]=e.map(n,function(e,t){return t>0?e:void 0}).join(r)),d)e.inArray(n[0],l)>-1&&(s[u]=n[1],u++);else if(e.trim(n[0])===e.trim(t)){s[0]=n[1];break}}else e.fmatter.isObject(o)&&(d?s=e.map(l,function(e){return o[e]}):s[0]=o[t]||"")}return t=s.join(", "),""===t?e.fn.fmatter.defaultFormat(t,i):t},e.fn.fmatter.rowactions=function(t){var i=e(this).closest("tr.jqgrow"),r=i.attr("id"),a=e(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),o=e("#"+a),s=o[0],n=s.p,d=n.colModel[e.jgrid.getCellIndex(this)],l=d.frozen?e("tr#"+r+" td:eq("+e.jgrid.getCellIndex(this)+") > div",o):e(this).parent(),p={extraparam:{}},c=function(t,i){e.isFunction(p.afterSave)&&p.afterSave.call(s,t,i),l.find("div.ui-inline-edit,div.ui-inline-del").show(),l.find("div.ui-inline-save,div.ui-inline-cancel").hide()},u=function(t){e.isFunction(p.afterRestore)&&p.afterRestore.call(s,t),l.find("div.ui-inline-edit,div.ui-inline-del").show(),l.find("div.ui-inline-save,div.ui-inline-cancel").hide()};void 0!==d.formatoptions&&(p=e.extend(p,d.formatoptions)),void 0!==n.editOptions&&(p.editOptions=n.editOptions),void 0!==n.delOptions&&(p.delOptions=n.delOptions),i.hasClass("jqgrid-new-row")&&(p.extraparam[n.prmNames.oper]=n.prmNames.addoper);var h={keys:p.keys,oneditfunc:p.onEdit,successfunc:p.onSuccess,url:p.url,extraparam:p.extraparam,aftersavefunc:c,errorfunc:p.onError,afterrestorefunc:u,restoreAfterError:p.restoreAfterError,mtype:p.mtype};switch(t){case"edit":o.jqGrid("editRow",r,h),l.find("div.ui-inline-edit,div.ui-inline-del").hide(),l.find("div.ui-inline-save,div.ui-inline-cancel").show(),o.triggerHandler("jqGridAfterGridComplete");break;case"save":o.jqGrid("saveRow",r,h)&&(l.find("div.ui-inline-edit,div.ui-inline-del").show(),l.find("div.ui-inline-save,div.ui-inline-cancel").hide(),o.triggerHandler("jqGridAfterGridComplete"));break;case"cancel":o.jqGrid("restoreRow",r,u),l.find("div.ui-inline-edit,div.ui-inline-del").show(),l.find("div.ui-inline-save,div.ui-inline-cancel").hide(),o.triggerHandler("jqGridAfterGridComplete");break;case"del":o.jqGrid("delGridRow",r,p.delOptions);break;case"formedit":o.jqGrid("setSelection",r),o.jqGrid("editGridRow",r,p.editOptions)}},e.fn.fmatter.actions=function(t,i){var r,a={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},o=i.rowId,s="";return void 0!==i.colModel.formatoptions&&(a=e.extend(a,i.colModel.formatoptions)),void 0===o||e.fmatter.isEmpty(o)?"":(a.editformbutton?(r="id='jEditButton_"+o+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",s+="<div title='"+e.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+r+"><span class='ui-icon ui-icon-pencil'></span></div>"):a.editbutton&&(r="id='jEditButton_"+o+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ",s+="<div title='"+e.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+r+"><span class='ui-icon ui-icon-pencil'></span></div>"),a.delbutton&&(r="id='jDeleteButton_"+o+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",s+="<div title='"+e.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+r+"><span class='ui-icon ui-icon-trash'></span></div>"),r="id='jSaveButton_"+o+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",s+="<div title='"+e.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+r+"><span class='ui-icon ui-icon-disk'></span></div>",r="id='jCancelButton_"+o+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",s+="<div title='"+e.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+r+"><span class='ui-icon ui-icon-cancel'></span></div>","<div style='margin-left:8px;'>"+s+"</div>")},e.unformat=function(t,i,r,a){var o,s,n=i.colModel.formatter,d=i.colModel.formatoptions||{},l=/([\.\*\_\'\(\)\{\}\+\?\\])/g,p=i.colModel.unformat||e.fn.fmatter[n]&&e.fn.fmatter[n].unformat;if(void 0!==p&&e.isFunction(p))o=p.call(this,e(t).text(),i,t);else if(void 0!==n&&e.fmatter.isString(n)){var c,u=e.jgrid.formatter||{};switch(n){case"integer":d=e.extend({},u.integer,d),s=d.thousandsSeparator.replace(l,"\\$1"),c=new RegExp(s,"g"),o=e(t).text().replace(c,"");break;case"number":d=e.extend({},u.number,d),s=d.thousandsSeparator.replace(l,"\\$1"),c=new RegExp(s,"g"),o=e(t).text().replace(c,"").replace(d.decimalSeparator,".");break;case"currency":d=e.extend({},u.currency,d),s=d.thousandsSeparator.replace(l,"\\$1"),c=new RegExp(s,"g"),o=e(t).text(),d.prefix&&d.prefix.length&&(o=o.substr(d.prefix.length)),d.suffix&&d.suffix.length&&(o=o.substr(0,o.length-d.suffix.length)),o=o.replace(c,"").replace(d.decimalSeparator,".");break;case"checkbox":var h=i.colModel.editoptions?i.colModel.editoptions.value.split(":"):["Yes","No"];o=e("input",t).is(":checked")?h[0]:h[1];break;case"select":o=e.unformat.select(t,i,r,a);break;case"actions":return"";default:o=e(t).text()}}return void 0!==o?o:a===!0?e(t).text():e.jgrid.htmlDecode(e(t).html())},e.unformat.select=function(t,i,r,a){var o=[],s=e(t).text();if(a===!0)return s;var n=e.extend({},void 0!==i.colModel.formatoptions?i.colModel.formatoptions:i.colModel.editoptions),d=void 0===n.separator?":":n.separator,l=void 0===n.delimiter?";":n.delimiter;if(n.value){var p,c=n.value,u=n.multiple===!0?!0:!1,h=[];if(u&&(h=s.split(","),h=e.map(h,function(t){return e.trim(t)})),e.fmatter.isString(c)){var g,f=c.split(l),m=0;for(g=0;g<f.length;g++)if(p=f[g].split(d),p.length>2&&(p[1]=e.map(p,function(e,t){return t>0?e:void 0}).join(d)),u)e.inArray(p[1],h)>-1&&(o[m]=p[0],m++);else if(e.trim(p[1])===e.trim(s)){o[0]=p[0];break}}else(e.fmatter.isObject(c)||e.isArray(c))&&(u||(h[0]=s),o=e.map(h,function(t){var i;return e.each(c,function(e,r){return r===t?(i=e,!1):void 0}),void 0!==i?i:void 0}));return o.join(", ")}return s||""},e.unformat.date=function(t,i){var r=e.jgrid.formatter.date||{};return void 0!==i.formatoptions&&(r=e.extend({},r,i.formatoptions)),e.fmatter.isEmpty(t)?e.fn.fmatter.defaultFormat(t,i):e.jgrid.parseDate(r.newformat,t,r.srcformat,r)}}(jQuery),function(e){"use strict";e.extend(e.jgrid,{showModal:function(e){e.w.show()},closeModal:function(e){e.w.hide().attr("aria-hidden","true"),e.o&&e.o.remove()},hideModal:function(t,i){if(i=e.extend({jqm:!0,gb:""},i||{}),i.onClose){var r=i.gb&&"string"==typeof i.gb&&"#gbox_"===i.gb.substr(0,6)?i.onClose.call(e("#"+i.gb.substr(6))[0],t):i.onClose(t);if("boolean"==typeof r&&!r)return}if(e.fn.jqm&&i.jqm===!0)e(t).attr("aria-hidden","true").jqmHide();else{if(""!==i.gb)try{e(".jqgrid-overlay:first",i.gb).hide()}catch(a){}e(t).hide().attr("aria-hidden","true")}},findPos:function(e){var t=0,i=0;if(e.offsetParent)do t+=e.offsetLeft,i+=e.offsetTop;while(e=e.offsetParent);return[t,i]},createModal:function(t,i,r,a,o,s,n){r=e.extend(!0,{},e.jgrid.jqModal||{},r);var d,l=document.createElement("div"),p=this;n=e.extend({},n||{}),d="rtl"===e(r.gbox).attr("dir")?!0:!1,l.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog",l.id=t.themodal;var c=document.createElement("div");c.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix",c.id=t.modalhead,e(c).append("<span class='ui-jqdialog-title'>"+r.caption+"</span>");var u=e("<a class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){u.addClass("ui-state-hover")},function(){u.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");e(c).append(u),d?(l.dir="rtl",e(".ui-jqdialog-title",c).css("float","right"),e(".ui-jqdialog-titlebar-close",c).css("left","0.3em")):(l.dir="ltr",e(".ui-jqdialog-title",c).css("float","left"),e(".ui-jqdialog-titlebar-close",c).css("right","0.3em"));var h=document.createElement("div");e(h).addClass("ui-jqdialog-content ui-widget-content").attr("id",t.modalcontent),e(h).append(i),l.appendChild(h),e(l).prepend(c),s===!0?e("body").append(l):"string"==typeof s?e(s).append(l):e(l).insertBefore(a),e(l).css(n),void 0===r.jqModal&&(r.jqModal=!0);var g={};if(e.fn.jqm&&r.jqModal===!0){if(0===r.left&&0===r.top&&r.overlay){var f=[];f=e.jgrid.findPos(o),r.left=f[0]+4,r.top=f[1]+4}g.top=r.top+"px",g.left=r.left}else(0!==r.left||0!==r.top)&&(g.left=r.left,g.top=r.top+"px");if(e("a.ui-jqdialog-titlebar-close",c).click(function(){var i=e("#"+e.jgrid.jqID(t.themodal)).data("onClose")||r.onClose,a=e("#"+e.jgrid.jqID(t.themodal)).data("gbox")||r.gbox;return p.hideModal("#"+e.jgrid.jqID(t.themodal),{gb:a,jqm:r.jqModal,onClose:i}),!1}),0!==r.width&&r.width||(r.width=300),0!==r.height&&r.height||(r.height=200),!r.zIndex){var m=e(a).parents("*[role=dialog]").filter(":first").css("z-index");r.zIndex=m?parseInt(m,10)+2:950}var v=0;if(d&&g.left&&!s&&(v=e(r.gbox).width()-(isNaN(r.width)?0:parseInt(r.width,10))-8,g.left=parseInt(g.left,10)+parseInt(v,10)),g.left&&(g.left+="px"),e(l).css(e.extend({width:isNaN(r.width)?"auto":r.width+"px",height:isNaN(r.height)?"auto":r.height+"px",zIndex:r.zIndex,overflow:"hidden"},g)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":t.modalhead,"aria-hidden":"true"}),void 0===r.drag&&(r.drag=!0),void 0===r.resize&&(r.resize=!0),r.drag)if(e(c).css("cursor","move"),e.fn.jqDrag)e(l).jqDrag(c);
else try{e(l).draggable({handle:e("#"+e.jgrid.jqID(c.id))})}catch(j){}if(r.resize)if(e.fn.jqResize)e(l).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se'></div>"),e("#"+e.jgrid.jqID(t.themodal)).jqResize(".jqResize",t.scrollelm?"#"+e.jgrid.jqID(t.scrollelm):!1);else try{e(l).resizable({handles:"se, sw",alsoResize:t.scrollelm?"#"+e.jgrid.jqID(t.scrollelm):!1})}catch(b){}r.closeOnEscape===!0&&e(l).keydown(function(i){if(27==i.which){var a=e("#"+e.jgrid.jqID(t.themodal)).data("onClose")||r.onClose;p.hideModal("#"+e.jgrid.jqID(t.themodal),{gb:r.gbox,jqm:r.jqModal,onClose:a})}})},viewModal:function(t,i){if(i=e.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:e.jgrid.showModal,onHide:e.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},i||{}),e.fn.jqm&&i.jqm===!0)i.jqM?e(t).attr("aria-hidden","false").jqm(i).jqmShow():e(t).attr("aria-hidden","false").jqmShow();else{""!==i.gbox&&(e(".jqgrid-overlay:first",i.gbox).show(),e(t).data("gbox",i.gbox)),e(t).show().attr("aria-hidden","false");try{e(":input:visible",t)[0].focus()}catch(r){}}},info_dialog:function(t,i,r,a){var o={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};e.extend(!0,o,e.jgrid.jqModal||{},{caption:"<b>"+t+"</b>"},a||{});var s=o.jqModal,n=this;e.fn.jqm&&!s&&(s=!1);var d,l="";if(o.buttons.length>0)for(d=0;d<o.buttons.length;d++)void 0===o.buttons[d].id&&(o.buttons[d].id="info_button_"+d),l+="<a id='"+o.buttons[d].id+"' class='fm-button ui-state-default ui-corner-all'>"+o.buttons[d].text+"</a>";var p=isNaN(o.dataheight)?o.dataheight:o.dataheight+"px",c="text-align:"+o.align+";",u="<div id='info_id'>";u+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+p+";"+c+"'>"+i+"</div>",u+=r?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+o.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+r+"</a>"+l+"</div>":""!==l?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+o.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+l+"</div>":"",u+="</div>";try{"false"===e("#info_dialog").attr("aria-hidden")&&e.jgrid.hideModal("#info_dialog",{jqm:s}),e("#info_dialog").remove()}catch(h){}e.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},u,o,"","",!0),l&&e.each(o.buttons,function(t){e("#"+e.jgrid.jqID(this.id),"#info_id").bind("click",function(){return o.buttons[t].onClick.call(e("#info_dialog")),!1})}),e("#closedialog","#info_id").click(function(){return n.hideModal("#info_dialog",{jqm:s,onClose:e("#info_dialog").data("onClose")||o.onClose,gb:e("#info_dialog").data("gbox")||o.gbox}),!1}),e(".fm-button","#info_dialog").hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),e.isFunction(o.beforeOpen)&&o.beforeOpen(),e.jgrid.viewModal("#info_dialog",{onHide:function(e){e.w.hide().remove(),e.o&&e.o.remove()},modal:o.modal,jqm:s}),e.isFunction(o.afterOpen)&&o.afterOpen();try{e("#info_dialog").focus()}catch(g){}},bindEv:function(t,i){var r=this;e.isFunction(i.dataInit)&&i.dataInit.call(r,t,i),i.dataEvents&&e.each(i.dataEvents,function(){void 0!==this.data?e(t).bind(this.type,this.data,this.fn):e(t).bind(this.type,this.fn)})},createEl:function(t,i,r,a,o){function s(t,i,r){var a=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value"];void 0!==r&&e.isArray(r)&&e.merge(a,r),e.each(i,function(i,r){-1===e.inArray(i,a)&&e(t).attr(i,r)}),i.hasOwnProperty("id")||e(t).attr("id",e.jgrid.randId())}var n="",d=this;switch(t){case"textarea":n=document.createElement("textarea"),a?i.cols||e(n).css({width:"98%"}):i.cols||(i.cols=20),i.rows||(i.rows=2),("&nbsp;"===r||"&#160;"===r||1===r.length&&160===r.charCodeAt(0))&&(r=""),n.value=r,s(n,i),e(n).attr({role:"textbox",multiline:"true"});break;case"checkbox":if(n=document.createElement("input"),n.type="checkbox",i.value){var l=i.value.split(":");r===l[0]&&(n.checked=!0,n.defaultChecked=!0),n.value=l[0],e(n).attr("offval",l[1])}else{var p=(r+"").toLowerCase();p.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==p?(n.checked=!0,n.defaultChecked=!0,n.value=r):n.value="on",e(n).attr("offval","off")}s(n,i,["value"]),e(n).attr("role","checkbox");break;case"select":n=document.createElement("select"),n.setAttribute("role","select");var c,u=[];if(i.multiple===!0?(c=!0,n.multiple="multiple",e(n).attr("aria-multiselectable","true")):c=!1,void 0!==i.dataUrl){var h=i.name?String(i.id).substring(0,String(i.id).length-String(i.name).length-1):String(i.id),g=i.postData||o.postData;d.p&&d.p.idPrefix&&(h=e.jgrid.stripPref(d.p.idPrefix,h)),e.ajax(e.extend({url:e.isFunction(i.dataUrl)?i.dataUrl.call(d,h,r,String(i.name)):i.dataUrl,type:"GET",dataType:"html",data:e.isFunction(g)?g.call(d,h,r,String(i.name)):g,context:{elem:n,options:i,vl:r},success:function(t){var i=[],r=this.elem,a=this.vl,o=e.extend({},this.options),n=o.multiple===!0,l=e.isFunction(o.buildSelect)?o.buildSelect.call(d,t):t;"string"==typeof l&&(l=e(e.trim(l)).html()),l&&(e(r).append(l),s(r,o,g?["postData"]:void 0),void 0===o.size&&(o.size=n?3:1),n?(i=a.split(","),i=e.map(i,function(t){return e.trim(t)})):i[0]=e.trim(a),setTimeout(function(){e("option",r).each(function(t){0===t&&r.multiple&&(this.selected=!1),e(this).attr("role","option"),(e.inArray(e.trim(e(this).text()),i)>-1||e.inArray(e.trim(e(this).val()),i)>-1)&&(this.selected="selected")})},0))}},o||{}))}else if(i.value){var f;void 0===i.size&&(i.size=c?3:1),c&&(u=r.split(","),u=e.map(u,function(t){return e.trim(t)})),"function"==typeof i.value&&(i.value=i.value());var m,v,j,b=void 0===i.separator?":":i.separator,w=void 0===i.delimiter?";":i.delimiter;if("string"==typeof i.value)for(m=i.value.split(w),f=0;f<m.length;f++)v=m[f].split(b),v.length>2&&(v[1]=e.map(v,function(e,t){return t>0?e:void 0}).join(b)),j=document.createElement("option"),j.setAttribute("role","option"),j.value=v[0],j.innerHTML=v[1],n.appendChild(j),c||e.trim(v[0])!==e.trim(r)&&e.trim(v[1])!==e.trim(r)||(j.selected="selected"),c&&(e.inArray(e.trim(v[1]),u)>-1||e.inArray(e.trim(v[0]),u)>-1)&&(j.selected="selected");else if("object"==typeof i.value){var y,x=i.value;for(y in x)x.hasOwnProperty(y)&&(j=document.createElement("option"),j.setAttribute("role","option"),j.value=y,j.innerHTML=x[y],n.appendChild(j),c||e.trim(y)!==e.trim(r)&&e.trim(x[y])!==e.trim(r)||(j.selected="selected"),c&&(e.inArray(e.trim(x[y]),u)>-1||e.inArray(e.trim(y),u)>-1)&&(j.selected="selected"))}s(n,i,["value"])}break;case"text":case"password":case"button":var q;q="button"===t?"button":"textbox",n=document.createElement("input"),n.type=t,n.value=r,s(n,i),"button"!==t&&(a?i.size||e(n).css({width:"98%"}):i.size||(i.size=20)),e(n).attr("role",q);break;case"image":case"file":n=document.createElement("input"),n.type=t,s(n,i);break;case"custom":n=document.createElement("span");try{if(!e.isFunction(i.custom_element))throw"e1";var D=i.custom_element.call(d,r,i);if(!D)throw"e2";D=e(D).addClass("customelement").attr({id:i.id,name:i.name}),e(n).empty().append(D)}catch(_){"e1"===_&&e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_element' "+e.jgrid.edit.msg.nodefined,e.jgrid.edit.bClose),"e2"===_?e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_element' "+e.jgrid.edit.msg.novalue,e.jgrid.edit.bClose):e.jgrid.info_dialog(e.jgrid.errors.errcap,"string"==typeof _?_:_.message,e.jgrid.edit.bClose)}}return n},checkDate:function(e,t){var i,r=function(e){return e%4!==0||e%100===0&&e%400!==0?28:29},a={};if(e=e.toLowerCase(),i=-1!==e.indexOf("/")?"/":-1!==e.indexOf("-")?"-":-1!==e.indexOf(".")?".":"/",e=e.split(i),t=t.split(i),3!==t.length)return!1;var o,s,n=-1,d=-1,l=-1;for(s=0;s<e.length;s++){var p=isNaN(t[s])?0:parseInt(t[s],10);a[e[s]]=p,o=e[s],-1!==o.indexOf("y")&&(n=s),-1!==o.indexOf("m")&&(l=s),-1!==o.indexOf("d")&&(d=s)}o="y"===e[n]||"yyyy"===e[n]?4:"yy"===e[n]?2:-1;var c,u=[0,31,29,31,30,31,30,31,31,30,31,30,31];return-1===n?!1:(c=a[e[n]].toString(),2===o&&1===c.length&&(o=1),c.length!==o||0===a[e[n]]&&"00"!==t[n]?!1:-1===l?!1:(c=a[e[l]].toString(),c.length<1||a[e[l]]<1||a[e[l]]>12?!1:-1===d?!1:(c=a[e[d]].toString(),c.length<1||a[e[d]]<1||a[e[d]]>31||2===a[e[l]]&&a[e[d]]>r(a[e[n]])||a[e[d]]>u[a[e[l]]]?!1:!0)))},isEmpty:function(e){return e.match(/^\s+$/)||""===e?!0:!1},checkTime:function(t){var i,r=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/;if(!e.jgrid.isEmpty(t)){if(i=t.match(r),!i)return!1;if(i[3]){if(i[1]<1||i[1]>12)return!1}else if(i[1]>23)return!1;if(i[2]>59)return!1}return!0},checkValues:function(t,i,r,a){var o,s,n,d,l,p=this,c=p.p.colModel;if(void 0===r)if("string"==typeof i){for(s=0,l=c.length;l>s;s++)if(c[s].name===i){o=c[s].editrules,i=s,null!=c[s].formoptions&&(n=c[s].formoptions.label);break}}else i>=0&&(o=c[i].editrules);else o=r,n=void 0===a?"_":a;if(o){if(n||(n=null!=p.p.colNames?p.p.colNames[i]:c[i].label),o.required===!0&&e.jgrid.isEmpty(t))return[!1,n+": "+e.jgrid.edit.msg.required,""];var u=o.required===!1?!1:!0;if(o.number===!0&&(u!==!1||!e.jgrid.isEmpty(t))&&isNaN(t))return[!1,n+": "+e.jgrid.edit.msg.number,""];if(void 0!==o.minValue&&!isNaN(o.minValue)&&parseFloat(t)<parseFloat(o.minValue))return[!1,n+": "+e.jgrid.edit.msg.minValue+" "+o.minValue,""];if(void 0!==o.maxValue&&!isNaN(o.maxValue)&&parseFloat(t)>parseFloat(o.maxValue))return[!1,n+": "+e.jgrid.edit.msg.maxValue+" "+o.maxValue,""];var h;if(o.email===!0&&!(u===!1&&e.jgrid.isEmpty(t)||(h=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,h.test(t))))return[!1,n+": "+e.jgrid.edit.msg.email,""];if(o.integer===!0&&(u!==!1||!e.jgrid.isEmpty(t))){if(isNaN(t))return[!1,n+": "+e.jgrid.edit.msg.integer,""];if(t%1!==0||-1!==t.indexOf("."))return[!1,n+": "+e.jgrid.edit.msg.integer,""]}if(o.date===!0&&!(u===!1&&e.jgrid.isEmpty(t)||(c[i].formatoptions&&c[i].formatoptions.newformat?(d=c[i].formatoptions.newformat,e.jgrid.formatter.date.masks.hasOwnProperty(d)&&(d=e.jgrid.formatter.date.masks[d])):d=c[i].datefmt||"Y-m-d",e.jgrid.checkDate(d,t))))return[!1,n+": "+e.jgrid.edit.msg.date+" - "+d,""];if(o.time===!0&&!(u===!1&&e.jgrid.isEmpty(t)||e.jgrid.checkTime(t)))return[!1,n+": "+e.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(o.url===!0&&!(u===!1&&e.jgrid.isEmpty(t)||(h=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,h.test(t))))return[!1,n+": "+e.jgrid.edit.msg.url,""];if(o.custom===!0&&(u!==!1||!e.jgrid.isEmpty(t))){if(e.isFunction(o.custom_func)){var g=o.custom_func.call(p,t,n,i);return e.isArray(g)?g:[!1,e.jgrid.edit.msg.customarray,""]}return[!1,e.jgrid.edit.msg.customfcheck,""]}}return[!0,"",""]}})}(jQuery),function(e){"use strict";e.fn.jqFilter=function(t){if("string"==typeof t){var i=e.fn.jqFilter[t];if(!i)throw"jqFilter - No such method: "+t;var r=e.makeArray(arguments).slice(1);return i.apply(this,r)}var a=e.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},e.jgrid.filter,t||{});return this.each(function(){if(!this.filter){this.p=a,(null===this.p.filter||void 0===this.p.filter)&&(this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]});var t,i,r=this.p.columns.length,o=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p.initFilter=e.extend(!0,{},this.p.filter),r){for(t=0;r>t;t++)i=this.p.columns[t],i.stype?i.inputtype=i.stype:i.inputtype||(i.inputtype="text"),i.sorttype?i.searchtype=i.sorttype:i.searchtype||(i.searchtype="string"),void 0===i.hidden&&(i.hidden=!1),i.label||(i.label=i.name),i.index&&(i.name=i.index),i.hasOwnProperty("searchoptions")||(i.searchoptions={}),i.hasOwnProperty("searchrules")||(i.searchrules={});this.p.showQuery&&e(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var s=function(){return e("#"+e.jgrid.jqID(a.id))[0]||null},n=function(t,i){var r=[!0,""],o=s();if(e.isFunction(i.searchrules))r=i.searchrules.call(o,t,i);else if(e.jgrid&&e.jgrid.checkValues)try{r=e.jgrid.checkValues.call(o,t,-1,i.searchrules,i.label)}catch(n){}r&&r.length&&r[0]===!1&&(a.error=!r[0],a.errmsg=r[1])};this.onchange=function(){return this.p.error=!1,this.p.errmsg="",e.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1},this.reDraw=function(){e("table.group:first",this).remove();var t=this.createTableForGroup(a.filter,null);e(this).append(t),e.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)},this.createTableForGroup=function(t,i){var r,o=this,s=e("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>"),n="left";"rtl"===this.p.direction&&(n="right",s.attr("dir","rtl")),null===i&&s.append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='"+n+"'></th></tr>");var d=e("<tr></tr>");s.append(d);var l=e("<th colspan='5' align='"+n+"'></th>");if(d.append(l),this.p.ruleButtons===!0){var p=e("<select class='opsel'></select>");l.append(p);var c,u="";for(r=0;r<a.groupOps.length;r++)c=t.groupOp===o.p.groupOps[r].op?" selected='selected'":"",u+="<option value='"+o.p.groupOps[r].op+"'"+c+">"+o.p.groupOps[r].text+"</option>";p.append(u).bind("change",function(){t.groupOp=e(p).val(),o.onchange()})}var h="<span></span>";if(this.p.groupButton&&(h=e("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),h.bind("click",function(){return void 0===t.groups&&(t.groups=[]),t.groups.push({groupOp:a.groupOps[0].op,rules:[],groups:[]}),o.reDraw(),o.onchange(),!1})),l.append(h),this.p.ruleButtons===!0){var g,f=e("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>");f.bind("click",function(){for(void 0===t.rules&&(t.rules=[]),r=0;r<o.p.columns.length;r++){var i=void 0===o.p.columns[r].search?!0:o.p.columns[r].search,a=o.p.columns[r].hidden===!0,s=o.p.columns[r].searchoptions.searchhidden===!0;if(s&&i||i&&!a){g=o.p.columns[r];break}}var n;return n=g.searchoptions.sopt?g.searchoptions.sopt:o.p.sopt?o.p.sopt:-1!==e.inArray(g.searchtype,o.p.strarr)?o.p.stropts:o.p.numopts,t.rules.push({field:g.name,op:n[0],data:""}),o.reDraw(),!1}),l.append(f)}if(null!==i){var m=e("<input type='button' value='-' title='Delete group' class='delete-group'/>");l.append(m),m.bind("click",function(){for(r=0;r<i.groups.length;r++)if(i.groups[r]===t){i.groups.splice(r,1);break}return o.reDraw(),o.onchange(),!1})}if(void 0!==t.groups)for(r=0;r<t.groups.length;r++){var v=e("<tr></tr>");s.append(v);var j=e("<td class='first'></td>");v.append(j);var b=e("<td colspan='4'></td>");b.append(this.createTableForGroup(t.groups[r],t)),v.append(b)}if(void 0===t.groupOp&&(t.groupOp=o.p.groupOps[0].op),void 0!==t.rules)for(r=0;r<t.rules.length;r++)s.append(this.createTableRowForRule(t.rules[r],t));return s},this.createTableRowForRule=function(t,i){var r,n,d,l,p,c=this,u=s(),h=e("<tr></tr>"),g="";h.append("<td class='first'></td>");var f=e("<td class='columns'></td>");h.append(f);var m,v=e("<select></select>"),j=[];f.append(v),v.bind("change",function(){for(t.field=e(v).val(),d=e(this).parents("tr:first"),r=0;r<c.p.columns.length;r++)if(c.p.columns[r].name===t.field){l=c.p.columns[r];break}if(l){l.searchoptions.id=e.jgrid.randId(),o&&"text"===l.inputtype&&(l.searchoptions.size||(l.searchoptions.size=10));var i=e.jgrid.createEl.call(u,l.inputtype,l.searchoptions,"",!0,c.p.ajaxSelectOptions||{},!0);e(i).addClass("input-elm"),n=l.searchoptions.sopt?l.searchoptions.sopt:c.p.sopt?c.p.sopt:-1!==e.inArray(l.searchtype,c.p.strarr)?c.p.stropts:c.p.numopts;var a="",s=0;for(j=[],e.each(c.p.ops,function(){j.push(this.oper)}),r=0;r<n.length;r++)m=e.inArray(n[r],j),-1!==m&&(0===s&&(t.op=c.p.ops[m].oper),a+="<option value='"+c.p.ops[m].oper+"'>"+c.p.ops[m].text+"</option>",s++);if(e(".selectopts",d).empty().append(a),e(".selectopts",d)[0].selectedIndex=0,e.jgrid.msie&&e.jgrid.msiever()<9){var p=parseInt(e("select.selectopts",d)[0].offsetWidth,10)+1;e(".selectopts",d).width(p),e(".selectopts",d).css("width","auto")}e(".data",d).empty().append(i),e.jgrid.bindEv.call(u,i,l.searchoptions),e(".input-elm",d).bind("change",function(i){var r=i.target;t.data="SPAN"===r.nodeName.toUpperCase()&&l.searchoptions&&e.isFunction(l.searchoptions.custom_value)?l.searchoptions.custom_value.call(u,e(r).children(".customelement:first"),"get"):r.value,c.onchange()}),setTimeout(function(){t.data=e(i).val(),c.onchange()},0)}});var b=0;for(r=0;r<c.p.columns.length;r++){var w=void 0===c.p.columns[r].search?!0:c.p.columns[r].search,y=c.p.columns[r].hidden===!0,x=c.p.columns[r].searchoptions.searchhidden===!0;(x&&w||w&&!y)&&(p="",t.field===c.p.columns[r].name&&(p=" selected='selected'",b=r),g+="<option value='"+c.p.columns[r].name+"'"+p+">"+c.p.columns[r].label+"</option>")}v.append(g);var q=e("<td class='operators'></td>");h.append(q),l=a.columns[b],l.searchoptions.id=e.jgrid.randId(),o&&"text"===l.inputtype&&(l.searchoptions.size||(l.searchoptions.size=10));var D=e.jgrid.createEl.call(u,l.inputtype,l.searchoptions,t.data,!0,c.p.ajaxSelectOptions||{},!0);("nu"===t.op||"nn"===t.op)&&(e(D).attr("readonly","true"),e(D).attr("disabled","true"));var _=e("<select class='selectopts'></select>");for(q.append(_),_.bind("change",function(){t.op=e(_).val(),d=e(this).parents("tr:first");var i=e(".input-elm",d)[0];"nu"===t.op||"nn"===t.op?(t.data="","SELECT"!==i.tagName.toUpperCase()&&(i.value=""),i.setAttribute("readonly","true"),i.setAttribute("disabled","true")):("SELECT"===i.tagName.toUpperCase()&&(t.data=i.value),i.removeAttribute("readonly"),i.removeAttribute("disabled")),c.onchange()}),n=l.searchoptions.sopt?l.searchoptions.sopt:c.p.sopt?c.p.sopt:-1!==e.inArray(l.searchtype,c.p.strarr)?c.p.stropts:c.p.numopts,g="",e.each(c.p.ops,function(){j.push(this.oper)}),r=0;r<n.length;r++)m=e.inArray(n[r],j),-1!==m&&(p=t.op===c.p.ops[m].oper?" selected='selected'":"",g+="<option value='"+c.p.ops[m].oper+"'"+p+">"+c.p.ops[m].text+"</option>");_.append(g);var $=e("<td class='data'></td>");h.append($),$.append(D),e.jgrid.bindEv.call(u,D,l.searchoptions),e(D).addClass("input-elm").bind("change",function(){t.data="custom"===l.inputtype?l.searchoptions.custom_value.call(u,e(this).children(".customelement:first"),"get"):e(this).val(),c.onchange()});var C=e("<td></td>");if(h.append(C),this.p.ruleButtons===!0){var G=e("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>");C.append(G),G.bind("click",function(){for(r=0;r<i.rules.length;r++)if(i.rules[r]===t){i.rules.splice(r,1);break}return c.reDraw(),c.onchange(),!1})}return h},this.getStringForGroup=function(e){var t,i="(";if(void 0!==e.groups)for(t=0;t<e.groups.length;t++){i.length>1&&(i+=" "+e.groupOp+" ");try{i+=this.getStringForGroup(e.groups[t])}catch(r){alert(r)}}if(void 0!==e.rules)try{for(t=0;t<e.rules.length;t++)i.length>1&&(i+=" "+e.groupOp+" "),i+=this.getStringForRule(e.rules[t])}catch(a){alert(a)}return i+=")","()"===i?"":i},this.getStringForRule=function(t){var i,r,o,s,d="",l="",p=["int","integer","float","number","currency"];for(i=0;i<this.p.ops.length;i++)if(this.p.ops[i].oper===t.op){d=this.p.operands.hasOwnProperty(t.op)?this.p.operands[t.op]:"",l=this.p.ops[i].oper;break}for(i=0;i<this.p.columns.length;i++)if(this.p.columns[i].name===t.field){r=this.p.columns[i];break}return void 0==r?"":(s=t.data,("bw"===l||"bn"===l)&&(s+="%"),("ew"===l||"en"===l)&&(s="%"+s),("cn"===l||"nc"===l)&&(s="%"+s+"%"),("in"===l||"ni"===l)&&(s=" ("+s+")"),a.errorcheck&&n(t.data,r),o=-1!==e.inArray(r.searchtype,p)||"nn"===l||"nu"===l?t.field+" "+d+" "+s:t.field+" "+d+' "'+s+'"')},this.resetFilter=function(){this.p.filter=e.extend(!0,{},this.p.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){e("th.ui-state-error",this).html(""),e("tr.error",this).hide()},this.showError=function(){e("th.ui-state-error",this).html(this.p.errmsg),e("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(a.filter)},this.toString=function(){function e(e){if(i.p.errorcheck){var t,r;for(t=0;t<i.p.columns.length;t++)if(i.p.columns[t].name===e.field){r=i.p.columns[t];break}r&&n(e.data,r)}return e.op+"(item."+e.field+",'"+e.data+"')"}function t(i){var r,a="(";if(void 0!==i.groups)for(r=0;r<i.groups.length;r++)a.length>1&&(a+="OR"===i.groupOp?" || ":" && "),a+=t(i.groups[r]);if(void 0!==i.rules)for(r=0;r<i.rules.length;r++)a.length>1&&(a+="OR"===i.groupOp?" || ":" && "),a+=e(i.rules[r]);return a+=")","()"===a?"":a}var i=this;return t(this.p.filter)},this.reDraw(),this.p.showQuery&&this.onchange(),this.filter=!0}}})},e.extend(e.fn.jqFilter,{toSQLString:function(){var e="";return this.each(function(){e=this.toUserFriendlyString()}),e},filterData:function(){var e;return this.each(function(){e=this.p.filter}),e},getParameter:function(e){return void 0!==e&&this.p.hasOwnProperty(e)?this.p[e]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(t){"string"==typeof t&&(t=e.jgrid.parse(t)),this.each(function(){this.p.filter=t,this.reDraw(),this.onchange()})}})}(jQuery),function(e){"use strict";var t={};e.jgrid.extend({searchGrid:function(t){return t=e.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},e.jgrid.search,t||{}),this.each(function(){function i(i){o=e(r).triggerHandler("jqGridFilterBeforeShow",[i]),void 0===o&&(o=!0),o&&e.isFunction(t.beforeShowSearch)&&(o=t.beforeShowSearch.call(r,i)),o&&(e.jgrid.viewModal("#"+e.jgrid.jqID(n.themodal),{gbox:"#gbox_"+e.jgrid.jqID(a),jqm:t.jqModal,modal:t.modal,overlay:t.overlay,toTop:t.toTop}),e(r).triggerHandler("jqGridFilterAfterShow",[i]),e.isFunction(t.afterShowSearch)&&t.afterShowSearch.call(r,i))}var r=this;if(r.grid){var a="fbox_"+r.p.id,o=!0,s=!0,n={themodal:"searchmod"+a,modalhead:"searchhd"+a,modalcontent:"searchcnt"+a,scrollelm:a},d=r.p.postData[t.sFilter];if("string"==typeof d&&(d=e.jgrid.parse(d)),t.recreateFilter===!0&&e("#"+e.jgrid.jqID(n.themodal)).remove(),void 0!==e("#"+e.jgrid.jqID(n.themodal))[0])i(e("#fbox_"+e.jgrid.jqID(+r.p.id)));else{var l=e("<div><div id='"+a+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+e.jgrid.jqID(r.p.id)),p="left",c="";"rtl"===r.p.direction&&(p="right",c=" style='text-align:left'",l.attr("dir","rtl"));var u,h,g=e.extend([],r.p.colModel),f="<a id='"+a+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'></span>"+t.Find+"</a>",m="<a id='"+a+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'></span>"+t.Reset+"</a>",v="",j="",b=!1,w=-1;if(t.showQuery&&(v="<a id='"+a+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'></span>Query</a>"),t.columns.length?(g=t.columns,w=0,u=g[0].index||g[0].name):e.each(g,function(e,t){if(t.label||(t.label=r.p.colNames[e]),!b){var i=void 0===t.search?!0:t.search,a=t.hidden===!0,o=t.searchoptions&&t.searchoptions.searchhidden===!0;(o&&i||i&&!a)&&(b=!0,u=t.index||t.name,w=e)}}),!d&&u||t.multipleSearch===!1){var y="eq";w>=0&&g[w].searchoptions&&g[w].searchoptions.sopt?y=g[w].searchoptions.sopt[0]:t.sopt&&t.sopt.length&&(y=t.sopt[0]),d={groupOp:"AND",rules:[{field:u,op:y,data:""}]}}b=!1,t.tmplNames&&t.tmplNames.length&&(b=!0,j=t.tmplLabel,j+="<select class='ui-template'>",j+="<option value='default'>Default</option>",e.each(t.tmplNames,function(e,t){j+="<option value='"+e+"'>"+t+"</option>"}),j+="</select>"),h="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+a+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton' style='text-align:"+p+"'>"+m+j+"</td><td class='EditButton' "+c+">"+v+f+"</td></tr></tbody></table>",a=e.jgrid.jqID(a),e("#"+a).jqFilter({columns:g,filter:t.loadDefaults?d:null,showQuery:t.showQuery,errorcheck:t.errorcheck,sopt:t.sopt,groupButton:t.multipleGroup,ruleButtons:t.multipleSearch,afterRedraw:t.afterRedraw,ops:t.odata,operands:t.operands,ajaxSelectOptions:r.p.ajaxSelectOptions,groupOps:t.groupOps,onChange:function(){this.p.showQuery&&e(".query",this).html(this.toUserFriendlyString()),e.isFunction(t.afterChange)&&t.afterChange.call(r,e("#"+a),t)},direction:r.p.direction,id:r.p.id}),l.append(h),b&&t.tmplFilters&&t.tmplFilters.length&&e(".ui-template",l).bind("change",function(){var i=e(this).val();return"default"===i?e("#"+a).jqFilter("addFilter",d):e("#"+a).jqFilter("addFilter",t.tmplFilters[parseInt(i,10)]),!1}),t.multipleGroup===!0&&(t.multipleSearch=!0),e(r).triggerHandler("jqGridFilterInitialize",[e("#"+a)]),e.isFunction(t.onInitializeSearch)&&t.onInitializeSearch.call(r,e("#"+a)),t.gbox="#gbox_"+a,t.layer?e.jgrid.createModal(n,l,t,"#gview_"+e.jgrid.jqID(r.p.id),e("#gbox_"+e.jgrid.jqID(r.p.id))[0],"#"+e.jgrid.jqID(t.layer),{position:"relative"}):e.jgrid.createModal(n,l,t,"#gview_"+e.jgrid.jqID(r.p.id),e("#gbox_"+e.jgrid.jqID(r.p.id))[0]),(t.searchOnEnter||t.closeOnEscape)&&e("#"+e.jgrid.jqID(n.themodal)).keydown(function(i){var r=e(i.target);return!t.searchOnEnter||13!==i.which||r.hasClass("add-group")||r.hasClass("add-rule")||r.hasClass("delete-group")||r.hasClass("delete-rule")||r.hasClass("fm-button")&&r.is("[id$=_query]")?t.closeOnEscape&&27===i.which?(e("#"+e.jgrid.jqID(n.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0:(e("#"+a+"_search").click(),!1)}),v&&e("#"+a+"_query").bind("click",function(){return e(".queryresult",l).toggle(),!1}),void 0===t.stringResult&&(t.stringResult=t.multipleSearch),e("#"+a+"_search").bind("click",function(){var i,o,d=e("#"+a),l={};if(d.find(".input-elm:focus").change(),o=d.jqFilter("filterData"),t.errorcheck&&(d[0].hideError(),t.showQuery||d.jqFilter("toSQLString"),d[0].p.error))return d[0].showError(),!1;if(t.stringResult){try{i=xmlJsonClass.toJson(o,"","",!1)}catch(p){try{i=JSON.stringify(o)}catch(c){}}"string"==typeof i&&(l[t.sFilter]=i,e.each([t.sField,t.sValue,t.sOper],function(){l[this]=""}))}else t.multipleSearch?(l[t.sFilter]=o,e.each([t.sField,t.sValue,t.sOper],function(){l[this]=""})):(l[t.sField]=o.rules[0].field,l[t.sValue]=o.rules[0].data,l[t.sOper]=o.rules[0].op,l[t.sFilter]="");return r.p.search=!0,e.extend(r.p.postData,l),s=e(r).triggerHandler("jqGridFilterSearch"),void 0===s&&(s=!0),s&&e.isFunction(t.onSearch)&&(s=t.onSearch.call(r,r.p.filters)),s!==!1&&e(r).trigger("reloadGrid",[{page:1}]),t.closeAfterSearch&&e.jgrid.hideModal("#"+e.jgrid.jqID(n.themodal),{gb:"#gbox_"+e.jgrid.jqID(r.p.id),jqm:t.jqModal,onClose:t.onClose}),!1}),e("#"+a+"_reset").bind("click",function(){var i={},o=e("#"+a);return r.p.search=!1,r.p.resetsearch=!0,t.multipleSearch===!1?i[t.sField]=i[t.sValue]=i[t.sOper]="":i[t.sFilter]="",o[0].resetFilter(),b&&e(".ui-template",l).val("default"),e.extend(r.p.postData,i),s=e(r).triggerHandler("jqGridFilterReset"),void 0===s&&(s=!0),s&&e.isFunction(t.onReset)&&(s=t.onReset.call(r)),s!==!1&&e(r).trigger("reloadGrid",[{page:1}]),t.closeAfterReset&&e.jgrid.hideModal("#"+e.jgrid.jqID(n.themodal),{gb:"#gbox_"+e.jgrid.jqID(r.p.id),jqm:t.jqModal,onClose:t.onClose}),!1}),i(e("#"+a)),e(".fm-button:not(.ui-state-disabled)",l).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")})}}})},editGridRow:function(i,r){return r=e.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:"ui-widget-overlay"},e.jgrid.edit,r||{}),t[e(this)[0].p.id]=r,this.each(function(){function a(){return e(y+" > tbody > tr > td > .FormElement").each(function(){var t=e(".customelement",this);if(t.length){var i=t[0],r=e(i).attr("name");e.each(g.p.colModel,function(){if(this.name===r&&this.editoptions&&e.isFunction(this.editoptions.custom_value)){try{if(f[r]=this.editoptions.custom_value.call(g,e("#"+e.jgrid.jqID(r),y),"get"),void 0===f[r])throw"e1"}catch(t){"e1"===t?e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.novalue,e.jgrid.edit.bClose):e.jgrid.info_dialog(e.jgrid.errors.errcap,t.message,e.jgrid.edit.bClose)}return!0}})}else{switch(e(this).get(0).type){case"checkbox":if(e(this).is(":checked"))f[this.name]=e(this).val();else{var a=e(this).attr("offval");f[this.name]=a}break;case"select-one":f[this.name]=e("option:selected",this).val();break;case"select-multiple":f[this.name]=e(this).val(),f[this.name]=f[this.name]?f[this.name].join(","):"";var o=[];e("option:selected",this).each(function(t,i){o[t]=e(i).text()});break;case"password":case"text":case"textarea":case"button":f[this.name]=e(this).val()}g.p.autoencode&&(f[this.name]=e.jgrid.htmlEncode(f[this.name]))}}),!0}function o(i,r,a,o){var s,n,d,l,p,c,u,h=0,f=[],m=!1,v="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>",j="";for(u=1;o>=u;u++)j+=v;if("_empty"!==i&&(m=e(r).jqGrid("getInd",i)),e(r.p.colModel).each(function(u){if(s=this.name,n=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,p=n?"style='display:none'":"","cb"!==s&&"subgrid"!==s&&this.editable===!0&&"rn"!==s){if(m===!1)l="";else if(s===r.p.ExpandColumn&&r.p.treeGrid===!0)l=e("td[role='gridcell']:eq("+u+")",r.rows[m]).text();
else{try{l=e.unformat.call(r,e("td[role='gridcell']:eq("+u+")",r.rows[m]),{rowId:i,colModel:this},u)}catch(v){l=this.edittype&&"textarea"===this.edittype?e("td[role='gridcell']:eq("+u+")",r.rows[m]).text():e("td[role='gridcell']:eq("+u+")",r.rows[m]).html()}(!l||"&nbsp;"===l||"&#160;"===l||1===l.length&&160===l.charCodeAt(0))&&(l="")}var w=e.extend({},this.editoptions||{},{id:s,name:s}),y=e.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),x=parseInt(y.rowpos,10)||h+1,q=parseInt(2*(parseInt(y.colpos,10)||1),10);if("_empty"===i&&w.defaultValue&&(l=e.isFunction(w.defaultValue)?w.defaultValue.call(g):w.defaultValue),this.edittype||(this.edittype="text"),g.p.autoencode&&(l=e.jgrid.htmlDecode(l)),c=e.jgrid.createEl.call(g,this.edittype,w,l,!1,e.extend({},e.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{})),(t[g.p.id].checkOnSubmit||t[g.p.id].checkOnUpdate)&&(t[g.p.id]._savedData[s]=l),e(c).addClass("FormElement"),e.inArray(this.edittype,["text","textarea","password","select"])>-1&&e(c).addClass("ui-widget-content ui-corner-all"),d=e(a).find("tr[rowpos="+x+"]"),y.rowabove){var D=e("<tr><td class='contentinfo' colspan='"+2*o+"'>"+y.rowcontent+"</td></tr>");e(a).append(D),D[0].rp=x}0===d.length&&(d=e("<tr "+p+" rowpos='"+x+"'></tr>").addClass("FormData").attr("id","tr_"+s),e(d).append(j),e(a).append(d),d[0].rp=x),e("td:eq("+(q-2)+")",d[0]).html(void 0===y.label?r.p.colNames[u]:y.label),e("td:eq("+(q-1)+")",d[0]).append(y.elmprefix).append(c).append(y.elmsuffix),"custom"===this.edittype&&e.isFunction(w.custom_value)&&w.custom_value.call(g,e("#"+s,"#"+b),"set",l),e.jgrid.bindEv.call(g,c,w),f[h]=u,h++}}),h>0){var w=e("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*o-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+r.p.id+"_id' value='"+i+"'/></td></tr>");w[0].rp=h+999,e(a).append(w),(t[g.p.id].checkOnSubmit||t[g.p.id].checkOnUpdate)&&(t[g.p.id]._savedData[r.p.id+"_id"]=i)}return f}function s(i,r,a){var o,s,n,d,l,p,c=0;(t[g.p.id].checkOnSubmit||t[g.p.id].checkOnUpdate)&&(t[g.p.id]._savedData={},t[g.p.id]._savedData[r.p.id+"_id"]=i);var u=r.p.colModel;if("_empty"===i)return e(u).each(function(){o=this.name,d=e.extend({},this.editoptions||{}),n=e("#"+e.jgrid.jqID(o),"#"+a),n&&n.length&&null!==n[0]&&(l="","custom"===this.edittype&&e.isFunction(d.custom_value)?d.custom_value.call(g,e("#"+o,"#"+a),"set",l):d.defaultValue?(l=e.isFunction(d.defaultValue)?d.defaultValue.call(g):d.defaultValue,"checkbox"===n[0].type?(p=l.toLowerCase(),p.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==p?(n[0].checked=!0,n[0].defaultChecked=!0,n[0].value=l):(n[0].checked=!1,n[0].defaultChecked=!1)):n.val(l)):"checkbox"===n[0].type?(n[0].checked=!1,n[0].defaultChecked=!1,l=e(n).attr("offval")):n[0].type&&"select"===n[0].type.substr(0,6)?n[0].selectedIndex=0:n.val(l),(t[g.p.id].checkOnSubmit===!0||t[g.p.id].checkOnUpdate)&&(t[g.p.id]._savedData[o]=l))}),void e("#id_g","#"+a).val(i);var h=e(r).jqGrid("getInd",i,!0);h&&(e('td[role="gridcell"]',h).each(function(n){if(o=u[n].name,"cb"!==o&&"subgrid"!==o&&"rn"!==o&&u[n].editable===!0){if(o===r.p.ExpandColumn&&r.p.treeGrid===!0)s=e(this).text();else try{s=e.unformat.call(r,e(this),{rowId:i,colModel:u[n]},n)}catch(d){s="textarea"===u[n].edittype?e(this).text():e(this).html()}switch(g.p.autoencode&&(s=e.jgrid.htmlDecode(s)),(t[g.p.id].checkOnSubmit===!0||t[g.p.id].checkOnUpdate)&&(t[g.p.id]._savedData[o]=s),o=e.jgrid.jqID(o),u[n].edittype){case"password":case"text":case"button":case"image":case"textarea":("&nbsp;"===s||"&#160;"===s||1===s.length&&160===s.charCodeAt(0))&&(s=""),e("#"+o,"#"+a).val(s);break;case"select":var l=s.split(",");l=e.map(l,function(t){return e.trim(t)}),e("#"+o+" option","#"+a).each(function(){this.selected=u[n].editoptions.multiple||e.trim(s)!==e.trim(e(this).text())&&l[0]!==e.trim(e(this).text())&&l[0]!==e.trim(e(this).val())?u[n].editoptions.multiple?e.inArray(e.trim(e(this).text()),l)>-1||e.inArray(e.trim(e(this).val()),l)>-1?!0:!1:!1:!0});break;case"checkbox":if(s=String(s),u[n].editoptions&&u[n].editoptions.value){var p=u[n].editoptions.value.split(":");e("#"+o,"#"+a)[g.p.useProp?"prop":"attr"](p[0]===s?{checked:!0,defaultChecked:!0}:{checked:!1,defaultChecked:!1})}else s=s.toLowerCase(),s.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==s?(e("#"+o,"#"+a)[g.p.useProp?"prop":"attr"]("checked",!0),e("#"+o,"#"+a)[g.p.useProp?"prop":"attr"]("defaultChecked",!0)):(e("#"+o,"#"+a)[g.p.useProp?"prop":"attr"]("checked",!1),e("#"+o,"#"+a)[g.p.useProp?"prop":"attr"]("defaultChecked",!1));break;case"custom":try{if(!u[n].editoptions||!e.isFunction(u[n].editoptions.custom_value))throw"e1";u[n].editoptions.custom_value.call(g,e("#"+o,"#"+a),"set",s)}catch(h){"e1"===h?e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,e.jgrid.edit.bClose):e.jgrid.info_dialog(e.jgrid.errors.errcap,h.message,e.jgrid.edit.bClose)}}c++}}),c>0&&e("#id_g",y).val(i))}function n(){e.each(g.p.colModel,function(e,t){t.editoptions&&t.editoptions.NullIfEmpty===!0&&f.hasOwnProperty(t.name)&&""===f[t.name]&&(f[t.name]="null")})}function d(){var i,a,o,d,l,p,c=[!0,"",""],u={},h=g.p.prmNames,m=e(g).triggerHandler("jqGridAddEditBeforeCheckValues",[e("#"+b),v]);m&&"object"==typeof m&&(f=m),e.isFunction(t[g.p.id].beforeCheckValues)&&(m=t[g.p.id].beforeCheckValues.call(g,f,e("#"+b),v),m&&"object"==typeof m&&(f=m));for(d in f)if(f.hasOwnProperty(d)&&(c=e.jgrid.checkValues.call(g,f[d],d),c[0]===!1))break;if(n(),c[0]&&(u=e(g).triggerHandler("jqGridAddEditClickSubmit",[t[g.p.id],f,v]),void 0===u&&e.isFunction(t[g.p.id].onclickSubmit)&&(u=t[g.p.id].onclickSubmit.call(g,t[g.p.id],f,v)||{}),c=e(g).triggerHandler("jqGridAddEditBeforeSubmit",[f,e("#"+b),v]),void 0===c&&(c=[!0,"",""]),c[0]&&e.isFunction(t[g.p.id].beforeSubmit)&&(c=t[g.p.id].beforeSubmit.call(g,f,e("#"+b),v))),c[0]&&!t[g.p.id].processing){if(t[g.p.id].processing=!0,e("#sData",y+"_2").addClass("ui-state-active"),o=h.oper,a=h.id,f[o]="_empty"===e.trim(f[g.p.id+"_id"])?h.addoper:h.editoper,f[o]!==h.addoper?f[a]=f[g.p.id+"_id"]:void 0===f[a]&&(f[a]=f[g.p.id+"_id"]),delete f[g.p.id+"_id"],f=e.extend(f,t[g.p.id].editData,u),g.p.treeGrid===!0){if(f[o]===h.addoper){l=e(g).jqGrid("getGridParam","selrow");var w="adjacency"===g.p.treeGridModel?g.p.treeReader.parent_id_field:"parent_id";f[w]=l}for(p in g.p.treeReader)if(g.p.treeReader.hasOwnProperty(p)){var q=g.p.treeReader[p];if(f.hasOwnProperty(q)){if(f[o]===h.addoper&&"parent_id_field"===p)continue;delete f[q]}}}f[a]=e.jgrid.stripPref(g.p.idPrefix,f[a]);var D=e.extend({url:t[g.p.id].url||e(g).jqGrid("getGridParam","editurl"),type:t[g.p.id].mtype,data:e.isFunction(t[g.p.id].serializeEditData)?t[g.p.id].serializeEditData.call(g,f):f,complete:function(n,d){var p;if(f[a]=g.p.idPrefix+f[a],n.status>=300&&304!==n.status?(c[0]=!1,c[1]=e(g).triggerHandler("jqGridAddEditErrorTextFormat",[n,v]),c[1]=e.isFunction(t[g.p.id].errorTextFormat)?t[g.p.id].errorTextFormat.call(g,n,v):d+" Status: '"+n.statusText+"'. Error code: "+n.status):(c=e(g).triggerHandler("jqGridAddEditAfterSubmit",[n,f,v]),void 0===c&&(c=[!0,"",""]),c[0]&&e.isFunction(t[g.p.id].afterSubmit)&&(c=t[g.p.id].afterSubmit.call(g,n,f,v))),c[0]===!1)e("#FormError>td",y).html(c[1]),e("#FormError",y).show();else if(g.p.autoencode&&e.each(f,function(t,i){f[t]=e.jgrid.htmlDecode(i)}),f[o]===h.addoper?(c[2]||(c[2]=e.jgrid.randId()),f[a]=c[2],t[g.p.id].reloadAfterSubmit?e(g).trigger("reloadGrid"):g.p.treeGrid===!0?e(g).jqGrid("addChildNode",c[2],l,f):e(g).jqGrid("addRowData",c[2],f,r.addedrow),t[g.p.id].closeAfterAdd?(g.p.treeGrid!==!0&&e(g).jqGrid("setSelection",c[2]),e.jgrid.hideModal("#"+e.jgrid.jqID(x.themodal),{gb:"#gbox_"+e.jgrid.jqID(j),jqm:r.jqModal,onClose:t[g.p.id].onClose})):t[g.p.id].clearAfterAdd&&s("_empty",g,b)):(t[g.p.id].reloadAfterSubmit?(e(g).trigger("reloadGrid"),t[g.p.id].closeAfterEdit||setTimeout(function(){e(g).jqGrid("setSelection",f[a])},1e3)):g.p.treeGrid===!0?e(g).jqGrid("setTreeRow",f[a],f):e(g).jqGrid("setRowData",f[a],f),t[g.p.id].closeAfterEdit&&e.jgrid.hideModal("#"+e.jgrid.jqID(x.themodal),{gb:"#gbox_"+e.jgrid.jqID(j),jqm:r.jqModal,onClose:t[g.p.id].onClose})),e.isFunction(t[g.p.id].afterComplete)&&(i=n,setTimeout(function(){e(g).triggerHandler("jqGridAddEditAfterComplete",[i,f,e("#"+b),v]),t[g.p.id].afterComplete.call(g,i,f,e("#"+b),v),i=null},500)),(t[g.p.id].checkOnSubmit||t[g.p.id].checkOnUpdate)&&(e("#"+b).data("disabled",!1),"_empty"!==t[g.p.id]._savedData[g.p.id+"_id"]))for(p in t[g.p.id]._savedData)t[g.p.id]._savedData.hasOwnProperty(p)&&f[p]&&(t[g.p.id]._savedData[p]=f[p]);t[g.p.id].processing=!1,e("#sData",y+"_2").removeClass("ui-state-active");try{e(":input:visible","#"+b)[0].focus()}catch(u){}}},e.jgrid.ajaxOptions,t[g.p.id].ajaxEditOptions);if(D.url||t[g.p.id].useDataProxy||(e.isFunction(g.p.dataProxy)?t[g.p.id].useDataProxy=!0:(c[0]=!1,c[1]+=" "+e.jgrid.errors.nourl)),c[0])if(t[g.p.id].useDataProxy){var _=g.p.dataProxy.call(g,D,"set_"+g.p.id);void 0===_&&(_=[!0,""]),_[0]===!1?(c[0]=!1,c[1]=_[1]||"Error deleting the selected row!"):(D.data.oper===h.addoper&&t[g.p.id].closeAfterAdd&&e.jgrid.hideModal("#"+e.jgrid.jqID(x.themodal),{gb:"#gbox_"+e.jgrid.jqID(j),jqm:r.jqModal,onClose:t[g.p.id].onClose}),D.data.oper===h.editoper&&t[g.p.id].closeAfterEdit&&e.jgrid.hideModal("#"+e.jgrid.jqID(x.themodal),{gb:"#gbox_"+e.jgrid.jqID(j),jqm:r.jqModal,onClose:t[g.p.id].onClose}))}else e.ajax(D)}c[0]===!1&&(e("#FormError>td",y).html(c[1]),e("#FormError",y).show())}function l(e,t){var i,r=!1;for(i in e)if(e.hasOwnProperty(i)&&e[i]!=t[i]){r=!0;break}return r}function p(){var i=!0;return e("#FormError",y).hide(),t[g.p.id].checkOnUpdate&&(f={},a(),m=l(f,t[g.p.id]._savedData),m&&(e("#"+b).data("disabled",!0),e(".confirm","#"+x.themodal).show(),i=!1)),i}function c(){var t;if("_empty"!==i&&void 0!==g.p.savedRow&&g.p.savedRow.length>0&&e.isFunction(e.fn.jqGrid.restoreRow))for(t=0;t<g.p.savedRow.length;t++)if(g.p.savedRow[t].id==i){e(g).jqGrid("restoreRow",i);break}}function u(t,i){var r=i[1].length-1;0===t?e("#pData",y+"_2").addClass("ui-state-disabled"):void 0!==i[1][t-1]&&e("#"+e.jgrid.jqID(i[1][t-1])).hasClass("ui-state-disabled")?e("#pData",y+"_2").addClass("ui-state-disabled"):e("#pData",y+"_2").removeClass("ui-state-disabled"),t===r?e("#nData",y+"_2").addClass("ui-state-disabled"):void 0!==i[1][t+1]&&e("#"+e.jgrid.jqID(i[1][t+1])).hasClass("ui-state-disabled")?e("#nData",y+"_2").addClass("ui-state-disabled"):e("#nData",y+"_2").removeClass("ui-state-disabled")}function h(){var t=e(g).jqGrid("getDataIDs"),i=e("#id_g",y).val(),r=e.inArray(i,t);return[r,t]}var g=this;if(g.grid&&i){var f,m,v,j=g.p.id,b="FrmGrid_"+j,w="TblGrid_"+j,y="#"+e.jgrid.jqID(w),x={themodal:"editmod"+j,modalhead:"edithd"+j,modalcontent:"editcnt"+j,scrollelm:b},q=e.isFunction(t[g.p.id].beforeShowForm)?t[g.p.id].beforeShowForm:!1,D=e.isFunction(t[g.p.id].afterShowForm)?t[g.p.id].afterShowForm:!1,_=e.isFunction(t[g.p.id].beforeInitData)?t[g.p.id].beforeInitData:!1,$=e.isFunction(t[g.p.id].onInitializeForm)?t[g.p.id].onInitializeForm:!1,C=!0,G=1,I=0;b=e.jgrid.jqID(b),"new"===i?(i="_empty",v="add",r.caption=t[g.p.id].addCaption):(r.caption=t[g.p.id].editCaption,v="edit"),r.recreateForm||e(g).data("formProp")&&e.extend(t[e(this)[0].p.id],e(g).data("formProp"));var F=!0;r.checkOnUpdate&&r.jqModal&&!r.modal&&(F=!1);var k=isNaN(t[e(this)[0].p.id].dataheight)?t[e(this)[0].p.id].dataheight:t[e(this)[0].p.id].dataheight+"px",S=isNaN(t[e(this)[0].p.id].datawidth)?t[e(this)[0].p.id].datawidth:t[e(this)[0].p.id].datawidth+"px",R=e("<form name='FormPost' id='"+b+"' class='FormGrid' onSubmit='return false;' style='width:"+S+";overflow:auto;position:relative;height:"+k+";'></form>").data("disabled",!1),M=e("<table id='"+w+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>");if(C=e(g).triggerHandler("jqGridAddEditBeforeInitData",[e("#"+b),v]),void 0===C&&(C=!0),C&&_&&(C=_.call(g,e("#"+b),v)),C!==!1){c(),e(g.p.colModel).each(function(){var e=this.formoptions;G=Math.max(G,e?e.colpos||0:0),I=Math.max(I,e?e.rowpos||0:0)}),e(R).append(M);var N=e("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+2*G+"'></td></tr>");N[0].rp=0,e(M).append(N),N=e("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*G+"'>"+t[g.p.id].topinfo+"</td></tr>"),N[0].rp=0,e(M).append(N);var O="rtl"===g.p.direction?!0:!1,P=O?"nData":"pData",A=O?"pData":"nData";o(i,g,M,G);var E="<a id='"+P+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",T="<a id='"+A+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",z="<a id='sData' class='fm-button ui-state-default ui-corner-all'>"+r.bSubmit+"</a>",H="<a id='cData' class='fm-button ui-state-default ui-corner-all'>"+r.bCancel+"</a>",B="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+w+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(O?T+E:E+T)+"</td><td class='EditButton'>"+z+H+"</td></tr>";if(B+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+t[g.p.id].bottominfo+"</td></tr>",B+="</tbody></table>",I>0){var L=[];e.each(e(M)[0].rows,function(e,t){L[e]=t}),L.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),e.each(L,function(t,i){e("tbody",M).append(i)})}r.gbox="#gbox_"+e.jgrid.jqID(j);var V=!1;r.closeOnEscape===!0&&(r.closeOnEscape=!1,V=!0);var Q=e("<div></div>").append(R).append(B);if(e.jgrid.createModal(x,Q,t[e(this)[0].p.id],"#gview_"+e.jgrid.jqID(g.p.id),e("#gbox_"+e.jgrid.jqID(g.p.id))[0]),O&&(e("#pData, #nData",y+"_2").css("float","right"),e(".EditButton",y+"_2").css("text-align","left")),t[g.p.id].topinfo&&e(".tinfo",y).show(),t[g.p.id].bottominfo&&e(".binfo",y+"_2").show(),Q=null,B=null,e("#"+e.jgrid.jqID(x.themodal)).keydown(function(i){var a=i.target;if(e("#"+b).data("disabled")===!0)return!1;if(t[g.p.id].savekey[0]===!0&&i.which===t[g.p.id].savekey[1]&&"TEXTAREA"!==a.tagName)return e("#sData",y+"_2").trigger("click"),!1;if(27===i.which)return p()?(V&&e.jgrid.hideModal("#"+e.jgrid.jqID(x.themodal),{gb:r.gbox,jqm:r.jqModal,onClose:t[g.p.id].onClose}),!1):!1;if(t[g.p.id].navkeys[0]===!0){if("_empty"===e("#id_g",y).val())return!0;if(i.which===t[g.p.id].navkeys[1])return e("#pData",y+"_2").trigger("click"),!1;if(i.which===t[g.p.id].navkeys[2])return e("#nData",y+"_2").trigger("click"),!1}}),r.checkOnUpdate&&(e("a.ui-jqdialog-titlebar-close span","#"+e.jgrid.jqID(x.themodal)).removeClass("jqmClose"),e("a.ui-jqdialog-titlebar-close","#"+e.jgrid.jqID(x.themodal)).unbind("click").click(function(){return p()?(e.jgrid.hideModal("#"+e.jgrid.jqID(x.themodal),{gb:"#gbox_"+e.jgrid.jqID(j),jqm:r.jqModal,onClose:t[g.p.id].onClose}),!1):!1})),r.saveicon=e.extend([!0,"left","ui-icon-disk"],r.saveicon),r.closeicon=e.extend([!0,"left","ui-icon-close"],r.closeicon),r.saveicon[0]===!0&&e("#sData",y+"_2").addClass("right"===r.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.saveicon[2]+"'></span>"),r.closeicon[0]===!0&&e("#cData",y+"_2").addClass("right"===r.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.closeicon[2]+"'></span>"),t[g.p.id].checkOnSubmit||t[g.p.id].checkOnUpdate){z="<a id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+r.bYes+"</a>",T="<a id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+r.bNo+"</a>",H="<a id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+r.bExit+"</a>";var W=r.zIndex||999;W++,e("<div class='"+r.overlayClass+" jqgrid-overlay confirm' style='z-index:"+W+";display:none;'>&#160;</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(W+1)+"'>"+r.saveData+"<br/><br/>"+z+T+H+"</div>").insertAfter("#"+b),e("#sNew","#"+e.jgrid.jqID(x.themodal)).click(function(){return d(),e("#"+b).data("disabled",!1),e(".confirm","#"+e.jgrid.jqID(x.themodal)).hide(),!1}),e("#nNew","#"+e.jgrid.jqID(x.themodal)).click(function(){return e(".confirm","#"+e.jgrid.jqID(x.themodal)).hide(),e("#"+b).data("disabled",!1),setTimeout(function(){e(":input:visible","#"+b)[0].focus()},0),!1}),e("#cNew","#"+e.jgrid.jqID(x.themodal)).click(function(){return e(".confirm","#"+e.jgrid.jqID(x.themodal)).hide(),e("#"+b).data("disabled",!1),e.jgrid.hideModal("#"+e.jgrid.jqID(x.themodal),{gb:"#gbox_"+e.jgrid.jqID(j),jqm:r.jqModal,onClose:t[g.p.id].onClose}),!1})}e(g).triggerHandler("jqGridAddEditInitializeForm",[e("#"+b),v]),$&&$.call(g,e("#"+b),v),"_empty"!==i&&t[g.p.id].viewPagerButtons?e("#pData,#nData",y+"_2").show():e("#pData,#nData",y+"_2").hide(),e(g).triggerHandler("jqGridAddEditBeforeShowForm",[e("#"+b),v]),q&&q.call(g,e("#"+b),v),e("#"+e.jgrid.jqID(x.themodal)).data("onClose",t[g.p.id].onClose),e.jgrid.viewModal("#"+e.jgrid.jqID(x.themodal),{gbox:"#gbox_"+e.jgrid.jqID(j),jqm:r.jqModal,overlay:r.overlay,modal:r.modal,overlayClass:r.overlayClass,onHide:function(t){e(g).data("formProp",{top:parseFloat(e(t.w).css("top")),left:parseFloat(e(t.w).css("left")),width:e(t.w).width(),height:e(t.w).height(),dataheight:e("#"+b).height(),datawidth:e("#"+b).width()}),t.w.remove(),t.o&&t.o.remove()}}),F||e("."+e.jgrid.jqID(r.overlayClass)).click(function(){return p()?(e.jgrid.hideModal("#"+e.jgrid.jqID(x.themodal),{gb:"#gbox_"+e.jgrid.jqID(j),jqm:r.jqModal,onClose:t[g.p.id].onClose}),!1):!1}),e(".fm-button","#"+e.jgrid.jqID(x.themodal)).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),e("#sData",y+"_2").click(function(){return f={},e("#FormError",y).hide(),a(),"_empty"===f[g.p.id+"_id"]?d():r.checkOnSubmit===!0?(m=l(f,t[g.p.id]._savedData),m?(e("#"+b).data("disabled",!0),e(".confirm","#"+e.jgrid.jqID(x.themodal)).show()):d()):d(),!1}),e("#cData",y+"_2").click(function(){return p()?(e.jgrid.hideModal("#"+e.jgrid.jqID(x.themodal),{gb:"#gbox_"+e.jgrid.jqID(j),jqm:r.jqModal,onClose:t[g.p.id].onClose}),!1):!1}),e("#nData",y+"_2").click(function(){if(!p())return!1;e("#FormError",y).hide();var t=h();if(t[0]=parseInt(t[0],10),-1!==t[0]&&t[1][t[0]+1]){e(g).triggerHandler("jqGridAddEditClickPgButtons",["next",e("#"+b),t[1][t[0]]]);var i;if(e.isFunction(r.onclickPgButtons)&&(i=r.onclickPgButtons.call(g,"next",e("#"+b),t[1][t[0]]),void 0!==i&&i===!1))return!1;if(e("#"+e.jgrid.jqID(t[1][t[0]+1])).hasClass("ui-state-disabled"))return!1;s(t[1][t[0]+1],g,b),e(g).jqGrid("setSelection",t[1][t[0]+1]),e(g).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",e("#"+b),t[1][t[0]]]),e.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(g,"next",e("#"+b),t[1][t[0]+1]),u(t[0]+1,t)}return!1}),e("#pData",y+"_2").click(function(){if(!p())return!1;e("#FormError",y).hide();var t=h();if(-1!==t[0]&&t[1][t[0]-1]){e(g).triggerHandler("jqGridAddEditClickPgButtons",["prev",e("#"+b),t[1][t[0]]]);var i;if(e.isFunction(r.onclickPgButtons)&&(i=r.onclickPgButtons.call(g,"prev",e("#"+b),t[1][t[0]]),void 0!==i&&i===!1))return!1;if(e("#"+e.jgrid.jqID(t[1][t[0]-1])).hasClass("ui-state-disabled"))return!1;s(t[1][t[0]-1],g,b),e(g).jqGrid("setSelection",t[1][t[0]-1]),e(g).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",e("#"+b),t[1][t[0]]]),e.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(g,"prev",e("#"+b),t[1][t[0]-1]),u(t[0]-1,t)}return!1}),e(g).triggerHandler("jqGridAddEditAfterShowForm",[e("#"+b),v]),D&&D.call(g,e("#"+b),v);var U=h();u(U[0],U)}}})},viewGridRow:function(i,r){return r=e.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1},e.jgrid.view,r||{}),t[e(this)[0].p.id]=r,this.each(function(){function a(){(t[l.p.id].closeOnEscape===!0||t[l.p.id].navkeys[0]===!0)&&setTimeout(function(){e(".ui-jqdialog-titlebar-close","#"+e.jgrid.jqID(f.modalhead)).focus()},0)}function o(t,i,a,o){var s,n,d,l,p,c,u,h,g,f=0,m=[],v=!1,j="<td class='CaptionTD form-view-label ui-widget-content' width='"+r.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",b="",w="<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>",y=["integer","number","currency"],x=0,q=0;for(c=1;o>=c;c++)b+=1===c?j:w;if(e(i.p.colModel).each(function(){n=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,n||"right"!==this.align||(this.formatter&&-1!==e.inArray(this.formatter,y)?x=Math.max(x,parseInt(this.width,10)):q=Math.max(q,parseInt(this.width,10)))}),u=0!==x?x:0!==q?q:0,v=e(i).jqGrid("getInd",t),e(i.p.colModel).each(function(t){if(s=this.name,h=!1,n=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,p=n?"style='display:none'":"",g="boolean"!=typeof this.viewable?!0:this.viewable,"cb"!==s&&"subgrid"!==s&&"rn"!==s&&g){l=v===!1?"":s===i.p.ExpandColumn&&i.p.treeGrid===!0?e("td:eq("+t+")",i.rows[v]).text():e("td:eq("+t+")",i.rows[v]).html(),h="right"===this.align&&0!==u?!0:!1;var r=e.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),c=parseInt(r.rowpos,10)||f+1,j=parseInt(2*(parseInt(r.colpos,10)||1),10);if(r.rowabove){var w=e("<tr><td class='contentinfo' colspan='"+2*o+"'>"+r.rowcontent+"</td></tr>");e(a).append(w),w[0].rp=c}d=e(a).find("tr[rowpos="+c+"]"),0===d.length&&(d=e("<tr "+p+" rowpos='"+c+"'></tr>").addClass("FormData").attr("id","trv_"+s),e(d).append(b),e(a).append(d),d[0].rp=c),e("td:eq("+(j-2)+")",d[0]).html("<b>"+(void 0===r.label?i.p.colNames[t]:r.label)+"</b>"),e("td:eq("+(j-1)+")",d[0]).append("<span>"+l+"</span>").attr("id","v_"+s),h&&e("td:eq("+(j-1)+") span",d[0]).css({"text-align":"right",width:u+"px"}),m[f]=t,f++}}),f>0){var D=e("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*o-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+t+"'/></td></tr>");D[0].rp=f+99,e(a).append(D)}return m}function s(t,i){var r,a,o,s,n=0;s=e(i).jqGrid("getInd",t,!0),s&&(e("td",s).each(function(t){r=i.p.colModel[t].name,a=i.p.colModel[t].editrules&&i.p.colModel[t].editrules.edithidden===!0?!1:i.p.colModel[t].hidden===!0?!0:!1,"cb"!==r&&"subgrid"!==r&&"rn"!==r&&(o=r===i.p.ExpandColumn&&i.p.treeGrid===!0?e(this).text():e(this).html(),r=e.jgrid.jqID("v_"+r),e("#"+r+" span","#"+u).html(o),a&&e("#"+r,"#"+u).parents("tr:first").hide(),n++)}),n>0&&e("#id_g","#"+u).val(t))}function n(t,i){var r=i[1].length-1;0===t?e("#pData","#"+u+"_2").addClass("ui-state-disabled"):void 0!==i[1][t-1]&&e("#"+e.jgrid.jqID(i[1][t-1])).hasClass("ui-state-disabled")?e("#pData",u+"_2").addClass("ui-state-disabled"):e("#pData","#"+u+"_2").removeClass("ui-state-disabled"),t===r?e("#nData","#"+u+"_2").addClass("ui-state-disabled"):void 0!==i[1][t+1]&&e("#"+e.jgrid.jqID(i[1][t+1])).hasClass("ui-state-disabled")?e("#nData",u+"_2").addClass("ui-state-disabled"):e("#nData","#"+u+"_2").removeClass("ui-state-disabled")}function d(){var t=e(l).jqGrid("getDataIDs"),i=e("#id_g","#"+u).val(),r=e.inArray(i,t);return[r,t]}var l=this;if(l.grid&&i){var p=l.p.id,c="ViewGrid_"+e.jgrid.jqID(p),u="ViewTbl_"+e.jgrid.jqID(p),h="ViewGrid_"+p,g="ViewTbl_"+p,f={themodal:"viewmod"+p,modalhead:"viewhd"+p,modalcontent:"viewcnt"+p,scrollelm:c},m=e.isFunction(t[l.p.id].beforeInitData)?t[l.p.id].beforeInitData:!1,v=!0,j=1,b=0;r.recreateForm||e(l).data("viewProp")&&e.extend(t[e(this)[0].p.id],e(l).data("viewProp"));var w=isNaN(t[e(this)[0].p.id].dataheight)?t[e(this)[0].p.id].dataheight:t[e(this)[0].p.id].dataheight+"px",y=isNaN(t[e(this)[0].p.id].datawidth)?t[e(this)[0].p.id].datawidth:t[e(this)[0].p.id].datawidth+"px",x=e("<form name='FormPost' id='"+h+"' class='FormGrid' style='width:"+y+";overflow:auto;position:relative;height:"+w+";'></form>"),q=e("<table id='"+g+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");if(m&&(v=m.call(l,e("#"+c)),void 0===v&&(v=!0)),v!==!1){e(l.p.colModel).each(function(){var e=this.formoptions;j=Math.max(j,e?e.colpos||0:0),b=Math.max(b,e?e.rowpos||0:0)}),e(x).append(q),o(i,l,q,j);var D="rtl"===l.p.direction?!0:!1,_=D?"nData":"pData",$=D?"pData":"nData",C="<a id='"+_+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",G="<a id='"+$+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",I="<a id='cData' class='fm-button ui-state-default ui-corner-all'>"+r.bClose+"</a>";if(b>0){var F=[];e.each(e(q)[0].rows,function(e,t){F[e]=t}),F.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),e.each(F,function(t,i){e("tbody",q).append(i)})}r.gbox="#gbox_"+e.jgrid.jqID(p);var k=e("<div></div>").append(x).append("<table border='0' class='EditTable' id='"+u+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+r.labelswidth+"'>"+(D?G+C:C+G)+"</td><td class='EditButton'>"+I+"</td></tr></tbody></table>");e.jgrid.createModal(f,k,r,"#gview_"+e.jgrid.jqID(l.p.id),e("#gview_"+e.jgrid.jqID(l.p.id))[0]),D&&(e("#pData, #nData","#"+u+"_2").css("float","right"),e(".EditButton","#"+u+"_2").css("text-align","left")),r.viewPagerButtons||e("#pData, #nData","#"+u+"_2").hide(),k=null,e("#"+f.themodal).keydown(function(i){if(27===i.which)return t[l.p.id].closeOnEscape&&e.jgrid.hideModal("#"+e.jgrid.jqID(f.themodal),{gb:r.gbox,jqm:r.jqModal,onClose:r.onClose}),!1;if(r.navkeys[0]===!0){if(i.which===r.navkeys[1])return e("#pData","#"+u+"_2").trigger("click"),!1;if(i.which===r.navkeys[2])return e("#nData","#"+u+"_2").trigger("click"),!1}}),r.closeicon=e.extend([!0,"left","ui-icon-close"],r.closeicon),r.closeicon[0]===!0&&e("#cData","#"+u+"_2").addClass("right"===r.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.closeicon[2]+"'></span>"),e.isFunction(r.beforeShowForm)&&r.beforeShowForm.call(l,e("#"+c)),e.jgrid.viewModal("#"+e.jgrid.jqID(f.themodal),{gbox:"#gbox_"+e.jgrid.jqID(p),jqm:r.jqModal,overlay:r.overlay,modal:r.modal,onHide:function(t){e(l).data("viewProp",{top:parseFloat(e(t.w).css("top")),left:parseFloat(e(t.w).css("left")),width:e(t.w).width(),height:e(t.w).height(),dataheight:e("#"+c).height(),datawidth:e("#"+c).width()}),t.w.remove(),t.o&&t.o.remove()}}),e(".fm-button:not(.ui-state-disabled)","#"+u+"_2").hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),a(),e("#cData","#"+u+"_2").click(function(){return e.jgrid.hideModal("#"+e.jgrid.jqID(f.themodal),{gb:"#gbox_"+e.jgrid.jqID(p),jqm:r.jqModal,onClose:r.onClose}),!1}),e("#nData","#"+u+"_2").click(function(){e("#FormError","#"+u).hide();var t=d();return t[0]=parseInt(t[0],10),-1!==t[0]&&t[1][t[0]+1]&&(e.isFunction(r.onclickPgButtons)&&r.onclickPgButtons.call(l,"next",e("#"+c),t[1][t[0]]),s(t[1][t[0]+1],l),e(l).jqGrid("setSelection",t[1][t[0]+1]),e.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(l,"next",e("#"+c),t[1][t[0]+1]),n(t[0]+1,t)),a(),!1}),e("#pData","#"+u+"_2").click(function(){e("#FormError","#"+u).hide();var t=d();return-1!==t[0]&&t[1][t[0]-1]&&(e.isFunction(r.onclickPgButtons)&&r.onclickPgButtons.call(l,"prev",e("#"+c),t[1][t[0]]),s(t[1][t[0]-1],l),e(l).jqGrid("setSelection",t[1][t[0]-1]),e.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(l,"prev",e("#"+c),t[1][t[0]-1]),n(t[0]-1,t)),a(),!1});var S=d();n(S[0],S)}}})},delGridRow:function(i,r){return r=e.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},e.jgrid.del,r||{}),t[e(this)[0].p.id]=r,this.each(function(){var a=this;if(a.grid&&i){var o,s,n,d,l=e.isFunction(t[a.p.id].beforeShowForm),p=e.isFunction(t[a.p.id].afterShowForm),c=e.isFunction(t[a.p.id].beforeInitData)?t[a.p.id].beforeInitData:!1,u=a.p.id,h={},g=!0,f="DelTbl_"+e.jgrid.jqID(u),m="DelTbl_"+u,v={themodal:"delmod"+u,modalhead:"delhd"+u,modalcontent:"delcnt"+u,scrollelm:f};if(e.isArray(i)&&(i=i.join()),void 0!==e("#"+e.jgrid.jqID(v.themodal))[0]){if(c&&(g=c.call(a,e("#"+f)),void 0===g&&(g=!0)),g===!1)return;e("#DelData>td","#"+f).text(i),e("#DelError","#"+f).hide(),t[a.p.id].processing===!0&&(t[a.p.id].processing=!1,e("#dData","#"+f).removeClass("ui-state-active")),l&&t[a.p.id].beforeShowForm.call(a,e("#"+f)),e.jgrid.viewModal("#"+e.jgrid.jqID(v.themodal),{gbox:"#gbox_"+e.jgrid.jqID(u),jqm:t[a.p.id].jqModal,jqM:!1,overlay:t[a.p.id].overlay,modal:t[a.p.id].modal}),p&&t[a.p.id].afterShowForm.call(a,e("#"+f))}else{var j=isNaN(t[a.p.id].dataheight)?t[a.p.id].dataheight:t[a.p.id].dataheight+"px",b=isNaN(r.datawidth)?r.datawidth:r.datawidth+"px",w="<div id='"+m+"' class='formdata' style='width:"+b+";overflow:auto;position:relative;height:"+j+";'>";w+="<table class='DelTable'><tbody>",w+="<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>",w+="<tr id='DelData' style='display:none'><td >"+i+"</td></tr>",w+='<tr><td class="delmsg" style="white-space:pre;">'+t[a.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>",w+="</tbody></table></div>";var y="<a id='dData' class='fm-button ui-state-default ui-corner-all'>"+r.bSubmit+"</a>",x="<a id='eData' class='fm-button ui-state-default ui-corner-all'>"+r.bCancel+"</a>";if(w+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+f+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+y+"&#160;"+x+"</td></tr></tbody></table>",r.gbox="#gbox_"+e.jgrid.jqID(u),e.jgrid.createModal(v,w,r,"#gview_"+e.jgrid.jqID(a.p.id),e("#gview_"+e.jgrid.jqID(a.p.id))[0]),c&&(g=c.call(a,e("#"+f)),void 0===g&&(g=!0)),g===!1)return;e(".fm-button","#"+f+"_2").hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),r.delicon=e.extend([!0,"left","ui-icon-scissors"],t[a.p.id].delicon),r.cancelicon=e.extend([!0,"left","ui-icon-cancel"],t[a.p.id].cancelicon),r.delicon[0]===!0&&e("#dData","#"+f+"_2").addClass("right"===r.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.delicon[2]+"'></span>"),r.cancelicon[0]===!0&&e("#eData","#"+f+"_2").addClass("right"===r.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.cancelicon[2]+"'></span>"),e("#dData","#"+f+"_2").click(function(){var i,l=[!0,""],p=e("#DelData>td","#"+f).text();if(h={},e.isFunction(t[a.p.id].onclickSubmit)&&(h=t[a.p.id].onclickSubmit.call(a,t[a.p.id],p)||{}),e.isFunction(t[a.p.id].beforeSubmit)&&(l=t[a.p.id].beforeSubmit.call(a,p)),l[0]&&!t[a.p.id].processing){if(t[a.p.id].processing=!0,n=a.p.prmNames,o=e.extend({},t[a.p.id].delData,h),d=n.oper,o[d]=n.deloper,s=n.id,p=String(p).split(","),!p.length)return!1;for(i in p)p.hasOwnProperty(i)&&(p[i]=e.jgrid.stripPref(a.p.idPrefix,p[i]));o[s]=p.join(),e(this).addClass("ui-state-active");var c=e.extend({url:t[a.p.id].url||e(a).jqGrid("getGridParam","editurl"),type:t[a.p.id].mtype,data:e.isFunction(t[a.p.id].serializeDelData)?t[a.p.id].serializeDelData.call(a,o):o,complete:function(i,s){var n;if(i.status>=300&&304!==i.status?(l[0]=!1,l[1]=e.isFunction(t[a.p.id].errorTextFormat)?t[a.p.id].errorTextFormat.call(a,i):s+" Status: '"+i.statusText+"'. Error code: "+i.status):e.isFunction(t[a.p.id].afterSubmit)&&(l=t[a.p.id].afterSubmit.call(a,i,o)),l[0]===!1)e("#DelError>td","#"+f).html(l[1]),e("#DelError","#"+f).show();else{if(t[a.p.id].reloadAfterSubmit&&"local"!==a.p.datatype)e(a).trigger("reloadGrid");
else{if(a.p.treeGrid===!0)try{e(a).jqGrid("delTreeNode",a.p.idPrefix+p[0])}catch(d){}else for(n=0;n<p.length;n++)e(a).jqGrid("delRowData",a.p.idPrefix+p[n]);a.p.selrow=null,a.p.selarrrow=[]}e.isFunction(t[a.p.id].afterComplete)&&setTimeout(function(){t[a.p.id].afterComplete.call(a,i,p)},500)}t[a.p.id].processing=!1,e("#dData","#"+f+"_2").removeClass("ui-state-active"),l[0]&&e.jgrid.hideModal("#"+e.jgrid.jqID(v.themodal),{gb:"#gbox_"+e.jgrid.jqID(u),jqm:r.jqModal,onClose:t[a.p.id].onClose})}},e.jgrid.ajaxOptions,t[a.p.id].ajaxDelOptions);if(c.url||t[a.p.id].useDataProxy||(e.isFunction(a.p.dataProxy)?t[a.p.id].useDataProxy=!0:(l[0]=!1,l[1]+=" "+e.jgrid.errors.nourl)),l[0])if(t[a.p.id].useDataProxy){var g=a.p.dataProxy.call(a,c,"del_"+a.p.id);void 0===g&&(g=[!0,""]),g[0]===!1?(l[0]=!1,l[1]=g[1]||"Error deleting the selected row!"):e.jgrid.hideModal("#"+e.jgrid.jqID(v.themodal),{gb:"#gbox_"+e.jgrid.jqID(u),jqm:r.jqModal,onClose:t[a.p.id].onClose})}else e.ajax(c)}return l[0]===!1&&(e("#DelError>td","#"+f).html(l[1]),e("#DelError","#"+f).show()),!1}),e("#eData","#"+f+"_2").click(function(){return e.jgrid.hideModal("#"+e.jgrid.jqID(v.themodal),{gb:"#gbox_"+e.jgrid.jqID(u),jqm:t[a.p.id].jqModal,onClose:t[a.p.id].onClose}),!1}),l&&t[a.p.id].beforeShowForm.call(a,e("#"+f)),e.jgrid.viewModal("#"+e.jgrid.jqID(v.themodal),{gbox:"#gbox_"+e.jgrid.jqID(u),jqm:t[a.p.id].jqModal,overlay:t[a.p.id].overlay,modal:t[a.p.id].modal}),p&&t[a.p.id].afterShowForm.call(a,e("#"+f))}t[a.p.id].closeOnEscape===!0&&setTimeout(function(){e(".ui-jqdialog-titlebar-close","#"+e.jgrid.jqID(v.modalhead)).focus()},0)}})},navGrid:function(t,i,r,a,o,s,n){return i=e.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",refresh:!0,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},e.jgrid.nav,i||{}),this.each(function(){if(!this.nav){var d,l,p={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},c=this;if(c.grid&&"string"==typeof t){void 0===e("#"+p.themodal)[0]&&(i.alerttop||i.alertleft||(void 0!==window.innerWidth?(i.alertleft=window.innerWidth,i.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(i.alertleft=document.documentElement.clientWidth,i.alerttop=document.documentElement.clientHeight):(i.alertleft=1024,i.alerttop=768),i.alertleft=i.alertleft/2-parseInt(i.alertwidth,10)/2,i.alerttop=i.alerttop/2-25),e.jgrid.createModal(p,"<div>"+i.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+e.jgrid.jqID(c.p.id),jqModal:!0,drag:!0,resize:!0,caption:i.alertcap,top:i.alerttop,left:i.alertleft,width:i.alertwidth,height:i.alertheight,closeOnEscape:i.closeOnEscape,zIndex:i.alertzIndex},"#gview_"+e.jgrid.jqID(c.p.id),e("#gbox_"+e.jgrid.jqID(c.p.id))[0],!0));var u,h=1,g=function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},f=function(){e(this).removeClass("ui-state-hover")};for(i.cloneToTop&&c.p.toppager&&(h=2),u=0;h>u;u++){var m,v,j,b=e("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),w="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>";0===u?(v=t,j=c.p.id,v===c.p.toppager&&(j+="_top",h=1)):(v=c.p.toppager,j=c.p.id+"_top"),"rtl"===c.p.direction&&e(b).attr("dir","rtl").css("float","right"),i.add&&(a=a||{},m=e("<td class='ui-pg-button ui-corner-all'></td>"),e(m).append("<div class='ui-pg-div'><span class='ui-icon "+i.addicon+"'></span>"+i.addtext+"</div>"),e("tr",b).append(m),e(m,b).attr({title:i.addtitle||"",id:a.id||"add_"+j}).click(function(){return e(this).hasClass("ui-state-disabled")||(e.isFunction(i.addfunc)?i.addfunc.call(c):e(c).jqGrid("editGridRow","new",a)),!1}).hover(g,f),m=null),i.edit&&(m=e("<td class='ui-pg-button ui-corner-all'></td>"),r=r||{},e(m).append("<div class='ui-pg-div'><span class='ui-icon "+i.editicon+"'></span>"+i.edittext+"</div>"),e("tr",b).append(m),e(m,b).attr({title:i.edittitle||"",id:r.id||"edit_"+j}).click(function(){if(!e(this).hasClass("ui-state-disabled")){var t=c.p.selrow;t?e.isFunction(i.editfunc)?i.editfunc.call(c,t):e(c).jqGrid("editGridRow",t,r):(e.jgrid.viewModal("#"+p.themodal,{gbox:"#gbox_"+e.jgrid.jqID(c.p.id),jqm:!0}),e("#jqg_alrt").focus())}return!1}).hover(g,f),m=null),i.view&&(m=e("<td class='ui-pg-button ui-corner-all'></td>"),n=n||{},e(m).append("<div class='ui-pg-div'><span class='ui-icon "+i.viewicon+"'></span>"+i.viewtext+"</div>"),e("tr",b).append(m),e(m,b).attr({title:i.viewtitle||"",id:n.id||"view_"+j}).click(function(){if(!e(this).hasClass("ui-state-disabled")){var t=c.p.selrow;t?e.isFunction(i.viewfunc)?i.viewfunc.call(c,t):e(c).jqGrid("viewGridRow",t,n):(e.jgrid.viewModal("#"+p.themodal,{gbox:"#gbox_"+e.jgrid.jqID(c.p.id),jqm:!0}),e("#jqg_alrt").focus())}return!1}).hover(g,f),m=null),i.del&&(m=e("<td class='ui-pg-button ui-corner-all'></td>"),o=o||{},e(m).append("<div class='ui-pg-div'><span class='ui-icon "+i.delicon+"'></span>"+i.deltext+"</div>"),e("tr",b).append(m),e(m,b).attr({title:i.deltitle||"",id:o.id||"del_"+j}).click(function(){if(!e(this).hasClass("ui-state-disabled")){var t;c.p.multiselect?(t=c.p.selarrrow,0===t.length&&(t=null)):t=c.p.selrow,t?e.isFunction(i.delfunc)?i.delfunc.call(c,t):e(c).jqGrid("delGridRow",t,o):(e.jgrid.viewModal("#"+p.themodal,{gbox:"#gbox_"+e.jgrid.jqID(c.p.id),jqm:!0}),e("#jqg_alrt").focus())}return!1}).hover(g,f),m=null),(i.add||i.edit||i.del||i.view)&&e("tr",b).append(w),i.search&&(m=e("<td class='ui-pg-button ui-corner-all'></td>"),s=s||{},e(m).append("<div class='ui-pg-div'><span class='ui-icon "+i.searchicon+"'></span>"+i.searchtext+"</div>"),e("tr",b).append(m),e(m,b).attr({title:i.searchtitle||"",id:s.id||"search_"+j}).click(function(){return e(this).hasClass("ui-state-disabled")||(e.isFunction(i.searchfunc)?i.searchfunc.call(c,s):e(c).jqGrid("searchGrid",s)),!1}).hover(g,f),s.showOnLoad&&s.showOnLoad===!0&&e(m,b).click(),m=null),i.refresh&&(m=e("<td class='ui-pg-button ui-corner-all'></td>"),e(m).append("<div class='ui-pg-div'><span class='ui-icon "+i.refreshicon+"'></span>"+i.refreshtext+"</div>"),e("tr",b).append(m),e(m,b).attr({title:i.refreshtitle||"",id:"refresh_"+j}).click(function(){if(!e(this).hasClass("ui-state-disabled")){e.isFunction(i.beforeRefresh)&&i.beforeRefresh.call(c),c.p.search=!1,c.p.resetsearch=!0;try{var t=c.p.id;c.p.postData.filters="";try{e("#fbox_"+e.jgrid.jqID(t)).jqFilter("resetFilter")}catch(r){}e.isFunction(c.clearToolbar)&&c.clearToolbar.call(c,!1)}catch(a){}switch(i.refreshstate){case"firstpage":e(c).trigger("reloadGrid",[{page:1}]);break;case"current":e(c).trigger("reloadGrid",[{current:!0}])}e.isFunction(i.afterRefresh)&&i.afterRefresh.call(c)}return!1}).hover(g,f),m=null),l=e(".ui-jqgrid").css("font-size")||"11px",e("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+l+";visibility:hidden;' ></div>"),d=e(b).clone().appendTo("#testpg2").width(),e("#testpg2").remove(),e(v+"_"+i.position,v).append(b),c.p._nvtd&&(d>c.p._nvtd[0]&&(e(v+"_"+i.position,v).width(d),c.p._nvtd[0]=d),c.p._nvtd[1]=d),l=null,d=null,b=null,this.nav=!0}}}})},navButtonAdd:function(t,i){return i=e.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},i||{}),this.each(function(){if(this.grid){"string"==typeof t&&0!==t.indexOf("#")&&(t="#"+e.jgrid.jqID(t));var r=e(".navtable",t)[0],a=this;if(r){if(i.id&&void 0!==e("#"+e.jgrid.jqID(i.id),r)[0])return;var o=e("<td></td>");e(o).addClass("ui-pg-button ui-corner-all").append("NONE"===i.buttonicon.toString().toUpperCase()?"<div class='ui-pg-div'>"+i.caption+"</div>":"<div class='ui-pg-div'><span class='ui-icon "+i.buttonicon+"'></span>"+i.caption+"</div>"),i.id&&e(o).attr("id",i.id),"first"===i.position?0===r.rows[0].cells.length?e("tr",r).append(o):e("tr td:eq(0)",r).before(o):e("tr",r).append(o),e(o,r).attr("title",i.title||"").click(function(t){return e(this).hasClass("ui-state-disabled")||e.isFunction(i.onClickButton)&&i.onClickButton.call(a,t),!1}).hover(function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")})}}})},navSeparatorAdd:function(t,i){return i=e.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},i||{}),this.each(function(){if(this.grid){"string"==typeof t&&0!==t.indexOf("#")&&(t="#"+e.jgrid.jqID(t));var r=e(".navtable",t)[0];if(r){var a="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+i.sepclass+"'></span>"+i.sepcontent+"</td>";"first"===i.position?0===r.rows[0].cells.length?e("tr",r).append(a):e("tr td:eq(0)",r).before(a):e("tr",r).append(a)}}})},GridToForm:function(t,i){return this.each(function(){var r,a=this;if(a.grid){var o=e(a).jqGrid("getRowData",t);if(o)for(r in o)o.hasOwnProperty(r)&&(e("[name="+e.jgrid.jqID(r)+"]",i).is("input:radio")||e("[name="+e.jgrid.jqID(r)+"]",i).is("input:checkbox")?e("[name="+e.jgrid.jqID(r)+"]",i).each(function(){e(this).val()==o[r]?e(this)[a.p.useProp?"prop":"attr"]("checked",!0):e(this)[a.p.useProp?"prop":"attr"]("checked",!1)}):e("[name="+e.jgrid.jqID(r)+"]",i).val(o[r]))}})},FormToGrid:function(t,i,r,a){return this.each(function(){var o=this;if(o.grid){r||(r="set"),a||(a="first");var s=e(i).serializeArray(),n={};e.each(s,function(e,t){n[t.name]=t.value}),"add"===r?e(o).jqGrid("addRowData",t,n,a):"set"===r&&e(o).jqGrid("setRowData",t,n)}})}})}(jQuery),function(e){"use strict";e.jgrid.inlineEdit=e.jgrid.inlineEdit||{},e.jgrid.extend({editRow:function(t,i,r,a,o,s,n,d,l){var p={},c=e.makeArray(arguments).slice(1);return"object"===e.type(c[0])?p=c[0]:(void 0!==i&&(p.keys=i),e.isFunction(r)&&(p.oneditfunc=r),e.isFunction(a)&&(p.successfunc=a),void 0!==o&&(p.url=o),void 0!==s&&(p.extraparam=s),e.isFunction(n)&&(p.aftersavefunc=n),e.isFunction(d)&&(p.errorfunc=d),e.isFunction(l)&&(p.afterrestorefunc=l)),p=e.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},e.jgrid.inlineEdit,p),this.each(function(){var i,r,a,o,s,n,d=this,l=0,c=null,u={};d.grid&&(o=e(d).jqGrid("getInd",t,!0),o!==!1&&(n=e.isFunction(p.beforeEditRow)?p.beforeEditRow.call(d,p,t):void 0,void 0===n&&(n=!0),n&&(a=e(o).attr("editable")||"0","0"!==a||e(o).hasClass("not-editable-row")||(s=d.p.colModel,e('td[role="gridcell"]',o).each(function(a){i=s[a].name;var o=d.p.treeGrid===!0&&i===d.p.ExpandColumn;if(o)r=e("span:first",this).html();else try{r=e.unformat.call(d,this,{rowId:t,colModel:s[a]},a)}catch(n){r=s[a].edittype&&"textarea"===s[a].edittype?e(this).text():e(this).html()}if("cb"!==i&&"subgrid"!==i&&"rn"!==i&&(d.p.autoencode&&(r=e.jgrid.htmlDecode(r)),u[i]=r,s[a].editable===!0)){null===c&&(c=a),o?e("span:first",this).html(""):e(this).html("");var p=e.extend({},s[a].editoptions||{},{id:t+"_"+i,name:i});s[a].edittype||(s[a].edittype="text"),("&nbsp;"===r||"&#160;"===r||1===r.length&&160===r.charCodeAt(0))&&(r="");var h=e.jgrid.createEl.call(d,s[a].edittype,p,r,!0,e.extend({},e.jgrid.ajaxOptions,d.p.ajaxSelectOptions||{}));e(h).addClass("editable"),o?e("span:first",this).append(h):e(this).append(h),e.jgrid.bindEv.call(d,h,p),"select"===s[a].edittype&&void 0!==s[a].editoptions&&s[a].editoptions.multiple===!0&&void 0===s[a].editoptions.dataUrl&&e.jgrid.msie&&e(h).width(e(h).width()),l++}}),l>0&&(u.id=t,d.p.savedRow.push(u),e(o).attr("editable","1"),setTimeout(function(){e("td:eq("+c+") input",o).focus()},0),p.keys===!0&&e(o).bind("keydown",function(i){if(27===i.keyCode){if(e(d).jqGrid("restoreRow",t,p.afterrestorefunc),d.p._inlinenav)try{e(d).jqGrid("showAddEditButtons")}catch(r){}return!1}if(13===i.keyCode){var a=i.target;if("TEXTAREA"===a.tagName)return!0;if(e(d).jqGrid("saveRow",t,p)&&d.p._inlinenav)try{e(d).jqGrid("showAddEditButtons")}catch(o){}return!1}}),e(d).triggerHandler("jqGridInlineEditRow",[t,p]),e.isFunction(p.oneditfunc)&&p.oneditfunc.call(d,t))))))})},saveRow:function(t,i,r,a,o,s,n){var d=e.makeArray(arguments).slice(1),l={};"object"===e.type(d[0])?l=d[0]:(e.isFunction(i)&&(l.successfunc=i),void 0!==r&&(l.url=r),void 0!==a&&(l.extraparam=a),e.isFunction(o)&&(l.aftersavefunc=o),e.isFunction(s)&&(l.errorfunc=s),e.isFunction(n)&&(l.afterrestorefunc=n)),l=e.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},e.jgrid.inlineEdit,l);var p,c,u,h,g,f=!1,m=this[0],v={},j={},b={};if(!m.grid)return f;if(g=e(m).jqGrid("getInd",t,!0),g===!1)return f;var w=e.isFunction(l.beforeSaveRow)?l.beforeSaveRow.call(m,l,t):void 0;if(void 0===w&&(w=!0),w){if(c=e(g).attr("editable"),l.url=l.url||m.p.editurl,"1"===c){var y;if(e('td[role="gridcell"]',g).each(function(t){if(y=m.p.colModel[t],p=y.name,"cb"!==p&&"subgrid"!==p&&y.editable===!0&&"rn"!==p&&!e(this).hasClass("not-editable-cell")){switch(y.edittype){case"checkbox":var i=["Yes","No"];y.editoptions&&(i=y.editoptions.value.split(":")),v[p]=e("input",this).is(":checked")?i[0]:i[1];break;case"text":case"password":case"textarea":case"button":v[p]=e("input, textarea",this).val();break;case"select":if(y.editoptions.multiple){var r=e("select",this),a=[];v[p]=e(r).val(),v[p]=v[p]?v[p].join(","):"",e("select option:selected",this).each(function(t,i){a[t]=e(i).text()}),j[p]=a.join(",")}else v[p]=e("select option:selected",this).val(),j[p]=e("select option:selected",this).text();y.formatter&&"select"===y.formatter&&(j={});break;case"custom":try{if(!y.editoptions||!e.isFunction(y.editoptions.custom_value))throw"e1";if(v[p]=y.editoptions.custom_value.call(m,e(".customelement",this),"get"),void 0===v[p])throw"e2"}catch(o){"e1"===o&&e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,e.jgrid.edit.bClose),"e2"===o?e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.novalue,e.jgrid.edit.bClose):e.jgrid.info_dialog(e.jgrid.errors.errcap,o.message,e.jgrid.edit.bClose)}}if(h=e.jgrid.checkValues.call(m,v[p],t),h[0]===!1)return!1;m.p.autoencode&&(v[p]=e.jgrid.htmlEncode(v[p])),"clientArray"!==l.url&&y.editoptions&&y.editoptions.NullIfEmpty===!0&&""===v[p]&&(b[p]="null")}}),h[0]===!1){try{var x=e(m).jqGrid("getGridRowById",t),q=e.jgrid.findPos(x);e.jgrid.info_dialog(e.jgrid.errors.errcap,h[1],e.jgrid.edit.bClose,{left:q[0],top:q[1]+e(x).outerHeight()})}catch(D){alert(h[1])}return f}var _,$=m.p.prmNames,C=t;if(_=m.p.keyIndex===!1?$.id:m.p.colModel[m.p.keyIndex+(m.p.rownumbers===!0?1:0)+(m.p.multiselect===!0?1:0)+(m.p.subGrid===!0?1:0)].name,v){if(v[$.oper]=$.editoper,void 0===v[_]||""===v[_])v[_]=t;else if(g.id!==m.p.idPrefix+v[_]){var G=e.jgrid.stripPref(m.p.idPrefix,t);if(void 0!==m.p._index[G]&&(m.p._index[v[_]]=m.p._index[G],delete m.p._index[G]),t=m.p.idPrefix+v[_],e(g).attr("id",t),m.p.selrow===C&&(m.p.selrow=t),e.isArray(m.p.selarrrow)){var I=e.inArray(C,m.p.selarrrow);I>=0&&(m.p.selarrrow[I]=t)}if(m.p.multiselect){var F="jqg_"+m.p.id+"_"+t;e("input.cbox",g).attr("id",F).attr("name",F)}}void 0===m.p.inlineData&&(m.p.inlineData={}),v=e.extend({},v,m.p.inlineData,l.extraparam)}if("clientArray"===l.url){v=e.extend({},v,j),m.p.autoencode&&e.each(v,function(t,i){v[t]=e.jgrid.htmlDecode(i)});var k,S=e(m).jqGrid("setRowData",t,v);for(e(g).attr("editable","0"),k=0;k<m.p.savedRow.length;k++)if(String(m.p.savedRow[k].id)===String(C)){u=k;break}u>=0&&m.p.savedRow.splice(u,1),e(m).triggerHandler("jqGridInlineAfterSaveRow",[t,S,v,l]),e.isFunction(l.aftersavefunc)&&l.aftersavefunc.call(m,t,S,l),f=!0,e(g).removeClass("jqgrid-new-row").unbind("keydown")}else e("#lui_"+e.jgrid.jqID(m.p.id)).show(),b=e.extend({},v,b),b[_]=e.jgrid.stripPref(m.p.idPrefix,b[_]),e.ajax(e.extend({url:l.url,data:e.isFunction(m.p.serializeRowData)?m.p.serializeRowData.call(m,b):b,type:l.mtype,async:!1,complete:function(i,r){if(e("#lui_"+e.jgrid.jqID(m.p.id)).hide(),"success"===r){var a,o,s=!0;if(a=e(m).triggerHandler("jqGridInlineSuccessSaveRow",[i,t,l]),e.isArray(a)||(a=[!0,v]),a[0]&&e.isFunction(l.successfunc)&&(a=l.successfunc.call(m,i)),e.isArray(a)?(s=a[0],v=a[1]||v):s=a,s===!0){for(m.p.autoencode&&e.each(v,function(t,i){v[t]=e.jgrid.htmlDecode(i)}),v=e.extend({},v,j),e(m).jqGrid("setRowData",t,v),e(g).attr("editable","0"),o=0;o<m.p.savedRow.length;o++)if(String(m.p.savedRow[o].id)===String(t)){u=o;break}u>=0&&m.p.savedRow.splice(u,1),e(m).triggerHandler("jqGridInlineAfterSaveRow",[t,i,v,l]),e.isFunction(l.aftersavefunc)&&l.aftersavefunc.call(m,t,i),f=!0,e(g).removeClass("jqgrid-new-row").unbind("keydown")}else e(m).triggerHandler("jqGridInlineErrorSaveRow",[t,i,r,null,l]),e.isFunction(l.errorfunc)&&l.errorfunc.call(m,t,i,r,null),l.restoreAfterError===!0&&e(m).jqGrid("restoreRow",t,l.afterrestorefunc)}},error:function(i,r,a){if(e("#lui_"+e.jgrid.jqID(m.p.id)).hide(),e(m).triggerHandler("jqGridInlineErrorSaveRow",[t,i,r,a,l]),e.isFunction(l.errorfunc))l.errorfunc.call(m,t,i,r,a);else{var o=i.responseText||i.statusText;try{e.jgrid.info_dialog(e.jgrid.errors.errcap,'<div class="ui-state-error">'+o+"</div>",e.jgrid.edit.bClose,{buttonalign:"right"})}catch(s){alert(o)}}l.restoreAfterError===!0&&e(m).jqGrid("restoreRow",t,l.afterrestorefunc)}},e.jgrid.ajaxOptions,m.p.ajaxRowOptions||{}))}return f}},restoreRow:function(t,i){var r=e.makeArray(arguments).slice(1),a={};return"object"===e.type(r[0])?a=r[0]:e.isFunction(i)&&(a.afterrestorefunc=i),a=e.extend(!0,{},e.jgrid.inlineEdit,a),this.each(function(){var i,r,o=this,s=-1,n={};if(o.grid&&(i=e(o).jqGrid("getInd",t,!0),i!==!1)){var d=e.isFunction(a.beforeCancelRow)?a.beforeCancelRow.call(o,a,sr):void 0;if(void 0===d&&(d=!0),d){for(r=0;r<o.p.savedRow.length;r++)if(String(o.p.savedRow[r].id)===String(t)){s=r;break}if(s>=0){if(e.isFunction(e.fn.datepicker))try{e("input.hasDatepicker","#"+e.jgrid.jqID(i.id)).datepicker("hide")}catch(l){}e.each(o.p.colModel,function(){this.editable===!0&&o.p.savedRow[s].hasOwnProperty(this.name)&&(n[this.name]=o.p.savedRow[s][this.name])}),e(o).jqGrid("setRowData",t,n),e(i).attr("editable","0").unbind("keydown"),o.p.savedRow.splice(s,1),e("#"+e.jgrid.jqID(t),"#"+e.jgrid.jqID(o.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){e(o).jqGrid("delRowData",t),e(o).jqGrid("showAddEditButtons")},0)}e(o).triggerHandler("jqGridInlineAfterRestoreRow",[t]),e.isFunction(a.afterrestorefunc)&&a.afterrestorefunc.call(o,t)}}})},addRow:function(t){return t=e.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},t||{}),this.each(function(){if(this.grid){var i=this,r=e.isFunction(t.beforeAddRow)?t.beforeAddRow.call(i,t.addRowParams):void 0;if(void 0===r&&(r=!0),r)if(t.rowID=e.isFunction(t.rowID)?t.rowID.call(i,t):null!=t.rowID?t.rowID:e.jgrid.randId(),t.useDefValues===!0&&e(i.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var r=this.editoptions.defaultValue,a=e.isFunction(r)?r.call(i):r;t.initdata[this.name]=a}}),e(i).jqGrid("addRowData",t.rowID,t.initdata,t.position),t.rowID=i.p.idPrefix+t.rowID,e("#"+e.jgrid.jqID(t.rowID),"#"+e.jgrid.jqID(i.p.id)).addClass("jqgrid-new-row"),t.useFormatter)e("#"+e.jgrid.jqID(t.rowID)+" .ui-inline-edit","#"+e.jgrid.jqID(i.p.id)).click();else{var a=i.p.prmNames,o=a.oper;t.addRowParams.extraparam[o]=a.addoper,e(i).jqGrid("editRow",t.rowID,t.addRowParams),e(i).jqGrid("setSelection",t.rowID)}}})},inlineNav:function(t,i){return i=e.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},e.jgrid.nav,i||{}),this.each(function(){if(this.grid){var r,a=this,o=e.jgrid.jqID(a.p.id);if(a.p._inlinenav=!0,i.addParams.useFormatter===!0){var s,n=a.p.colModel;for(s=0;s<n.length;s++)if(n[s].formatter&&"actions"===n[s].formatter){if(n[s].formatoptions){var d={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},l=e.extend(d,n[s].formatoptions);i.addParams.addRowParams={keys:l.keys,oneditfunc:l.onEdit,successfunc:l.onSuccess,url:l.url,extraparam:l.extraparam,aftersavefunc:l.afterSave,errorfunc:l.onError,afterrestorefunc:l.afterRestore}}break}}i.add&&e(a).jqGrid("navButtonAdd",t,{caption:i.addtext,title:i.addtitle,buttonicon:i.addicon,id:a.p.id+"_iladd",onClickButton:function(){e(a).jqGrid("addRow",i.addParams),i.addParams.useFormatter||(e("#"+o+"_ilsave").removeClass("ui-state-disabled"),e("#"+o+"_ilcancel").removeClass("ui-state-disabled"),e("#"+o+"_iladd").addClass("ui-state-disabled"),e("#"+o+"_iledit").addClass("ui-state-disabled"))}}),i.edit&&e(a).jqGrid("navButtonAdd",t,{caption:i.edittext,title:i.edittitle,buttonicon:i.editicon,id:a.p.id+"_iledit",onClickButton:function(){var t=e(a).jqGrid("getGridParam","selrow");t?(e(a).jqGrid("editRow",t,i.editParams),e("#"+o+"_ilsave").removeClass("ui-state-disabled"),e("#"+o+"_ilcancel").removeClass("ui-state-disabled"),e("#"+o+"_iladd").addClass("ui-state-disabled"),e("#"+o+"_iledit").addClass("ui-state-disabled")):(e.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+o,jqm:!0}),e("#jqg_alrt").focus())}}),i.save&&(e(a).jqGrid("navButtonAdd",t,{caption:i.savetext||"",title:i.savetitle||"Save row",buttonicon:i.saveicon,id:a.p.id+"_ilsave",onClickButton:function(){var t=a.p.savedRow[0].id;if(t){var r=a.p.prmNames,s=r.oper,n=i.editParams;e("#"+e.jgrid.jqID(t),"#"+o).hasClass("jqgrid-new-row")?(i.addParams.addRowParams.extraparam[s]=r.addoper,n=i.addParams.addRowParams):(i.editParams.extraparam||(i.editParams.extraparam={}),i.editParams.extraparam[s]=r.editoper),e(a).jqGrid("saveRow",t,n)&&e(a).jqGrid("showAddEditButtons")}else e.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+o,jqm:!0}),e("#jqg_alrt").focus()}}),e("#"+o+"_ilsave").addClass("ui-state-disabled")),i.cancel&&(e(a).jqGrid("navButtonAdd",t,{caption:i.canceltext||"",title:i.canceltitle||"Cancel row editing",buttonicon:i.cancelicon,id:a.p.id+"_ilcancel",onClickButton:function(){var t=a.p.savedRow[0].id,r=i.editParams;t?(e("#"+e.jgrid.jqID(t),"#"+o).hasClass("jqgrid-new-row")&&(r=i.addParams.addRowParams),e(a).jqGrid("restoreRow",t,r),e(a).jqGrid("showAddEditButtons")):(e.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+o,jqm:!0}),e("#jqg_alrt").focus())}}),e("#"+o+"_ilcancel").addClass("ui-state-disabled")),i.restoreAfterSelect===!0&&(r=e.isFunction(a.p.beforeSelectRow)?a.p.beforeSelectRow:!1,a.p.beforeSelectRow=function(t,o){var s=!0;return a.p.savedRow.length>0&&a.p._inlinenav===!0&&t!==a.p.selrow&&null!==a.p.selrow&&(a.p.selrow===i.addParams.rowID?e(a).jqGrid("delRowData",a.p.selrow):e(a).jqGrid("restoreRow",a.p.selrow,i.editParams),e(a).jqGrid("showAddEditButtons")),r&&(s=r.call(a,t,o)),s})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var t=e.jgrid.jqID(this.p.id);e("#"+t+"_ilsave").addClass("ui-state-disabled"),e("#"+t+"_ilcancel").addClass("ui-state-disabled"),e("#"+t+"_iladd").removeClass("ui-state-disabled"),e("#"+t+"_iledit").removeClass("ui-state-disabled")}})}})}(jQuery),function(e){"use strict";e.jgrid.extend({editCell:function(t,i,r){return this.each(function(){var a,o,s,n,d=this;if(d.grid&&d.p.cellEdit===!0){if(i=parseInt(i,10),d.p.selrow=d.rows[t].id,d.p.knv||e(d).jqGrid("GridNav"),d.p.savedRow.length>0){if(r===!0&&t==d.p.iRow&&i==d.p.iCol)return;e(d).jqGrid("saveCell",d.p.savedRow[0].id,d.p.savedRow[0].ic)}else window.setTimeout(function(){e("#"+e.jgrid.jqID(d.p.knv)).attr("tabindex","-1").focus()},0);if(n=d.p.colModel[i],a=n.name,"subgrid"!==a&&"cb"!==a&&"rn"!==a){if(s=e("td:eq("+i+")",d.rows[t]),n.editable!==!0||r!==!0||s.hasClass("not-editable-cell"))parseInt(d.p.iCol,10)>=0&&parseInt(d.p.iRow,10)>=0&&(e("td:eq("+d.p.iCol+")",d.rows[d.p.iRow]).removeClass("edit-cell ui-state-highlight"),e(d.rows[d.p.iRow]).removeClass("selected-row ui-state-hover")),s.addClass("edit-cell ui-state-highlight"),e(d.rows[t]).addClass("selected-row ui-state-hover"),o=s.html().replace(/\&#160\;/gi,""),e(d).triggerHandler("jqGridSelectCell",[d.rows[t].id,a,o,t,i]),e.isFunction(d.p.onSelectCell)&&d.p.onSelectCell.call(d,d.rows[t].id,a,o,t,i);else{parseInt(d.p.iCol,10)>=0&&parseInt(d.p.iRow,10)>=0&&(e("td:eq("+d.p.iCol+")",d.rows[d.p.iRow]).removeClass("edit-cell ui-state-highlight"),e(d.rows[d.p.iRow]).removeClass("selected-row ui-state-hover")),e(s).addClass("edit-cell ui-state-highlight"),e(d.rows[t]).addClass("selected-row ui-state-hover");try{o=e.unformat.call(d,s,{rowId:d.rows[t].id,colModel:n},i)}catch(l){o=n.edittype&&"textarea"===n.edittype?e(s).text():e(s).html()}if(d.p.autoencode&&(o=e.jgrid.htmlDecode(o)),n.edittype||(n.edittype="text"),d.p.savedRow.push({id:t,ic:i,name:a,v:o}),("&nbsp;"===o||"&#160;"===o||1===o.length&&160===o.charCodeAt(0))&&(o=""),e.isFunction(d.p.formatCell)){var p=d.p.formatCell.call(d,d.rows[t].id,a,o,t,i);void 0!==p&&(o=p)}e(d).triggerHandler("jqGridBeforeEditCell",[d.rows[t].id,a,o,t,i]),e.isFunction(d.p.beforeEditCell)&&d.p.beforeEditCell.call(d,d.rows[t].id,a,o,t,i);var c=e.extend({},n.editoptions||{},{id:t+"_"+a,name:a}),u=e.jgrid.createEl.call(d,n.edittype,c,o,!0,e.extend({},e.jgrid.ajaxOptions,d.p.ajaxSelectOptions||{}));e(s).html("").append(u).attr("tabindex","0"),e.jgrid.bindEv.call(d,u,c),window.setTimeout(function(){e(u).focus()},0),e("input, select, textarea",s).bind("keydown",function(r){if(27===r.keyCode&&(e("input.hasDatepicker",s).length>0?e(".ui-datepicker").is(":hidden")?e(d).jqGrid("restoreCell",t,i):e("input.hasDatepicker",s).datepicker("hide"):e(d).jqGrid("restoreCell",t,i)),13===r.keyCode)return e(d).jqGrid("saveCell",t,i),!1;if(9===r.keyCode){if(d.grid.hDiv.loading)return!1;r.shiftKey?e(d).jqGrid("prevCell",t,i):e(d).jqGrid("nextCell",t,i)}r.stopPropagation()}),e(d).triggerHandler("jqGridAfterEditCell",[d.rows[t].id,a,o,t,i]),e.isFunction(d.p.afterEditCell)&&d.p.afterEditCell.call(d,d.rows[t].id,a,o,t,i)}d.p.iCol=i,d.p.iRow=t}}})},saveCell:function(t,i){return this.each(function(){var r,a=this;if(a.grid&&a.p.cellEdit===!0){if(r=a.p.savedRow.length>=1?0:null,null!==r){var o,s,n=e("td:eq("+i+")",a.rows[t]),d=a.p.colModel[i],l=d.name,p=e.jgrid.jqID(l);switch(d.edittype){case"select":if(d.editoptions.multiple){var c=e("#"+t+"_"+p,a.rows[t]),u=[];o=e(c).val(),o?o.join(","):o="",e("option:selected",c).each(function(t,i){u[t]=e(i).text()}),s=u.join(",")}else o=e("#"+t+"_"+p+" option:selected",a.rows[t]).val(),s=e("#"+t+"_"+p+" option:selected",a.rows[t]).text();d.formatter&&(s=o);break;case"checkbox":var h=["Yes","No"];d.editoptions&&(h=d.editoptions.value.split(":")),o=e("#"+t+"_"+p,a.rows[t]).is(":checked")?h[0]:h[1],s=o;break;case"password":case"text":case"textarea":case"button":o=e("#"+t+"_"+p,a.rows[t]).val(),s=o;break;case"custom":try{if(!d.editoptions||!e.isFunction(d.editoptions.custom_value))throw"e1";if(o=d.editoptions.custom_value.call(a,e(".customelement",n),"get"),void 0===o)throw"e2";s=o}catch(g){"e1"===g&&e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,e.jgrid.edit.bClose),"e2"===g?e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.novalue,e.jgrid.edit.bClose):e.jgrid.info_dialog(e.jgrid.errors.errcap,g.message,e.jgrid.edit.bClose)}}if(s!==a.p.savedRow[r].v){var f=e(a).triggerHandler("jqGridBeforeSaveCell",[a.rows[t].id,l,o,t,i]);if(f&&(o=f,s=f),e.isFunction(a.p.beforeSaveCell)){var m=a.p.beforeSaveCell.call(a,a.rows[t].id,l,o,t,i);m&&(o=m,s=m)}var v=e.jgrid.checkValues.call(a,o,i);if(v[0]===!0){var j=e(a).triggerHandler("jqGridBeforeSubmitCell",[a.rows[t].id,l,o,t,i])||{};if(e.isFunction(a.p.beforeSubmitCell)&&(j=a.p.beforeSubmitCell.call(a,a.rows[t].id,l,o,t,i),j||(j={})),e("input.hasDatepicker",n).length>0&&e("input.hasDatepicker",n).datepicker("hide"),"remote"===a.p.cellsubmit)if(a.p.cellurl){var b={};a.p.autoencode&&(o=e.jgrid.htmlEncode(o)),b[l]=o;var w,y,x;x=a.p.prmNames,w=x.id,y=x.oper,b[w]=e.jgrid.stripPref(a.p.idPrefix,a.rows[t].id),b[y]=x.editoper,b=e.extend(j,b),e("#lui_"+e.jgrid.jqID(a.p.id)).show(),a.grid.hDiv.loading=!0,e.ajax(e.extend({url:a.p.cellurl,data:e.isFunction(a.p.serializeCellData)?a.p.serializeCellData.call(a,b):b,type:"POST",complete:function(r,d){if(e("#lui_"+a.p.id).hide(),a.grid.hDiv.loading=!1,"success"===d){var p=e(a).triggerHandler("jqGridAfterSubmitCell",[a,r,b.id,l,o,t,i])||[!0,""];p[0]===!0&&e.isFunction(a.p.afterSubmitCell)&&(p=a.p.afterSubmitCell.call(a,r,b.id,l,o,t,i)),p[0]===!0?(e(n).empty(),e(a).jqGrid("setCell",a.rows[t].id,i,s,!1,!1,!0),e(n).addClass("dirty-cell"),e(a.rows[t]).addClass("edited"),e(a).triggerHandler("jqGridAfterSaveCell",[a.rows[t].id,l,o,t,i]),e.isFunction(a.p.afterSaveCell)&&a.p.afterSaveCell.call(a,a.rows[t].id,l,o,t,i),a.p.savedRow.splice(0,1)):(e.jgrid.info_dialog(e.jgrid.errors.errcap,p[1],e.jgrid.edit.bClose),e(a).jqGrid("restoreCell",t,i))}},error:function(r,o,s){e("#lui_"+e.jgrid.jqID(a.p.id)).hide(),a.grid.hDiv.loading=!1,e(a).triggerHandler("jqGridErrorCell",[r,o,s]),e.isFunction(a.p.errorCell)?(a.p.errorCell.call(a,r,o,s),e(a).jqGrid("restoreCell",t,i)):(e.jgrid.info_dialog(e.jgrid.errors.errcap,r.status+" : "+r.statusText+"<br/>"+o,e.jgrid.edit.bClose),e(a).jqGrid("restoreCell",t,i))}},e.jgrid.ajaxOptions,a.p.ajaxCellOptions||{}))}else try{e.jgrid.info_dialog(e.jgrid.errors.errcap,e.jgrid.errors.nourl,e.jgrid.edit.bClose),e(a).jqGrid("restoreCell",t,i)}catch(g){}"clientArray"===a.p.cellsubmit&&(e(n).empty(),e(a).jqGrid("setCell",a.rows[t].id,i,s,!1,!1,!0),e(n).addClass("dirty-cell"),e(a.rows[t]).addClass("edited"),e(a).triggerHandler("jqGridAfterSaveCell",[a.rows[t].id,l,o,t,i]),e.isFunction(a.p.afterSaveCell)&&a.p.afterSaveCell.call(a,a.rows[t].id,l,o,t,i),a.p.savedRow.splice(0,1))}else try{window.setTimeout(function(){e.jgrid.info_dialog(e.jgrid.errors.errcap,o+" "+v[1],e.jgrid.edit.bClose)},100),e(a).jqGrid("restoreCell",t,i)}catch(g){}}else e(a).jqGrid("restoreCell",t,i)}window.setTimeout(function(){e("#"+e.jgrid.jqID(a.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(t,i){return this.each(function(){var r,a=this;if(a.grid&&a.p.cellEdit===!0){if(r=a.p.savedRow.length>=1?0:null,null!==r){var o=e("td:eq("+i+")",a.rows[t]);if(e.isFunction(e.fn.datepicker))try{e("input.hasDatepicker",o).datepicker("hide")}catch(s){}e(o).empty().attr("tabindex","-1"),e(a).jqGrid("setCell",a.rows[t].id,i,a.p.savedRow[r].v,!1,!1,!0),e(a).triggerHandler("jqGridAfterRestoreCell",[a.rows[t].id,a.p.savedRow[r].v,t,i]),e.isFunction(a.p.afterRestoreCell)&&a.p.afterRestoreCell.call(a,a.rows[t].id,a.p.savedRow[r].v,t,i),a.p.savedRow.splice(0,1)}window.setTimeout(function(){e("#"+a.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(t,i){return this.each(function(){var r,a=this,o=!1;if(a.grid&&a.p.cellEdit===!0){for(r=i+1;r<a.p.colModel.length;r++)if(a.p.colModel[r].editable===!0){o=r;break}o!==!1?e(a).jqGrid("editCell",t,o,!0):a.p.savedRow.length>0&&e(a).jqGrid("saveCell",t,i)}})},prevCell:function(t,i){return this.each(function(){var r,a=this,o=!1;if(a.grid&&a.p.cellEdit===!0){for(r=i-1;r>=0;r--)if(a.p.colModel[r].editable===!0){o=r;break}o!==!1?e(a).jqGrid("editCell",t,o,!0):a.p.savedRow.length>0&&e(a).jqGrid("saveCell",t,i)}})},GridNav:function(){return this.each(function(){function t(t,i,a){if("v"===a.substr(0,1)){var o=e(r.grid.bDiv)[0].clientHeight,s=e(r.grid.bDiv)[0].scrollTop,n=r.rows[t].offsetTop+r.rows[t].clientHeight,d=r.rows[t].offsetTop;"vd"===a&&n>=o&&(e(r.grid.bDiv)[0].scrollTop=e(r.grid.bDiv)[0].scrollTop+r.rows[t].clientHeight),"vu"===a&&s>d&&(e(r.grid.bDiv)[0].scrollTop=e(r.grid.bDiv)[0].scrollTop-r.rows[t].clientHeight)
}if("h"===a){var l=e(r.grid.bDiv)[0].clientWidth,p=e(r.grid.bDiv)[0].scrollLeft,c=r.rows[t].cells[i].offsetLeft+r.rows[t].cells[i].clientWidth,u=r.rows[t].cells[i].offsetLeft;c>=l+parseInt(p,10)?e(r.grid.bDiv)[0].scrollLeft=e(r.grid.bDiv)[0].scrollLeft+r.rows[t].cells[i].clientWidth:p>u&&(e(r.grid.bDiv)[0].scrollLeft=e(r.grid.bDiv)[0].scrollLeft-r.rows[t].cells[i].clientWidth)}}function i(e,t){var i,a;if("lft"===t)for(i=e+1,a=e;a>=0;a--)if(r.p.colModel[a].hidden!==!0){i=a;break}if("rgt"===t)for(i=e-1,a=e;a<r.p.colModel.length;a++)if(r.p.colModel[a].hidden!==!0){i=a;break}return i}var r=this;if(r.grid&&r.p.cellEdit===!0){r.p.knv=r.p.id+"_kn";var a,o,s=e("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+r.p.knv+"'></div></div>");e(s).insertBefore(r.grid.cDiv),e("#"+r.p.knv).focus().keydown(function(s){switch(o=s.keyCode,"rtl"===r.p.direction&&(37===o?o=39:39===o&&(o=37)),o){case 38:r.p.iRow-1>0&&(t(r.p.iRow-1,r.p.iCol,"vu"),e(r).jqGrid("editCell",r.p.iRow-1,r.p.iCol,!1));break;case 40:r.p.iRow+1<=r.rows.length-1&&(t(r.p.iRow+1,r.p.iCol,"vd"),e(r).jqGrid("editCell",r.p.iRow+1,r.p.iCol,!1));break;case 37:r.p.iCol-1>=0&&(a=i(r.p.iCol-1,"lft"),t(r.p.iRow,a,"h"),e(r).jqGrid("editCell",r.p.iRow,a,!1));break;case 39:r.p.iCol+1<=r.p.colModel.length-1&&(a=i(r.p.iCol+1,"rgt"),t(r.p.iRow,a,"h"),e(r).jqGrid("editCell",r.p.iRow,a,!1));break;case 13:parseInt(r.p.iCol,10)>=0&&parseInt(r.p.iRow,10)>=0&&e(r).jqGrid("editCell",r.p.iRow,r.p.iCol,!0);break;default:return!0}return!1})}})},getChangedCells:function(t){var i=[];return t||(t="all"),this.each(function(){var r,a=this;a.grid&&a.p.cellEdit===!0&&e(a.rows).each(function(o){var s={};e(this).hasClass("edited")&&(e("td",this).each(function(i){if(r=a.p.colModel[i].name,"cb"!==r&&"subgrid"!==r)if("dirty"===t){if(e(this).hasClass("dirty-cell"))try{s[r]=e.unformat.call(a,this,{rowId:a.rows[o].id,colModel:a.p.colModel[i]},i)}catch(n){s[r]=e.jgrid.htmlDecode(e(this).html())}}else try{s[r]=e.unformat.call(a,this,{rowId:a.rows[o].id,colModel:a.p.colModel[i]},i)}catch(n){s[r]=e.jgrid.htmlDecode(e(this).html())}}),s.id=this.id,i.push(s))})}),i}})}(jQuery),function(e){"use strict";e.jgrid.extend({setSubGrid:function(){return this.each(function(){var t,i,r=this,a={plusicon:"ui-icon-plus",minusicon:"ui-icon-minus",openicon:"ui-icon-carat-1-sw",expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0};if(r.p.subGridOptions=e.extend(a,r.p.subGridOptions||{}),r.p.colNames.unshift(""),r.p.colModel.unshift({name:"subgrid",width:e.jgrid.cell_width?r.p.subGridWidth+r.p.cellLayout:r.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),t=r.p.subGridModel,t[0])for(t[0].align=e.extend([],t[0].align||[]),i=0;i<t[0].name.length;i++)t[0].align[i]=t[0].align[i]||"left"})},addSubGridCell:function(e,t){var i,r,a="";return this.each(function(){a=this.formatCol(e,t),r=this.p.id,i=this.p.subGridOptions.plusicon}),'<td role="gridcell" aria-describedby="'+r+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+a+"><a style='cursor:pointer;'><span class='ui-icon "+i+"'></span></a></td>"},addSubGrid:function(t,i){return this.each(function(){var r=this;if(r.grid){var a,o,s,n,d,l=function(t,i,a){var o=e("<td align='"+r.p.subGridModel[0].align[a]+"'></td>").html(i);e(t).append(o)},p=function(t,i){var a,o,s,n=e("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),d=e("<tr></tr>");for(o=0;o<r.p.subGridModel[0].name.length;o++)a=e("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+r.p.direction+"'></th>"),e(a).html(r.p.subGridModel[0].name[o]),e(a).width(r.p.subGridModel[0].width[o]),e(d).append(a);e(n).append(d),t&&(s=r.p.xmlReader.subgrid,e(s.root+" "+s.row,t).each(function(){if(d=e("<tr class='ui-widget-content ui-subtblcell'></tr>"),s.repeatitems===!0)e(s.cell,this).each(function(t){l(d,e(this).text()||"&#160;",t)});else{var t=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name;if(t)for(o=0;o<t.length;o++)l(d,e(t[o],this).text()||"&#160;",o)}e(n).append(d)}));var p=e("table:first",r.grid.bDiv).attr("id")+"_";return e("#"+e.jgrid.jqID(p+i)).append(n),r.grid.hDiv.loading=!1,e("#load_"+e.jgrid.jqID(r.p.id)).hide(),!1},c=function(t,i){var a,o,s,n,d,p,c=e("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),u=e("<tr></tr>");for(s=0;s<r.p.subGridModel[0].name.length;s++)a=e("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+r.p.direction+"'></th>"),e(a).html(r.p.subGridModel[0].name[s]),e(a).width(r.p.subGridModel[0].width[s]),e(u).append(a);if(e(c).append(u),t&&(d=r.p.jsonReader.subgrid,o=e.jgrid.getAccessor(t,d.root),void 0!==o))for(s=0;s<o.length;s++){if(n=o[s],u=e("<tr class='ui-widget-content ui-subtblcell'></tr>"),d.repeatitems===!0)for(d.cell&&(n=n[d.cell]),p=0;p<n.length;p++)l(u,n[p]||"&#160;",p);else{var h=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name;if(h.length)for(p=0;p<h.length;p++)l(u,n[h[p]]||"&#160;",p)}e(c).append(u)}var g=e("table:first",r.grid.bDiv).attr("id")+"_";return e("#"+e.jgrid.jqID(g+i)).append(c),r.grid.hDiv.loading=!1,e("#load_"+e.jgrid.jqID(r.p.id)).hide(),!1},u=function(t){var i,a,o,s;if(i=e(t).attr("id"),a={nd_:(new Date).getTime()},a[r.p.prmNames.subgridid]=i,!r.p.subGridModel[0])return!1;if(r.p.subGridModel[0].params)for(s=0;s<r.p.subGridModel[0].params.length;s++)for(o=0;o<r.p.colModel.length;o++)r.p.colModel[o].name===r.p.subGridModel[0].params[s]&&(a[r.p.colModel[o].name]=e("td:eq("+o+")",t).text().replace(/\&#160\;/gi,""));if(!r.grid.hDiv.loading)switch(r.grid.hDiv.loading=!0,e("#load_"+e.jgrid.jqID(r.p.id)).show(),r.p.subgridtype||(r.p.subgridtype=r.p.datatype),e.isFunction(r.p.subgridtype)?r.p.subgridtype.call(r,a):r.p.subgridtype=r.p.subgridtype.toLowerCase(),r.p.subgridtype){case"xml":case"json":e.ajax(e.extend({type:r.p.mtype,url:r.p.subGridUrl,dataType:r.p.subgridtype,data:e.isFunction(r.p.serializeSubGridData)?r.p.serializeSubGridData.call(r,a):a,complete:function(t){"xml"===r.p.subgridtype?p(t.responseXML,i):c(e.jgrid.parse(t.responseText),i),t=null}},e.jgrid.ajaxOptions,r.p.ajaxSubgridOptions||{}))}return!1},h=0;e.each(r.p.colModel,function(){(this.hidden===!0||"rn"===this.name||"cb"===this.name)&&h++});var g=r.rows.length,f=1;for(void 0!==i&&i>0&&(f=i,g=i+1);g>f;)e(r.rows[f]).hasClass("jqgrow")&&e(r.rows[f].cells[t]).bind("click",function(){var i=e(this).parent("tr")[0];if(d=i.nextSibling,e(this).hasClass("sgcollapsed")){if(o=r.p.id,a=i.id,r.p.subGridOptions.reloadOnExpand===!0||r.p.subGridOptions.reloadOnExpand===!1&&!e(d).hasClass("ui-subgrid")){if(s=t>=1?"<td colspan='"+t+"'>&#160;</td>":"",n=e(r).triggerHandler("jqGridSubGridBeforeExpand",[o+"_"+a,a]),n=n===!1||"stop"===n?!1:!0,n&&e.isFunction(r.p.subGridBeforeExpand)&&(n=r.p.subGridBeforeExpand.call(r,o+"_"+a,a)),n===!1)return!1;e(i).after("<tr role='row' class='ui-subgrid'>"+s+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+r.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(r.p.colNames.length-1-h,10)+"' class='ui-widget-content subgrid-data'><div id="+o+"_"+a+" class='tablediv'></div></td></tr>"),e(r).triggerHandler("jqGridSubGridRowExpanded",[o+"_"+a,a]),e.isFunction(r.p.subGridRowExpanded)?r.p.subGridRowExpanded.call(r,o+"_"+a,a):u(i)}else e(d).show();e(this).html("<a style='cursor:pointer;'><span class='ui-icon "+r.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded"),r.p.subGridOptions.selectOnExpand&&e(r).jqGrid("setSelection",a)}else if(e(this).hasClass("sgexpanded")){if(n=e(r).triggerHandler("jqGridSubGridRowColapsed",[o+"_"+a,a]),n=n===!1||"stop"===n?!1:!0,a=i.id,n&&e.isFunction(r.p.subGridRowColapsed)&&(n=r.p.subGridRowColapsed.call(r,o+"_"+a,a)),n===!1)return!1;r.p.subGridOptions.reloadOnExpand===!0?e(d).remove(".ui-subgrid"):e(d).hasClass("ui-subgrid")&&e(d).hide(),e(this).html("<a style='cursor:pointer;'><span class='ui-icon "+r.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed"),r.p.subGridOptions.selectOnCollapse&&e(r).jqGrid("setSelection",a)}return!1}),f++;r.p.subGridOptions.expandOnLoad===!0&&e(r.rows).filter(".jqgrow").each(function(t,i){e(i.cells[0]).click()}),r.subGridXml=function(e,t){p(e,t)},r.subGridJson=function(e,t){c(e,t)}}})},expandSubGridRow:function(t){return this.each(function(){var i=this;if((i.grid||t)&&i.p.subGrid===!0){var r=e(this).jqGrid("getInd",t,!0);if(r){var a=e("td.sgcollapsed",r)[0];a&&e(a).trigger("click")}}})},collapseSubGridRow:function(t){return this.each(function(){var i=this;if((i.grid||t)&&i.p.subGrid===!0){var r=e(this).jqGrid("getInd",t,!0);if(r){var a=e("td.sgexpanded",r)[0];a&&e(a).trigger("click")}}})},toggleSubGridRow:function(t){return this.each(function(){var i=this;if((i.grid||t)&&i.p.subGrid===!0){var r=e(this).jqGrid("getInd",t,!0);if(r){var a=e("td.sgcollapsed",r)[0];a?e(a).trigger("click"):(a=e("td.sgexpanded",r)[0],a&&e(a).trigger("click"))}}})}})}(jQuery),function(e){"use strict";e.jgrid.extend({setTreeNode:function(t,i){return this.each(function(){var r=this;if(r.grid&&r.p.treeGrid)for(var a,o,s,n,d,l,p,c,u=r.p.expColInd,h=r.p.treeReader.expanded_field,g=r.p.treeReader.leaf_field,f=r.p.treeReader.level_field,m=r.p.treeReader.icon_field,v=r.p.treeReader.loaded;i>t;){var j,b=e.jgrid.stripPref(r.p.idPrefix,r.rows[t].id),w=r.p._index[b];if(p=r.p.data[w],"nested"===r.p.treeGridModel&&(p[g]||(a=parseInt(p[r.p.treeReader.left_field],10),o=parseInt(p[r.p.treeReader.right_field],10),p[g]=o===a+1?"true":"false",r.rows[t].cells[r.p._treeleafpos].innerHTML=p[g])),s=parseInt(p[f],10),0===r.p.tree_root_level?(n=s+1,d=s):(n=s,d=s-1),l="<div class='tree-wrap tree-wrap-"+r.p.direction+"' style='width:"+18*n+"px;'>",l+="<div style='"+("rtl"===r.p.direction?"right:":"left:")+18*d+"px;' class='ui-icon ",void 0!==p[v]&&(p[v]="true"===p[v]||p[v]===!0?!0:!1),"true"===p[g]||p[g]===!0?(l+=(void 0!==p[m]&&""!==p[m]?p[m]:r.p.treeIcons.leaf)+" tree-leaf treeclick",p[g]=!0,c="leaf"):(p[g]=!1,c=""),p[h]=("true"===p[h]||p[h]===!0?!0:!1)&&(p[v]||void 0===p[v]),l+=p[h]===!1?p[g]===!0?"'":r.p.treeIcons.plus+" tree-plus treeclick'":p[g]===!0?"'":r.p.treeIcons.minus+" tree-minus treeclick'",l+="></div></div>",e(r.rows[t].cells[u]).wrapInner("<span class='cell-wrapper"+c+"'></span>").prepend(l),s!==parseInt(r.p.tree_root_level,10)){var y=e(r).jqGrid("getNodeParent",p);j=y&&y.hasOwnProperty(h)?y[h]:!0,j||e(r.rows[t]).css("display","none")}e(r.rows[t].cells[u]).find("div.treeclick").bind("click",function(t){var i=t.target||t.srcElement,a=e.jgrid.stripPref(r.p.idPrefix,e(i,r.rows).closest("tr.jqgrow")[0].id),o=r.p._index[a];return r.p.data[o][g]||(r.p.data[o][h]?(e(r).jqGrid("collapseRow",r.p.data[o]),e(r).jqGrid("collapseNode",r.p.data[o])):(e(r).jqGrid("expandRow",r.p.data[o]),e(r).jqGrid("expandNode",r.p.data[o]))),!1}),r.p.ExpandColClick===!0&&e(r.rows[t].cells[u]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(t){var i=t.target||t.srcElement,a=e.jgrid.stripPref(r.p.idPrefix,e(i,r.rows).closest("tr.jqgrow")[0].id),o=r.p._index[a];return r.p.data[o][g]||(r.p.data[o][h]?(e(r).jqGrid("collapseRow",r.p.data[o]),e(r).jqGrid("collapseNode",r.p.data[o])):(e(r).jqGrid("expandRow",r.p.data[o]),e(r).jqGrid("expandNode",r.p.data[o]))),e(r).jqGrid("setSelection",a),!1}),t++}})},setTreeGrid:function(){return this.each(function(){var t,i,r,a,o=this,s=0,n=!1,d=[];if(o.p.treeGrid){o.p.treedatatype||e.extend(o.p,{treedatatype:o.p.datatype}),o.p.subGrid=!1,o.p.altRows=!1,o.p.pgbuttons=!1,o.p.pginput=!1,o.p.gridview=!0,null===o.p.rowTotal&&(o.p.rowNum=1e4),o.p.multiselect=!1,o.p.rowList=[],o.p.expColInd=0,t="ui-icon-triangle-1-"+("rtl"===o.p.direction?"w":"e"),o.p.treeIcons=e.extend({plus:t,minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},o.p.treeIcons||{}),"nested"===o.p.treeGridModel?o.p.treeReader=e.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},o.p.treeReader):"adjacency"===o.p.treeGridModel&&(o.p.treeReader=e.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},o.p.treeReader));for(r in o.p.colModel)if(o.p.colModel.hasOwnProperty(r)){i=o.p.colModel[r].name,i!==o.p.ExpandColumn||n||(n=!0,o.p.expColInd=s),s++;for(a in o.p.treeReader)o.p.treeReader.hasOwnProperty(a)&&o.p.treeReader[a]===i&&d.push(i)}e.each(o.p.treeReader,function(t,i){i&&-1===e.inArray(i,d)&&("leaf_field"===t&&(o.p._treeleafpos=s),s++,o.p.colNames.push(i),o.p.colModel.push({name:i,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(t){this.each(function(){var i=this;if(i.grid&&i.p.treeGrid){var r=e(i).jqGrid("getNodeChildren",t),a=i.p.treeReader.expanded_field;e(r).each(function(){var t=i.p.idPrefix+e.jgrid.getAccessor(this,i.p.localReader.id);e(e(i).jqGrid("getGridRowById",t)).css("display",""),this[a]&&e(i).jqGrid("expandRow",this)})}})},collapseRow:function(t){this.each(function(){var i=this;if(i.grid&&i.p.treeGrid){var r=e(i).jqGrid("getNodeChildren",t),a=i.p.treeReader.expanded_field;e(r).each(function(){var t=i.p.idPrefix+e.jgrid.getAccessor(this,i.p.localReader.id);e(e(i).jqGrid("getGridRowById",t)).css("display","none"),this[a]&&e(i).jqGrid("collapseRow",this)})}})},getRootNodes:function(){var t=[];return this.each(function(){var i=this;if(i.grid&&i.p.treeGrid)switch(i.p.treeGridModel){case"nested":var r=i.p.treeReader.level_field;e(i.p.data).each(function(){parseInt(this[r],10)===parseInt(i.p.tree_root_level,10)&&t.push(this)});break;case"adjacency":var a=i.p.treeReader.parent_id_field;e(i.p.data).each(function(){(null===this[a]||"null"===String(this[a]).toLowerCase())&&t.push(this)})}}),t},getNodeDepth:function(t){var i=null;return this.each(function(){if(this.grid&&this.p.treeGrid){var r=this;switch(r.p.treeGridModel){case"nested":var a=r.p.treeReader.level_field;i=parseInt(t[a],10)-parseInt(r.p.tree_root_level,10);break;case"adjacency":i=e(r).jqGrid("getNodeAncestors",t).length}}}),i},getNodeParent:function(t){var i=null;return this.each(function(){var r=this;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var a=r.p.treeReader.left_field,o=r.p.treeReader.right_field,s=r.p.treeReader.level_field,n=parseInt(t[a],10),d=parseInt(t[o],10),l=parseInt(t[s],10);e(this.p.data).each(function(){return parseInt(this[s],10)===l-1&&parseInt(this[a],10)<n&&parseInt(this[o],10)>d?(i=this,!1):void 0});break;case"adjacency":var p=r.p.treeReader.parent_id_field,c=r.p.localReader.id;e(this.p.data).each(function(){return this[c]===e.jgrid.stripPref(r.p.idPrefix,t[p])?(i=this,!1):void 0})}}),i},getNodeChildren:function(t){var i=[];return this.each(function(){var r=this;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var a=r.p.treeReader.left_field,o=r.p.treeReader.right_field,s=r.p.treeReader.level_field,n=parseInt(t[a],10),d=parseInt(t[o],10),l=parseInt(t[s],10);e(this.p.data).each(function(){parseInt(this[s],10)===l+1&&parseInt(this[a],10)>n&&parseInt(this[o],10)<d&&i.push(this)});break;case"adjacency":var p=r.p.treeReader.parent_id_field,c=r.p.localReader.id;e(this.p.data).each(function(){this[p]==e.jgrid.stripPref(r.p.idPrefix,t[c])&&i.push(this)})}}),i},getFullTreeNode:function(t){var i=[];return this.each(function(){var r,a=this;if(a.grid&&a.p.treeGrid)switch(a.p.treeGridModel){case"nested":var o=a.p.treeReader.left_field,s=a.p.treeReader.right_field,n=a.p.treeReader.level_field,d=parseInt(t[o],10),l=parseInt(t[s],10),p=parseInt(t[n],10);e(this.p.data).each(function(){parseInt(this[n],10)>=p&&parseInt(this[o],10)>=d&&parseInt(this[o],10)<=l&&i.push(this)});break;case"adjacency":if(t){i.push(t);var c=a.p.treeReader.parent_id_field,u=a.p.localReader.id;e(this.p.data).each(function(t){for(r=i.length,t=0;r>t;t++)if(e.jgrid.stripPref(a.p.idPrefix,i[t][u])===this[c]){i.push(this);break}})}}}),i},getNodeAncestors:function(t){var i=[];return this.each(function(){if(this.grid&&this.p.treeGrid)for(var r=e(this).jqGrid("getNodeParent",t);r;)i.push(r),r=e(this).jqGrid("getNodeParent",r)}),i},isVisibleNode:function(t){var i=!0;return this.each(function(){var r=this;if(r.grid&&r.p.treeGrid){var a=e(r).jqGrid("getNodeAncestors",t),o=r.p.treeReader.expanded_field;e(a).each(function(){return i=i&&this[o],i?void 0:!1})}}),i},isNodeLoaded:function(t){var i;return this.each(function(){var r=this;if(r.grid&&r.p.treeGrid){var a=r.p.treeReader.leaf_field,o=r.p.treeReader.loaded;i=void 0!==t?void 0!==t[o]?t[o]:t[a]||e(r).jqGrid("getNodeChildren",t).length>0?!0:!1:!1}}),i},expandNode:function(t){return this.each(function(){if(this.grid&&this.p.treeGrid){var i=this.p.treeReader.expanded_field,r=this.p.treeReader.parent_id_field,a=this.p.treeReader.loaded,o=this.p.treeReader.level_field,s=this.p.treeReader.left_field,n=this.p.treeReader.right_field;if(!t[i]){var d=e.jgrid.getAccessor(t,this.p.localReader.id),l=e("#"+this.p.idPrefix+e.jgrid.jqID(d),this.grid.bDiv)[0],p=this.p._index[d];e(this).jqGrid("isNodeLoaded",this.p.data[p])?(t[i]=!0,e("div.treeclick",l).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(t[i]=!0,e("div.treeclick",l).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=l.rowIndex,this.p.datatype=this.p.treedatatype,"nested"===this.p.treeGridModel?e(this).jqGrid("setGridParam",{postData:{nodeid:d,n_left:t[s],n_right:t[n],n_level:t[o]}}):e(this).jqGrid("setGridParam",{postData:{nodeid:d,parentid:t[r],n_level:t[o]}}),e(this).trigger("reloadGrid"),t[a]=!0,"nested"===this.p.treeGridModel?e(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):e(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}))}}})},collapseNode:function(t){return this.each(function(){if(this.grid&&this.p.treeGrid){var i=this.p.treeReader.expanded_field;if(t[i]){t[i]=!1;var r=e.jgrid.getAccessor(t,this.p.localReader.id),a=e("#"+this.p.idPrefix+e.jgrid.jqID(r),this.grid.bDiv)[0];e("div.treeclick",a).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus")}}})},SortTree:function(t,i,r,a){return this.each(function(){if(this.grid&&this.p.treeGrid){var o,s,n,d,l,p=[],c=this,u=e(this).jqGrid("getRootNodes");for(d=e.jgrid.from(u),d.orderBy(t,i,r,a),l=d.select(),o=0,s=l.length;s>o;o++)n=l[o],p.push(n),e(this).jqGrid("collectChildrenSortTree",p,n,t,i,r,a);e.each(p,function(t){var i=e.jgrid.getAccessor(this,c.p.localReader.id);e("#"+e.jgrid.jqID(c.p.id)+" tbody tr:eq("+t+")").after(e("tr#"+e.jgrid.jqID(i),c.grid.bDiv))}),d=null,l=null,p=null}})},collectChildrenSortTree:function(t,i,r,a,o,s){return this.each(function(){if(this.grid&&this.p.treeGrid){var n,d,l,p,c,u;for(p=e(this).jqGrid("getNodeChildren",i),c=e.jgrid.from(p),c.orderBy(r,a,o,s),u=c.select(),n=0,d=u.length;d>n;n++)l=u[n],t.push(l),e(this).jqGrid("collectChildrenSortTree",t,l,r,a,o,s)}})},setTreeRow:function(t,i){var r=!1;return this.each(function(){var a=this;a.grid&&a.p.treeGrid&&(r=e(a).jqGrid("setRowData",t,i))}),r},delTreeNode:function(t){return this.each(function(){var i,r,a,o,s,n=this,d=n.p.localReader.id,l=n.p.treeReader.left_field,p=n.p.treeReader.right_field;if(n.grid&&n.p.treeGrid){var c=n.p._index[t];if(void 0!==c){r=parseInt(n.p.data[c][p],10),a=r-parseInt(n.p.data[c][l],10)+1;var u=e(n).jqGrid("getFullTreeNode",n.p.data[c]);if(u.length>0)for(i=0;i<u.length;i++)e(n).jqGrid("delRowData",u[i][d]);if("nested"===n.p.treeGridModel){if(o=e.jgrid.from(n.p.data).greater(l,r,{stype:"integer"}).select(),o.length)for(s in o)o.hasOwnProperty(s)&&(o[s][l]=parseInt(o[s][l],10)-a);if(o=e.jgrid.from(n.p.data).greater(p,r,{stype:"integer"}).select(),o.length)for(s in o)o.hasOwnProperty(s)&&(o[s][p]=parseInt(o[s][p],10)-a)}}}})},addChildNode:function(t,i,r,a){var o=this[0];if(r){var s,n,d,l,p,c,u,h,g=o.p.treeReader.expanded_field,f=o.p.treeReader.leaf_field,m=o.p.treeReader.level_field,v=o.p.treeReader.parent_id_field,j=o.p.treeReader.left_field,b=o.p.treeReader.right_field,w=o.p.treeReader.loaded,y=0,x=i;if(void 0===a&&(a=!1),void 0===t||null===t){if(p=o.p.data.length-1,p>=0)for(;p>=0;)y=Math.max(y,parseInt(o.p.data[p][o.p.localReader.id],10)),p--;t=y+1}var q=e(o).jqGrid("getInd",i);if(u=!1,void 0===i||null===i||""===i)i=null,x=null,s="last",l=o.p.tree_root_level,p=o.p.data.length+1;else{s="after",n=o.p._index[i],d=o.p.data[n],i=d[o.p.localReader.id],l=parseInt(d[m],10)+1;var D=e(o).jqGrid("getFullTreeNode",d);D.length?(p=D[D.length-1][o.p.localReader.id],x=p,p=e(o).jqGrid("getInd",x)+1):p=e(o).jqGrid("getInd",i)+1,d[f]&&(u=!0,d[g]=!0,e(o.rows[q]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(o.p.treeIcons.leaf+" tree-leaf").addClass(o.p.treeIcons.minus+" tree-minus"),o.p.data[n][f]=!1,d[w]=!0)}if(c=p+1,void 0===r[g]&&(r[g]=!1),void 0===r[w]&&(r[w]=!1),r[m]=l,void 0===r[f]&&(r[f]=!0),"adjacency"===o.p.treeGridModel&&(r[v]=i),"nested"===o.p.treeGridModel){var _,$,C;if(null!==i){if(h=parseInt(d[b],10),_=e.jgrid.from(o.p.data),_=_.greaterOrEquals(b,h,{stype:"integer"}),$=_.select(),$.length)for(C in $)$.hasOwnProperty(C)&&($[C][j]=$[C][j]>h?parseInt($[C][j],10)+2:$[C][j],$[C][b]=$[C][b]>=h?parseInt($[C][b],10)+2:$[C][b]);r[j]=h,r[b]=h+1}else{if(h=parseInt(e(o).jqGrid("getCol",b,!1,"max"),10),$=e.jgrid.from(o.p.data).greater(j,h,{stype:"integer"}).select(),$.length)for(C in $)$.hasOwnProperty(C)&&($[C][j]=parseInt($[C][j],10)+2);if($=e.jgrid.from(o.p.data).greater(b,h,{stype:"integer"}).select(),$.length)for(C in $)$.hasOwnProperty(C)&&($[C][b]=parseInt($[C][b],10)+2);r[j]=h+1,r[b]=h+2}}(null===i||e(o).jqGrid("isNodeLoaded",d)||u)&&(e(o).jqGrid("addRowData",t,r,s,x),e(o).jqGrid("setTreeNode",p,c)),d&&!d[g]&&a&&e(o.rows[q]).find("div.treeclick").click()}}})}(jQuery),function(e){"use strict";e.extend(e.jgrid,{template:function(t){var i,r=e.makeArray(arguments).slice(1),a=r.length;return null==t&&(t=""),t.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(t,o){if(!isNaN(parseInt(o,10)))return r[parseInt(o,10)];for(i=0;a>i;i++)if(e.isArray(r[i]))for(var s=r[i],n=s.length;n--;)if(o===s[n].nm)return s[n].v})}}),e.jgrid.extend({groupingSetup:function(){return this.each(function(){var t,i,r,a=this,o=a.p.colModel,s=a.p.groupingView;if(null===s||"object"!=typeof s&&!e.isFunction(s))a.p.grouping=!1;else if(s.groupField.length){for(void 0===s.visibiltyOnNextGrouping&&(s.visibiltyOnNextGrouping=[]),s.lastvalues=[],s._locgr||(s.groups=[]),s.counters=[],t=0;t<s.groupField.length;t++)s.groupOrder[t]||(s.groupOrder[t]="asc"),s.groupText[t]||(s.groupText[t]="{0}"),"boolean"!=typeof s.groupColumnShow[t]&&(s.groupColumnShow[t]=!0),"boolean"!=typeof s.groupSummary[t]&&(s.groupSummary[t]=!1),s.groupSummaryPos[t]||(s.groupSummaryPos[t]="footer"),s.groupColumnShow[t]===!0?(s.visibiltyOnNextGrouping[t]=!0,e(a).jqGrid("showCol",s.groupField[t])):(s.visibiltyOnNextGrouping[t]=e("#"+e.jgrid.jqID(a.p.id+"_"+s.groupField[t])).is(":visible"),e(a).jqGrid("hideCol",s.groupField[t]));for(s.summary=[],s.hideFirstGroupCol&&(s.formatDisplayField[0]=function(e){return e}),i=0,r=o.length;r>i;i++)s.hideFirstGroupCol&&(o[i].hidden||s.groupField[0]!==o[i].name||(o[i].formatter=function(){return""})),o[i].summaryType&&s.summary.push(o[i].summaryDivider?{nm:o[i].name,st:o[i].summaryType,v:"",sd:o[i].summaryDivider,vd:"",sr:o[i].summaryRound,srt:o[i].summaryRoundType||"round"}:{nm:o[i].name,st:o[i].summaryType,v:"",sr:o[i].summaryRound,srt:o[i].summaryRoundType||"round"})}else a.p.grouping=!1})},groupingPrepare:function(t,i){return this.each(function(){var r,a,o,s,n,d=this.p.groupingView,l=this,p=d.groupField.length,c=0;for(r=0;p>r;r++)a=d.groupField[r],s=d.displayField[r],o=t[a],n=null==s?null:t[s],null==n&&(n=o),void 0!==o&&(0===i?(d.groups.push({idx:r,dataIndex:a,value:o,displayValue:n,startRow:i,cnt:1,summary:[]}),d.lastvalues[r]=o,d.counters[r]={cnt:1,pos:d.groups.length-1,summary:e.extend(!0,[],d.summary)},e.each(d.counters[r].summary,function(){e.isFunction(this.st)?this.v=this.st.call(l,this.v,this.nm,t):(this.v=e(l).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,t),"avg"===this.st.toLowerCase()&&this.sd&&(this.vd=e(l).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,t)))}),d.groups[d.counters[r].pos].summary=d.counters[r].summary):"object"==typeof o||(e.isArray(d.isInTheSameGroup)&&e.isFunction(d.isInTheSameGroup[r])?d.isInTheSameGroup[r].call(l,d.lastvalues[r],o,r,d):d.lastvalues[r]===o)?1===c?(d.groups.push({idx:r,dataIndex:a,value:o,displayValue:n,startRow:i,cnt:1,summary:[]}),d.lastvalues[r]=o,d.counters[r]={cnt:1,pos:d.groups.length-1,summary:e.extend(!0,[],d.summary)},e.each(d.counters[r].summary,function(){e.isFunction(this.st)?this.v=this.st.call(l,this.v,this.nm,t):(this.v=e(l).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,t),"avg"===this.st.toLowerCase()&&this.sd&&(this.vd=e(l).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,t)))}),d.groups[d.counters[r].pos].summary=d.counters[r].summary):(d.counters[r].cnt+=1,d.groups[d.counters[r].pos].cnt=d.counters[r].cnt,e.each(d.counters[r].summary,function(){e.isFunction(this.st)?this.v=this.st.call(l,this.v,this.nm,t):(this.v=e(l).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,t),"avg"===this.st.toLowerCase()&&this.sd&&(this.vd=e(l).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,t)))}),d.groups[d.counters[r].pos].summary=d.counters[r].summary):(d.groups.push({idx:r,dataIndex:a,value:o,displayValue:n,startRow:i,cnt:1,summary:[]}),d.lastvalues[r]=o,c=1,d.counters[r]={cnt:1,pos:d.groups.length-1,summary:e.extend(!0,[],d.summary)},e.each(d.counters[r].summary,function(){e.isFunction(this.st)?this.v=this.st.call(l,this.v,this.nm,t):(this.v=e(l).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,t),"avg"===this.st.toLowerCase()&&this.sd&&(this.vd=e(l).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,t)))}),d.groups[d.counters[r].pos].summary=d.counters[r].summary))}),this},groupingToggle:function(t){return this.each(function(){var i=this,r=i.p.groupingView,a=t.split("_"),o=parseInt(a[a.length-2],10);a.splice(a.length-2,2);var s,n,d=a.join("_"),l=r.minusicon,p=r.plusicon,c=e("#"+e.jgrid.jqID(t)),u=c.length?c[0].nextSibling:null,h=e("#"+e.jgrid.jqID(t)+" span.tree-wrap-"+i.p.direction),g=function(t){var i=e.map(t.split(" "),function(e){return e.substring(0,d.length+1)===d+"_"?parseInt(e.substring(d.length+1),10):void 0});return i.length>0?i[0]:void 0},f=!1,m=i.p.frozenColumns?i.p.id+"_frozen":!1,v=m?e("#"+e.jgrid.jqID(t),"#"+e.jgrid.jqID(m)):!1,j=v&&v.length?v[0].nextSibling:null;if(h.hasClass(l)){if(r.showSummaryOnHide){if(u)for(;u;){if(e(u).hasClass("jqfoot")){var b=parseInt(e(u).attr("jqfootlevel"),10);if(o>=b)break}e(u).hide(),u=u.nextSibling,m&&(e(j).hide(),j=j.nextSibling)}}else if(u)for(;u&&(s=g(u.className),!(void 0!==s&&o>=s));)e(u).hide(),u=u.nextSibling,m&&(e(j).hide(),j=j.nextSibling);h.removeClass(l).addClass(p),f=!0}else{if(u)for(n=void 0;u;){if(s=g(u.className),void 0===n&&(n=void 0===s),void 0!==s){if(o>=s)break;s===o+1&&(e(u).show().find(">td>span.tree-wrap-"+i.p.direction).removeClass(l).addClass(p),m&&e(j).show().find(">td>span.tree-wrap-"+i.p.direction).removeClass(l).addClass(p))}else n&&(e(u).show(),m&&e(j).show());u=u.nextSibling,m&&(j=j.nextSibling)}h.removeClass(p).addClass(l)}e(i).triggerHandler("jqGridGroupingClickGroup",[t,f]),e.isFunction(i.p.onClickGroup)&&i.p.onClickGroup.call(i,t,f)}),!1},groupingRender:function(t,i,r,a){return this.each(function(){function o(e,t,i){var r,a=!1;if(0===t)a=i[e];else{var o=i[e].idx;if(0===o)a=i[e];else for(r=e;r>=0;r--)if(i[r].idx===o-t){a=i[r];break}}return a}function s(t,r,a,s){var n,d,l=o(t,r,a),c=p.p.colModel,u=l.cnt,h="";for(d=s;i>d;d++){var g="<td "+p.formatCol(d,1,"")+">&#160;</td>",f="{0}";e.each(l.summary,function(){if(this.nm===c[d].name){c[d].summaryTpl&&(f=c[d].summaryTpl),"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&u>0&&(this.v=this.v/u));try{this.groupCount=l.cnt,this.groupIndex=l.dataIndex,this.groupValue=l.value,n=p.formatter("",this.v,d,this)}catch(t){n=this.v}return g="<td "+p.formatCol(d,1,"")+">"+e.jgrid.format(f,n)+"</td>",!1}}),h+=g}return h}var n,d,l,p=this,c=p.p.groupingView,u="",h="",g=c.groupCollapse?c.plusicon:c.minusicon,f=[],m=c.groupField.length;g+=" tree-wrap-"+p.p.direction,e.each(p.p.colModel,function(e,t){var i;for(i=0;m>i;i++)if(c.groupField[i]===t.name){f[i]=e;break}});var v=0,j=e.makeArray(c.groupSummary);j.reverse(),e.each(c.groups,function(o,b){if(c._locgr&&!(b.startRow+b.cnt>(r-1)*a&&b.startRow<r*a))return!0;v++,d=p.p.id+"ghead_"+b.idx,n=d+"_"+o,h="<span style='cursor:pointer;' class='ui-icon "+g+"' onclick=\"jQuery('#"+e.jgrid.jqID(p.p.id)+"').jqGrid('groupingToggle','"+n+"');return false;\"></span>";try{e.isArray(c.formatDisplayField)&&e.isFunction(c.formatDisplayField[b.idx])?(b.displayValue=c.formatDisplayField[b.idx].call(p,b.displayValue,b.value,p.p.colModel[f[b.idx]],b.idx,c),l=b.displayValue):l=p.formatter(n,b.displayValue,f[b.idx],b.value)}catch(w){l=b.displayValue}"header"===c.groupSummaryPos[b.idx]?(u+='<tr id="'+n+'"'+(c.groupCollapse&&b.idx>0?' style="display:none;" ':" ")+'role="row" class= "ui-widget-content jqgroup ui-row-'+p.p.direction+" "+d+'"><td style="padding-left:'+12*b.idx+'px;">'+h+e.jgrid.template(c.groupText[b.idx],l,b.cnt,b.summary)+"</td>",u+=s(o,b.idx-1,c.groups,1),u+="</tr>"):u+='<tr id="'+n+'"'+(c.groupCollapse&&b.idx>0?' style="display:none;" ':" ")+'role="row" class= "ui-widget-content jqgroup ui-row-'+p.p.direction+" "+d+'"><td style="padding-left:'+12*b.idx+'px;" colspan="'+i+'">'+h+e.jgrid.template(c.groupText[b.idx],l,b.cnt,b.summary)+"</td></tr>";var y=m-1===b.idx;if(y){var x,q,D=c.groups[o+1],_=0,$=b.startRow,C=void 0!==D?c.groups[o+1].startRow:t.length;for(c._locgr&&(_=(r-1)*a,_>b.startRow&&($=_)),x=$;C>x&&t[x-_];x++)u+=t[x-_].join("");if("header"!==c.groupSummaryPos[b.idx]){var G;if(void 0!==D){for(G=0;G<c.groupField.length&&D.dataIndex!==c.groupField[G];G++);v=c.groupField.length-G}for(q=0;v>q;q++)if(j[q]){var I="";c.groupCollapse&&!c.showSummaryOnHide&&(I=' style="display:none;"'),u+="<tr"+I+' jqfootlevel="'+(b.idx-q)+'" role="row" class="ui-widget-content jqfoot ui-row-'+p.p.direction+'">',u+=s(o,q,c.groups,0),u+="</tr>"}v=G}}}),e("#"+e.jgrid.jqID(p.p.id)+" tbody:first").append(u),u=null})},groupingGroupBy:function(t,i){return this.each(function(){var r=this;"string"==typeof t&&(t=[t]);var a=r.p.groupingView;r.p.grouping=!0,void 0===a.visibiltyOnNextGrouping&&(a.visibiltyOnNextGrouping=[]);var o;for(o=0;o<a.groupField.length;o++)!a.groupColumnShow[o]&&a.visibiltyOnNextGrouping[o]&&e(r).jqGrid("showCol",a.groupField[o]);for(o=0;o<t.length;o++)a.visibiltyOnNextGrouping[o]=e("#"+e.jgrid.jqID(r.p.id)+"_"+e.jgrid.jqID(t[o])).is(":visible");r.p.groupingView=e.extend(r.p.groupingView,i||{}),a.groupField=t,e(r).trigger("reloadGrid")})},groupingRemove:function(t){return this.each(function(){var i=this;if(void 0===t&&(t=!0),i.p.grouping=!1,t===!0){var r,a=i.p.groupingView;for(r=0;r<a.groupField.length;r++)!a.groupColumnShow[r]&&a.visibiltyOnNextGrouping[r]&&e(i).jqGrid("showCol",a.groupField);e("tr.jqgroup, tr.jqfoot","#"+e.jgrid.jqID(i.p.id)+" tbody:first").remove(),e("tr.jqgrow:hidden","#"+e.jgrid.jqID(i.p.id)+" tbody:first").show()}else e(i).trigger("reloadGrid")})},groupingCalculations:{handler:function(e,t,i,r,a,o){var s={sum:function(){return parseFloat(t||0)+parseFloat(o[i]||0)},min:function(){return""===t?parseFloat(o[i]||0):Math.min(parseFloat(t),parseFloat(o[i]||0))},max:function(){return""===t?parseFloat(o[i]||0):Math.max(parseFloat(t),parseFloat(o[i]||0))
},count:function(){return""===t&&(t=0),o.hasOwnProperty(i)?t+1:0},avg:function(){return s.sum()}};if(!s[e])throw"jqGrid Grouping No such method: "+e;var n=s[e]();if(null!=r)if("fixed"===a)n=n.toFixed(r);else{var d=Math.pow(10,r);n=Math.round(n*d)/d}return n}}})}(jQuery),function(e){"use strict";e.jgrid.extend({jqGridImport:function(t){return t=e.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},t||{}),this.each(function(){var i=this,r=function(t,r){var a,o,s,n=e(r.xmlGrid.config,t)[0],d=e(r.xmlGrid.data,t)[0];if(xmlJsonClass.xml2json&&e.jgrid.parse){a=xmlJsonClass.xml2json(n," "),a=e.jgrid.parse(a);for(s in a)a.hasOwnProperty(s)&&(o=a[s]);if(d){var l=a.grid.datatype;a.grid.datatype="xmlstring",a.grid.datastr=t,e(i).jqGrid(o).jqGrid("setGridParam",{datatype:l})}else e(i).jqGrid(o);a=null,o=null}else alert("xml2json or parse are not present")},a=function(t,r){if(t&&"string"==typeof t){var a=!1;e.jgrid.useJSON&&(e.jgrid.useJSON=!1,a=!0);var o=e.jgrid.parse(t);a&&(e.jgrid.useJSON=!0);var s=o[r.jsonGrid.config],n=o[r.jsonGrid.data];if(n){var d=s.datatype;s.datatype="jsonstring",s.datastr=n,e(i).jqGrid(s).jqGrid("setGridParam",{datatype:d})}else e(i).jqGrid(s)}};switch(t.imptype){case"xml":e.ajax(e.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"xml",complete:function(a,o){"success"===o&&(r(a.responseXML,t),e(i).triggerHandler("jqGridImportComplete",[a,t]),e.isFunction(t.importComplete)&&t.importComplete(a)),a=null}},t.ajaxOptions));break;case"xmlstring":if(t.impstring&&"string"==typeof t.impstring){var o=e.parseXML(t.impstring);o&&(r(o,t),e(i).triggerHandler("jqGridImportComplete",[o,t]),e.isFunction(t.importComplete)&&t.importComplete(o),t.impstring=null),o=null}break;case"json":e.ajax(e.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"json",complete:function(r){try{a(r.responseText,t),e(i).triggerHandler("jqGridImportComplete",[r,t]),e.isFunction(t.importComplete)&&t.importComplete(r)}catch(o){}r=null}},t.ajaxOptions));break;case"jsonstring":t.impstring&&"string"==typeof t.impstring&&(a(t.impstring,t),e(i).triggerHandler("jqGridImportComplete",[t.impstring,t]),e.isFunction(t.importComplete)&&t.importComplete(t.impstring),t.impstring=null)}})},jqGridExport:function(t){t=e.extend({exptype:"xmlstring",root:"grid",ident:"	"},t||{});var i=null;return this.each(function(){if(this.grid){var r,a=e.extend(!0,{},e(this).jqGrid("getGridParam"));if(a.rownumbers&&(a.colNames.splice(0,1),a.colModel.splice(0,1)),a.multiselect&&(a.colNames.splice(0,1),a.colModel.splice(0,1)),a.subGrid&&(a.colNames.splice(0,1),a.colModel.splice(0,1)),a.knv=null,a.treeGrid)for(r in a.treeReader)a.treeReader.hasOwnProperty(r)&&(a.colNames.splice(a.colNames.length-1),a.colModel.splice(a.colModel.length-1));switch(t.exptype){case"xmlstring":i="<"+t.root+">"+xmlJsonClass.json2xml(a,t.ident)+"</"+t.root+">";break;case"jsonstring":i="{"+xmlJsonClass.toJson(a,t.root,t.ident,!1)+"}",void 0!==a.postData.filters&&(i=i.replace(/filters":"/,'filters":'),i=i.replace(/}]}"/,"}]}"))}}}),i},excelExport:function(t){return t=e.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},t||{}),this.each(function(){if(this.grid){var i;if("remote"===t.exptype){var r=e.extend({},this.p.postData);r[t.oper]=t.tag;var a=jQuery.param(r);i=-1!==t.url.indexOf("?")?t.url+"&"+a:t.url+"?"+a,window.location=i}}})}})}(jQuery),function($){"use strict";if($.jgrid.msie&&8===$.jgrid.msiever()&&($.expr[":"].hidden=function(e){return 0===e.offsetWidth||0===e.offsetHeight||"none"===e.style.display}),$.jgrid._multiselect=!1,$.ui&&$.ui.multiselect){if($.ui.multiselect.prototype._setSelected){var setSelected=$.ui.multiselect.prototype._setSelected;$.ui.multiselect.prototype._setSelected=function(e,t){var i=setSelected.call(this,e,t);if(t&&this.selectedList){var r=this.element;this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(r)})}return i}}$.ui.multiselect.prototype.destroy&&($.ui.multiselect.prototype.destroy=function(){this.element.show(),this.container.remove(),void 0===$.Widget?$.widget.prototype.destroy.apply(this,arguments):$.Widget.prototype.destroy.apply(this,arguments)}),$.jgrid._multiselect=!0}$.jgrid.extend({sortableColumns:function(e){return this.each(function(){function t(){i.p.disableClick=!0}var i=this,r=$.jgrid.jqID(i.p.id),a={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+r+"_cb,#jqgh_"+r+"_rn,#jqgh_"+r+"_subgrid),:hidden)",placeholder:{element:function(e){var t=$(document.createElement(e[0].nodeName)).addClass(e[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];return t},update:function(e,t){t.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),t.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}},update:function(e,t){var r=$(t.item).parent(),a=$(">th",r),o=i.p.colModel,s={},n=i.p.id+"_";$.each(o,function(e){s[this.name]=e});var d=[];a.each(function(){var e=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(n,"");s.hasOwnProperty(e)&&d.push(s[e])}),$(i).jqGrid("remapColumns",d,!0,!0),$.isFunction(i.p.sortable.update)&&i.p.sortable.update(d),setTimeout(function(){i.p.disableClick=!1},50)}};if(i.p.sortable.options?$.extend(a,i.p.sortable.options):$.isFunction(i.p.sortable)&&(i.p.sortable={update:i.p.sortable}),a.start){var o=a.start;a.start=function(e,i){t(),o.call(this,e,i)}}else a.start=t;i.p.sortable.exclude&&(a.items+=":not("+i.p.sortable.exclude+")"),e.sortable(a).data("sortable").floating=!0})},columnChooser:function(e){function t(e,t,i){if(t>=0){var r=e.slice(),a=r.splice(t,Math.max(e.length-t,t));return t>e.length&&(t=e.length),r[t]=i,r.concat(a)}}function i(e,t){e&&("string"==typeof e?$.fn[e]&&$.fn[e].apply(t,$.makeArray(arguments).slice(2)):$.isFunction(e)&&e.apply(t,$.makeArray(arguments).slice(2)))}var r=this;if(!$("#colchooser_"+$.jgrid.jqID(r[0].p.id)).length){var a=$('<div id="colchooser_'+r[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),o=$("select",a);if(e=$.extend({width:420,height:240,classname:null,done:function(e){e&&r.jqGrid("remapColumns",e,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470},dlog_opts:function(e){var t={};return t[e.bSubmit]=function(){e.apply_perm(),e.cleanup(!1)},t[e.bCancel]=function(){e.cleanup(!0)},$.extend(!0,{buttons:t,close:function(){e.cleanup(!0)},modal:e.modal||!1,resizable:e.resizable||!0,width:e.width+20},e.dialog_opts||{})},apply_perm:function(){$("option",o).each(function(){this.selected?r.jqGrid("showCol",s[this.value].name):r.jqGrid("hideCol",s[this.value].name)});var i=[];$("option:selected",o).each(function(){i.push(parseInt(this.value,10))}),$.each(i,function(){delete d[s[parseInt(this,10)].name]}),$.each(d,function(){var e=parseInt(this,10);i=t(i,e,e)}),e.done&&e.done.call(r,i)},cleanup:function(t){i(e.dlog,a,"destroy"),i(e.msel,o,"destroy"),a.remove(),t&&e.done&&e.done.call(r)},msel_opts:{}},$.jgrid.col,e||{}),$.ui&&$.ui.multiselect&&"multiselect"===e.msel){if(!$.jgrid._multiselect)return void alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");e.msel_opts=$.extend($.ui.multiselect.defaults,e.msel_opts)}e.caption&&a.attr("title",e.caption),e.classname&&(a.addClass(e.classname),o.addClass(e.classname)),e.width&&($(">div",a).css({width:e.width,margin:"0 auto"}),o.css("width",e.width)),e.height&&($(">div",a).css("height",e.height),o.css("height",e.height-10));var s=r.jqGrid("getGridParam","colModel"),n=r.jqGrid("getGridParam","colNames"),d={},l=[];o.empty(),$.each(s,function(e){return d[this.name]=e,this.hidedlg?void(this.hidden||l.push(e)):void o.append("<option value='"+e+"' "+(this.hidden?"":"selected='selected'")+">"+$.jgrid.stripHtml(n[e])+"</option>")});var p=$.isFunction(e.dlog_opts)?e.dlog_opts.call(r,e):e.dlog_opts;i(e.dlog,a,p);var c=$.isFunction(e.msel_opts)?e.msel_opts.call(r,e):e.msel_opts;i(e.msel,o,c)}},sortableRows:function(e){return this.each(function(){var t=this;t.grid&&(t.p.treeGrid||$.fn.sortable&&(e=$.extend({cursor:"move",axis:"y",items:".jqgrow"},e||{}),e.start&&$.isFunction(e.start)?(e._start_=e.start,delete e.start):e._start_=!1,e.update&&$.isFunction(e.update)?(e._update_=e.update,delete e.update):e._update_=!1,e.start=function(i,r){if($(r.item).css("border-width","0"),$("td",r.item).each(function(e){this.style.width=t.grid.cols[e].style.width}),t.p.subGrid){var a=$(r.item).attr("id");try{$(t).jqGrid("collapseSubGridRow",a)}catch(o){}}e._start_&&e._start_.apply(this,[i,r])},e.update=function(i,r){$(r.item).css("border-width",""),t.p.rownumbers===!0&&$("td.jqgrid-rownum",t.rows).each(function(e){$(this).html(e+1+(parseInt(t.p.page,10)-1)*parseInt(t.p.rowNum,10))}),e._update_&&e._update_.apply(this,[i,r])},$("tbody:first",t).sortable(e),$("tbody:first",t).disableSelection()))})},gridDnD:function(e){return this.each(function(){function t(){var e=$.data(a,"dnd");$("tr.jqgrow:not(.ui-draggable)",a).draggable($.isFunction(e.drag)?e.drag.call($(a),e):e.drag)}var i,r,a=this;if(a.grid&&!a.p.treeGrid&&$.fn.draggable&&$.fn.droppable){var o="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>";if(void 0===$("#jqgrid_dnd")[0]&&$("body").append(o),"string"==typeof e&&"updateDnD"===e&&a.p.jqgdnd===!0)return void t();if(e=$.extend({drag:function(e){return $.extend({start:function(t,i){var r,o;if(a.p.subGrid){o=$(i.helper).attr("id");try{$(a).jqGrid("collapseSubGridRow",o)}catch(s){}}for(r=0;r<$.data(a,"dnd").connectWith.length;r++)0===$($.data(a,"dnd").connectWith[r]).jqGrid("getGridParam","reccount")&&$($.data(a,"dnd").connectWith[r]).jqGrid("addRowData","jqg_empty_row",{});i.helper.addClass("ui-state-highlight"),$("td",i.helper).each(function(e){this.style.width=a.grid.headers[e].width+"px"}),e.onstart&&$.isFunction(e.onstart)&&e.onstart.call($(a),t,i)},stop:function(t,i){var r,o;for(i.helper.dropped&&!e.dragcopy&&(o=$(i.helper).attr("id"),void 0===o&&(o=$(this).attr("id")),$(a).jqGrid("delRowData",o)),r=0;r<$.data(a,"dnd").connectWith.length;r++)$($.data(a,"dnd").connectWith[r]).jqGrid("delRowData","jqg_empty_row");e.onstop&&$.isFunction(e.onstop)&&e.onstop.call($(a),t,i)}},e.drag_opts||{})},drop:function(e){return $.extend({accept:function(e){if(!$(e).hasClass("jqgrow"))return e;var t=$(e).closest("table.ui-jqgrid-btable");if(t.length>0&&void 0!==$.data(t[0],"dnd")){var i=$.data(t[0],"dnd").connectWith;return-1!==$.inArray("#"+$.jgrid.jqID(this.id),i)?!0:!1}return!1},drop:function(t,i){if($(i.draggable).hasClass("jqgrow")){var r=$(i.draggable).attr("id"),o=i.draggable.parent().parent().jqGrid("getRowData",r);if(!e.dropbyname){var s,n,d=0,l={},p=$("#"+$.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(n in o)o.hasOwnProperty(n)&&(s=p[d].name,"cb"!==s&&"rn"!==s&&"subgrid"!==s&&o.hasOwnProperty(n)&&p[d]&&(l[s]=o[n]),d++);o=l}catch(c){}}if(i.helper.dropped=!0,e.beforedrop&&$.isFunction(e.beforedrop)){var u=e.beforedrop.call(this,t,i,o,$("#"+$.jgrid.jqID(a.p.id)),$(this));void 0!==u&&null!==u&&"object"==typeof u&&(o=u)}if(i.helper.dropped){var h;e.autoid&&($.isFunction(e.autoid)?h=e.autoid.call(this,o):(h=Math.ceil(1e3*Math.random()),h=e.autoidprefix+h)),$("#"+$.jgrid.jqID(this.id)).jqGrid("addRowData",h,o,e.droppos)}e.ondrop&&$.isFunction(e.ondrop)&&e.ondrop.call(this,t,i,o)}}},e.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},e||{}),e.connectWith)for(e.connectWith=e.connectWith.split(","),e.connectWith=$.map(e.connectWith,function(e){return $.trim(e)}),$.data(a,"dnd",e),0===a.p.reccount||a.p.jqgdnd||t(),a.p.jqgdnd=!0,i=0;i<e.connectWith.length;i++)r=e.connectWith[i],$(r).droppable($.isFunction(e.drop)?e.drop.call($(a),e):e.drop)}})},gridResize:function(opts){return this.each(function(){var $t=this,gID=$.jgrid.jqID($t.p.id);if($t.grid&&$.fn.resizable){if(opts=$.extend({},opts||{}),opts.alsoResize?(opts._alsoResize_=opts.alsoResize,delete opts.alsoResize):opts._alsoResize_=!1,opts.stop&&$.isFunction(opts.stop)?(opts._stop_=opts.stop,delete opts.stop):opts._stop_=!1,opts.stop=function(e,t){$($t).jqGrid("setGridParam",{height:$("#gview_"+gID+" .ui-jqgrid-bdiv").height()}),$($t).jqGrid("setGridWidth",t.size.width,opts.shrinkToFit),opts._stop_&&opts._stop_.call($t,e,t)},opts._alsoResize_){var optstest="{'#gview_"+gID+" .ui-jqgrid-bdiv':true,'"+opts._alsoResize_+"':true}";opts.alsoResize=eval("("+optstest+")")}else opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+gID);delete opts._alsoResize_,$("#gbox_"+gID).resizable(opts)}})}})}(jQuery),function(e){"use strict";function t(e,t){var i,r,a,o=[];if(!this||"function"!=typeof e||e instanceof RegExp)throw new TypeError;for(a=this.length,i=0;a>i;i++)if(this.hasOwnProperty(i)&&(r=this[i],e.call(t,r,i,this))){o.push(r);break}return o}e.assocArraySize=function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i},e.jgrid.extend({pivotSetup:function(i,r){var a=[],o=[],s=[],n=[],d={grouping:!0,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},l=[],p=e.extend({rowTotals:!1,rowTotalsText:"Total",colTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1},r||{});return this.each(function(){function r(e,i,r){var a;return a=t.call(e,i,r),a.length>0?a[0]:null}function c(e,t){var i,r=0,a=!0;for(i in e){if(e[i]!=this[r]){a=!1;break}if(r++,r>=this.length)break}return a&&(m=t),a}function u(e,t,i,r){var a;switch(e){case"sum":a=parseFloat(t||0)+parseFloat(r[i]||0);break;case"count":(""===t||null==t)&&(t=0),a=r.hasOwnProperty(i)?t+1:0;break;case"min":a=""===t||null==t?parseFloat(r[i]||0):Math.min(parseFloat(t),parseFloat(r[i]||0));break;case"max":a=""===t||null==t?parseFloat(r[i]||0):Math.max(parseFloat(t),parseFloat(r[i]||0))}return a}function h(t,i,r,a){var o,s,d,l,p=i.length;for(l=e.isArray(r)?r.length:1,n=[],n.root=0,d=0;l>d;d++){var c,h=[];for(o=0;p>o;o++){if(null==r)s=e.trim(i[o].member)+"_"+i[o].aggregator,c=s;else{c=r[d].replace(/\s+/g,"");try{s=1===p?c:c+"_"+i[o].aggregator+"_"+o}catch(g){}}a[s]=h[s]=u(i[o].aggregator,a[s],i[o].member,t)}n[c]=h}return a}function g(e){var t,i,r,o,s;for(r in e)if(e.hasOwnProperty(r)){if("object"!=typeof e[r]){if("level"===r){if(void 0===O[e.level]&&(O[e.level]="",e.level>0&&"_r_Totals"!==e.text&&(l[e.level-1]={useColSpanStyle:!1,groupHeaders:[]})),O[e.level]!==e.text&&e.children.length&&"_r_Totals"!==e.text&&e.level>0){l[e.level-1].groupHeaders.push({titleText:e.text});var n=l[e.level-1].groupHeaders.length,d=1===n?A:P+(n-1)*w;l[e.level-1].groupHeaders[n-1].startColumnName=a[d].name,l[e.level-1].groupHeaders[n-1].numberOfColumns=a.length-d,P=a.length}O[e.level]=e.text}if(e.level===b&&"level"===r&&b>0)if(w>1){var c=1;for(t in e.fields)1===c&&l[b-1].groupHeaders.push({startColumnName:t,numberOfColumns:1,titleText:e.text}),c++;l[b-1].groupHeaders[l[b-1].groupHeaders.length-1].numberOfColumns=c-1}else l.splice(b-1,1)}if(null!=e[r]&&"object"==typeof e[r]&&g(e[r]),"level"===r&&e.level>0){i=0;for(t in e.fields){s={};for(o in p.aggregates[i])if(p.aggregates[i].hasOwnProperty(o))switch(o){case"member":case"label":case"aggregator":break;default:s[o]=p.aggregates[i][o]}w>1?(s.name=t,s.label=p.aggregates[i].label||t):(s.name=e.text,s.label="_r_Totals"===e.text?p.rowTotalsText:e.text),a.push(s),i++}}}}var f,m,v,j,b,w,y,x,q=i.length,D=0;if(p.rowTotals&&p.yDimension.length>0){var _=p.yDimension[0].dataName;p.yDimension.splice(0,0,{dataName:_}),p.yDimension[0].converter=function(){return"_r_Totals"}}if(j=e.isArray(p.xDimension)?p.xDimension.length:0,b=p.yDimension.length,w=e.isArray(p.aggregates)?p.aggregates.length:0,0===j||0===w)throw"xDimension or aggregates optiona are not set!";var $;for(v=0;j>v;v++)$={name:p.xDimension[v].dataName,frozen:p.frozenStaticCols},$=e.extend(!0,$,p.xDimension[v]),a.push($);for(var C=j-1,G={};q>D;){f=i[D];var I=[],F=[];y={},v=0;do I[v]=e.trim(f[p.xDimension[v].dataName]),y[p.xDimension[v].dataName]=I[v],v++;while(j>v);var k=0;if(m=-1,x=r(o,c,I)){if(m>=0){if(k=0,b>=1){for(k=0;b>k;k++)F[k]=e.trim(f[p.yDimension[k].dataName]),p.yDimension[k].converter&&e.isFunction(p.yDimension[k].converter)&&(F[k]=p.yDimension[k].converter.call(this,F[k],I,F));x=h(f,p.aggregates,F,x)}else 0===b&&(x=h(f,p.aggregates,null,x));o[m]=x}}else{if(k=0,b>=1){for(k=0;b>k;k++)F[k]=e.trim(f[p.yDimension[k].dataName]),p.yDimension[k].converter&&e.isFunction(p.yDimension[k].converter)&&(F[k]=p.yDimension[k].converter.call(this,F[k],I,F));y=h(f,p.aggregates,F,y)}else 0===b&&(y=h(f,p.aggregates,null,y));o.push(y)}var S,R=0,M=null,N=null;for(S in n){if(0===R)G.children&&void 0!==G.children||(G={text:S,level:0,children:[]}),M=G.children;else{for(N=null,v=0;v<M.length;v++)if(M[v].text===S){N=M[v];break}N?M=N.children:(M.push({children:[],text:S,level:R,fields:n[S]}),M=M[M.length-1].children)}R++}D++}var O=[],P=a.length,A=P;b>0&&(l[b-1]={useColSpanStyle:!1,groupHeaders:[]}),g(G,0);var E;if(p.colTotals)for(var T=o.length;T--;)for(v=j;v<a.length;v++)E=a[v].name,s[E]?s[E]+=parseFloat(o[T][E]||0):s[E]=parseFloat(o[T][E]||0);if(C>0)for(v=0;C>v;v++)d.groupingView.groupField[v]=a[v].name,d.groupingView.groupSummary[v]=p.groupSummary,d.groupingView.groupSummaryPos[v]=p.groupSummaryPos;else d.grouping=!1;d.sortname=a[C].name,d.groupingView.hideFirstGroupCol=!0}),{colModel:a,rows:o,groupOptions:d,groupHeaders:l,summary:s}},jqPivot:function(t,i,r,a){return this.each(function(){function o(t){var a,o=jQuery(s).jqGrid("pivotSetup",t,i),n=e.assocArraySize(o.summary)>0?!0:!1,d=e.jgrid.from(o.rows);for(a=0;a<o.groupOptions.groupingView.groupField.length;a++)d.orderBy(o.groupOptions.groupingView.groupField[a],"a","text","");jQuery(s).jqGrid(e.extend({datastr:e.extend(d.select(),n?{userdata:o.summary}:{}),datatype:"jsonstring",footerrow:n,userDataOnFooter:n,colModel:o.colModel,viewrecords:!0,sortname:i.xDimension[0].dataName},r||{},o.groupOptions));var l=o.groupHeaders;if(l.length)for(a=0;a<l.length;a++)l[a]&&l[a].groupHeaders.length&&jQuery(s).jqGrid("setGroupHeaders",l[a]);i.frozenStaticCols&&jQuery(s).jqGrid("setFrozenColumns")}var s=this;"string"==typeof t?e.ajax(e.extend({url:t,dataType:"json",success:function(t){o(e.jgrid.getAccessor(t,a&&a.reader?a.reader:"rows"))}},a||{})):o(t)})}})}(jQuery);
;///platform/component/jqGrid/grid.locale.js
!function(e){e.jgrid=e.jgrid||{},e.extend(e.jgrid,{defaults:{recordtext:"{0} - {1} {2} ",emptyrecords:"",loadtext:"...",pgtext:" {0}  {1} "},search:{caption:"...",Find:"",Reset:"",odata:[{oper:"eq",text:""},{oper:"ne",text:""},{oper:"lt",text:""},{oper:"le",text:""},{oper:"gt",text:""},{oper:"ge",text:""},{oper:"bw",text:""},{oper:"bn",text:""},{oper:"in",text:""},{oper:"ni",text:""},{oper:"ew",text:""},{oper:"en",text:""},{oper:"cn",text:""},{oper:"nc",text:""},{oper:"nu",text:""},{oper:"nn",text:""}],groupOps:[{op:"AND",text:""},{op:"OR",text:""}],operandTitle:"Click to select search operation.",resetTitle:"Reset Search Value"},edit:{addCaption:"",editCaption:"",bSubmit:"",bCancel:"",bClose:"",saveData:"",bYes:"",bNo:"",bExit:"",msg:{required:"",number:"",minValue:" ",maxValue:" ",email:"e-mail",integer:"",date:"",url:" ('http://'  'https://')",nodefined:" ",novalue:" ",customarray:"",customfcheck:"!"}},view:{caption:"",bClose:""},del:{caption:"",msg:"",bSubmit:"",bCancel:""},nav:{edittext:"",edittitle:"",addtext:"",addtitle:"",deltext:"",deltitle:"",searchtext:"",searchtitle:"",refreshtext:"",refreshtitle:"",alertcap:"",alerttext:"",viewtext:"",viewtitle:""},col:{caption:"",bSubmit:"",bCancel:""},errors:{errcap:"",nourl:"url",norecords:"",model:"colNames  colModel "},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["","","","","","","","","","","","","",""],monthNames:["","","","","","","","","","","","","","","","","","","","","","","",""],AmPm:["am","pm","",""],S:function(e){return 11>e||e>13?["st","nd","rd","th"][Math.min((e-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"Y-m-d",parseRe:/[#%\\\/:_;.,\t\s-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO",YearMonth:"F, Y"},reformatAfterEdit:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0},idName:"id"}})}(jQuery);
;///platform/component/jqGrid/jquery.ui.jqGrid.js
!function($){$.hz.jqGrid={init:function(tableId,url,callback){var me=$("#"+tableId),multiselect="true"==me.attr("multiselect"),title=me.attr("title"),isToolbar="true"==me.attr("toolbar"),isAutowidth="true"!=me.attr("autowidth"),isShrinkToFit="true"==me.attr("shrinkToFit"),pagerId=me.attr("pager"),scrollNum=me.attr("scroll"),dataroot=me.attr("dataroot")||"gridModel",tableWidth=me.attr("tableWidth"),tableHeight=me.attr("tableHeight"),dataEditUrl=me.attr("dataEditUrl"),isRownumbers="false"!=me.attr("rownumbers"),userPageNo=me.attr("userPageNo"),userRowNum=me.attr("userRowNum");pagerId&&me.after("<div id='"+pagerId+"'></div> ");var colNames=[],colModels=[],urlparams="";if($("thead th",me).each(function(){var th=$(this),thName=th.attr("name");thName.indexOf(".")>0&&(urlparams+=thName+",");var cols={name:thName,width:parseInt(th.attr("thWidth"))||0,sortable:"true"==th.attr("sort"),title:"false"==th.attr("showtitle"),type:th.attr("type")||"string",frozen:"true"==th.attr("frozen"),hidedlg:"true"==th.attr("hide"),hidden:"true"==th.attr("hide"),index:th.attr("index"),editable:"true"==th.attr("thEditable"),edittype:th.attr("edittype"),editrules:eval("("+th.attr("editrules")+")")};th.attr("formatter")&&(cols.formatter=function(cellvalue,options,rowObject){return eval(th.attr("formatter")+"(cellvalue,options,rowObject)")}),th.attr("edittype")&&th.attr("editoptions")&&(cols.editoptions=eval("("+th.attr("editoptions")+")")),colModels.push(cols),colNames.push(th.text())}),pagerId){var postData={};if(-1!=url.indexOf("?")){for(var par=url.substring(url.indexOf("?")+1,url.length),pars=par.split("&"),i=0;i<pars.length;i++)postData[pars[i].split("=")[0]]=pars[i].split("=")[1];url=url.substring(0,url.indexOf("?"))}me.jqGrid({url:url+"?urlparams="+urlparams,datatype:"json",postData:postData,autowidth:isAutowidth,width:tableWidth,height:tableHeight,mtype:"POST",viewrecords:!0,colNames:colNames,colModel:colModels,page:userPageNo,rowNum:userRowNum,rowList:[10,20,50],forceFit:!0,prmNames:{search:"search",page:"page.pageNo",rows:"page.pageSize"},pager:pagerId,multiselect:multiselect,hidegrid:!0,rownumbers:isRownumbers,rownumWidth:"50px",toolbar:[isToolbar,"top"],autoencode:!0,gridview:!0,shrinkToFit:isShrinkToFit,altRows:!1,jsonReader:{root:dataroot,records:"record",repeatitems:!1},editurl:dataEditUrl,caption:title,recordtext:"{0}-{1} "+jQuery.i18n.prop("dataGrid.page.all")+"{2} "+jQuery.i18n.prop("dataGrid.page.record"),scroll:scrollNum,viewsortcols:[!0,"horizontal",!0],pgtext:jQuery.i18n.prop("dataGrid.page.current")+"{0}/{1}"+jQuery.i18n.prop("dataGrid.page.pageText"),pageFirst:jQuery.i18n.prop("dataGrid.page.first"),pagePre:jQuery.i18n.prop("dataGrid.page.previous"),pageNext:jQuery.i18n.prop("dataGrid.page.next"),pageLast:jQuery.i18n.prop("dataGrid.page.last"),rowListText:jQuery.i18n.prop("dataGrid.page.rowListText"),gridComplete:function(t){$.hz.jqGrid.resizeGrid(me),callback&&callback(t,me)}}),me.setGridParam({tableKind:"jsontable"})}else me.jqGrid({datatype:"clientside",autowidth:isAutowidth,width:tableWidth,height:tableHeight,mtype:"POST",viewrecords:!0,colNames:colNames,colModel:colModels,multiselect:multiselect,forceFit:!0,hidegrid:!0,rownumbers:isRownumbers,rownumWidth:"50px",toolbar:[isToolbar,"top"],gridview:!0,shrinkToFit:isShrinkToFit,altRows:!1,rowNum:1e3,editurl:dataEditUrl,caption:title,scroll:scrollNum,viewsortcols:[!0,"horizontal",!0],autoencode:!0,loadComplete:function(){$.hz.jqGrid.resizeGrid(me)}}),$.getJSON(url+(-1!=url.indexOf("?")?"&":"?")+"urlparams="+urlparams,function(t){$.each(t,function(e){me.jqGrid("addRowData",t[e].id,t[e])}),callback&&callback(t,me)}),me.setGridParam({dataurl:url,dataparams:urlparams,tableKind:"localtable"});me.jqGrid("setFrozenColumns")},searchTable:function(t,e,r){var a=$("#"+t),i=a.jqGrid("getGridParam","tableKind");if("jsontable"==i)a.jqGrid("setGridParam",{postData:e}),$.hz.jqGrid.refreshTable(t);else if("localtable"==i){var o=a.jqGrid("getGridParam","dataurl"),d=a.jqGrid("getGridParam","dataparams");-1!=o.indexOf("?")&&(o=o.substring(0,o.indexOf("?"))),$.post(o+"?urlparams="+d,e,function(t){var e=$.parseJSON(t);a.jqGrid("clearGridData"),$.each(e,function(t){a.jqGrid("addRowData",e[t].id,e[t])}),r&&r(t,a)})}},refreshTable:function(t){var e=$("#"+t),r=e.jqGrid("getGridParam","tableKind");if("jsontable"==r)e.trigger("reloadGrid",[{page:1}]);else if("localtable"==r){var a=e.jqGrid("getGridParam","dataurl"),i=e.jqGrid("getGridParam","dataparams");$.getJSON(a+(-1!=a.indexOf("?")?"&":"?")+"urlparams="+i,function(t){e.jqGrid("clearGridData"),$.each(t,function(r){e.jqGrid("addRowData",t[r].id,t[r])})})}},batchDel:function(t,e){var r=$("#"+t).jqGrid("getGridParam","selarrrow");return r.length<1?void alert(""):void confirm("",function(){var a="";$.each($(r),function(){a+="sels="+this+"&"}),$.ajax({type:"POST",url:e,processData:!0,data:a,success:function(){$.hz.jqGrid.refreshTable(t)}})})},singleSelectValue:function(t){var e="",r=$("#"+t).jqGrid("getGridParam","selarrrow");return r.length>1?alert(""):0==r.length?alert(""):e=r[0],e},multiSelectValue:function(t){var e=[],r=$("#"+t).jqGrid("getGridParam","selarrrow");return r.length<1?alert(""):$.each($(r),function(){e.push(this)}),e},appendToolBarBtn:function(t,e){$("#t_"+t).append(e.join(""))},resizeGrid:function(t,e){if(0!=$(t).size()){var r=t.closest(".ui-layout-center"),a=r.children("form");a.size()>0&&a.addClass("abs5 ovauto");var i=t.parents().map(function(){return"absolute"==$(this).css("position")?$(this):void 0})[0];e=e||{};var o={width:parseInt(t.attr("bodyWidth"))||0,height:parseInt(t.attr("bodyHeight"))||0,h1:r.find(".box_header").outerHeight(!0)||0,h2:r.find(".searchBox").outerHeight(!0)||0,h3:r.find(".send_optArea").outerHeight(!0)||0,h4:t.closest(".ui-jqgrid").find(".t_toolbar").outerHeight(!0)||0,h5:t.closest(".ui-jqgrid").find(".ui-jqgrid-hdiv").outerHeight(!0)||0,h6:t.closest(".ui-jqgrid").find(".ui-jqgrid-pager").outerHeight(!0)||0,wp:$(i).size()>0?$(i).outerWidth()-$(i).width():0,hp:$(i).size()>0?$(i).outerHeight()-$(i).height():0,w:2,h:2};for(var d in o)void 0===e[d]&&(e[d]=o[d]);if(r.size()>0)if(r.find(".ui-layout-pane").find(".jqgrid").size()>0)if(""!=e.width&&e.width>0?t.setGridWidth(e.width,!0):t.setGridWidth(t.closest(".ui-layout-pane").width()-"2",!0),""!=e.height&&e.height>0)t.setGridHeight(e.height,!0);else{var l=e.h2+e.h3+e.h4+e.h5+e.h6+e.h+2;t.setGridHeight(t.closest(".ui-layout-pane").height()-l,!0)}else if(""!=e.width&&e.width>0?t.setGridWidth(e.width,!0):t.setGridWidth($(i).outerWidth()-e.wp-e.w,!0),""!=e.height&&e.height>0)t.setGridHeight(e.height,!0);else{var l=e.h2+e.h3+e.h4+e.h5+e.h6+e.hp+e.h;t.setGridHeight($(i).outerHeight()-l,!0)}else t.setGridWidth(e.width,!0),t.setGridHeight(e.height,!0)}}}}(jQuery),$.i18n.properties({name:["jqGrid"],path:com.ue.global.path+"/sys/i18n/ajaxGetI18nValues.do?bundleName=",mode:"map",callback:function(){}});
;///platform/component/autocomplete/jquery.autocomplete.js
!function(e){e.fn.extend({autocomplete:function(t,n){var a="string"==typeof t;return n=e.extend({},e.Autocompleter.defaults,{url:a?t:null,data:a?null:t,delay:a?e.Autocompleter.defaults.delay:10,max:n&&!n.scroll?10:150},n),n.highlight=n.highlight||function(e){return e},n.formatMatch=n.formatMatch||n.formatItem,this.each(function(){new e.Autocompleter(this,n)})},result:function(e){return this.bind("result",e)},search:function(e){return this.trigger("search",[e])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(e){return this.trigger("setOptions",[e])},unautocomplete:function(){return this.trigger("unautocomplete")}}),e.Autocompleter=function(t,n){function a(){return}function r(){var a=E.selected();if(!a)return!1;var r=a.result;if(w=r,n.multiple){var i=b.val(),l=o(b.val());if(l.length>1){var s,u=n.multipleSeparator.length,f=e(t).selection().start,h=0;e.each(l,function(e,t){return h+=t.length,h>=f?(s=e,!1):void(h+=u)}),l[s]=r,r=l.join(n.multipleSeparator)}r+=n.multipleSeparator;var d=r.lastIndexOf(n.multipleSeparator+n.multipleSeparator);i.length-d<=3&&(r=r.substring(0,r.length-1))}return b.val(r),c(),b.trigger("result",[a.data,a.value]),!0}function i(e,t){if(g==C.DEL)return void E.hide();var a=b.val();(t||a!=w)&&(w=a,a=l(a),a&&a.length>=n.minChars?(b.addClass(n.loadingClass),n.matchCase||(a=a.toLowerCase()),h(a,f,c)):(m(),E.hide()))}function o(t){return t?n.multiple?e.map(t.split(n.multipleSeparator),function(n){return e.trim(t).length?e.trim(n):null}):[e.trim(t)]:[""]}function l(a){if(!n.multiple)return a;var r=o(a);if(1==r.length)return r[0];var i=e(t).selection().start;return r=o(i==a.length?a:a.replace(a.substring(i),"")),r[r.length-1]}function s(a,r){n.autoFill&&l(b.val()).toLowerCase()==a.toLowerCase()&&g!=C.BACKSPACE&&(b.val(b.val()+r.substring(l(w).length)),e(t).selection(w.length,w.length+r.length))}function u(){clearTimeout(p),p=setTimeout(c,200)}function c(){E.visible();E.hide(),clearTimeout(p),m(),n.mustMatch&&b.search(function(e,t){if(!e)if(n.multiple){if(""==t)return;var a=b.val(),r=a.indexOf(t),i=r+t.length+1,a=a.substring(0,r)+a.substring(i,a.length),l=o(a).slice(0,-1);b.val(l.join(n.multipleSeparator)+(l.length?n.multipleSeparator:""))}else b.val(""),b.trigger("result",null)})}function f(e,t){t&&t.length&&A?(m(),E.display(t,e),s(e,t[0].value),E.show()):c()}function h(a,r,i){n.matchCase||(a=a.toLowerCase());var o=T.load(a);if(o&&o.length)r(a,o);else if("string"==typeof n.url&&n.url.length>0){var s={timestamp:+new Date};e.each(n.extraParams,function(e,t){s[e]="function"==typeof t?t():t}),e.ajax({mode:"abort",port:"autocomplete"+t.name,dataType:n.dataType,url:n.url,data:e.extend({q:l(a),limit:n.max},s),success:function(e){var t=n.parse&&n.parse(e)||d(e);T.add(a,t),r(a,t)}})}else E.emptyList(),i(a)}function d(t){for(var a=[],r=t.split("\n"),i=0;i<r.length;i++){var o=e.trim(r[i]);o&&(o=o.split("|"),a[a.length]={data:o,value:o[0],result:n.formatResult&&n.formatResult(o,o[0])||o[0]})}return a}function m(){b.removeClass(n.loadingClass)}var p,g,v,C={HOME:36,LEFT:37,UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,END:35,BACKSPACE:8},b=e(t).attr("autocomplete","off").addClass(n.inputClass),w="",T=e.Autocompleter.Cache(n),A=0,S={mouseDownOnSelect:!1},E=e.Autocompleter.Select(n,t,r,S);e.browser.opera&&e(t.form).bind("submit.autocomplete",function(){return v?(v=!1,!1):void 0}),b.bind((e.browser.opera?"keypress":"keydown")+".autocomplete",function(t){switch(A=1,g=t.keyCode,t.keyCode){case C.UP:t.preventDefault(),E.visible()?E.prev():i(0,!0);break;case C.DOWN:t.preventDefault(),E.visible()?E.next():i(0,!0);break;case C.PAGEUP:t.preventDefault(),E.visible()?E.pageUp():i(0,!0);break;case C.PAGEDOWN:t.preventDefault(),E.visible()?E.pageDown():i(0,!0);break;case n.multiple&&","==e.trim(n.multipleSeparator)&&C.COMMA:case C.TAB:case C.RETURN:if(r())return t.preventDefault(),v=!0,!1;break;case C.ESC:E.hide();break;default:clearTimeout(p),p=setTimeout(i,n.delay)}}).focus(function(){a(),A++}).blur(function(){A=0,S.mouseDownOnSelect||u()}).click(function(){A++>1&&!E.visible()&&i(0,!0),a()}).bind("search",function(){function t(e,t){var a;if(t&&t.length)for(var r=0;r<t.length;r++)if(t[r].result.toLowerCase()==e.toLowerCase()){a=t[r];break}"function"==typeof n?n(a,e):b.trigger("result",a&&[a.data,a.value])}var n=arguments.length>1?arguments[1]:null;e.each(o(b.val()),function(e,n){h(n,t,t)})}).bind("flushCache",function(){T.flush()}).bind("setOptions",function(){e.extend(n,arguments[1]),"data"in arguments[1]&&T.populate()}).bind("unautocomplete",function(){E.unbind(),b.unbind(),e(t.form).unbind(".autocomplete")})},e.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!0,cacheLength:10,max:100,mustMatch:!0,extraParams:{},selectFirst:!0,formatItem:function(e){return e[0]},formatMatch:null,autoFill:!1,width:0,multiple:!0,multipleSeparator:";",highlight:function(e,t){return e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180},e.Autocompleter.Cache=function(t){function n(e,n){t.matchCase||(e=e.toLowerCase());var a=e.indexOf(n);return"word"==t.matchContains&&(a=e.toLowerCase().search("\\b"+n.toLowerCase())),-1==a?!1:0==a||t.matchContains}function a(e,n){l>t.cacheLength&&i(),o[e]||l++,o[e]=n}function r(){if(!t.data)return!1;var n={},r=0;t.url||(t.cacheLength=1),n[""]=[];for(var i=0,o=t.data.length;o>i;i++){var l=t.data[i];l="string"==typeof l?[l]:l;var s=t.formatMatch(l,i+1,t.data.length);if(s!==!1){var u=s.charAt(0).toLowerCase();n[u]||(n[u]=[]);var c={value:s,data:l,result:t.formatResult&&t.formatResult(l)||s};n[u].push(c),r++<t.max&&n[""].push(c)}}e.each(n,function(e,n){t.cacheLength++,a(e,n)})}function i(){o={},l=0}var o={},l=0;return setTimeout(r,25),{flush:i,add:a,populate:r,load:function(a){if(!t.cacheLength||!l)return null;if(!t.url&&t.matchContains){var r=[];for(var i in o)if(i.length>0){var s=o[i];e.each(s,function(e,t){n(t.value,a)&&r.push(t)})}return r}if(o[a])return o[a];if(t.matchSubset)for(var u=a.length-1;u>=t.minChars;u--){var s=o[a.substr(0,u)];if(s){var r=[];return e.each(s,function(e,t){n(t.value,a)&&(r[r.length]=t)}),r}}return null}}},e.Autocompleter.Select=function(t,n,a,r){function i(){C&&(d=e("<div/>").hide().addClass(t.resultsClass).css("position","absolute").appendTo(document.body),m=e("<ul/>").appendTo(d).mouseover(function(t){o(t).nodeName&&"LI"==o(t).nodeName.toUpperCase()&&(g=e("li",m).removeClass(p.ACTIVE).index(o(t)),e(o(t)).addClass(p.ACTIVE)),e(n).data("ac_results_isMouseover","true")}).click(function(t){return n.focus(),e(o(t)).addClass(p.ACTIVE),a(),!1}).mousedown(function(){r.mouseDownOnSelect=!0,e(n).data("mouseDownOnSelect",!0)}).mouseup(function(){r.mouseDownOnSelect=!1,e(n).data("mouseDownOnSelect",!1)}).mouseout(function(){e(n).data("ac_results_isMouseover","false")}),t.width>0&&d.css("width",t.width),C=!1)}function o(e){for(var t=e.target;t&&"LI"!=t.tagName;)t=t.parentNode;return t?t:[]}function l(e){f.slice(g,g+1).removeClass(p.ACTIVE),s(e);var n=f.slice(g,g+1).addClass(p.ACTIVE);if(t.scroll){var a=0;f.slice(0,g).each(function(){a+=this.offsetHeight}),a+n[0].offsetHeight-m.scrollTop()>m[0].clientHeight?m.scrollTop(a+n[0].offsetHeight-m.innerHeight()):a<m.scrollTop()&&m.scrollTop(a)}}function s(e){g+=e,0>g?g=f.size()-1:g>=f.size()&&(g=0)}function u(e){return t.max&&t.max<e?t.max:e}function c(){m.empty();for(var n=u(h.length),a=0;n>a;a++)if(h[a]){var r=t.formatItem(h[a].data,a+1,n,h[a].value,v);if(r!==!1){var i=e("<li/>").html(t.highlight(r,v)).addClass(a%2==0?"ac_even":"ac_odd").appendTo(m)[0];e.data(i,"ac_data",h[a])}}f=m.find("li"),t.selectFirst&&(f.slice(0,1).addClass(p.ACTIVE),g=0),e.fn.bgiframe&&m.bgiframe()}var f,h,d,m,p={ACTIVE:"ac_over"},g=-1,v="",C=!0;return{display:function(e,t){i(),h=e,v=t,c()},next:function(){l(1)},prev:function(){l(-1)},pageUp:function(){l(0!=g&&0>g-8?-g:-8)},pageDown:function(){l(g!=f.size()-1&&g+8>f.size()?f.size()-1-g:8)},hide:function(){d&&d.hide(),f&&f.removeClass(p.ACTIVE),g=-1},visible:function(){return d&&d.is(":visible")},current:function(){return this.visible()&&(f.filter("."+p.ACTIVE)[0]||t.selectFirst&&f[0])},show:function(){var a=e(n).offset();if(d.css({width:"string"==typeof t.width||t.width>0?t.width:e(n).width(),top:a.top+n.offsetHeight,left:a.left}).show(),t.scroll&&(m.scrollTop(0),m.css({maxHeight:t.scrollHeight,overflow:"auto"}),e.browser.msie&&"undefined"==typeof document.body.style.maxHeight)){var r=0;f.each(function(){r+=this.offsetHeight});var i=r>t.scrollHeight;m.css("height",i?t.scrollHeight:r),i||f.width(m.width()-parseInt(f.css("padding-left"))-parseInt(f.css("padding-right")))}},selected:function(){var t=f&&f.filter("."+p.ACTIVE).removeClass(p.ACTIVE);return t&&t.length&&e.data(t[0],"ac_data")},emptyList:function(){m&&m.empty()},unbind:function(){d&&d.remove()}}},e.fn.selection=function(e,t){if(void 0!==e)return this.each(function(){if(this.createTextRange){var n=this.createTextRange();void 0===t||e==t?(n.move("character",e),n.select()):(n.collapse(!0),n.moveStart("character",e),n.moveEnd("character",t),n.select())}else this.setSelectionRange?this.setSelectionRange(e,t):this.selectionStart&&(this.selectionStart=e,this.selectionEnd=t)});var n=this[0];if(n.createTextRange){var a=document.selection.createRange(),r=n.value,i="<->",o=a.text.length;a.text=i;var l=n.value.indexOf(i);return n.value=r,this.selection(l,l+o),{start:l,end:l+o}}return void 0!==n.selectionStart?{start:n.selectionStart,end:n.selectionEnd}:void 0}}(jQuery);
;///platform/component/autocomplete/jquery.autocomplete.extend.js
!function(t){function a(t,a,e){for(var n="",l=t.split(e),u=0;u<l.length;u++)if(""!=l[u])for(var i=0;i<a.length;i++)a[i].formatResult==l[u].trim()&&-1==n.indexOf(a[i].id)&&(n+=a[i].id+",",flag=!0);return n.length>0&&(n=n.substring(0,n.length-1)),n}function e(t,a,e){for(var n="",l=t.split(e),u=0;u<l.length;u++)if(""!=l[u])for(var i=0;i<a.length;i++)a[i].formatResult==l[u].trim()&&-1==n.indexOf(a[i].formatResult)&&(n+=a[i].formatResult+e);return n.length>0&&(n=n.substring(0,n.length-1)),n}function n(a){var e=a.inputValue;if(!a.hiddenValue||""==a.hiddenValue||e&&""!=e)return e;var n=a.hiddenValue,l=a.data;if(a.multiple)t.each(a.data,function(){n.indexOf(this.id)>-1&&(e+=this.formatResult+a.multipleSeparator)});else for(var u=0;u<l.length;u++){var i=l[u];if(n.indexOf(i.id)>-1)return i.formatResult}return e}t.hz.autocomplate={init:function(a,e){var l={data:[],url:"",urlParams:"",inputType:"text",inputId:"input"+a,inputName:"",inputValue:"",hiddenId:"hidden"+a,hiddenName:"",hiddenValue:"",inputClass:"",inputStyle:"",rows:"3",cols:"50",placeholder:"",minChars:1,max:10,width:150,scroll:!1,mustMatch:!0,multiple:!1,multipleSeparator:";",scrollHeight:300,matchContains:!0,formatItem:function(t){return t.formatItem},formatMatch:function(t){return t.formatMatch},formatResult:function(t){return t.formatResult}},u=t.extend(l,e);""!=u.url&&t.ajax({type:"POST",url:u.url,data:u.urlParams,dataType:"json",async:!1,success:function(t){u.data=t}});var i=t("#"+a),r=[],d="'$.hz.autocomplate.onChange(this.id,\""+u.hiddenId+'","'+u.multipleSeparator+"\")'",o=n(u);"textarea"==u.inputType?(r.push("<textarea id='"+u.inputId+"' name='"+u.inputName+"' rows='"+u.rows+"' cols='"+u.cols+"' onblur="+d),r.push(' class="'+u.inputClass+'" style="'+u.inputStyle+'">'+o+"</textarea>")):(r.push("<input type='text' id='"+u.inputId+"' name='"+u.inputName+"' onblur="+d),r.push(" value='"+o+"' class=\""+u.inputClass+'" style="'+u.inputStyle+'"/>')),r.push("<input type='hidden' id='"+u.hiddenId+"' name='"+u.hiddenName+"' value='"+u.value+"'/>"),i.append(r.join("")),""!=u.placeholder&&t("#"+u.inputId).attr("placeholder",u.placeholder),t("#"+u.inputId).data("options",u),t("#"+u.inputId).autocomplete(u.data,u).result(function(){})},onChange:function(n,l,u){var i=t("#"+n).data("options"),r=t("#"+n).val(),d=a(r,i.data,u);t("#"+l).val(d);var o=t("#"+n).data("mouseDownOnSelect");if(i.multiple&&r.lastIndexOf(u)!=r.length-1&&t("#"+n).val(r+u),!o&&i.blurCallback){var s=e(r,i.data,u);i.blurCallback(s,d)}}}}(jQuery);
;